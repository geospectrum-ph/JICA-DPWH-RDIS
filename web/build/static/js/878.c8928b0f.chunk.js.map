{"version":3,"file":"static/js/878.c8928b0f.chunk.js","mappings":"0QAIA,MAAMA,EAAEC,WAAAA,CAAYD,EAAEE,EAAEC,GAAGC,KAAKC,OAAOL,EAAEI,KAAKE,OAAOJ,EAAEE,KAAKG,YAAYJ,CAAC,CAACK,iBAAAA,CAAkBR,GAAG,MAAME,EAAEE,KAAKK,cAAcT,EAAE,IAAIG,EAAEC,KAAKE,OAAOJ,EAAE,OAAOC,EAAE,CAACH,EAAE,GAAGE,EAAEF,EAAE,IAAIG,EAAEH,EAAE,IAAIG,GAAGH,CAAC,CAACS,aAAAA,CAAcT,GAAG,OAAOU,KAAKC,IAAIX,EAAEI,KAAKG,YAAY,CAACK,SAAAA,CAAUZ,EAAEE,GAAG,IAAIC,EAAE,EAAEU,EAAE,EAAE,MAAMC,EAAEV,KAAKE,OAAOF,KAAKK,cAAcT,EAAE,IAAI,GAAGc,EAAE,CAAC,MAAMC,GAAG,GAAGD,GAAG,EAAEE,EAAEd,GAAGE,KAAKC,QAAQ,GAAGS,EAAE,IAAIX,GAAGH,EAAE,GAAGe,GAAGC,EAAEH,GAAGb,EAAE,GAAGe,GAAGC,CAAC,CAAC,MAAM,CAACb,EAAEU,EAAE,CAACI,QAAAA,CAASjB,GAAG,OAAOI,KAAKC,QAAQ,GAAGD,KAAKE,OAAOF,KAAKK,cAAcT,GAAG,E,8ECAH,MAAMkB,UAAUf,EAAAA,EAAEF,WAAAA,CAAYC,EAAEF,EAAEmB,EAAEN,GAAGO,MAAMlB,EAAEF,EAAEmB,EAAEjB,EAAEmB,SAASC,KAAKC,OAAO,GAAGnB,KAAKoB,UAAUX,EAAET,KAAKqB,qBAAqB,IAAIC,IAAItB,KAAKuB,4BAA4B,IAAID,IAAItB,KAAKwB,cAAc,IAAIC,EAAAA,EAAE3B,EAAEmB,SAASnB,EAAE4B,WAAW,CAACC,OAAAA,GAAUX,MAAMW,UAAU3B,KAAKuB,4BAA4BK,SAAS9B,GAAGA,EAAE+B,UAAU7B,KAAKuB,4BAA4BO,QAAQ9B,KAAKqB,qBAAqBS,OAAO,CAAC,mBAAMC,CAAchC,EAAE0B,GAAG,MAAMX,EAAE,IAAIH,EAAAA,EAAEZ,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG,GAAG,IAAIiC,EAAEhC,KAAKoB,UAAUa,IAAInB,EAAEoB,IAAI,GAAG,MAAMF,EAAE,OAAOA,EAAEG,SAASH,EAAE,MAAMtB,QAAQV,KAAKoC,mBAAmBtB,GAAG,IAAGlB,EAAAA,EAAAA,IAAE6B,IAAIzB,KAAKqC,OAAO,OAAO,KAAK,GAAGL,EAAEhC,KAAKoB,UAAUa,IAAInB,EAAEoB,IAAI,MAAMF,EAAE,OAAOA,EAAEG,SAASH,EAAE,MAAMM,EAAEtC,KAAKqC,OAAOpB,SAASsB,eAAc9B,EAAAA,EAAAA,MAAIK,GAAG0B,EAAExC,KAAKwB,cAAciB,kBAAkB1C,EAAE,IAAI,OAAOiC,EAAE,IAAIU,EAAAA,EAAE5B,EAAE0B,EAAEF,EAAE,GAAGA,EAAE,GAAG,IAAI,IAAItC,KAAK2C,iBAAiB3C,KAAKoB,WAAWY,EAAEY,QAAQlC,GAAGA,IAAIsB,EAAEG,SAASnC,KAAKoB,UAAUyB,IAAI/B,EAAEoB,GAAGF,EAAEA,EAAEc,WAAWhD,EAAAA,KAAIkC,EAAEe,mBAAkB,EAAGf,EAAEgB,WAAWC,mBAAkBlC,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAGiB,CAAC,CAACI,kBAAAA,CAAmBtC,GAAG,MAAMF,EAAEE,EAAEoC,GAAG,GAAGlC,KAAKqB,qBAAqB6B,IAAItD,GAAG,OAAOI,KAAKqB,qBAAqBY,IAAIrC,GAAG,MAAMmB,EAAE,IAAIoC,gBAAgB1C,EAAE,CAAC2C,OAAOrC,EAAEqC,QAAQrD,EAAEC,KAAKqD,yBAAyBvD,EAAEW,GAAG6C,MAAMxD,IAAIE,KAAKqB,qBAAqBkC,OAAO3D,GAAGI,KAAKuB,4BAA4BgC,OAAO3D,GAAGE,KAAK0D,OAAO,KAAKxD,KAAKqB,qBAAqBkC,OAAO3D,GAAGI,KAAKuB,4BAA4BgC,OAAO3D,GAAG,QAAQ,OAAOI,KAAKqB,qBAAqBoC,IAAI7D,EAAEG,GAAGC,KAAKuB,4BAA4BkC,IAAI7D,EAAEmB,GAAGhB,CAAC,CAACsD,wBAAAA,CAAyBvD,EAAEF,GAAG,OAAOI,KAAK0D,cAAc5D,EAAEF,GAAG0D,MAAMvC,GAAGf,KAAK2D,cAAc,CAACC,IAAI9D,EAAE+D,KAAK9C,GAAGnB,IAAI,E,yDCA3lD,MAAMkE,EAAE,CAACC,cAAcrB,EAAAA,EAAEsB,QAAQrD,EAAAA,EAAEsD,QAAQlD,EAAAA,EAAEmD,UAAUnE,EAAAA,EAAEoE,UAAUrE,EAAAA,G,qCCAnI,MAAMiB,EAAE,KAAK,MAAMJ,EAAEd,WAAAA,CAAYC,EAAEF,GAAGI,KAAKoE,aAAatE,EAAEE,KAAKqE,YAAYzE,EAAEI,KAAKsE,YAAY,IAAIhD,IAAItB,KAAKuE,oBAAoB,IAAIxE,EAAAA,CAAC,CAACyE,OAAAA,GAAUxE,KAAKsE,cAActE,KAAKsE,YAAY1C,SAAS9B,GAAGA,EAAE0E,YAAYxE,KAAKsE,YAAY,MAAMtE,KAAKuE,qBAAoBzE,EAAAA,EAAAA,IAAEE,KAAKuE,qBAAqBvE,KAAKoE,aAAaI,UAAUxE,KAAKqE,YAAYG,SAAS,CAAC,8BAAIC,GAA6B,OAAOzE,KAAKuE,mBAAmB,CAACG,WAAAA,CAAY5E,EAAEF,EAAEG,GAAG,MAAM0B,EAAE1B,EAAE4E,OAAO7E,EAAE8E,WAAW,cAAc,IAAI,IAAInE,EAAE,EAAEA,EAAEgB,EAAEN,OAAOV,IAAI,CAAC,MAAMV,EAAE0B,EAAEhB,GAAG,GAAGV,EAAE8E,OAAOnC,EAAAA,GAAEoC,OAAO,SAAS,MAAMnE,EAAEZ,EAAEgF,kBAAkB,cAAc,GAAGpE,GAAGA,EAAEqE,aAAalE,EAAAA,GAAEmE,KAAK,SAAS,MAAMC,EAAEpF,EAAEqF,kBAAa,IAASpF,EAAEqF,SAASrF,EAAEqF,QAAQF,EAAEnE,QAAG,IAAShB,EAAEsF,SAAStF,EAAEsF,SAASH,EAAEnE,IAAIjB,EAAEwF,cAAcvF,EAAEwF,IAAIzF,EAAE0F,WAAWzF,EAAEC,KAAKyF,eAAe3F,EAAEF,EAAE,aAAa,CAAC,CAAC8F,cAAAA,CAAe5F,EAAEF,EAAEG,GAAG,GAAG,IAAIA,EAAE4F,oBAAoBxE,OAAO,OAAO,MAAMyE,QAAQnE,EAAE0D,aAAa1E,EAAEoF,cAAclF,GAAGb,EAAEF,EAAEgE,IAAIkC,MAAMnF,EAAEc,EAAEsE,oBAAmB,GAAItE,EAAEuE,qBAAoB,GAAIvE,EAAEwE,uBAAsB,GAAInG,EAAE8E,WAAW,aAAa7E,EAAE4F,oBAAoB/D,SAASH,IAAI,MAAMd,EAAEZ,EAAEmG,aAAazE,GAAG,GAAGd,EAAEkE,OAAOnC,EAAAA,GAAEyD,WAAW,OAAO,MAAMjB,EAAEvE,EAAEoE,kBAAkB,cAAcG,GAAGA,EAAEF,aAAalE,EAAAA,GAAEmE,WAAM,IAAStE,EAAEyE,SAASzE,EAAEyE,QAAQ3E,EAAEM,QAAG,IAASJ,EAAE0E,SAAS1E,EAAE0E,SAAS5E,EAAEM,IAAIjB,EAAEwF,cAAc3E,EAAE4E,IAAIzF,EAAE0F,WAAW7E,EAAEX,KAAKyF,eAAe3F,EAAEF,EAAE,iBAAiB,GAAG,CAACwG,QAAAA,CAAStG,EAAEF,EAAEG,EAAE2C,GAAG,MAAMkD,QAAQ9E,GAAGhB,EAAEiB,EAAEhB,EAAE4E,OAAO7D,EAAEiF,oBAAmB,GAAIjF,EAAEkF,qBAAoB,GAAIlF,EAAEuF,sBAAqB,GAAIvF,EAAEwF,iBAAiB7E,EAAAA,GAAE8E,QAAQzG,EAAE8E,WAAW,SAAS,IAAI,IAAInD,EAAEV,EAAEI,OAAO,EAAEM,GAAG,EAAEA,IAAI,CAAC,MAAM1B,EAAEgB,EAAEU,GAAG,MAAMiB,GAAGA,IAAI3C,EAAE8E,MAAM7E,KAAKwG,kBAAkBzG,EAAED,EAAEF,GAAE,EAAG,CAACkB,EAAEuF,sBAAqB,GAAIvF,EAAEiF,oBAAmB,GAAIjF,EAAE2F,yBAAyBhG,EAAAA,GAAEiG,IAAIjG,EAAAA,GAAEkG,oBAAoBlG,EAAAA,GAAEiG,IAAIjG,EAAAA,GAAEkG,qBAAqB7G,EAAE8E,WAAW,cAAc,IAAI,IAAInD,EAAE,EAAEA,EAAEV,EAAEI,OAAOM,IAAI,CAAC,MAAM1B,EAAEgB,EAAEU,GAAG,MAAMiB,GAAGA,IAAI3C,EAAE8E,MAAM7E,KAAKwG,kBAAkBzG,EAAED,EAAEF,GAAE,EAAG,CAACkB,EAAEkF,qBAAoB,GAAIlF,EAAE8F,SAAS,CAACJ,iBAAAA,CAAkB1G,EAAEF,EAAEG,EAAE0B,GAAG,KAAKA,GAAG3B,GAAGC,EAAE8G,UAAU3D,IAAIpD,EAAEyF,MAAM,OAAO,MAAM9E,EAAEX,EAAEiF,kBAAkB,cAAc,GAAGtE,GAAGA,EAAEuE,aAAalE,EAAAA,GAAEmE,KAAK,OAAO,MAAML,WAAWjE,GAAGf,EAAE,IAAIsF,EAAE,OAAOpF,EAAE+E,MAAM,KAAKnC,EAAAA,GAAEyD,WAAW,GAAG,eAAexF,EAAE,OAAOuE,EAAE,gBAAgB,MAAM,KAAKxC,EAAAA,GAAEoE,KAAK,GAAG,WAAWnG,GAAG,gBAAgBf,EAAEgF,WAAW,OAAOM,EAAE,UAAU,MAAM,KAAKxC,EAAAA,GAAEqE,KAAK,GAAG,gBAAgBpG,EAAE,OAAOuE,EAAE,UAAU,MAAM,KAAKxC,EAAAA,GAAEsE,OAAO,GAAG,gBAAgBrG,EAAE,OAAOuE,EAAE,YAAY,MAAM,KAAKxC,EAAAA,GAAEoC,OAAO,GAAG,gBAAgBnE,EAAE,OAAOuE,EAAE,YAAY,MAAM+B,EAAErH,EAAEuF,aAAa,QAAG,IAASrF,EAAEsF,SAAStF,EAAEsF,QAAQ6B,EAAElG,QAAG,IAASjB,EAAEuF,SAASvF,EAAEuF,SAAS4B,EAAElG,EAAE,OAAO,MAAM6E,QAAQlF,GAAGd,EAAEc,EAAEuF,uBAAsB,GAAIvF,EAAEwG,oBAAoB,GAAGtH,EAAE0F,cAAcxF,EAAEyF,IAAI3F,EAAE4F,WAAW1F,EAAEE,KAAKyF,eAAe7F,EAAEG,EAAEmF,EAAE,CAACO,cAAAA,CAAe3F,EAAEC,EAAE2C,GAAG,IAAI1C,KAAKsE,YAAYpB,IAAIR,GAAG,CAAC,MAAM5C,EAAEF,EAAE8C,GAAG1C,KAAKsE,YAAYb,IAAIf,EAAE,IAAI5C,EAAE,CAACE,KAAKsE,YAAYrC,IAAIS,GAAGyE,SAASrH,EAAE,CAACC,GAAG,E,0DCA99D,IAAIqH,EAAE,eAAcxG,EAAAA,EAAAA,IAAEoB,EAAAA,EAAAA,GAAEqF,EAAAA,KAAKxH,WAAAA,GAAcmB,SAASsG,WAAWtH,KAAKuH,uBAAuB,KAAKvH,KAAK6E,KAAK,iBAAiB7E,KAAKwH,YAAWtE,EAAAA,EAAAA,GAAI,mCAAmC,EAAE,CAAC,CAACuE,UAAAA,GAAa,GAAG,MAAMzH,KAAK0H,MAAMhG,WAAW,YAAY1B,KAAK2H,oBAAoBC,QAAQC,OAAO,IAAIjI,EAAAA,EAAE,4CAA4C,2DAA2D,MAAMkI,eAAehI,EAAEiI,iBAAiBtH,EAAEuH,MAAMrH,EAAEsH,YAAYvF,GAAG1C,KAAKkI,KAAKxH,EAAE,UAAUgC,KAAIJ,EAAAA,EAAAA,IAAE7B,IAAI0H,EAAAA,GAAEC,YAAYpI,KAAK0H,MAAMzG,SAASjB,KAAK0H,MAAMzG,SAASoH,oBAAoB,KAAKnD,EAAElF,KAAKsI,yBAAyB5H,EAAEV,KAAK0H,MAAMhG,YAAY,GAAG,MAAMwD,EAAE,OAAOlF,KAAK2H,oBAAoBC,QAAQC,OAAO3C,IAAI,MAAMlD,GAAElB,EAAAA,EAAAA,KAAG,IAAId,KAAKkI,MAAMJ,gBAAgBS,qBAAqBjF,MAAM,KAAK,MAAM1D,EAAEE,EAAE0I,aAAa/H,EAAEb,EAAE6I,UAAU9H,EAAE,MAAMF,EAAE,EAAE,EAAEiC,EAAE5C,EAAEiI,kBAAkBW,cAAc,MAAMjI,EAAE,EAAE,EAAEV,EAAED,EAAEiI,kBAAkBW,cAAc,MAAMjI,EAAE,EAAE,EAAE,IAAIK,EAAEd,KAAK2I,aAAa,IAAInG,EAAE7B,EAAE+B,EAAE1C,KAAKwH,WAAWzH,GAAGe,EAAE,MAAML,GAAG,MAAMA,EAAET,KAAK0H,MAAMzG,SAASoH,oBAAoB5H,GAAGT,KAAK0H,MAAMzG,SAAS,MAAMF,EAAEf,KAAK4I,+BAA+B9H,EAAElB,GAAG,GAAGmB,EAAE,MAAMA,EAAEf,KAAKiB,SAASH,CAAC,IAAId,KAAKuH,uBAAuB,IAAIpE,gBAAgB,MAAMvC,EAAEZ,KAAKkI,KAAKW,mBAAmB7I,KAAKoB,UAAUR,EAAEkI,iBAAiBC,SAAS,OAAO/I,KAAK0H,MAAMnC,OAAOzF,IAAIA,EAAEkJ,SAAS,IAAIhJ,KAAKiJ,YAAWlI,EAAAA,EAAAA,KAAG,IAAIf,KAAKkI,KAAKgB,gBAAgBC,cAAcrJ,GAAGE,KAAKoB,UAAUgI,QAAQ9I,KAAK+I,KAAKvJ,EAAE,GAAG,UAAU2B,EAAAA,KAAI,MAAM4F,EAAE,IAAIiC,EAAAA,EAAEtJ,KAAK0H,MAAM6B,iBAAiBC,OAAOxJ,KAAKyJ,aAAa,IAAIxC,EAAEjH,KAAK0H,MAAML,EAAE1G,EAAE+I,kBAAkB1J,KAAKoB,WAAW,MAAMgG,EAAEpH,KAAKuH,uBAAuBnE,OAAOuG,EAAitF,SAAW7J,GAAG,OAAOF,GAAGE,EAAE8J,UAAUC,SAASjK,EAAE,CAA9vFkK,CAAElJ,GAAGmJ,EAAE/J,KAAKyJ,aAAaO,MAAM,CAAC5G,OAAOgE,EAAEyC,SAASF,IAAIM,EAAEjK,KAAKyJ,aAAarF,aAAa6F,EAAE3G,MAAMxD,MAAKC,EAAAA,EAAAA,IAAEqH,IAAIpH,KAAKyJ,eAAezJ,KAAKkK,QAAQ,IAAIC,EAAErK,EAAEE,KAAKyJ,aAAapF,aAAa,IAAI0F,EAAEzG,MAAM,IAAItD,KAAKuH,uBAAuB,OAAO,MAAM6C,EAAEA,KAAKpK,KAAKuH,wBAAwBvH,KAAKuH,uBAAuB1F,QAAQ7B,KAAKuH,uBAAuB,IAAIpE,gBAAgBnD,KAAKoB,UAAUU,QAAQ,MAAMhC,EAAEE,KAAK0H,MAAM6B,iBAAiBC,MAAM5J,EAAEI,KAAKkI,KAAKF,OAAO0B,mBAAmB,EAAEjJ,EAAE,IAAI6I,EAAAA,EAAExJ,GAAGa,EAAE,IAAIsG,EAAEjH,KAAK0H,MAAMjH,EAAEb,EAAEI,KAAKoB,WAAWsB,EAAE/B,EAAEqJ,MAAM,CAAC5G,OAAOpD,KAAKuH,uBAAuBnE,OAAOyG,SAASF,IAAI5J,EAAEY,EAAEyD,aAAa1B,EAAEY,MAAM,IAAItD,KAAKuH,uBAAuB,OAAOvH,KAAKqK,iBAAiBC,WAAW1C,QAAQ2C,IAAI,CAAC7H,EAAE3C,IAAIuD,MAAMkH,IAAQ,IAAN,CAAC1K,GAAE0K,EAAI,MAAM5K,EAAEI,KAAKyJ,aAAahJ,EAAET,KAAKkK,QAAQlK,KAAKkK,QAAQ,IAAIC,EAAErK,EAAEa,EAAE0D,aAAarE,KAAKyJ,aAAa9I,EAAEX,KAAKyK,KAAK,gBAAgB7K,EAAE+B,UAAUlB,GAAGA,EAAE+D,SAAS,IAAI,EAAExE,KAAKqK,iBAAiBK,KAAK,MAAMlB,MAAMxJ,KAAK0H,MAAM6B,iBAAiBC,MAAMmB,WAAW3K,KAAKkI,KAAKF,OAAO0B,qBAAqBU,GAAGpK,KAAKiJ,WAAW,CAACjJ,KAAK0H,MAAMkD,GAAG,gBAAgB,IAAI5K,KAAKyK,KAAK,kBAAkBzK,KAAK0H,MAAMkD,GAAG,qBAAqBR,GAAGpK,KAAK0H,MAAMkD,GAAG,qBAAqBR,GAAGpK,KAAK0H,MAAMkD,GAAG,uBAAuB,IAAI5K,KAAKyK,KAAK,kBAAkBzK,KAAK0H,MAAMkD,GAAG,iBAAiB,IAAI5K,KAAKyK,KAAK,kBAAkBzK,KAAK0H,MAAMkD,GAAG,iCAAiC,IAAI5K,KAAKyK,KAAK,oBAAoB,MAAMI,EAAEjD,QAAQ2C,IAAI,CAACvI,EAAE+H,EAAEE,IAAIjK,KAAK2H,oBAAoBkD,EAAE,CAAClJ,OAAAA,GAAU3B,KAAKkK,SAAQzJ,EAAAA,EAAAA,IAAET,KAAKkK,SAASlK,KAAKuH,wBAAuB5G,EAAAA,EAAAA,IAAEX,KAAKuH,wBAAwBvH,KAAKyJ,cAAa/G,EAAAA,EAAAA,IAAE1C,KAAKyJ,cAAczJ,KAAKoB,WAAUsB,EAAAA,EAAAA,IAAE1C,KAAKoB,UAAU,CAAC,eAAI0J,GAAc,OAAO5H,EAAAA,EAAAA,GAAI,mCAAmC,EAAElD,KAAKkI,KAAKgB,gBAAgB6B,aAAaC,cAAc,CAAC,qBAAIC,GAAoB,MAAMnL,EAAEE,KAAKiB,SAASC,KAAKtB,EAAEI,KAAK0H,MAAMwD,UAAUpL,EAAE,GAAGqL,MAAM1K,EAAET,KAAK0H,MAAM0D,UAAUtL,EAAEA,EAAEqB,OAAO,GAAGgK,MAAMxK,EAAEX,KAAKqL,yBAAyBzL,EAAEa,GAAG,OAAOT,KAAK0H,MAAM0D,SAASzK,EAAE2K,WAAW3K,EAAE2K,UAAUtL,KAAKwH,WAAW7G,CAAC,CAAC,kBAAI4K,GAAiB,MAAMzL,EAAEE,KAAKiB,SAASC,KAAK,MAAM,CAACgK,SAASpL,EAAE,GAAGqL,MAAMC,SAAStL,EAAEA,EAAEqB,OAAO,GAAGgK,MAAM,CAAC,kBAAIK,GAAiB,MAAMN,SAASpL,EAAEsL,SAASxL,GAAGI,KAAKuL,eAAe9K,EAAET,KAAKqL,yBAAyBvL,EAAEF,GAAG,OAAO,IAAIa,EAAEgL,UAAU,MAAMzL,KAAKiB,SAASyK,KAAK,KAAKjL,EAAEgL,SAAS,GAAGhL,EAAE6K,UAAUtL,KAAKwH,WAAW/G,CAAC,CAAC,eAAMkL,CAAU7L,EAAEF,GAAG,MAAMa,EAAET,KAAK2I,aAAavI,kBAAkBN,GAAG,OAAOE,KAAKyJ,aAAa1H,cAActB,EAAEb,EAAE,IAAGE,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,aAAQ,IAAQ9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,kBAAa,IAAQ9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,cAAc,OAAM9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,oBAAoB,OAAM9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,gBAAW,IAAQ9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,iBAAiB,OAAM9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,iBAAiB,OAAM9L,EAAAA,EAAAA,GAAE,EAACY,EAAAA,EAAAA,OAAK0G,EAAEwE,UAAU,6BAAwB,GAAQxE,GAAEtH,EAAAA,EAAAA,GAAE,EAACoF,EAAAA,EAAAA,GAAE,+CAA+CkC,GAAG,MAAMuC,EAAEvC,C,iJCAxtJ,MAAMzG,EAAEA,IAAI,IAAIc,EAAE,cAAcd,EAAEd,WAAAA,GAAcmB,SAASsG,WAAWtH,KAAK6L,mBAAkB,EAAG7L,KAAK8L,8BAA6B,CAAE,CAACC,UAAAA,GAAa/K,MAAM+K,cAAa5B,EAAAA,EAAAA,IAAEnK,KAAK0H,QAAQ1H,KAAK2H,oBAAoB3H,KAAKgM,2BAA2B,CAAC,8BAAMA,GAA2B,MAAMjL,EAAE,IAAIoC,gBAAgBT,EAAE3B,EAAEqC,OAAOpD,KAAKiJ,YAAWlJ,EAAAA,EAAAA,KAAG,IAAIgB,EAAEc,iBAAiBjC,EAAAA,EAAAA,KAAG,IAAII,KAAKkI,KAAK+D,iBAAiBC,sBAAsBxJ,IAAG5C,EAAAA,EAAAA,IAAE4C,GAAG,MAAMjC,GAAEK,EAAAA,EAAAA,IAAEd,KAAK0H,MAAM1H,KAAKkI,KAAKiE,gBAAgBnM,KAAK8L,8BAA8B,GAAGrL,EAAE,MAAMA,CAAC,GAAG,OAAOM,EAAAA,EAAAA,GAAE,EAAC2B,EAAAA,EAAAA,OAAKjB,EAAEmK,UAAU,YAAO,IAAQ7K,EAAAA,EAAAA,GAAE,EAAC2B,EAAAA,EAAAA,OAAKjB,EAAEmK,UAAU,yBAAoB,GAAQnK,GAAEV,EAAAA,EAAAA,GAAE,EAACN,EAAAA,EAAAA,GAAE,qCAAqCgB,GAAGA,CAAC,C,sKCApf,MAAM0I,EAAEA,IAAI,IAAI3H,EAAE,cAAc2H,EAAEtK,WAAAA,GAAcmB,SAASsG,WAAWtH,KAAKoM,sBAAqB,CAAE,CAAC,uBAAIC,GAAsB,OAAM,CAAE,CAAC,cAAI3K,GAAa,OAAO1B,KAAK0H,MAAMhG,UAAU,CAAC,YAAI4K,GAAW,OAAOtM,KAAKuM,aAAa,GAAGvM,KAAKqM,mBAAmB,CAAC,yBAAIG,GAAwB,KAAItH,EAAAA,EAAAA,IAAElF,KAAK0H,MAAMwD,SAASlL,KAAK0H,MAAM0D,YAAYpL,KAAKkI,KAAKuE,aAAa,OAAM,EAAG,MAAM3M,EAAEQ,KAAKoM,MAAM1M,KAAKkI,KAAKJ,eAAeU,aAAamE,aAAa3M,KAAKkI,KAAKuE,eAAe,OAAO3M,GAAGE,KAAKiL,kBAAkBQ,UAAU3L,GAAGE,KAAKiL,kBAAkBK,QAAQ,CAAC,kBAAIC,GAAiB,MAAMzL,EAAEE,KAAKiB,SAASC,KAAK,IAAItB,EAAEE,EAAE,GAAGqL,MAAM1K,EAAEX,EAAEA,EAAEqB,OAAO,GAAGgK,MAAM,GAAG,iBAAiBnL,KAAK0H,OAAO1H,KAAK0H,MAAMkF,aAAa,CAAC,MAAMC,gBAAgB/M,EAAEgN,gBAAgBhM,GAAGd,KAAK0H,MAAMkF,aAAahN,EAAEI,KAAKiB,SAAS8L,MAAMjN,GAAGqL,MAAM1K,EAAET,KAAKiB,SAAS8L,MAAMjM,GAAGqK,KAAK,CAAC,MAAM,CAACD,SAAStL,EAAEwL,SAAS3K,EAAE,CAACuM,SAAAA,GAAY,MAAMlN,EAAEE,KAAK0H,OAAO,wBAAwB1H,KAAK0H,MAAM1H,KAAK0H,MAAMuF,oBAAoB,KAAK,OAAOjN,KAAKkN,SAASlN,KAAK0H,OAAOyF,SAASnN,KAAKoN,QAAQC,WAAWrN,KAAKkI,MAAMoF,QAAO5M,EAAAA,EAAAA,IAAEZ,IAAIE,KAAKuN,6BAA4B,CAAE,CAAC,kBAAI/B,GAAiB,MAAMN,SAASpL,EAAEsL,SAASxL,GAAGI,KAAKuL,eAAe,OAAOvL,KAAKqL,yBAAyBvL,EAAEF,EAAE,CAAC,qBAAIqL,GAAoB,MAAMnL,EAAEE,KAAK0H,MAAMwD,UAAUlL,KAAKuL,eAAeL,SAAStL,EAAEI,KAAK0H,MAAM0D,UAAUpL,KAAKuL,eAAeH,SAAS3K,EAAET,KAAKqL,yBAAyBvL,EAAEF,GAAG,OAAOI,KAAK0H,MAAM0D,UAAU3K,EAAE6K,WAAW7K,CAAC,CAAC,mBAAI+M,GAAkB,OAAO,IAAI7M,EAAAA,EAAEX,KAAKkI,KAAKJ,eAAe2F,0BAA0BzN,MAAM,CAAC0N,UAAAA,CAAW5N,GAAG,OAAOE,KAAK0H,MAAMgG,WAAW5N,EAAE,GAAGA,EAAE,GAAGA,EAAE,GAAG,CAAC6N,4BAAAA,GAA+B,GAAG,MAAM3N,KAAK0B,WAAW,OAAO1B,KAAK2H,oBAAoBC,QAAQC,OAAO,IAAIjI,EAAAA,EAAE,kCAAkC,6CAA6C,MAAME,EAAEE,KAAKsI,yBAAyBtI,KAAKiB,SAASjB,KAAK0B,YAAY,GAAG5B,EAAE,OAAOE,KAAK2H,oBAAoBC,QAAQC,OAAO/H,IAAIE,KAAK2H,qBAAoBlH,EAAAA,EAAAA,KAAG,IAAIT,KAAKkI,MAAMJ,gBAAgBS,qBAAqBjF,MAAM,KAAK,MAAMxD,EAAEE,KAAKkI,KAAKJ,eAAeU,aAAa5I,EAAE,iBAAiBI,KAAK0H,MAAM1H,KAAK0H,MAAMkF,cAAcE,qBAAgB,EAAOrM,EAAET,KAAK4I,+BAA+B5I,KAAKiB,SAASnB,EAAEF,GAAG,GAAGa,EAAE,MAAMA,CAAC,IAAI,CAAC6H,wBAAAA,CAAyBxI,EAAEW,GAAG,MAAMK,GAAEC,EAAAA,EAAAA,IAAEjB,EAAEW,EAAET,KAAKkI,KAAKH,iBAAiB/H,KAAKkI,KAAKF,MAAMC,YAAY,iBAAiBjI,KAAK0H,MAAM1H,KAAK0H,MAAMkF,cAAcE,qBAAgB,GAAQ,IAAIhM,EAAE,OAAO,MAAM4B,EAAE,CAACgF,MAAM1H,KAAK0H,MAAMkG,MAAM9M,GAAG,OAAOA,EAAE+M,MAAM,IAAI,0CAA0C,IAAI,oDAAoD,IAAI,mDAAmD,OAAO,IAAIjO,EAAAA,EAAE,2CAA2C,iFAAiF8C,GAAG,QAAQ,OAAO,IAAI9C,EAAAA,EAAE,sCAAsC,gEAAgE8C,GAAG,CAACkG,8BAAAA,CAA+B9I,EAAEW,EAAEK,GAAG,OAAO,MAAMhB,GAAGW,EAAEqN,eAAehO,EAAEgB,GAAG,KAAK,IAAIlB,EAAAA,EAAE,uCAAuC,wFAAwF,CAACyL,wBAAAA,CAAyBvL,EAAEF,GAAG,MAAMa,EAAE,CAACgL,SAAS,EAAEH,SAAS,KAAKxK,EAAEd,KAAKkI,MAAMlI,KAAKkI,KAAKJ,gBAAgB9H,KAAKkI,KAAKJ,eAAeU,aAAa,IAAI1H,EAAE,OAAOL,EAAE,MAAMiC,EAAE5B,EAAEiN,OAAO,GAAGpN,EAAEb,IAAI,MAAMF,EAAEU,KAAK0N,IAAItL,EAAEyI,MAAMrL,GAAGQ,KAAK2N,IAAI,MAAM,GAAG3N,KAAK4N,IAAI,GAAGtO,EAAE,GAAG,KAAKU,KAAKoM,MAAM9M,GAAGU,KAAK+I,KAAKzJ,EAAE,EAAE,OAAO,MAAME,GAAGA,EAAE,IAAIW,EAAEgL,SAASnL,KAAK6N,IAAI,EAAExN,EAAEb,KAAK,MAAMF,GAAGA,EAAE,IAAIa,EAAE6K,SAAShL,KAAK6N,IAAI,EAAExN,EAAEf,KAAKa,CAAC,CAAC2N,UAAAA,GAAa,SAASpO,KAAKkI,MAAMlI,KAAKkI,KAAKJ,gBAAgB9H,KAAKkI,KAAKJ,eAAeuG,SAAS,GAAG,OAAOvO,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,sBAAsB,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,gBAAW,IAAQ9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAEf,EAAAA,IAAIyC,EAAEoJ,UAAU,wBAAmB,IAAQ9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAEW,EAAAA,IAAIe,EAAEoJ,UAAU,6BAAwB,IAAQ9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAK0B,EAAEoJ,UAAU,4BAAuB,IAAQ9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAK0B,EAAEoJ,UAAU,aAAa,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,WAAW,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,wBAAwB,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAK0B,EAAEoJ,UAAU,iBAAiB,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,iBAAiB,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAACwN,UAAS,KAAM9L,EAAEoJ,UAAU,oBAAoB,OAAM9L,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAK0B,EAAEoJ,UAAU,aAAQ,GAAQpJ,GAAE1C,EAAAA,EAAAA,GAAE,EAAC4C,EAAAA,EAAAA,GAAE,0CAA0CF,GAAGA,CAAC,C","sources":["../node_modules/@arcgis/core/views/2d/engine/vectorTiles/SchemaHelper.js","../node_modules/@arcgis/core/views/2d/engine/vectorTiles/TileHandler3D.js","../node_modules/@arcgis/core/views/2d/engine/vtlBrushes.js","../node_modules/@arcgis/core/views/2d/engine/vectorTiles/VTLPainter3D.js","../node_modules/@arcgis/core/views/3d/layers/VectorTileLayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/TiledLayerView3D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nclass t{constructor(t,e,s){this._scale=t,this._shift=e,this._levelShift=s}getLevelRowColumn(t){const e=this.getLevelShift(t[0]),s=this._shift+e;return s?[t[0]-e,t[1]>>s,t[2]>>s]:t}getLevelShift(t){return Math.min(t,this._levelShift)}getOffset(t,e){let s=0,i=0;const h=this._shift+this.getLevelShift(t[0]);if(h){const l=(1<<h)-1,f=e/(this._scale*(1<<h-1));s=(t[2]&l)*f,i=(t[1]&l)*f}return[s,i]}getScale(t){return this._scale*(1<<this._shift+this.getLevelShift(t))}}export{t as SchemaHelper};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{MinPriority as e}from\"../../../../core/MemCache.js\";import{throwIfAborted as t}from\"../../../../core/promiseUtils.js\";import{fromValues as o}from\"../../../../core/libs/gl-matrix-2/factories/mat3f32.js\";import{create as i}from\"../../../../geometry/support/aaBoundingRect.js\";import{TileHandler as s}from\"./TileHandler.js\";import{VectorTile as r}from\"./VectorTile.js\";import n from\"../../tiling/TileInfoViewPOT.js\";import l from\"../../tiling/TileKey.js\";class a extends s{constructor(e,t,o,i){super(e,t,o,e.tileInfo.lods.length-1),this._memCache=i,this._ongoingTileRequests=new Map,this._ongoingRequestToController=new Map,this._tileInfoView=new n(e.tileInfo,e.fullExtent)}destroy(){super.destroy(),this._ongoingRequestToController.forEach((e=>e.abort())),this._ongoingRequestToController.clear(),this._ongoingTileRequests.clear()}async getVectorTile(s,n){const a=new l(s[0],s[1],s[2],0);let g=this._memCache.get(a.id);if(null!=g)return g.retain(),g;const h=await this._getVectorTileData(a);if(t(n),!this._layer)return null;if(g=this._memCache.get(a.id),null!=g)return g.retain(),g;const u=this._layer.tileInfo.getTileBounds(i(),a),m=this._tileInfoView.getTileResolution(s[0]);return g=new r(a,m,u[0],u[3],512,512,this._styleRepository,this._memCache),g.setData(h),h&&(g.retain(),this._memCache.put(a.id,g,g.usedMemory,e)),g.neededForCoverage=!0,g.transforms.tileUnitsToPixels=o(1/8,0,0,0,1/8,0,0,0,1),g}_getVectorTileData(e){const t=e.id;if(this._ongoingTileRequests.has(t))return this._ongoingTileRequests.get(t);const o=new AbortController,i={signal:o.signal},s=this._getParsedVectorTileData(e,i).then((e=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),e))).catch((()=>(this._ongoingTileRequests.delete(t),this._ongoingRequestToController.delete(t),null)));return this._ongoingTileRequests.set(t,s),this._ongoingRequestToController.set(t,o),s}_getParsedVectorTileData(e,t){return this.fetchTileData(e,t).then((o=>this.parseTileData({key:e,data:o},t)))}}export{a as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{WGLBrushVTLBackground as r}from\"./webgl/brushes/WGLBrushVTLBackground.js\";import{WGLBrushVTLCircle as s}from\"./webgl/brushes/WGLBrushVTLCircle.js\";import{WGLBrushVTLFill as l}from\"./webgl/brushes/WGLBrushVTLFill.js\";import{WGLBrushVTLLine as o}from\"./webgl/brushes/WGLBrushVTLLine.js\";import{WGLBrushVTLSymbol as e}from\"./webgl/brushes/WGLBrushVTLSymbol.js\";const b={vtlBackground:r,vtlFill:l,vtlLine:o,vtlCircle:s,vtlSymbol:e};export{b as vtlBrushes};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{disposeMaybe as e}from\"../../../../core/maybe.js\";import{vtlBrushes as t}from\"../vtlBrushes.js\";import s from\"./shaders/VTLMaterialManager.js\";import{StyleLayerType as r,Visibility as a}from\"./style/StyleDefinition.js\";import{CompareFunction as n,BlendFactor as i}from\"../../../webgl/enums.js\";const o=1e-6;class l{constructor(e,t){this.spriteMosaic=e,this.glyphMosaic=t,this._brushCache=new Map,this._vtlMaterialManager=new s}dispose(){this._brushCache&&(this._brushCache.forEach((e=>e.dispose())),this._brushCache=null),this._vtlMaterialManager=e(this._vtlMaterialManager),this.spriteMosaic.dispose(),this.glyphMosaic.dispose()}get vectorTilesMaterialManager(){return this._vtlMaterialManager}drawSymbols(e,t,s){const n=s.layers;e.renderPass=\"translucent\";for(let i=0;i<n.length;i++){const s=n[i];if(s.type!==r.SYMBOL)continue;const l=s.getLayoutProperty(\"visibility\");if(l&&l.getValue()===a.NONE)continue;const c=e.displayLevel;void 0!==s.minzoom&&s.minzoom>c+o||void 0!==s.maxzoom&&s.maxzoom<=c-o||(e.styleLayerUID=s.uid,e.styleLayer=s,this._drawWithBrush(e,t,\"vtlSymbol\"))}}drawBackground(e,t,s){if(0===s.backgroundBucketIds.length)return;const{context:n,displayLevel:i,requiredLevel:l}=e;t.key.level=l,n.setBlendingEnabled(!0),n.setDepthTestEnabled(!1),n.setStencilTestEnabled(!1),e.renderPass=\"background\",s.backgroundBucketIds.forEach((n=>{const l=s.getLayerById(n);if(l.type!==r.BACKGROUND)return;const c=l.getLayoutProperty(\"visibility\");c&&c.getValue()===a.NONE||void 0!==l.minzoom&&l.minzoom>i+o||void 0!==l.maxzoom&&l.maxzoom<=i-o||(e.styleLayerUID=l.uid,e.styleLayer=l,this._drawWithBrush(e,t,\"vtlBackground\"))}))}drawTile(e,t,s,r){const{context:a}=e,o=s.layers;a.setBlendingEnabled(!1),a.setDepthTestEnabled(!0),a.setDepthWriteEnabled(!0),a.setDepthFunction(n.LEQUAL),e.renderPass=\"opaque\";for(let n=o.length-1;n>=0;n--){const s=o[n];null!=r&&r!==s.type||this._renderStyleLayer(s,e,t,!1)}a.setDepthWriteEnabled(!1),a.setBlendingEnabled(!0),a.setBlendFunctionSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA),e.renderPass=\"translucent\";for(let n=0;n<o.length;n++){const s=o[n];null!=r&&r!==s.type||this._renderStyleLayer(s,e,t,!1)}a.setDepthTestEnabled(!1),a.bindVAO()}_renderStyleLayer(e,t,s,n){if(!(n||e&&s.layerData.has(e.uid)))return;const i=e.getLayoutProperty(\"visibility\");if(i&&i.getValue()===a.NONE)return;const{renderPass:l}=t;let c;switch(e.type){case r.BACKGROUND:if(\"background\"!==l)return;c=\"vtlBackground\";break;case r.FILL:if(\"opaque\"!==l&&\"translucent\"!==t.renderPass)return;c=\"vtlFill\";break;case r.LINE:if(\"translucent\"!==l)return;c=\"vtlLine\";break;case r.CIRCLE:if(\"translucent\"!==l)return;c=\"vtlCircle\";break;case r.SYMBOL:if(\"translucent\"!==l)return;c=\"vtlSymbol\"}const d=t.displayLevel;if(void 0!==e.minzoom&&e.minzoom>d+o||void 0!==e.maxzoom&&e.maxzoom<=d-o)return;const{context:h}=t;h.setStencilTestEnabled(!1),h.setStencilWriteMask(0),t.styleLayerUID=e.uid,t.styleLayer=e,this._drawWithBrush(t,s,c)}_drawWithBrush(e,s,r){if(!this._brushCache.has(r)){const e=t[r];this._brushCache.set(r,new e)}this._brushCache.get(r).drawMany(e,[s])}}export{l as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import has from\"../../../core/has.js\";import{disposeMaybe as i,abortMaybe as l,destroyMaybe as r}from\"../../../core/maybe.js\";import{isAborted as s}from\"../../../core/promiseUtils.js\";import{whenOnce as a,watch as o,syncAndInitial as n}from\"../../../core/reactiveUtils.js\";import{property as h}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as c}from\"../../../core/accessorSupport/decorators/subclass.js\";import{SchemaHelper as m}from\"../../2d/engine/vectorTiles/SchemaHelper.js\";import d from\"../../2d/engine/vectorTiles/TileHandler3D.js\";import p from\"../../2d/engine/vectorTiles/VTLPainter3D.js\";import y from\"../../2d/engine/vectorTiles/style/StyleRepository.js\";import{LayerView3D as g}from\"./LayerView3D.js\";import{TiledLayerView3D as f}from\"./TiledLayerView3D.js\";import{vtlAssumes256PixelSizeAsDefault as u,test as v}from\"../terrain/terrainUtils.js\";import S from\"../../layers/LayerView.js\";let _=class extends(f(g(S))){constructor(){super(...arguments),this._tileHandlerController=null,this.type=\"vector-tile-3d\",this.levelShift=has(\"disable-feature:vtl-level-shift\")?0:1}initialize(){if(null==this.layer.fullExtent)return void this.addResolvingPromise(Promise.reject(new t(\"vectortilelayerview:full-extent-undefined\",\"This layer view's layer does not define a fullExtent.\")));const{basemapTerrain:e,spatialReference:i,state:l,viewingMode:r}=this.view,h=\"local\"===r&&!u(i)||v.force512VTL?this.layer.tileInfo:this.layer.tileInfo.getCompatibleForVTL(256),c=this._getTileInfoSupportError(h,this.layer.fullExtent);if(null!=c)return this.addResolvingPromise(Promise.reject(c));const g=a((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const t=e.tilingScheme,i=t.pixelSize,l=256===i?1:2,r=e.spatialReference?.isGeographic&&256===i?1:0,s=e.spatialReference?.isGeographic||256!==i?0:1;let a;this.schemaHelper=new m(l,r,this.levelShift+s),a=256===i||512===i?this.layer.tileInfo.getCompatibleForVTL(i):this.layer.tileInfo;const o=this._getTileInfoCompatibilityError(a,t);if(o)throw o;this.tileInfo=a}));this._tileHandlerController=new AbortController;const f=this.view.resourceController;this._memCache=f.memoryController.newCache(`vtl-${this.layer.uid}`,(e=>{e.release()})),this.addHandles(o((()=>this.view.qualitySettings.memoryLimit),(e=>this._memCache.maxSize=Math.ceil(e/10*1048576)),n));const S=new y(this.layer.currentStyleInfo.style);this._tileHandler=new d(this.layer,S,l.contentPixelRatio,this._memCache);const _=this._tileHandlerController.signal,C=H(f),w=this._tileHandler.start({signal:_,schedule:C}),R=this._tileHandler.spriteMosaic;R.then((e=>{!s(_)&&this._tileHandler&&(this.painter=new p(e,this._tileHandler.glyphMosaic))})),w.then((()=>this._tileHandlerController=null));const L=()=>{this._tileHandlerController&&this._tileHandlerController.abort(),this._tileHandlerController=new AbortController,this._memCache.clear();const e=this.layer.currentStyleInfo.style,t=this.view.state?.contentPixelRatio??1,i=new y(e),l=new d(this.layer,i,t,this._memCache),r=l.start({signal:this._tileHandlerController.signal,schedule:C}),s=l.spriteMosaic;r.then((()=>this._tileHandlerController=null)),this._updatingHandles.addPromise(Promise.all([r,s]).then((([,e])=>{const t=this._tileHandler,i=this.painter;this.painter=new p(e,l.glyphMosaic),this._tileHandler=l,this.emit(\"data-changed\"),t.destroy(),i&&i.dispose()})))};this._updatingHandles.add((()=>({style:this.layer.currentStyleInfo.style,pixelRatio:this.view.state?.contentPixelRatio})),L),this.addHandles([this.layer.on(\"paint-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"style-layer-change\",L),this.layer.on(\"delete-style-layer\",L),this.layer.on(\"spriteSource-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"layout-change\",(()=>this.emit(\"data-changed\"))),this.layer.on(\"style-layer-visibility-change\",(()=>this.emit(\"data-changed\")))]);const j=Promise.all([g,w,R]);this.addResolvingPromise(j)}destroy(){this.painter=i(this.painter),this._tileHandlerController=l(this._tileHandlerController),this._tileHandler=r(this._tileHandler),this._memCache=r(this._memCache)}get contentZoom(){return has(\"disable-feature:vtl-level-shift\")?1:this.view.qualitySettings.tiledSurface.vtlContentZoom}get displayLevelRange(){const e=this.tileInfo.lods,t=this.layer.minScale||e[0].scale,i=this.layer.maxScale||e[e.length-1].scale,l=this.levelRangeFromScaleRange(t,i);return this.layer.maxScale?l.maxLevel++:l.maxLevel+=this.levelShift,l}get dataScaleRange(){const e=this.tileInfo.lods;return{minScale:e[0].scale,maxScale:e[e.length-1].scale}}get dataLevelRange(){const{minScale:e,maxScale:t}=this.dataScaleRange,i=this.levelRangeFromScaleRange(e,t);return 1===i.minLevel&&256===this.tileInfo.size[0]&&(i.minLevel=0),i.maxLevel+=this.levelShift,i}async fetchTile(e,t){const i=this.schemaHelper.getLevelRowColumn(e);return this._tileHandler.getVectorTile(i,t)}};e([h()],_.prototype,\"layer\",void 0),e([h()],_.prototype,\"levelShift\",void 0),e([h()],_.prototype,\"contentZoom\",null),e([h()],_.prototype,\"displayLevelRange\",null),e([h()],_.prototype,\"tileInfo\",void 0),e([h()],_.prototype,\"dataScaleRange\",null),e([h()],_.prototype,\"dataLevelRange\",null),e([h()],_.prototype,\"updatingProgressValue\",void 0),_=e([c(\"esri.views.3d.layers.VectorTileLayerView3D\")],_);const C=_;function H(e){return t=>e.immediate.schedule(t)}export{C as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as t}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{let n=class extends l{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,r=o.signal;this.addHandles(s((()=>o.abort()))),await t((()=>this.view.defaultsFromMap?.heightModelInfoReady),r),e(r);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([r()],n.prototype,\"view\",void 0),o([r()],n.prototype,\"slicePlaneEnabled\",void 0),n=o([i(\"esri.views.3d.layers.LayerView3D\")],n),n};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import t from\"../../../core/Error.js\";import{whenOnce as i}from\"../../../core/reactiveUtils.js\";import{property as a}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as r}from\"../../../core/accessorSupport/decorators/subclass.js\";import{LayerViewPerformanceInfo as l}from\"./support/LayerViewPerformanceInfo.js\";import{updatingProgress as s,updatingProgressValue as n}from\"../support/updatingProperties.js\";import{checkIfTileInfoSupportedForView as o}from\"../terrain/terrainUtils.js\";import{isScaleRangeActive as c,validateScaleRange as h}from\"../../support/layerViewUtils.js\";const p=p=>{let m=class extends p{constructor(){super(...arguments),this.hasMixedImageFormats=!0}get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get visibleAtCurrentScale(){if(!c(this.layer.minScale,this.layer.maxScale)||!this.view.terrainScale)return!0;const e=Math.round(this.view.basemapTerrain.tilingScheme.levelAtScale(this.view.terrainScale));return e>=this.displayLevelRange.minLevel&&e<=this.displayLevelRange.maxLevel}get dataScaleRange(){const e=this.tileInfo.lods;let t=e[0].scale,i=e[e.length-1].scale;if(\"tilemapCache\"in this.layer&&this.layer.tilemapCache){const{effectiveMinLOD:e,effectiveMaxLOD:a}=this.layer.tilemapCache;t=this.tileInfo.lodAt(e).scale,i=this.tileInfo.lodAt(a).scale}return{minScale:t,maxScale:i}}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&!this.parent?.suspended&&this.view?.ready&&h(e)&&this.visibleAtCurrentTimeExtent||!1}get dataLevelRange(){const{minScale:e,maxScale:t}=this.dataScaleRange;return this.levelRangeFromScaleRange(e,t)}get displayLevelRange(){const e=this.layer.minScale||this.dataScaleRange.minScale,t=this.layer.maxScale||this.dataScaleRange.maxScale,i=this.levelRangeFromScaleRange(e,t);return this.layer.maxScale&&i.maxLevel++,i}get performanceInfo(){return new l(this.view.basemapTerrain.getUsedMemoryForLayerView(this))}getTileUrl(e){return this.layer.getTileUrl(e[0],e[1],e[2])}_addTilingSchemeMatchPromise(){if(null==this.fullExtent)return this.addResolvingPromise(Promise.reject(new t(\"tilingscheme:extent-not-defined\",\"This layer doesn't define a fullExtent.\")));const e=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if(e)return this.addResolvingPromise(Promise.reject(e));this.addResolvingPromise(i((()=>this.view?.basemapTerrain?.tilingSchemeLocked)).then((()=>{const e=this.view.basemapTerrain.tilingScheme,t=\"tilemapCache\"in this.layer?this.layer.tilemapCache?.effectiveMaxLOD:void 0,i=this._getTileInfoCompatibilityError(this.tileInfo,e,t);if(i)throw i})))}_getTileInfoSupportError(e,i){const a=o(e,i,this.view.spatialReference,this.view.state.viewingMode,\"tilemapCache\"in this.layer?this.layer.tilemapCache?.effectiveMaxLOD:void 0);if(!a)return;const r={layer:this.layer,error:a};switch(a.name){case\"tilingscheme:spatial-reference-mismatch\":case\"tilingscheme:global-unsupported-spatial-reference\":case\"tilingscheme:local-unsupported-spatial-reference\":return new t(\"layerview:spatial-reference-incompatible\",\"The spatial reference of this layer does not meet the requirements of the view\",r);default:return new t(\"layerview:tiling-scheme-unsupported\",\"The tiling scheme of this layer is not supported by SceneView\",r)}}_getTileInfoCompatibilityError(e,i,a){return null!=e&&i.compatibleWith(e,a)?null:new t(\"layerview:tiling-scheme-incompatible\",\"The tiling scheme of this layer is incompatible with the tiling scheme of the surface\")}levelRangeFromScaleRange(e,t){const i={minLevel:0,maxLevel:1/0},a=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!a)return i;const r=a.levels[0],l=e=>{const t=Math.log(r.scale/e)/Math.LN2;return.5-Math.abs(.5-t%1)<1e-9?Math.round(t):Math.ceil(t)};return null!=e&&e>0&&(i.minLevel=Math.max(0,l(e))),null!=t&&t>0&&(i.maxLevel=Math.max(0,l(t))),i}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return e([a({readOnly:!0})],m.prototype,\"imageFormatIsOpaque\",null),e([a({readOnly:!0})],m.prototype,\"updating\",void 0),e([a(s)],m.prototype,\"updatingProgress\",void 0),e([a(n)],m.prototype,\"updatingProgressValue\",void 0),e([a()],m.prototype,\"hasMixedImageFormats\",void 0),e([a()],m.prototype,\"fullExtent\",null),e([a({readOnly:!0})],m.prototype,\"isOpaque\",null),e([a({readOnly:!0})],m.prototype,\"visibleAtCurrentScale\",null),e([a()],m.prototype,\"dataScaleRange\",null),e([a({readOnly:!0})],m.prototype,\"dataLevelRange\",null),e([a({readOnly:!0})],m.prototype,\"displayLevelRange\",null),e([a()],m.prototype,\"layer\",void 0),m=e([r(\"esri.views.3d.layers.TiledLayerView3D\")],m),m};export{p as TiledLayerView3D};\n"],"names":["t","constructor","e","s","this","_scale","_shift","_levelShift","getLevelRowColumn","getLevelShift","Math","min","getOffset","i","h","l","f","getScale","a","o","super","tileInfo","lods","length","_memCache","_ongoingTileRequests","Map","_ongoingRequestToController","_tileInfoView","n","fullExtent","destroy","forEach","abort","clear","getVectorTile","g","get","id","retain","_getVectorTileData","_layer","u","getTileBounds","m","getTileResolution","r","_styleRepository","setData","put","usedMemory","neededForCoverage","transforms","tileUnitsToPixels","has","AbortController","signal","_getParsedVectorTileData","then","delete","catch","set","fetchTileData","parseTileData","key","data","b","vtlBackground","vtlFill","vtlLine","vtlCircle","vtlSymbol","spriteMosaic","glyphMosaic","_brushCache","_vtlMaterialManager","dispose","vectorTilesMaterialManager","drawSymbols","layers","renderPass","type","SYMBOL","getLayoutProperty","getValue","NONE","c","displayLevel","minzoom","maxzoom","styleLayerUID","uid","styleLayer","_drawWithBrush","drawBackground","backgroundBucketIds","context","requiredLevel","level","setBlendingEnabled","setDepthTestEnabled","setStencilTestEnabled","getLayerById","BACKGROUND","drawTile","setDepthWriteEnabled","setDepthFunction","LEQUAL","_renderStyleLayer","setBlendFunctionSeparate","ONE","ONE_MINUS_SRC_ALPHA","bindVAO","layerData","FILL","LINE","CIRCLE","d","setStencilWriteMask","drawMany","_","S","arguments","_tileHandlerController","levelShift","initialize","layer","addResolvingPromise","Promise","reject","basemapTerrain","spatialReference","state","viewingMode","view","v","force512VTL","getCompatibleForVTL","_getTileInfoSupportError","tilingSchemeLocked","tilingScheme","pixelSize","isGeographic","schemaHelper","_getTileInfoCompatibilityError","resourceController","memoryController","newCache","release","addHandles","qualitySettings","memoryLimit","maxSize","ceil","y","currentStyleInfo","style","_tileHandler","contentPixelRatio","C","immediate","schedule","H","w","start","R","painter","p","L","_updatingHandles","addPromise","all","_ref","emit","add","pixelRatio","on","j","contentZoom","tiledSurface","vtlContentZoom","displayLevelRange","minScale","scale","maxScale","levelRangeFromScaleRange","maxLevel","dataScaleRange","dataLevelRange","minLevel","size","fetchTile","prototype","slicePlaneEnabled","supportsHeightUnitConversion","postscript","_validateHeightModelInfo","defaultsFromMap","heightModelInfoReady","heightModelInfo","hasMixedImageFormats","imageFormatIsOpaque","isOpaque","fullOpacity","visibleAtCurrentScale","terrainScale","round","levelAtScale","tilemapCache","effectiveMinLOD","effectiveMaxLOD","lodAt","canResume","effectiveScaleRange","visible","loaded","parent","suspended","ready","visibleAtCurrentTimeExtent","performanceInfo","getUsedMemoryForLayerView","getTileUrl","_addTilingSchemeMatchPromise","error","name","compatibleWith","levels","log","LN2","abs","max","isUpdating","updating","readOnly"],"sourceRoot":""}