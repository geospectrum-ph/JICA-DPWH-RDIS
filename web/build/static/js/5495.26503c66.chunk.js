"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[5495,6840],{1484:(e,t,i)=>{i.d(t,{A:()=>n});class n{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.lengths=null!==e&&void 0!==e?e:[],this.coords=null!==t&&void 0!==t?t:[],this.hasIndeterminateRingOrder=i}static fromJSON(e){return new n(e.lengths,e.coords,e.hasIndeterminateRingOrder)}static fromRect(e){const[t,i,s,h]=e,r=s-t,a=h-i;return new n([5],[t,i,r,0,0,a,-r,0,0,-a])}get isPoint(){return 0===this.lengths.length}get maxLength(){return Math.max(...this.lengths)}get size(){return this.lengths.reduce(((e,t)=>e+t))}forEachVertex(e){let t=0;this.lengths.length||e(this.coords[0],this.coords[1]);for(let i=0;i<this.lengths.length;i++){const n=this.lengths[i];for(let i=0;i<n;i++)e(this.coords[2*(i+t)],this.coords[2*(i+t)+1]);t+=n}}deltaDecode(){const e=this.clone(),{coords:t,lengths:i}=e;let n=0;for(const s of i){for(let e=1;e<s;e++)t[2*(n+e)]+=t[2*(n+e)-2],t[2*(n+e)+1]+=t[2*(n+e)-1];n+=s}return e}clone(e){if(0===this.lengths.length)return new n([],[this.coords[0],this.coords[1]]);const t=2*(0===this.lengths.length?1:this.lengths.reduce(((e,t)=>e+t))),i=this.coords.slice(0,t);return e?(e.set(i),new n(this.lengths,e,this.hasIndeterminateRingOrder)):new n(Array.from(this.lengths),Array.from(i),this.hasIndeterminateRingOrder)}}},30050:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(85504),s=i(16770);class h{constructor(){this._resourceMap=new Map,this._inFlightResourceMap=new Map,this.geometryEngine=null,this.geometryEnginePromise=null}destroy(){this._inFlightResourceMap.clear(),this._resourceMap.clear()}getResource(e){var t;return null!==(t=this._resourceMap.get(e))&&void 0!==t?t:null}async fetchResource(e,t){const i=this._resourceMap.get(e);if(i)return{width:i.width,height:i.height};let n=this._inFlightResourceMap.get(e);return n?n.then((e=>({width:e.width,height:e.height}))):(n=(0,s.M5)(e,t),this._inFlightResourceMap.set(e,n),n.then((t=>(this._inFlightResourceMap.delete(e),this._resourceMap.set(e,t),{width:t.width,height:t.height})),(()=>({width:0,height:0}))))}deleteResource(e){this._inFlightResourceMap.delete(e),this._resourceMap.delete(e)}loadFont(e){return(0,n.Al)(e)}}},6840:(e,t,i)=>{i.r(t),i.d(t,{CIMSymbolRasterizer:()=>o});var n=i(30050),s=i(83283),h=i(401),r=i(48988),a=i(97763);const l=96/72;class o{constructor(e){this._spatialReference=e,this._imageDataCanvas=null,this._cimResourceManager=new n.A}get _canvas(){return this._imageDataCanvas||(this._imageDataCanvas=document.createElement("canvas")),this._imageDataCanvas}get resourceManager(){return this._cimResourceManager}async rasterizeCIMSymbolAsync(e,t,i,n,s,l,o,g,u){if(!e)return null;const{data:d}=e;if(!d||"CIMSymbolReference"!==d.type||!d.symbol)return null;const{symbol:m}=d;l||(l=(0,a.n5)(m));const y=await r.$.resolveSymbolOverrides(d,t,this._spatialReference,s,l,o,g),w=this._cimResourceManager,f=[];h.wp.fetchResources(y,w,f),h.wp.fetchFonts(y,w,f),f.length>0&&await Promise.all(f);const{width:p,height:M}=i,v=c(l,p,M,n),b=h.wp.getEnvelope(y,v,w);if(!b)return null;let x=1,R=0,C=0;switch(m.type){case"CIMPointSymbol":case"CIMTextSymbol":{let e=1;b.width>p&&(e=p/b.width);let t=1;b.height>M&&(t=M/b.height),"preview"===n&&(b.width<p&&(e=p/b.width),b.height<M&&(t=M/b.height)),x=Math.min(e,t),R=b.x+b.width/2,C=b.y+b.height/2}break;case"CIMLineSymbol":{(u||b.height>M)&&(x=M/b.height),C=b.y+b.height/2;const e=b.x*x+p/2,t=(b.x+b.width)*x+p/2,{paths:i}=v;i[0][0][0]-=e/x,i[0][2][0]-=(t-p)/x}break;case"CIMPolygonSymbol":{R=b.x+b.width/2,C=b.y+b.height/2;const e=b.x*x+p/2,t=(b.x+b.width)*x+p/2,i=b.y*x+M/2,n=(b.y+b.height)*x+M/2,{rings:s}=v;e<0&&(s[0][0][0]-=e,s[0][3][0]-=e,s[0][4][0]-=e),i<0&&(s[0][0][1]+=i,s[0][1][1]+=i,s[0][4][1]+=i),t>p&&(s[0][1][0]-=t-p,s[0][2][0]-=t-p),n>M&&(s[0][2][1]+=n-M,s[0][3][1]+=n-M)}}const _={type:"cim",data:{type:"CIMSymbolReference",symbol:y}};return this.rasterize(_,p,M,R,C,x,l,1,v)}rasterize(e,t,i,n,h,r,o){let g=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null;const{data:d}=e;if(!d||"CIMSymbolReference"!==d.type||!d.symbol)return null;const{symbol:m}=d,y=this._canvas,w=(window.devicePixelRatio||1)*l;y.width=t*w,y.height=i*w,o||(o=(0,a.n5)(m)),u||(u=c(o,t,i,"legend")),y.width+=2*g,y.height+=2*g;const f=y.getContext("2d",{willReadFrequently:!0}),p=s.IT.createIdentity();return p.translate(-n,-h),p.scale(r*w,-r*w),p.translate(t*w/2+g,i*w/2+g),f.clearRect(0,0,y.width,y.height),new s.Rj(f,this._cimResourceManager,p,!0).drawSymbol(m,u),f.getImageData(0,0,y.width,y.height)}}function c(e,t,i,n){const s=-t/2+1,h=t/2-1,r=i/2-1,a=-i/2+1;switch(e){case"esriGeometryPoint":return{x:0,y:0};case"esriGeometryPolyline":return{paths:[[[s,0],[0,0],[h,0]]]};default:return"legend"===n?{rings:[[[s,r],[h,0],[h,a],[s,a],[s,r]]]}:{rings:[[[s,r],[h,r],[h,a],[s,a],[s,r]]]}}}},28675:(e,t,i)=>{i.d(t,{previewCIMSymbol:()=>w});var n=i(76931),s=i(401),h=i(6840),r=i(48988),a=i(97763),l=i(65709),o=i(26291);const c=new h.CIMSymbolRasterizer(null),g=(0,n.PN)(l.CB.size),u=(0,n.PN)(l.CB.maxSize),d=(0,n.PN)(l.CB.lineWidth),m=1;async function y(e,t,i){const n=null===t||void 0===t?void 0:t.size;let h=null!=n&&"object"==typeof n&&"width"in n?n.width:n,a=null!=n&&"object"==typeof n&&"height"in n?n.height:n;if(null==h||null==a)if("esriGeometryPolygon"===i)h=g,a=g;else{const n=await async function(e,t,i){const{feature:n,fieldMap:h,viewParams:a}=t.cimOptions||t,l=await r.$.resolveSymbolOverrides(e.data,n,null,h,i,null,a);if(!l)return null;(e=e.clone()).data={type:"CIMSymbolReference",symbol:l},e.data.primitiveOverrides=void 0;const o=[];return s.wp.fetchResources(l,c.resourceManager,o),s.wp.fetchFonts(l,c.resourceManager,o),o.length>0&&await Promise.all(o),s.wp.getEnvelope(l,null,c.resourceManager)}(e,t,i);n&&(h=n.width,a=n.height),"esriGeometryPolyline"===i&&(h=d),h=null!=h&&isFinite(h)?Math.min(h,u):g,a=null!=a&&isFinite(a)?Math.max(Math.min(a,u),m):g}return"legend"===t.style&&"esriGeometryPolyline"===i&&(h=d),{width:h,height:a}}async function w(e){var t,i,s;let h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{node:r,opacity:l,symbolConfig:g}=h,u=null!=g&&"object"==typeof g&&"isSquareFill"in g&&g.isSquareFill,d=h.cimOptions||h,m=d.geometryType||(0,a.n5)(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.symbol),w=await y(e,h,m),{feature:f,fieldMap:p}=d,M=u||"esriGeometryPolygon"!==m?"preview":"legend",v=await c.rasterizeCIMSymbolAsync(e,f,w,M,p,m,null,d.viewParams,d.allowScalingUp);if(!v)return null;const{width:b,height:x}=v,R=document.createElement("canvas");R.width=b,R.height=x,R.getContext("2d").putImageData(v,0,0);const C=(0,n.Lz)(w.width),_=(0,n.Lz)(w.height),I=new Image(C,_);I.src=R.toDataURL(),I.ariaLabel=null!==(i=h.ariaLabel)&&void 0!==i?i:null,I.alt=null!==(s=h.ariaLabel)&&void 0!==s?s:"",null!=l&&(I.style.opacity="".concat(l));let P=I;if(null!=h.effectView){const e={shape:{type:"image",x:0,y:0,width:C,height:_,src:I.src},fill:null,stroke:null,offset:[0,0]};P=(0,o.fz)([[e]],[C,_],{effectView:h.effectView,ariaLabel:h.ariaLabel})}return r&&P&&r.appendChild(P),P}},19358:(e,t,i)=>{i.d(t,{A:()=>s});var n=i(59422);class s{constructor(e,t,i,s){this.computedX=0,this.computedY=0,this.center=(0,n.fA)(e,t),this.centerT=(0,n.vt)(),this.halfWidth=i/2,this.halfHeight=s/2,this.width=i,this.height=s}get x(){return this.center[0]}get y(){return this.center[1]}get blX(){return this.center[0]+this.halfWidth}get blY(){return this.center[1]+this.halfHeight}get trX(){return this.center[0]-this.halfWidth}get trY(){return this.center[1]-this.halfHeight}get xmin(){return this.x-this.halfWidth}get xmax(){return this.x+this.halfWidth}get ymin(){return this.y-this.halfHeight}get ymax(){return this.y+this.halfHeight}set x(e){this.center[0]=e}set y(e){this.center[1]=e}clone(){return new s(this.x,this.y,this.width,this.height)}serialize(e){return e.writeF32(this.center[0]),e.writeF32(this.center[1]),e.push(this.width),e.push(this.height),e}findCollisionDelta(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const i=Math.abs(e.centerT[0]-this.centerT[0]),n=Math.abs(e.centerT[1]-this.centerT[1]),s=(e.halfWidth+this.halfWidth+t)/i,h=(e.halfHeight+this.halfHeight+t)/n,r=Math.min(s,h);return Math.log2(r)}extend(e){const t=Math.min(this.xmin,e.xmin),i=Math.min(this.ymin,e.ymin),n=Math.max(this.xmax,e.xmax)-t,s=Math.max(this.ymax,e.ymax)-i,h=t+n/2,r=i+s/2;this.width=n,this.height=s,this.halfWidth=n/2,this.halfHeight=s/2,this.x=h,this.y=r}static deserialize(e){const t=e.readF32(),i=e.readF32(),n=e.readInt32(),h=e.readInt32();return new s(t,i,n,h)}}},5095:(e,t,i)=>{i.d(t,{$U:()=>A,C2:()=>o,CQ:()=>s,CR:()=>b,C_:()=>L,Cp:()=>x,DY:()=>a,GR:()=>$,Gh:()=>P,LY:()=>_,O5:()=>q,Pq:()=>c,Qb:()=>E,Sr:()=>M,TB:()=>X,V3:()=>D,Vl:()=>B,Xh:()=>U,YS:()=>u,YV:()=>h,_M:()=>F,_x:()=>j,cp:()=>Q,dV:()=>C,eG:()=>l,eI:()=>N,fq:()=>H,fy:()=>S,g0:()=>I,hM:()=>V,ie:()=>z,ju:()=>r,lL:()=>w,mg:()=>G,n9:()=>p,nM:()=>y,nW:()=>T,p:()=>O,qM:()=>n,r1:()=>Y,sn:()=>f,uM:()=>d,ue:()=>g,vN:()=>R,vd:()=>v,yA:()=>W,yv:()=>k,z2:()=>m});const n=1e-30,s=512,h=16777216,r=8,a=29,l=24,o=4,c=0,g=0,u=0,d=1,m=2,y=3,w=4,f=5,p=6,M=12,v=5,b=6,x=5,R=6;var C;!function(e){e[e.FilterFlags=0]="FilterFlags",e[e.Animation=1]="Animation",e[e.GPGPU=2]="GPGPU",e[e.VV=3]="VV",e[e.DD0=4]="DD0",e[e.DD1=5]="DD1",e[e.DD2=6]="DD2"}(C||(C={}));const _=8,I=_<<1,P=1.05,S=3,D=1,F=3,z=3,A=5,G=6,L=1.15,V=2,O=128,W=256-2*V,T=2,H=10,k=1024,E=128,Y=4,q=1,j=1<<20,N=.75,U=10,B=.75,X=256,$=32,Q=512}}]);
//# sourceMappingURL=5495.26503c66.chunk.js.map