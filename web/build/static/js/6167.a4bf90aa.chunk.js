"use strict";(self.webpackChunkRDIS_Web_Application=self.webpackChunkRDIS_Web_Application||[]).push([[6167],{28608:(e,t,i)=>{function n(){return new Float32Array(4)}function a(e){const t=new Float32Array(4);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function r(e,t,i,n){const a=new Float32Array(4);return a[0]=e,a[1]=t,a[2]=i,a[3]=n,a}function o(){return n()}function s(){return r(1,1,1,1)}function l(){return r(1,0,0,0)}function u(){return r(0,1,0,0)}function c(){return r(0,0,1,0)}function f(){return r(0,0,0,1)}i.d(t,{fA:()=>r,o8:()=>a});const d=o(),p=s(),g=l(),_=u(),y=c(),m=f();Object.freeze(Object.defineProperty({__proto__:null,ONES:p,UNIT_W:m,UNIT_X:g,UNIT_Y:_,UNIT_Z:y,ZEROS:d,clone:a,create:n,createView:function(e,t){return new Float32Array(e,t,4)},fromValues:r,ones:s,unitW:f,unitX:l,unitY:u,unitZ:c,zeros:o},Symbol.toStringTag,{value:"Module"}))},40480:(e,t,i)=>{i.d(t,{p6:()=>s,wV:()=>o});Math.PI;const n=256/360,a=1/Math.LN2;function r(e,t){return(e%=t)>=0?e:e+t}function o(e){return r(e*n,256)}function s(e){return Math.log(e)*a}},3986:(e,t,i)=>{i.d(t,{A:()=>n});class n{constructor(){this.name=this.constructor.name||"UnnamedBrush",this.brushEffect=null}prepareState(e,t){}draw(e,t,i){}drawMany(e,t,i){for(const n of t)n.visible&&this.draw(e,n,i)}}},38134:(e,t,i)=>{i.d(t,{F:()=>f});var n=i(15941),a=i(85827),r=i(28608),o=i(5095),s=i(3986),l=i(76718),u=i(93345),c=i(36911);class f extends s.A{constructor(){super(...arguments),this._color=(0,r.fA)(1,0,0,1),this._patternMatrix=(0,a.vt)(),this._programOptions={id:!1,pattern:!1}}dispose(){this._vao&&(this._vao.dispose(),this._vao=null)}drawMany(e,t){const{context:i,painter:a,requestRender:r,allowDelayedRender:s}=e;this._loadWGLResources(e);const l=e.displayLevel,c=e.styleLayer,f=c.backgroundMaterial,d=a.vectorTilesMaterialManager,p=c.getPaintValue("background-color",l),g=c.getPaintValue("background-opacity",l),_=c.getPaintValue("background-pattern",l),y=void 0!==_,m=1|window.devicePixelRatio,M=e.spriteMosaic;let h,U;const v=m>o.C_?2:1,E=this._programOptions;E.pattern=y;const P=d.getMaterialProgram(i,f,E);if(!s||null==r||P.compiled){if(i.bindVAO(this._vao),i.useProgram(P),y){const e=M.getMosaicItemPosition(_,!0);if(null!=e){const{tl:t,br:n,page:a}=e;h=n[0]-t[0],U=n[1]-t[1];const r=M.getPageSize(a);null!=r&&(M.bind(i,u.Cj.LINEAR,a,o.$U),P.setUniform4f("u_tlbr",t[0],t[1],n[0],n[1]),P.setUniform2fv("u_mosaicSize",r),P.setUniform1i("u_texture",o.$U))}P.setUniform1f("u_opacity",g)}else{const e=p[3]*g;this._color[0]=e*p[0],this._color[1]=e*p[1],this._color[2]=e*p[2],this._color[3]=e,P.setUniform4fv("u_color",this._color)}P.setUniform1f("u_depth",c.z||0);for(const e of t){if(P.setUniform1f("u_coord_range",e.rangeX),P.setUniformMatrix3fv("u_dvsMat3",e.transforms.displayViewScreenMat3),y){const t=Math.max(2**(Math.round(l)-e.key.level),1),i=v*e.width*t,a=i/(0,n.yR)(h),r=i/(0,n.yR)(U);this._patternMatrix[0]=a,this._patternMatrix[4]=r,P.setUniformMatrix3fv("u_pattern_matrix",this._patternMatrix)}i.setStencilFunction(u.MT.EQUAL,0,255),i.drawArrays(u.WR.TRIANGLE_STRIP,0,4)}}else r()}_loadWGLResources(e){if(this._vao)return;const{context:t,styleLayer:i}=e,n=i.backgroundMaterial,a=new Int8Array([0,0,1,0,0,1,1,1]),r=l.g.createVertex(t,u._U.STATIC_DRAW,a),o=new c.Z(t,n.getAttributeLocations(),n.getLayoutInfo(),{geometry:r});this._vao=o}}},43106:(e,t,i)=>{i.d(t,{p:()=>o});var n=i(76418),a=i(3986),r=i(93345);class o extends a.A{constructor(){super(...arguments),this._programOptions={id:!1}}dispose(){}drawMany(e,t){const{context:i,displayLevel:a,requiredLevel:o,state:s,painter:l,spriteMosaic:u,styleLayerUID:c,requestRender:f,allowDelayedRender:d}=e;if(!t.some((e=>{var t,i;return null!==(t=null===(i=e.layerData.get(c))||void 0===i?void 0:i.circleIndexCount)&&void 0!==t&&t})))return;const p=e.styleLayer,g=p.circleMaterial,_=l.vectorTilesMaterialManager,y=p.getPaintValue("circle-translate",a),m=p.getPaintValue("circle-translate-anchor",a),M=this._programOptions,h=_.getMaterialProgram(i,g,M);if(d&&null!=f&&!h.compiled)return void f();i.useProgram(h),h.setUniformMatrix3fv("u_displayMat3",m===n.Cq.VIEWPORT?s.displayMat3:s.displayViewMat3),h.setUniform2fv("u_circleTranslation",y),h.setUniform1f("u_depth",p.z),h.setUniform1f("u_antialiasingWidth",1.2);let U=-1;for(const n of t){if(!n.layerData.has(c))continue;n.key.level!==U&&(U=n.key.level,g.setDataUniforms(h,a,p,U,u));const e=n.layerData.get(c);if(!e.circleIndexCount)continue;e.prepareForRendering(i);const t=e.vao;null!=t&&(i.bindVAO(t),h.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3),o!==n.key.level?i.setStencilFunction(r.MT.EQUAL,n.stencilRef,255):i.setStencilFunction(r.MT.GREATER,255,255),i.drawElements(r.WR.TRIANGLES,e.circleIndexCount,r.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.circleIndexStart),n.triangleCount+=e.circleIndexCount/3)}}}},51519:(e,t,i)=>{i.d(t,{I:()=>l});var n=i(76418),a=i(5095),r=i(3986),o=i(93345);const s=1/65536;class l extends r.A{constructor(){super(...arguments),this._fillProgramOptions={id:!1,pattern:!1},this._outlineProgramOptions={id:!1}}dispose(){}drawMany(e,t){const{displayLevel:i,renderPass:n,spriteMosaic:a,styleLayerUID:r}=e;let o=!1;for(const M of t)if(M.layerData.has(r)){const e=M.layerData.get(r);if(e.fillIndexCount>0||e.outlineIndexCount>0){o=!0;break}}if(!o)return;const s=e.styleLayer,l=s.getPaintProperty("fill-pattern"),u=void 0!==l,c=u&&l.isDataDriven;let f;if(u&&!c){const e=l.getValue(i);f=a.getMosaicItemPosition(e,!0)}const d=!u&&s.getPaintValue("fill-antialias",i);let p=!0,g=1;if(!u){const e=s.getPaintProperty("fill-color"),t=s.getPaintProperty("fill-opacity");if((null===e||void 0===e||!e.isDataDriven)&&(null===t||void 0===t||!t.isDataDriven)){const e=s.getPaintValue("fill-color",i);g=s.getPaintValue("fill-opacity",i)*e[3],g>=1&&(p=!1)}}if(p&&"opaque"===n)return;const _=s.getPaintValue("fill-translate",i),y=s.getPaintValue("fill-translate-anchor",i);(p||"translucent"!==n)&&this._drawFill(e,r,s,t,_,y,u,f,c);const m=!s.hasDataDrivenOutlineColor&&s.outlineUsesFillColor&&g<1;d&&"opaque"!==n&&!m&&this._drawOutline(e,r,s,t,_,y)}_drawFill(e,t,i,r,l,u,c,f,d){if(c&&!d&&null==f)return;const{context:p,displayLevel:g,state:_,painter:y,pixelRatio:m,spriteMosaic:M,requestRender:h,allowDelayedRender:U}=e,v=i.fillMaterial,E=y.vectorTilesMaterialManager,P=m>a.C_?2:1,I=this._fillProgramOptions;I.pattern=c;const x=E.getMaterialProgram(p,v,I);if(U&&null!=h&&!x.compiled)return void h();if(p.useProgram(x),null!=f){const{page:e}=f,t=M.getPageSize(e);null!=t&&(M.bind(p,o.Cj.LINEAR,e,a.$U),x.setUniform2fv("u_mosaicSize",t),x.setUniform1i("u_texture",a.$U))}x.setUniformMatrix3fv("u_displayMat3",u===n.Cq.VIEWPORT?_.displayMat3:_.displayViewMat3),x.setUniform2fv("u_fillTranslation",l),x.setUniform1f("u_depth",i.z+s);let R=-1;for(const n of r){if(!n.layerData.has(t))continue;n.key.level!==R&&(R=n.key.level,v.setDataUniforms(x,g,i,R,M));const e=n.layerData.get(t);if(!e.fillIndexCount)continue;e.prepareForRendering(p);const r=e.fillVAO;if(null!=r){if(p.bindVAO(r),x.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3),p.setStencilFunction(o.MT.EQUAL,n.stencilRef,255),c){const e=Math.max(2**(Math.round(g)-n.key.level),1),t=n.rangeX/(P*n.width*e);x.setUniform1f("u_patternFactor",t)}if(d){const t=e.patternMap;if(!t)continue;for(const[e,i]of t){const t=M.getPageSize(e);null!=t&&(M.bind(p,o.Cj.LINEAR,e,a.$U),x.setUniform2fv("u_mosaicSize",t),x.setUniform1i("u_texture",a.$U),p.drawElements(o.WR.TRIANGLES,i[1],o.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]))}}else p.drawElements(o.WR.TRIANGLES,e.fillIndexCount,o.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.fillIndexStart);n.triangleCount+=e.fillIndexCount/3}}}_drawOutline(e,t,i,a,r,l){const{context:u,displayLevel:c,state:f,painter:d,pixelRatio:p,spriteMosaic:g,requestRender:_,allowDelayedRender:y}=e,m=i.outlineMaterial,M=d.vectorTilesMaterialManager,h=.75/p,U=this._outlineProgramOptions,v=M.getMaterialProgram(u,m,U);if(y&&null!=_&&!v.compiled)return void _();u.useProgram(v),v.setUniformMatrix3fv("u_displayMat3",l===n.Cq.VIEWPORT?f.displayMat3:f.displayViewMat3),v.setUniform2fv("u_fillTranslation",r),v.setUniform1f("u_depth",i.z+s),v.setUniform1f("u_outline_width",h);let E=-1;for(const n of a){if(!n.layerData.has(t))continue;n.key.level!==E&&(E=n.key.level,m.setDataUniforms(v,c,i,E,g));const e=n.layerData.get(t);if(e.prepareForRendering(u),!e.outlineIndexCount)continue;const a=e.outlineVAO;null!=a&&(u.bindVAO(a),v.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3),u.setStencilFunction(o.MT.EQUAL,n.stencilRef,255),u.drawElements(o.WR.TRIANGLES,e.outlineIndexCount,o.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*e.outlineIndexStart),n.triangleCount+=e.outlineIndexCount/3)}}}},56012:(e,t,i)=>{i.d(t,{$:()=>s});var n=i(76418),a=i(5095),r=i(3986),o=i(93345);class s extends r.A{constructor(){super(...arguments),this._programOptions={id:!1,pattern:!1,sdf:!1}}dispose(){}drawMany(e,t){const{context:i,displayLevel:r,state:s,painter:l,pixelRatio:u,spriteMosaic:c,styleLayerUID:f,requestRender:d,allowDelayedRender:p}=e;if(!t.some((e=>{var t,i;return null!==(t=null===(i=e.layerData.get(f))||void 0===i?void 0:i.lineIndexCount)&&void 0!==t&&t})))return;const g=e.styleLayer,_=g.lineMaterial,y=l.vectorTilesMaterialManager,m=g.getPaintValue("line-translate",r),M=g.getPaintValue("line-translate-anchor",r),h=g.getPaintProperty("line-pattern"),U=void 0!==h,v=U&&h.isDataDriven;let E,P;if(U&&!v){const e=h.getValue(r);E=c.getMosaicItemPosition(e)}let I=!1;if(!U){const e=g.getPaintProperty("line-dasharray");if(P=void 0!==e,I=P&&e.isDataDriven,P&&!I){const t=e.getValue(r),i=g.getDashKey(t,g.getLayoutValue("line-cap",r));E=c.getMosaicItemPosition(i)}}const x=1/u,R=this._programOptions;R.pattern=U,R.sdf=P;const T=y.getMaterialProgram(i,_,R);if(p&&null!=d&&!T.compiled)return void d();if(i.useProgram(T),T.setUniformMatrix3fv("u_displayViewMat3",s.displayViewMat3),T.setUniformMatrix3fv("u_displayMat3",M===n.Cq.VIEWPORT?s.displayMat3:s.displayViewMat3),T.setUniform2fv("u_lineTranslation",m),T.setUniform1f("u_depth",g.z),T.setUniform1f("u_antialiasing",x),E&&null!=E){const{page:e}=E,t=c.getPageSize(e);null!=t&&(c.bind(i,o.Cj.LINEAR,e,a.$U),T.setUniform2fv("u_mosaicSize",t),T.setUniform1i("u_texture",a.$U))}let S=-1;for(const n of t){if(!n.layerData.has(f))continue;n.key.level!==S&&(S=n.key.level,_.setDataUniforms(T,r,g,S,c));const e=2**(r-S)/u;T.setUniform1f("u_zoomFactor",e);const t=n.layerData.get(f);if(!t.lineIndexCount)continue;t.prepareForRendering(i);const s=t.vao;if(null!=s){if(i.bindVAO(s),T.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3),i.setStencilFunction(o.MT.EQUAL,n.stencilRef,255),v||I){const e=t.patternMap;if(!e)continue;for(const[t,n]of e){const e=c.getPageSize(t);null!=e&&(c.bind(i,o.Cj.LINEAR,t,a.$U),T.setUniform2fv("u_mosaicSize",e),T.setUniform1i("u_texture",a.$U),i.drawElements(o.WR.TRIANGLES,n[1],o.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*n[0]))}}else i.drawElements(o.WR.TRIANGLES,t.lineIndexCount,o.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t.lineIndexStart);n.triangleCount+=t.lineIndexCount/3}}}}},114:(e,t,i)=>{i.d(t,{P:()=>f});var n=i(59422),a=i(62887),r=i(76418),o=i(5095),s=i(40480),l=i(3986),u=i(93345);const c=1/65536;class f extends l.A{constructor(){super(...arguments),this._iconProgramOptions={id:!1,sdf:!1},this._sdfProgramOptions={id:!1},this._spritesTextureSize=(0,n.vt)()}dispose(){}drawMany(e,t){const i=e.styleLayer;this._drawIcons(e,i,t),this._drawText(e,i,t)}_drawIcons(e,t,i){const{context:n,displayLevel:l,painter:u,spriteMosaic:c,state:f,styleLayerUID:d,requestRender:p,allowDelayedRender:g}=e,_=t.iconMaterial,y=u.vectorTilesMaterialManager;let m,M=!1;for(const a of i)if(a.layerData.has(d)&&(m=a.layerData.get(d),m.iconPerPageElementsMap.size>0)){M=!0;break}if(!M)return;const h=t.getPaintValue("icon-translate",l),U=t.getPaintValue("icon-translate-anchor",l);let v=t.getLayoutValue("icon-rotation-alignment",l);v===r.I5.AUTO&&(v=t.getLayoutValue("symbol-placement",l)===r.kt.POINT?r.I5.VIEWPORT:r.I5.MAP);const E=v===r.I5.MAP,P=t.getLayoutValue("icon-keep-upright",l)&&E,I=m.isIconSDF,x=this._iconProgramOptions;x.sdf=I;const R=y.getMaterialProgram(n,_,x);if(g&&null!=p&&!R.compiled)return void p();n.useProgram(R),R.setUniformMatrix3fv("u_displayViewMat3",v===r.I5.MAP?f.displayViewMat3:f.displayMat3),R.setUniformMatrix3fv("u_displayMat3",U===r.Cq.VIEWPORT?f.displayMat3:f.displayViewMat3),R.setUniform2fv("u_iconTranslation",h),R.setUniform1f("u_depth",t.z),R.setUniform1f("u_mapRotation",(0,s.wV)(f.rotation)),R.setUniform1f("u_keepUpright",P?1:0),R.setUniform1f("u_level",10*l),R.setUniform1i("u_texture",o.$U),R.setUniform1f("u_fadeDuration",a.zk/1e3);let T=-1;for(const a of i){if(!a.layerData.has(d))continue;if(a.key.level!==T&&(T=a.key.level,_.setDataUniforms(R,l,t,T,c)),m=a.layerData.get(d),0===m.iconPerPageElementsMap.size)continue;m.prepareForRendering(n),m.updateOpacityInfo();const i=m.iconVAO;if(null!=i){n.bindVAO(i),R.setUniformMatrix3fv("u_dvsMat3",a.transforms.displayViewScreenMat3),R.setUniform1f("u_time",(performance.now()-m.lastOpacityUpdate)/1e3);for(const[t,i]of m.iconPerPageElementsMap)this._renderIconRange(e,R,i,t,a)}}}_renderIconRange(e,t,i,n,a){const{context:r,spriteMosaic:s}=e;this._spritesTextureSize[0]=s.getWidth(n)/4,this._spritesTextureSize[1]=s.getHeight(n)/4,t.setUniform2fv("u_mosaicSize",this._spritesTextureSize),s.bind(r,u.Cj.LINEAR,n,o.$U),this._setStencilState(e,a),r.drawElements(u.WR.TRIANGLES,i[1],u.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*i[0]),a.triangleCount+=i[1]/3}_drawText(e,t,i){const{context:l,displayLevel:u,glyphMosaic:f,painter:d,pixelRatio:p,spriteMosaic:g,state:_,styleLayerUID:y,requestRender:m,allowDelayedRender:M}=e,h=t.textMaterial,U=d.vectorTilesMaterialManager;let v,E=!1;for(const n of i)if(n.layerData.has(y)&&(v=n.layerData.get(y),v.glyphPerPageElementsMap.size>0)){E=!0;break}if(!E)return;const P=t.getPaintProperty("text-opacity");if(P&&!P.isDataDriven&&0===P.getValue(u))return;const I=t.getPaintProperty("text-color"),x=!I||I.isDataDriven||I.getValue(u)[3]>0,R=t.getPaintProperty("text-halo-width"),T=t.getPaintProperty("text-halo-color"),S=(!R||R.isDataDriven||R.getValue(u)>0)&&(!T||T.isDataDriven||T.getValue(u)[3]>0);if(!x&&!S)return;let w=t.getLayoutValue("text-rotation-alignment",u);w===r.I5.AUTO&&(w=t.getLayoutValue("symbol-placement",u)===r.kt.POINT?r.I5.VIEWPORT:r.I5.MAP);const A=w===r.I5.MAP,D=t.getLayoutValue("text-keep-upright",u)&&A,V=.8*3/p;this._glyphTextureSize||(this._glyphTextureSize=(0,n.fA)(f.width/4,f.height/4));const L=t.getPaintValue("text-translate",u),N=t.getPaintValue("text-translate-anchor",u),O=this._sdfProgramOptions,C=U.getMaterialProgram(l,h,O);if(M&&null!=m&&!C.compiled)return void m();l.useProgram(C),C.setUniformMatrix3fv("u_displayViewMat3",w===r.I5.MAP?_.displayViewMat3:_.displayMat3),C.setUniformMatrix3fv("u_displayMat3",N===r.Cq.VIEWPORT?_.displayMat3:_.displayViewMat3),C.setUniform2fv("u_textTranslation",L),C.setUniform1f("u_depth",t.z+c),C.setUniform2fv("u_mosaicSize",this._glyphTextureSize),C.setUniform1f("u_mapRotation",(0,s.wV)(_.rotation)),C.setUniform1f("u_keepUpright",D?1:0),C.setUniform1f("u_level",10*u),C.setUniform1i("u_texture",o.mg),C.setUniform1f("u_antialiasingWidth",V),C.setUniform1f("u_fadeDuration",a.zk/1e3);let b=-1;for(const n of i){if(!n.layerData.has(y))continue;if(n.key.level!==b&&(b=n.key.level,h.setDataUniforms(C,u,t,b,g)),v=n.layerData.get(y),0===v.glyphPerPageElementsMap.size)continue;v.prepareForRendering(l),v.updateOpacityInfo();const i=v.textVAO;if(null==i)continue;l.bindVAO(i),C.setUniformMatrix3fv("u_dvsMat3",n.transforms.displayViewScreenMat3),this._setStencilState(e,n);const a=(performance.now()-v.lastOpacityUpdate)/1e3;C.setUniform1f("u_time",a),v.glyphPerPageElementsMap.forEach(((e,t)=>{this._renderGlyphRange(l,e,t,f,C,S,x,n)}))}}_renderGlyphRange(e,t,i,n,a,r,s,l){n.bind(e,u.Cj.LINEAR,i,o.mg),r&&(a.setUniform1f("u_halo",1),e.drawElements(u.WR.TRIANGLES,t[1],u.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3),s&&(a.setUniform1f("u_halo",0),e.drawElements(u.WR.TRIANGLES,t[1],u.pe.UNSIGNED_INT,Uint32Array.BYTES_PER_ELEMENT*t[0]),l.triangleCount+=t[1]/3)}_setStencilState(e,t){const{context:i,is3D:n,stencilSymbols:a}=e;if(i.setStencilTestEnabled(!0),a)return i.setStencilWriteMask(255),void i.setStencilFunction(u.MT.ALWAYS,t.stencilRef,255);i.setStencilWriteMask(0),n?i.setStencilFunction(u.MT.EQUAL,t.stencilRef,255):i.setStencilFunction(u.MT.GREATER,255,255)}}},78403:(e,t,i)=>{i.d(t,{Z:()=>n});class n{constructor(e){this._readFile=e}resolveIncludes(e){return this._resolve(e)}_resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Map;if(t.has(e))return t.get(e);const i=this._read(e);if(!i)throw new Error("cannot find shader file ".concat(e));const n=/^[^\S\n]*#include\s+<(\S+)>[^\S\n]?/gm;let a=n.exec(i);const r=[];for(;null!=a;)r.push({path:a[1],start:a.index,length:a[0].length}),a=n.exec(i);let o=0,s="";return r.forEach((e=>{s+=i.slice(o,e.start),s+=t.has(e.path)?"":this._resolve(e.path,t),o=e.start+e.length})),s+=i.slice(o),t.set(e,s),s}_read(e){return this._readFile(e)}}}}]);
//# sourceMappingURL=6167.a4bf90aa.chunk.js.map