{"version":3,"file":"static/js/1720.2605cdeb.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/interactive/support/utils.js","../node_modules/@arcgis/core/views/interactive/GraphicManipulator.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{pt2px as o}from\"../../../core/screenUtils.js\";function s(s){let t=0,a=0,e=0;return s?(\"cim\"===s.type&&s.data.symbol&&\"symbolLayers\"in s.data.symbol&&s.data.symbol.symbolLayers&&s.data.symbol.symbolLayers.map((o=>{\"CIMVectorMarker\"===o.type&&o.anchorPoint&&(Math.abs(o.anchorPoint.x)>t&&(t=o.anchorPoint.x),Math.abs(o.anchorPoint.y)>a&&(a=o.anchorPoint.y),null!=o.size&&o.size>e&&(e=o.size))})),t=o(t),a=o(a),e=o(e),{offsetX:t,offsetY:a,size:e}):{offsetX:t,offsetY:a,size:e}}export{s as getSymbolInfo};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../chunks/tslib.es6.js\";import e from\"../../core/Accessor.js\";import o from\"../../core/Evented.js\";import{watch as i,sync as s}from\"../../core/reactiveUtils.js\";import{screenPointObjectToArray as r,pt2px as l,createScreenPointArray as n}from\"../../core/screenUtils.js\";import{property as a}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as c}from\"../../core/accessorSupport/decorators/subclass.js\";import{squaredDistance as h}from\"../../core/libs/gl-matrix-2/math/vec2.js\";import{p}from\"../../chunks/vec32.js\";import{create as m}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{canProjectWithoutEngine as u,project as y}from\"../../geometry/projection.js\";import{projectPointToVector as g}from\"../../geometry/projection/projectPointToVector.js\";import{getGraphicEffectiveElevationMode as b}from\"../../support/elevationInfoUtils.js\";import{getDefaultSymbol2D as d}from\"../../symbols/support/defaults.js\";import f from\"../../symbols/support/ElevationInfo.js\";import{getSymbolInfo as _}from\"./support/utils.js\";import{intersectsDrapedGeometry as v}from\"../support/drapedUtils.js\";let S=class extends e{set graphic(t){this._circleCollisionCache=null,this._originalSymbol=t.symbol,this._set(\"graphic\",t),this.attachSymbolChanged()}get elevationInfo(){const{layer:t}=this.graphic,e=t&&\"elevationInfo\"in t?t.elevationInfo:null,o=b(this.graphic),i=e?e.offset:0;return new f({mode:o,offset:i})}set focusedSymbol(t){t!==this._get(\"focusedSymbol\")&&(this._set(\"focusedSymbol\",t),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(t){t!==this._get(\"grabbing\")&&(this._set(\"grabbing\",t),this._updateGraphicSymbol())}set hovering(t){t!==this._get(\"hovering\")&&(this._set(\"hovering\",t),this._updateGraphicSymbol())}set selected(t){t!==this._get(\"selected\")&&(this._set(\"selected\",t),this._updateGraphicSymbol(),this.events.emit(\"select-changed\",{action:t?\"select\":\"deselect\"}))}get _focused(){return this._get(\"hovering\")||this._get(\"grabbing\")}constructor(t){super(t),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.consumesClicks=!0,this.events=new o.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set(\"view\",null)}intersectionDistance(t){const e=this.graphic;if(!1===e.visible)return null;const o=e.geometry;if(null==o)return null;const i=this._get(\"focusedSymbol\"),s=null!=i?i:e.symbol;return\"2d\"===this.view.type?this._intersectDistance2D(this.view,t,o,s):this._intersectDistance3D(this.view,t,e)}attach(){this.attachSymbolChanged(),null!=this.layer&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),null!=this.layer&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=i((()=>this.graphic?.symbol),(t=>{null!=t&&t!==this.focusedSymbol&&t!==this._originalSymbol&&(this._originalSymbol=t,this._focused&&null!=this.focusedSymbol&&(this.graphic.symbol=this.focusedSymbol))}),s)}detachSymbolChanged(){null!=this._graphicSymbolChangedHandle&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&null!=this.focusedSymbol?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(t,e,o,i){if(null==(i=i||d(o)))return null;const s=1;let n=this._circleCollisionCache;if(\"point\"===o.type&&\"cim\"===i.type&&\"CIMPointSymbol\"===i.data.symbol?.type&&i.data.symbol.symbolLayers){const{offsetX:l,offsetY:n,size:a}=_(i),c=r(e,j),p=a/2,m=t.toScreen(o),u=m.x+l,y=m.y+n;return h(c,[u,y])<p*p?s:null}if(\"point\"!==o.type||\"simple-marker\"!==i.type)return v(e,o,t)?s:null;if(null==n||!n.originalPoint.equals(o)){const e=o,s=t.spatialReference;if(u(e.spatialReference,s)){const t=y(e,s);n={originalPoint:e.clone(),mapPoint:t,radiusPx:l(i.size)},this._circleCollisionCache=n}}if(null!=n){const o=r(e,j),a=t.toScreen?.(n.mapPoint);if(!a)return null;const c=n.radiusPx,p=a.x+l(i.xoffset),m=a.y-l(i.yoffset);return h(o,[p,m])<c*c?s:null}return null}_intersectDistance3D(t,e,o){const i=t.toMap(e,{include:[o]});return i&&g(i,C,t.renderSpatialReference)?p(C,t.state.camera.eye):null}};t([a({constructOnly:!0,nonNullable:!0})],S.prototype,\"graphic\",null),t([a()],S.prototype,\"elevationInfo\",null),t([a({constructOnly:!0,nonNullable:!0})],S.prototype,\"view\",void 0),t([a({value:null})],S.prototype,\"focusedSymbol\",null),t([a({constructOnly:!0})],S.prototype,\"layer\",void 0),t([a()],S.prototype,\"interactive\",void 0),t([a()],S.prototype,\"selectable\",void 0),t([a()],S.prototype,\"grabbable\",void 0),t([a({value:!1})],S.prototype,\"grabbing\",null),t([a()],S.prototype,\"dragging\",void 0),t([a()],S.prototype,\"hovering\",null),t([a({value:!1})],S.prototype,\"selected\",null),t([a()],S.prototype,\"cursor\",void 0),S=t([c(\"esri.views.interactive.GraphicManipulator\")],S);const C=m(),j=n();export{S as GraphicManipulator};\n"],"names":["s","t","a","e","type","data","symbol","symbolLayers","map","o","anchorPoint","Math","abs","x","y","size","offsetX","offsetY","S","graphic","this","_circleCollisionCache","_originalSymbol","_set","attachSymbolChanged","elevationInfo","layer","b","i","offset","f","mode","focusedSymbol","_get","_updateGraphicSymbol","grabbableForEvent","grabbing","hovering","selected","events","emit","action","_focused","constructor","super","interactive","selectable","grabbable","dragging","cursor","consumesClicks","EventEmitter","_graphicSymbolChangedHandle","destroy","detachSymbolChanged","_resetGraphicSymbol","intersectionDistance","visible","geometry","view","_intersectDistance2D","_intersectDistance3D","attach","add","detach","remove","onElevationChange","onViewChange","d","n","l","_","c","r","j","p","m","toScreen","u","h","v","originalPoint","equals","spatialReference","clone","mapPoint","radiusPx","xoffset","yoffset","toMap","include","g","C","renderSpatialReference","state","camera","eye","constructOnly","nonNullable","prototype","value"],"sourceRoot":""}