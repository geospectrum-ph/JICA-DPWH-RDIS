{"version":3,"file":"static/js/1264.07dcb38d.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/geometry/support/lineSegment.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/sceneLayerSnappingUtils.js","../node_modules/@arcgis/core/views/interactive/snapping/featureSources/sceneLayerSource/SceneLayerSnappingSourceWorker.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{clamp as t}from\"../../core/mathUtils.js\";import{ObjectStack as r}from\"../../core/ObjectStack.js\";import{c as n,f as o,m as e,j as i,g as c,q as s,a}from\"../../chunks/vec32.js\";import{clone as u,create as g}from\"../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{sv3d as f}from\"./vectorStacks.js\";function v(t){return t?{origin:u(t.origin),vector:u(t.vector)}:{origin:g(),vector:g()}}function m(t,r){const n=S.get();return n.origin=t,n.vector=r,n}function p(t,r=v()){return b(t.origin,t.vector,r)}function b(t,r,o=v()){return n(o.origin,t),n(o.vector,r),o}function h(t,r,e=v()){return n(e.origin,t),o(e.vector,r,t),e}function j(r,n){const c=o(f.get(),n,r.origin),s=e(r.vector,c),a=e(r.vector,r.vector),u=t(s/a,0,1),g=o(f.get(),i(f.get(),r.vector,u),c);return e(g,g)}function M(t,r,n){return A(t,r,0,1,n)}function l(t,r,n){return c(n,t.origin,i(n,t.vector,r))}function A(r,n,a,u,g){const{vector:v,origin:m}=r,p=o(f.get(),n,m),b=e(v,p)/s(v);return i(g,v,t(b,a,u)),c(g,g,r.origin)}function B(t,r){if(k(t,m(r.origin,r.direction),!1,x)){const{tA:r,pB:n,distance2:o}=x;if(r>=0&&r<=1)return o;if(r<0)return a(t.origin,n);if(r>1)return a(c(f.get(),t.origin,t.vector),n)}return null}function d(t,r,o){return!!k(t,r,!0,x)&&(n(o,x.pA),!0)}function k(r,n,o,e){const i=1e-6,s=r.origin,u=c(f.get(),s,r.vector),g=n.origin,v=c(f.get(),g,n.vector),m=f.get(),p=f.get();if(m[0]=s[0]-g[0],m[1]=s[1]-g[1],m[2]=s[2]-g[2],p[0]=v[0]-g[0],p[1]=v[1]-g[1],p[2]=v[2]-g[2],Math.abs(p[0])<i&&Math.abs(p[1])<i&&Math.abs(p[2])<i)return!1;const b=f.get();if(b[0]=u[0]-s[0],b[1]=u[1]-s[1],b[2]=u[2]-s[2],Math.abs(b[0])<i&&Math.abs(b[1])<i&&Math.abs(b[2])<i)return!1;const h=m[0]*p[0]+m[1]*p[1]+m[2]*p[2],j=p[0]*b[0]+p[1]*b[1]+p[2]*b[2],M=m[0]*b[0]+m[1]*b[1]+m[2]*b[2],l=p[0]*p[0]+p[1]*p[1]+p[2]*p[2],A=(b[0]*b[0]+b[1]*b[1]+b[2]*b[2])*l-j*j;if(Math.abs(A)<i)return!1;let B=(h*j-M*l)/A,d=(h+j*B)/l;o&&(B=t(B,0,1),d=t(d,0,1));const k=f.get(),x=f.get();return k[0]=s[0]+B*b[0],k[1]=s[1]+B*b[1],k[2]=s[2]+B*b[2],x[0]=g[0]+d*p[0],x[1]=g[1]+d*p[1],x[2]=g[2]+d*p[2],e.tA=B,e.tB=d,e.pA=k,e.pB=x,e.distance2=a(k,x),!0}const x={tA:0,tB:0,pA:g(),pB:g(),distance2:0},S=new r((()=>v()));export{d as closestLineSegmentPoint,B as closestRayDistance2,p as copy,v as create,j as distance2,h as fromPoints,b as fromValues,l as pointAt,M as projectPoint,A as projectPointClamp,m as wrap};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{r as s,p as r,g as o}from\"../../../../../chunks/vec32.js\";import{c,g as n}from\"../../../../../chunks/sphere.js\";const t=1e3;function e(t,e,a){const p=c(),m=n(p);return s(m,m,t,.5),s(m,m,e,.5),p[3]=r(m,t),o(m,m,a),p}export{e as boundsFromEdge,t as maxCandidateCount};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/has.js\";import\"../../../../../core/RandomLCG.js\";import\"../../../../../core/Error.js\";import{subclass as o}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{g as s,p as n}from\"../../../../../chunks/vec32.js\";import{create as i,clone as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as c,fromPoints as d,projectPoint as a}from\"../../../../../geometry/support/lineSegment.js\";import{g as p,n as m}from\"../../../../../chunks/sphere.js\";import u from\"../../../../3d/webgl-engine/lib/Octree.js\";import{extractComponentsEdgeLocationsLayout as h}from\"../../../../3d/webgl-engine/lib/edgeRendering/edgeProcessing.js\";import{maxCandidateCount as g,boundsFromEdge as l}from\"./sceneLayerSnappingUtils.js\";let f=class{constructor(){this._idToComponent=new Map,this._components=new u((e=>e.bounds)),this._edges=new u((e=>e.bounds)),this._tmpLineSegment=c(),this._tmpP1=i(),this._tmpP2=i(),this._tmpP3=i(),this.remoteClient=null}async fetchCandidates(e,o){await Promise.resolve(),t(o),await this._ensureEdgeLocations(e,o);const s=[];return this._edges.forEachNeighbor((t=>(this._addCandidates(e,t,s),s.length<g)),e.bounds),{result:{candidates:s}}}async _ensureEdgeLocations(e,t){const o=[];if(this._components.forEachNeighbor((e=>{if(null==e.info){const{id:t,uid:s}=e;o.push({id:t,uid:s})}return!0}),e.bounds),!o.length)return;const s={components:o},n=await this.remoteClient.invoke(\"fetchAllEdgeLocations\",s,t??{});for(const i of n.components)this._setFetchEdgeLocations(i)}async add(e){const t=new j(e.id,e.bounds);return this._idToComponent.set(t.id,t),this._components.add([t]),{result:{}}}async remove(e){const t=this._idToComponent.get(e.id);if(t){const e=[];this._edges.forEachNeighbor((o=>(o.component===t&&e.push(o),!0)),t.bounds),this._edges.remove(e),this._components.remove([t]),this._idToComponent.delete(t.id)}return{result:{}}}_setFetchEdgeLocations(e){const t=this._idToComponent.get(e.id);if(null==t||e.uid!==t.uid)return;const o=h.createView(e.locations),s=new Array(o.count),n=i(),r=i();for(let i=0;i<o.count;i++){o.position0.getVec(i,n),o.position1.getVec(i,r);const c=l(n,r,e.origin),d=new w(t,i,c);s[i]=d}this._edges.add(s);const{objectIds:c,origin:d}=e;t.info={locations:o,objectIds:c,origin:d}}_addCandidates(e,t,o){const{info:n}=t.component,{origin:i,objectIds:r}=n,c=n.locations,d=c.position0.getVec(t.index,this._tmpP1),a=c.position1.getVec(t.index,this._tmpP2);s(d,d,i),s(a,a,i);const p=r[c.componentIndex.get(t.index)];this._addEdgeCandidate(e,p,d,a,o),b(e,p,d,o),b(e,p,a,o)}_addEdgeCandidate(e,t,o,s,i){if(!e.returnEdge)return;const c=p(e.bounds),u=d(o,s,this._tmpLineSegment),h=a(u,c,this._tmpP3);m(e.bounds,h)&&i.push({type:\"edge\",objectId:t,target:r(h),distance:n(c,h),start:r(o),end:r(s)})}};f=e([o(\"esri.views.interactive.snapping.featureSources.sceneLayerSource.SceneLayerSnappingSourceWorker\")],f);const _=f;function b(e,t,o,s){if(!e.returnVertex||!m(e.bounds,o))return;const i=p(e.bounds);s.push({type:\"vertex\",objectId:t,target:r(o),distance:n(i,o)})}class j{constructor(e,t){this.id=e,this.bounds=t,this.info=null,this.uid=++j.uid}}j.uid=0;class w{constructor(e,t,o){this.component=e,this.index=t,this.bounds=o}}export{_ as default};\n"],"names":["v","t","origin","u","vector","g","p","r","arguments","length","undefined","b","o","n","h","e","j","c","f","get","s","a","i","M","A","l","m","B","k","S","direction","x","tA","pB","distance2","d","pA","Math","abs","tB","constructor","this","_idToComponent","Map","_components","bounds","_edges","_tmpLineSegment","_tmpP1","_tmpP2","_tmpP3","remoteClient","fetchCandidates","Promise","resolve","_ensureEdgeLocations","forEachNeighbor","_addCandidates","result","candidates","info","id","uid","push","components","invoke","_setFetchEdgeLocations","add","set","remove","component","delete","createView","locations","Array","count","position0","getVec","position1","w","objectIds","index","componentIndex","_addEdgeCandidate","returnEdge","type","objectId","target","distance","start","end","_","returnVertex"],"sourceRoot":""}