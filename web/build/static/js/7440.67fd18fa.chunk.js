"use strict";(self.webpackChunkRDIS_Web_Application=self.webpackChunkRDIS_Web_Application||[]).push([[7440],{37440:(n,t,e)=>{e.d(t,{convertMeshVertexSpace:()=>u});var r=e(50076),o=e(53084),l=e(50346),i=e(56623),a=e(53848);async function u(n,t,e){await Promise.resolve(),(0,l.Te)(e);const u=(0,a.UR)(n,t);if(!u)throw new r.A("meshUtils:convertVertexSpace()","Failed to convert to provided vertex space due to projection errors");const s=n.cloneAndModifyVertexAttributes(new i.H({...u,uv:(0,o.o8)(n.vertexAttributes.uv),color:(0,o.o8)(n.vertexAttributes.color)}),t);return s.transform=null,s}},53848:(n,t,e)=>{e.d(t,{UR:()=>h,p5:()=>x,xK:()=>O});var r=e(76460),o=e(15941),l=e(31633),i=e(63919),a=e(44680),u=e(34761),s=e(13191),c=e(20664),f=e(9392),v=e(98510),p=e(5809),g=e(64232),A=e(99773),d=e(45136),m=e(26375);const w=()=>r.A.getLogger("esri.geometry.support.meshUtils.vertexSpaceConversion");function x(n,t,e){let{vertexSpace:r,spatialReference:o}=e;if("georeferenced"===r.type){const e=n;if(!(0,g.g)(t,e,o))return!1;const{origin:l}=r;return(0,c.f)(n,e,l),!0}const l=(0,v.lO)(o),i=n;if(!(0,g.g)(t,i,l))return!1;const{origin:a}=r,s=F;if(!(0,p.l)(o,a,s,l))return!1;const f=(0,u.B8)(F,s);return null!=f&&((0,c.h)(n,i,f),!0)}function h(n,t,e){const{vertexSpace:r,transform:l,vertexAttributes:a}=n,f=C(n.spatialReference,e,T.SOURCE|T.TARGET);if((0,A.yJ)(r,t)&&(!l||(0,u.t2)(l.localMatrix,s.zK))&&(0,o.Io)(f,1)){const{position:n,normal:t,tangent:r}=a,o=null===e||void 0===e?void 0:e.allowBufferReuse;return{position:o?n:n.slice(),normal:o?t:null===t||void 0===t?void 0:t.slice(),tangent:o?r:null===r||void 0===r?void 0:r.slice()}}switch(n.vertexSpace.type){case"local":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:i}=n,{origin:a}=t;const s=(0,v.lO)(l);if(!(0,p.l)(l,a,S,s))return(0,m.CN)(w(),l,s),null;if(i&&(0,u.lw)(S,S,i.localMatrix),!(0,p.l)(l,e,b,s))return(0,m.CN)(w(),s,l),null;(0,u.B8)(b,b);const c=(0,u.lw)(S,b,S);return y(c,l,r,T.SOURCE|T.TARGET),R(o,c)}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{spatialReference:o,vertexAttributes:l,transform:i}=n,{origin:a}=t;const s=(0,v.lO)(o);if(!(0,p.l)(o,a,S,s))return(0,m.CN)(w(),o,s),null;i&&(0,u.lw)(S,S,i.localMatrix),y(S,o,r,T.SOURCE);const f=new Float64Array(l.position.length),g=function(n,t,e,r){(0,d.a)(r,n,t);const o=new Float64Array(n.length);return(0,m.$5)(r,o,e)?o:((0,m.CN)(w(),(0,v.lO)(e),e),null)}(l.position,S,o,f);if(!g)return null;const A=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,m.qs)(e,l,r),(0,m.si)(l,n,t,o,l)?l:((0,m.CN)(w(),(0,v.lO)(o),o),null)}(g,f,l.normal,S,o);if(l.normal&&!A)return null;const x=function(n,t,e,r,o){if(null==e)return null;const l=new Float32Array(e.length);return(0,m.KM)(e,l,r),(0,m.Mv)(l,n,t,o,l)?l:((0,m.CN)(w(),(0,v.lO)(o),o),null)}(g,f,l.tangent,S,o);if(l.tangent&&!x)return null;if(e){const n=(0,c.k)(E,e);(0,d.b)(g,g,n)}return{position:g,normal:A,tangent:x}}(n,n.vertexSpace,t.origin,e);case"georeferenced":return"local"===t.type?function(n,t,e,r){let{vertexAttributes:o,spatialReference:l,transform:a}=n,{origin:s}=t;const c=(0,v.lO)(l);if(!(0,p.l)(l,e,S,c))return(0,m.CN)(w(),l,c),null;const f=1/C(l,r,T.TARGET);(0,u.hs)(S,S,[f,f,f]);const g=(0,u.B8)(b,S),{position:A,normal:x,tangent:h}=function(n,t,e){if(!t)return n;if(!e){const{position:e,normal:r,tangent:o}=n;return{position:(0,d.b)(new Float64Array(e.length),e,t),tangent:o,normal:r}}const r=R(n,e.localMatrix);return(0,d.b)(r.position,r.position,t),r}(o,s,a),y=new Float64Array(A.length),O=function(n,t,e,r){const o=(0,m.gr)(n,t,r);if(!o)return(0,m.CN)(w(),t,(0,v.lO)(t)),null;const l=new Float64Array(o.length);return(0,d.a)(l,o,e),l}(A,l,g,y);if(!O)return null;const E=(0,i.Ge)(N,g),F=function(n,t,e,r,o,l){if(null==n)return null;const i=null!==l&&void 0!==l?l:new Float32Array(n.length);return(0,m.X4)(n,t,e,r,i)?((0,d.t)(i,i,o),i):((0,m.CN)(w(),r,(0,v.lO)(r)),null)}(x,A,y,l,E,x!==o.normal?x:void 0);if(!F&&x)return null;const U=function(n,t,e,r,o,l){if(null==n)return null;const i=null!==l&&void 0!==l?l:new Float32Array(n.length);return(0,m.xA)(n,t,e,r,i)?((0,d.t)(i,i,o,4),i):((0,m.CN)(w(),r,(0,v.lO)(r)),null)}(h,A,y,l,E,h!==o.tangent?h:void 0);return!U&&h?null:{position:O,normal:F,tangent:U}}(n,n.vertexSpace,t.origin,e):function(n,t,e,r){let{vertexAttributes:o,transform:l,spatialReference:i}=n,{origin:a}=t;const{position:u,normal:s,tangent:f}=l?R(o,l.localMatrix):o,v=new Float64Array(u.length);let p=u;if(a&&(p=(0,d.b)(v,p,a)),e){const n=(0,c.k)(E,e);p=(0,d.b)(v,p,n)}C(i,r,T.NONE);const g=null===r||void 0===r?void 0:r.allowBufferReuse;return{position:p!==o.position||g?p:p.slice(),normal:s!==o.normal||g?s:null===s||void 0===s?void 0:s.slice(),tangent:f!==o.tangent||g?f:null===f||void 0===f?void 0:f.slice()}}(n,n.vertexSpace,t.origin,e)}}function R(n,t){const e=new Float64Array(n.position.length);(0,d.a)(e,n.position,t);const r=n.normal?new Float32Array(n.normal.length):null,o=n.tangent?new Float32Array(n.tangent.length):null;return r&&n.normal&&(0,m.qs)(n.normal,r,t),o&&n.tangent&&(0,m.KM)(n.tangent,o,t),{position:e,normal:r,tangent:o}}function y(n,t,e,r){const o=C(t,e,r);1!==o&&(0,u.hs)(n,n,[o,o,o])}function C(n,t,e){const r=!!(e&T.SOURCE),o=!!(e&T.TARGET),l=null===t||void 0===t?void 0:t.sourceUnit,i=null===t||void 0===t?void 0:t.targetUnit;if(!l&&!i)return 1;let a=O(l,n);!r&&l&&1!==a&&(w().warn("source unit conversion not supported"),a=1);let u=1/O(i,n);return!o&&i&&1!==u&&(w().warn("target unit conversion not supported"),u=1),a*u}function O(n,t){if(null==n)return 1;const e=(0,l.KX)(t);return 1/(0,l.oU)(e,"meters",n)}const S=(0,s.vt)(),b=(0,s.vt)(),N=(0,a.vt)(),E=(0,f.vt)(),F=(0,s.vt)();var T,U;(U=T||(T={}))[U.NONE=0]="NONE",U[U.SOURCE=1]="SOURCE",U[U.TARGET=2]="TARGET"}}]);
//# sourceMappingURL=7440.67fd18fa.chunk.js.map