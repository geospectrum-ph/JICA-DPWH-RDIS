"use strict";(self.webpackChunkRDIS_Web_Application=self.webpackChunkRDIS_Web_Application||[]).push([[1296],{77555:(t,e,i)=>{i.d(e,{$:()=>s,s:()=>r});const s=15.5,r=1024},83367:(t,e,i)=>{i.d(e,{c:()=>h,k:()=>l});var s=i(14522),r=i(15941),n=i(77555);const a=t=>"vertical"===t||"horizontal"===t||"cross"===t||"esriSFSCross"===t||"esriSFSVertical"===t||"esriSFSHorizontal"===t;function h(t,e,i){const s=e.style,n=(0,r.yR)(Math.ceil(i)),h=a(s)?8*n:16*n,l=2*n;t.width=h,t.height=h;const o=t.getContext("2d");o.strokeStyle="#FFFFFF",o.lineWidth=n,o.beginPath(),"vertical"!==s&&"cross"!==s&&"esriSFSCross"!==s&&"esriSFSVertical"!==s||(o.moveTo(h/2,-l),o.lineTo(h/2,h+l)),"horizontal"!==s&&"cross"!==s&&"esriSFSCross"!==s&&"esriSFSHorizontal"!==s||(o.moveTo(-l,h/2),o.lineTo(h+l,h/2)),"backward-diagonal"!==s&&"diagonal-cross"!==s&&"esriSFSDiagonalCross"!==s&&"esriSFSBackwardDiagonal"!==s||(o.moveTo(-l,-l),o.lineTo(h+l,h+l),o.moveTo(h-l,-l),o.lineTo(h+l,l),o.moveTo(-l,h-l),o.lineTo(l,h+l)),"forward-diagonal"!==s&&"diagonal-cross"!==s&&"esriSFSForwardDiagonal"!==s&&"esriSFSDiagonalCross"!==s||(o.moveTo(h+l,-l),o.lineTo(-l,h+l),o.moveTo(l,-l),o.lineTo(-l,l),o.moveTo(h+l,h-l),o.lineTo(h-l,h+l)),o.stroke();const c=o.getImageData(0,0,t.width,t.height),u=new Uint8Array(c.data);let d;for(let r=0;r<u.length;r+=4)d=u[r+3]/255,u[r]=u[r]*d,u[r+1]=u[r+1]*d,u[r+2]=u[r+2]*d;return[u,t.width,t.height,n]}function l(t,e){null==t&&(t=[]);const i="Butt"===e,r="Square"===e,a=!i&&!r;t.length%2==1&&(t=[...t,...t]);const h=n.$,l=2*h;let o=0;for(const s of t)o+=s;const c=Math.round(o*h),u=new Float32Array(c*l),d=.5*h;let g=0,_=0,p=.5,y=!0;for(const s of t){for(g=_,_+=s*h;p<=_;){let t=.5;for(;t<l;){const e=(t-.5)*c+p-.5,s=a?(t-h)*(t-h):Math.abs(t-h);u[e]=y?i?Math.max(Math.max(g+d-p,s),Math.max(p-_+d,s)):s:a?Math.min((p-g)*(p-g)+s,(p-_)*(p-_)+s):r?Math.min(Math.max(p-g,s),Math.max(_-p,s)):Math.min(Math.max(p-g+d,s),Math.max(_+d-p,s)),t++}p++}y=!y}const f=u.length,v=new Uint8Array(4*f);for(let n=0;n<f;++n){const t=(a?Math.sqrt(u[n]):u[n])/h;(0,s.U)(t,v,4*n)}return[v,c,l]}},92678:(t,e,i)=>{i.d(e,{d:()=>b});var s=i(30726),r=i(50346),n=i(90534),a=i(16783),h=i(15671);class l{constructor(t,e){this._width=0,this._height=0,this._free=[],this._width=t,this._height=e,this._free.push(new h.A(0,0,t,e))}get width(){return this._width}get height(){return this._height}allocate(t,e){if(t>this._width||e>this._height)return new h.A;let i=null,s=-1;for(let r=0;r<this._free.length;++r){const n=this._free[r];t<=n.width&&e<=n.height&&(null===i||n.y<=i.y&&n.x<=i.x)&&(i=n,s=r)}return null===i?new h.A:(this._free.splice(s,1),i.width<i.height?(i.width>t&&this._free.push(new h.A(i.x+t,i.y,i.width-t,e)),i.height>e&&this._free.push(new h.A(i.x,i.y+e,i.width,i.height-e))):(i.width>t&&this._free.push(new h.A(i.x+t,i.y,i.width-t,i.height)),i.height>e&&this._free.push(new h.A(i.x,i.y+e,t,i.height-e))),new h.A(i.x,i.y,t,e))}release(t){for(let e=0;e<this._free.length;++e){const i=this._free[e];if(i.y===t.y&&i.height===t.height&&i.x+i.width===t.x)i.width+=t.width;else if(i.x===t.x&&i.width===t.width&&i.y+i.height===t.y)i.height+=t.height;else if(t.y===i.y&&t.height===i.height&&t.x+t.width===i.x)i.x=t.x,i.width+=t.width;else{if(t.x!==i.x||t.width!==i.width||t.y+t.height!==i.y)continue;i.y=t.y,i.height+=t.height}this._free.splice(e,1),this.release(t)}this._free.push(t)}}var o=i(93345),c=i(98433),u=i(96673);class d{constructor(t,e,i){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=t,this.height=e,this._glyphSource=i,this._binPack=new l(t-4,e-4),this._glyphData.push(new Uint8Array(t*e)),this._dirties.push(!0),this._textures.push(void 0)}getGlyphItems(t,e){const i=[],s=this._glyphSource,r=new Set,n=1/256;for(const h of e){const t=Math.floor(h*n);r.add(t)}const a=[];return r.forEach((e=>{const i=t+e;if(this._rangePromises.has(i))a.push(this._rangePromises.get(i));else{const r=s.getRange(t,e).then((()=>{this._rangePromises.delete(i)}),(()=>{this._rangePromises.delete(i)}));this._rangePromises.set(i,r),a.push(r)}})),Promise.all(a).then((()=>{let r=this._glyphIndex[t];r||(r={},this._glyphIndex[t]=r);for(const n of e){const e=r[n];if(e){i[n]={sdf:!0,rect:e.rect,metrics:e.metrics,page:e.page,code:n};continue}const a=s.getGlyph(t,n);if(null===a||void 0===a||!a.metrics)continue;const o=a.metrics;let c;if(0===o.width)c=new h.A(0,0,0,0);else{const t=3,e=o.width+2*t,i=o.height+2*t;let s=e%4?4-e%4:4,r=i%4?4-i%4:4;1===s&&(s=5),1===r&&(r=5),c=this._binPack.allocate(e+s,i+r),c.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new l(this.width-4,this.height-4),c=this._binPack.allocate(e+s,i+r));const n=this._glyphData[this._currentPage],h=a.bitmap;let u,d;if(h)for(let a=0;a<i;a++){u=e*a,d=this.width*(c.y+a+1)+c.x;for(let t=0;t<e;t++)n[d+t+1]=h.at(u+t)}}r[n]={rect:c,metrics:o,tileIDs:null,page:this._currentPage},i[n]={sdf:!0,rect:c,metrics:o,page:this._currentPage,code:n},this._dirties[this._currentPage]=!0}return i}))}removeGlyphs(t){for(const e in this._glyphIndex){const i=this._glyphIndex[e];if(!i)continue;let s;for(const e in i)if(s=i[e],s.tileIDs.delete(t),0===s.tileIDs.size){const t=this._glyphData[s.page],r=s.rect;let n,a;for(let e=0;e<r.height;e++)for(n=this.width*(r.y+e)+r.x,a=0;a<r.width;a++)t[n+a]=0;delete i[e],this._dirties[s.page]=!0}}}bind(t,e,i){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this._textures[i]){const e=new u.R;e.pixelFormat=o.Ab.ALPHA,e.wrapMode=o.pF.CLAMP_TO_EDGE,e.width=this.width,e.height=this.height,this._textures[i]=new c.g(t,e,new Uint8Array(this.width*this.height))}const r=this._textures[i];r.setSamplingMode(e),this._dirties[i]&&r.setData(this._glyphData[i]),t.bindTexture(r,s),this._dirties[i]=!1}destroy(){this.dispose()}dispose(){this._glyphData.length=0,this._binPack=null;for(const t of this._textures)t&&t.dispose();this._textures.length=0}}var g=i(3825),_=i(29234);class p{constructor(t){if(this._metrics=[],!t)return void(this._allBitmaps=null);const e=new Map;let i=0;for(;t.next();)switch(t.tag()){case 1:{const n=t.getMessage();for(;n.next();)switch(n.tag()){case 3:{const t=n.getMessage();let a,h,l,o,c,u,d;for(;t.next();)switch(t.tag()){case 1:a=t.getUInt32();break;case 2:h=t.getBytes();break;case 3:l=t.getUInt32();break;case 4:o=t.getUInt32();break;case 5:c=t.getSInt32();break;case 6:u=t.getSInt32();break;case 7:d=t.getUInt32();break;default:t.skip()}if(t.release(),a){var s,r;const t=null!==(s=null===(r=h)||void 0===r?void 0:r.length)&&void 0!==s?s:0;this._metrics[a]={width:l,height:o,left:c,top:u,advance:d,startOffset:i,length:t},e.set(a,h),i+=t}break}default:n.skip()}n.release();break}default:t.skip()}const n=new Uint8Array(i),a=this._metrics;for(const[h,l]of e){const{startOffset:t,length:e}=a[h];if(l)for(let i=0;i<e;++i)n[t+i]=l[i]}this._allBitmaps=n}getMetrics(t){return this._metrics[t]}getBitmap(t){if(!this._allBitmaps)return;const e=this._metrics[t];if(void 0===e)return;const{startOffset:i,length:s}=e;return 0!==s?new v(this._allBitmaps,i,s):void 0}}class y{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(t){return this._ranges[t]}addRange(t,e){this._ranges[t]=e}}class f{constructor(t){this._glyphInfo={},this._baseURL=t}getRange(t,e){const i=this._getFontStack(t);if(i.getRange(e))return Promise.resolve();const s=256*e,r=s+255;if(this._baseURL){const n=this._baseURL.replace("{fontstack}",t).replace("{range}",s+"-"+r);return(0,g.A)(n,{responseType:"array-buffer"}).then((t=>{i.addRange(e,new p(new _.A(new Uint8Array(t.data),new DataView(t.data))))})).catch((()=>{i.addRange(e,new p)}))}return i.addRange(e,new p),Promise.resolve()}getGlyph(t,e){const i=this._getFontStack(t);if(!i)return;const s=Math.floor(e/256),r=i.getRange(s);return r?{metrics:r.getMetrics(e),bitmap:r.getBitmap(e)}:void 0}_getFontStack(t){let e=this._glyphInfo[t];return e||(e=this._glyphInfo[t]=new y),e}}class v{constructor(t,e,i){this._array=t,this._start=e,this.length=i}at(t){return 0<=t&&t<this.length?this._array[this._start+t]:void 0}}i(81806);var m=i(83367);class w{constructor(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,e<=0&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=t,this._pageHeight=e,i>0&&(this._maxItemSize=i),this._binPack=new l(t-4,e-4)}destroy(){this.dispose()}dispose(){this._binPack=null,this._mosaicsData.length=0,this._mosaicRects={};for(const t of this._textures)t&&t.dispose();this._textures.length=0}getWidth(t){return t>=this._size.length?-1:this._size[t][0]}getHeight(t){return t>=this._size.length?-1:this._size[t][1]}getPageSize(t){return t>=this._size.length?null:this._size[t]}setSpriteSource(t){if(this.dispose(),this.pixelRatio=t.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new l(this._pageWidth-4,this._pageHeight-4);const t=Math.floor(this._pageWidth),e=Math.floor(this._pageHeight),i=new Uint32Array(t*e);this._mosaicsData[0]=i,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=t}getSpriteItem(t){var e;let i,s,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._mosaicRects[t];if(n)return n;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;if(t&&t.startsWith("dasharray-")?([i,s]=this._rasterizeDash(t),r=!0):i=this._sprites.getSpriteInfo(t),null===(e=i)||void 0===e||!e.width||!i.height||i.width<0||i.height<0)return null;const a=i.width,h=i.height,[l,o,c]=this._allocateImage(a,h);return l.width<=0?null:(this._copy(l,i,o,c,r,s),n={type:"sprite",rect:l,width:a,height:h,sdf:i.sdf,simplePattern:!1,rasterizationScale:i.pixelRatio,page:o},this._mosaicRects[t]=n,n)}getSpriteItems(t){const e={};for(const i of t)e[i.name]=this.getSpriteItem(i.name,i.repeat);return e}getMosaicItemPosition(t,e){const i=this.getSpriteItem(t,e),s=null===i||void 0===i?void 0:i.rect;if(!s)return null;s.width=i.width,s.height=i.height;const r=i.width,n=i.height;return{tl:[s.x+2,s.y+2],br:[s.x+2+r,s.y+2+n],page:i.page}}bind(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(i>=this._size.length||i>=this._mosaicsData.length)return;if(!this._textures[i]){const e=new u.R;e.wrapMode=o.pF.CLAMP_TO_EDGE,e.width=this._size[i][0],e.height=this._size[i][1],this._textures[i]=new c.g(t,e,new Uint8Array(this._mosaicsData[i].buffer))}const r=this._textures[i];r.setSamplingMode(e),this._dirties[i]&&r.setData(new Uint8Array(this._mosaicsData[i].buffer)),t.bindTexture(r,s),this._dirties[i]=!1}static _copyBits(t,e,i,s,r,n,a,h,l,o,c){let u=s*e+i,d=h*n+a;if(c){d-=n;for(let a=-1;a<=o;a++,u=((a+o)%o+s)*e+i,d+=n)for(let e=-1;e<=l;e++)r[d+e]=t[u+(e+l)%l]}else for(let g=0;g<o;g++){for(let e=0;e<l;e++)r[d+e]=t[u+e];u+=e,d+=n}}_copy(t,e,i,s,r,n){if(!this._sprites||"loaded"!==this._sprites.loadStatus||i>=this._mosaicsData.length)return;const a=new Uint32Array(n?n.buffer:this._sprites.image.buffer),h=this._mosaicsData[i],l=n?e.width:this._sprites.width;w._copyBits(a,l,e.x,e.y,h,s[0],t.x+2,t.y+2,e.width,e.height,r),this._dirties[i]=!0}_allocateImage(t,e){t+=2,e+=2;const i=Math.max(t,e);if(this._maxItemSize&&this._maxItemSize<i){const i=new h.A(0,0,t,e);return this._mosaicsData.push(new Uint32Array(t*e)),this._dirties.push(!0),this._size.push([t,e]),this._textures.push(void 0),[i,this._mosaicsData.length-1,[t,e]]}let s=t%4?4-t%4:4,r=e%4?4-e%4:4;1===s&&(s=5),1===r&&(r=5);const n=this._binPack.allocate(t+s,e+r);return n.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new l(this._pageWidth-4,this._pageHeight-4),this._allocateImage(t,e)):[n,this._currentPage,[this._pageWidth,this._pageHeight]]}_rasterizeDash(t){const e=t.match(/\[(.*?)\]/);if(!e)return null;const i=e[1].split(",").map(Number),s=t.slice(t.lastIndexOf("-")+1),[r,n,a]=(0,m.k)(i,s);return[{x:0,y:0,width:n,height:a,sdf:!0,pixelRatio:1},new Uint8Array(r.buffer)]}}var S=i(93453);class b{constructor(t,e,i,s){this._layer=t,this._styleRepository=e,this.devicePixelRatio=i,this._sourceDataMaxLOD=s,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._spriteSourceAbortController=null,this._startOptionsInputSignal=null,this._inputSignalEventListener=null}destroy(){var t,e,i;null!==(t=this._connection)&&void 0!==t&&t.close(),this._connection=null,this._styleRepository=null,this._layer=null,null!==(e=this._spriteMosaic)&&void 0!==e&&e.destroy(),this._spriteMosaic=null,this._glyphMosaic=null,this._spriteSourceAbortController=(0,s.DC)(this._spriteSourceAbortController),this._spriteSourcePromise=null,this._inputSignalEventListener&&null!==(i=this._startOptionsInputSignal)&&void 0!==i&&i.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,this._inputSignalEventListener=null}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(t){this._requestSprite(t);const e=this._layer.currentStyleInfo.glyphsUrl,i=new f(e?(0,n.a6)(e,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new d(1024,1024,i),this._broadcastPromise=(0,a.ho)("WorkerTileHandler",{client:this,schedule:t.schedule,signal:t.signal}).then((e=>{var i;if(this._layer&&(null!==(i=this._connection)&&void 0!==i&&i.close(),this._connection=e,this._layer&&!this._connection.closed)){const i=e.broadcast("setStyle",{style:this._layer.currentStyleInfo.style,sourceDataMaxLOD:this._sourceDataMaxLOD},t);Promise.all(i).catch((t=>(0,r.jH)(t)))}}))}_requestSprite(t){var e,i;null===(e=this._spriteSourceAbortController)||void 0===e||e.abort();const s=new AbortController;this._spriteSourceAbortController=s;const n=null===t||void 0===t?void 0:t.signal;this._inputSignalEventListener&&null!==(i=this._startOptionsInputSignal)&&void 0!==i&&i.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,n&&(this._inputSignalEventListener=function(t){return()=>t.abort()}(s),n.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const{signal:a}=s,h={...t,signal:a};this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,h),this._spriteSourcePromise.then((t=>{(0,r.QP)(a),this._spriteMosaic=new w(1024,1024,250),this._spriteMosaic.setSpriteSource(t)}))}async updateStyle(t){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",t)),this._broadcastPromise}setSpriteSource(t){const e=new w(1024,1024,250);return e.setSpriteSource(t),this._spriteMosaic=e,this._spriteSourcePromise=Promise.resolve(t),this._spriteSourceAbortController=null,e}async setStyle(t,e,i){await this._broadcastPromise,this._styleRepository=t,this._sourceDataMaxLOD=i,this._requestSprite();const s=new f(this._layer.currentStyleInfo.glyphsUrl?(0,n.a6)(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new d(1024,1024,s),this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",{style:e,sourceDataMaxLOD:this._sourceDataMaxLOD})),this._broadcastPromise}async fetchTileData(t,e){const i=await this._getRefKeys(t,e);return this._getSourcesData(Object.keys(this._layer.sourceNameToSource),i,e)}async fetchTilePBFs(t){const e=Object.keys(this._layer.sourceNameToSource),i={},s=await this._getRefKeys(t,i),r=[],n=[];for(let a=0;a<s.length;a++)if(null==s[a].value||null==e[a])n.push(null);else{const t=s[a].value,h=this._getTilePayload(t,e[a],i);h.then((e=>{r.push({...e,key:t})})),n.push(h)}return Promise.all(n).then((()=>r))}async parseTileData(t,e){const i=t&&t.data;if(!i)return null;const{sourceName2DataAndRefKey:s,transferList:r}=i;return 0===Object.keys(s).length?null:this._broadcastPromise.then((()=>this._connection.invoke("createTileAndParse",{key:t.key.id,sourceName2DataAndRefKey:s,styleLayerUIDs:t.styleLayerUIDs},{...e,transferList:r})))}async getSprites(t){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(t)}getGlyphs(t){return this._glyphMosaic.getGlyphItems(t.font,t.codePoints)}async _getTilePayload(t,e,i){const s=S.A.pool.acquire(t.id),n=this._layer.sourceNameToSource[e],{level:a,row:h,col:l}=s;S.A.pool.release(s);try{return{protobuff:await n.requestTile(a,h,l,i),sourceName:e}}catch(o){if((0,r.zf)(o))throw o;return{protobuff:null,sourceName:e}}}async _getRefKeys(t,e){const i=this._layer.sourceNameToSource,s=new Array;for(const r in i){const n=i[r].getRefKey(t,e);s.push(n)}return(0,r.Lx)(s)}_getSourcesData(t,e,i){const s=[];for(let r=0;r<e.length;r++)if(null==e[r].value||null==t[r])s.push(null);else{const n=e[r].value,a=this._getTilePayload(n,t[r],i);s.push(a)}return(0,r.Lx)(s).then((t=>{const i={},s=[];for(let r=0;r<t.length;r++){const n=t[r].value;if(n&&n.protobuff&&n.protobuff.byteLength>0){const t=e[r].value.id;i[n.sourceName]={refKey:t,protobuff:n.protobuff},s.push(n.protobuff)}}return{sourceName2DataAndRefKey:i,transferList:s}}))}}},18374:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(88235),r=i(40181),n=i(93453);class a extends r.A{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(t){const e=n.A.pool.acquire(t),i=0===e.level?null:n.A.getId(e.level-1,e.row>>1,e.col>>1,e.world);return n.A.pool.release(e),i}getTileCoverage(t,e){let i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=arguments.length>3?arguments[3]:void 0;const r=super.getTileCoverage(t,e,i,s);if(!r)return r;const n=1<<r.lodInfo.level;return r.spans=r.spans.filter((t=>t.row>=0&&t.row<n)),r}scaleToLevel(t){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[t])return this._levelByScale[t];{const e=this._fullCacheLodInfos;if(t>e[0].scale)return e[0].level;let i,s;for(let r=0;r<e.length-1;r++)if(s=e[r+1],t>s.scale)return i=e[r],i.level+(i.scale-t)/(i.scale-s.scale);return e[e.length-1].level}}_initializeFullCacheLODs(t){let e;if(0===t[0].level)e=t.map((t=>({level:t.level,resolution:t.resolution,scale:t.scale})));else{const t=this.tileInfo.size[0],i=this.tileInfo.spatialReference;e=s.A.create({size:t,spatialReference:i}).lods.map((t=>({level:t.level,resolution:t.resolution,scale:t.scale})))}for(let i=0;i<e.length;i++)this._levelByScale[e[i].scale]=e[i].level;this._fullCacheLodInfos=e}}},91196:(t,e,i)=>{i.d(e,{A:()=>p});var s=i(35143),r=i(91967),n=i(54099),a=i(5632),h=i(76460),l=i(30726),o=i(91291),c=i(46053),u=(i(81806),i(47249),i(85842)),d=i(19451),g=i(90992);let _=class extends((0,a.sA)((0,o.g)(n.A.EventedMixin(r.A)))){constructor(t){super(t),this._updatingHandles=new d.U,this.layer=null,this.parent=null}initialize(){this.when().catch((t=>{if("layerview:create-error"!==t.name){var e;const i=this.layer&&this.layer.id||"no id",s=(null===(e=this.layer)||void 0===e?void 0:e.title)||"no title";h.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(s,"', id: '").concat(i,"')"),t)}}))}destroy(){this._updatingHandles=(0,l.pR)(this._updatingHandles)}get fullOpacity(){var t,e,i,s;return(null!==(t=null===(e=this.layer)||void 0===e?void 0:e.opacity)&&void 0!==t?t:1)*(null!==(i=null===(s=this.parent)||void 0===s?void 0:s.fullOpacity)&&void 0!==i?i:1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var t;return!this.suspended&&!0===(null===(t=this.layer)||void 0===t?void 0:t.legendEnabled)}get updating(){var t;return!((null===(t=this._updatingHandles)||void 0===t||!t.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){var t;return!0===(null===(t=this.layer)||void 0===t?void 0:t.visible)}set visible(t){this._overrideIfSome("visible",t)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){var t;const e=this.view.timeExtent,i=null===(t=this.layer)||void 0===t?void 0:t.visibilityTimeExtent;return!e||!i||!e.intersection(i).isEmpty}canResume(){var t,e,i;const s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&(null===(t=this.layer)||void 0===t?void 0:t.loaded)&&!(null!==(e=this.parent)&&void 0!==e&&e.suspended)&&(null===(i=this.view)||void 0===i?void 0:i.ready)&&(0,g.g7)(s)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){var t,e;const i=null!==(t=this.parent)&&void 0!==t&&t.suspended?this.parent.suspendInfo:{};null!==(e=this.view)&&void 0!==e&&e.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0);const s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return(0,g.g7)(s)&&this.visibleAtCurrentScale||(i.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(i.outsideVisibilityTimeExtent=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,s._)([(0,c.MZ)()],_.prototype,"view",void 0),(0,s._)([(0,c.MZ)()],_.prototype,"fullOpacity",null),(0,s._)([(0,c.MZ)()],_.prototype,"layer",void 0),(0,s._)([(0,c.MZ)()],_.prototype,"parent",void 0),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"suspended",null),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"suspendInfo",null),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"legendEnabled",null),(0,s._)([(0,c.MZ)({type:Boolean,readOnly:!0})],_.prototype,"updating",null),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"updatingProgress",null),(0,s._)([(0,c.MZ)()],_.prototype,"updateSuspended",null),(0,s._)([(0,c.MZ)()],_.prototype,"visible",null),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"visibleAtCurrentScale",null),(0,s._)([(0,c.MZ)({readOnly:!0})],_.prototype,"visibleAtCurrentTimeExtent",null),_=(0,s._)([(0,u.$)("esri.views.layers.LayerView")],_);const p=_}}]);
//# sourceMappingURL=1296.3c2abb7e.chunk.js.map