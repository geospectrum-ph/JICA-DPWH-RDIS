{"version":3,"file":"static/js/2797.d98c23b6.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/layers/support/makeScheduleFunction.js","../node_modules/@arcgis/core/core/workers/WorkerHandle.js","../node_modules/@arcgis/core/layers/ILyr3DWasmPerSceneView.js","../node_modules/@arcgis/core/libs/lyr3d/Lyr3DModule.js","../node_modules/@arcgis/core/layers/Lyr3DWorkerHandle.js","../node_modules/@arcgis/core/layers/Lyr3DWasmPerSceneView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction e(e){return r=>{if(e.immediate)return e.immediate.schedule(r);const o=\"No immediate scheduler\";throw console.error(o),new Error(o)}}export{e as makeScheduleFunction};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{remove as e}from\"../arrayUtils.js\";import{makeHandle as t}from\"../handleUtils.js\";import s from\"../Logger.js\";import{throwIfAborted as r}from\"../promiseUtils.js\";import{open as i}from\"./workers.js\";class h{constructor(e,t,r,h,o={}){this._mainMethod=t,this._transferLists=r,this._listeners=[],this._promise=i(e,{...o,schedule:h}).then((e=>{if(void 0===this._thread){this._thread=e,this._promise=null,o.hasInitialize&&this.broadcast({},\"initialize\");for(const e of this._listeners)this._connectListener(e)}else e.close()})),this._promise.catch((t=>s.getLogger(\"esri.core.workers.WorkerHandle\").error(`Failed to initialize ${e} worker: ${t}`)))}on(s,r){const i={removed:!1,eventName:s,callback:r,threadHandle:null};return this._listeners.push(i),this._connectListener(i),t((()=>{i.removed=!0,e(this._listeners,i),this._thread&&null!=i.threadHandle&&i.threadHandle.remove()}))}destroy(){this._thread&&(this._thread.close(),this._thread=null),this._promise=null,this._listeners.length=0,this._transferLists={}}invoke(e,t){return this.invokeMethod(this._mainMethod,e,t)}invokeMethod(e,t,s){if(this._thread){const r=this._transferLists[e],i=r?r(t):[];return this._thread.invoke(e,t,{transferList:i,signal:s})}return this._promise?this._promise.then((()=>(r(s),this.invokeMethod(e,t,s)))):Promise.reject(null)}broadcast(e,t){return this._thread?Promise.all(this._thread.broadcast(t,e)).then((()=>{})):this._promise?this._promise.then((()=>this.broadcast(e,t))):Promise.reject()}get promise(){return this._promise}_connectListener(e){this._thread&&this._thread.on(e.eventName,e.callback).then((t=>{e.removed||(e.threadHandle=t)}))}}export{h as WorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nvar e,t,n,i,a,o,r,N,p,s,c,l,S,g,u;!function(e){e.U8=\"U8\",e.I8=\"I8\",e.U16=\"U16\",e.I16=\"I16\",e.U32=\"U32\",e.I32=\"I32\",e.F32=\"F32\",e.F64=\"F64\",e.Utf8String=\"Utf8String\",e.NotSet=\"NotSet\"}(e||(e={})),function(e){e.Png=\"Png\",e.Jpeg=\"Jpeg\",e.Dds=\"Dds\",e.Raw=\"Raw\",e.Dxt1=\"Dxt1\",e.Dxt5=\"Dxt5\",e.Etc2=\"Etc2\",e.Astc=\"Astc\",e.Pvrtc=\"Pvrtc\",e.NotSet=\"NotSet\"}(t||(t={})),function(e){e.Rgb8=\"Rgb8\",e.Rgba8=\"Rgba8\",e.R8=\"R8\",e.Bgr8=\"Bgr8\",e.Bgra8=\"Bgra8\",e.Rg8=\"Rg8\",e.NotSet=\"NotSet\"}(n||(n={})),function(e){e.Position=\"Position\",e.Normal=\"Normal\",e.TexCoord=\"TexCoord\",e.Color=\"Color\",e.Tangent=\"Tangent\",e.FeatureIndex=\"FeatureIndex\",e.UvRegion=\"UvRegion\",e.NotSet=\"NotSet\"}(i||(i={})),function(e){e.Opaque=\"Opaque\",e.Mask=\"Mask\",e.Blend=\"Blend\"}(a||(a={})),function(e){e.None=\"None\",e.Mask=\"Mask\",e.Alpha=\"Alpha\",e.PreMultAlpha=\"PreMultAlpha\",e.NotSet=\"NotSet\"}(o||(o={})),function(e){e.Points=\"Points\",e.Lines=\"Lines\",e.LineStrip=\"LineStrip\",e.Triangles=\"Triangles\",e.TriangleStrip=\"TriangleStrip\",e.NotSet=\"NotSet\"}(r||(r={})),function(e){e.None=\"None\",e.WrapXBit=\"WrapXBit\",e.WrapYBit=\"WrapYBit\",e.WrapXy=\"WrapXy\",e.NotSet=\"NotSet\"}(N||(N={})),function(e){e.Linear=\"Linear\",e.Nearest=\"Nearest\",e.NotSet=\"NotSet\"}(p||(p={})),function(e){e.Linear=\"Linear\",e.Nearest=\"Nearest\",e.NearestMipmapNearest=\"NearestMipmapNearest\",e.LinearMipmapNearest=\"LinearMipmapNearest\",e.NearestMipmapLinear=\"NearestMipmapLinear\",e.LinearMipmapLinear=\"LinearMipmapLinear\",e.NotSet=\"NotSet\"}(s||(s={})),function(e){e.FeatureId=\"FeatureId\",e.GlobalUid=\"GlobalUid\",e.UnspecifiedDateTime=\"UnspecifiedDateTime\",e.EcmaIso8601DateTime=\"EcmaIso8601DateTime\",e.EcmaIso8601DateOnly=\"EcmaIso8601DateOnly\",e.TimeOnly=\"TimeOnly\",e.TimeStamp=\"TimeStamp\",e.ColorRgb=\"ColorRgb\",e.ColorRgba=\"ColorRgba\",e.Unrecognized=\"Unrecognized\",e.NotSet=\"NotSet\"}(c||(c={})),function(e){e.Texture=\"Texture\",e.VertexAtrb=\"VertexAtrb\",e.Implicit=\"Implicit\",e.NotSet=\"NotSet\"}(l||(l={})),function(e){e.Front=\"Front\",e.Back=\"Back\",e.None=\"None\",e.NotSet=\"NotSet\"}(S||(S={})),function(e){e.Pbr=\"Pbr\",e.Unlit=\"Unlit\"}(g||(g={})),function(e){e[e.Succeeded=0]=\"Succeeded\",e[e.Failed=1]=\"Failed\",e[e.MissingInputs=2]=\"MissingInputs\"}(u||(u={}));const m=-1,d=-2;export{a as Lyr3DAlphaMode,S as Lyr3DFaceCullingMode,l as Lyr3DFeatureIndexSource,t as Lyr3DImageFormat,g as Lyr3DLightingModel,p as Lyr3DMagFilterMode,s as Lyr3DMinFilterMode,n as Lyr3DPixelFormat,r as Lyr3DPrimitiveType,c as Lyr3DSchemaPropertySemantic,o as Lyr3DTransparency,e as Lyr3DType,N as Lyr3DUvWrapMode,i as Lyr3DVtxAtrbSemantic,u as Lyr3DWasmWorkerOutputStatus,m as invalidLayerView,d as wasmFailedToInit};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{getAssetUrl as t}from\"../../assets.js\";function n(){return new Promise((t=>import(\"../../chunks/lyr3DMain.js\").then((t=>t.l)).then((({default:n})=>{const e=n({locateFile:i,onRuntimeInitialized:()=>t(e)})})))).catch((t=>{throw t}))}function e(){return new Promise((t=>import(\"../../chunks/lyr3DWorker.js\").then((t=>t.l)).then((({default:n})=>{const e=n({locateFile:i,onRuntimeInitialized:()=>t(e)})})))).catch((t=>{throw t}))}function i(n){return t(`esri/libs/lyr3d/${n}`)}export{n as loadLyr3DMainWASM,e as loadLyr3DWorkerWASM};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{WorkerHandle as r}from\"../core/workers/WorkerHandle.js\";class s extends r{constructor(r){super(\"Lyr3DWorker\",\"process\",{process:r=>r.inputs},r,{hasInitialize:!0})}destroyWasm(){return this.broadcast({},\"destroyWasm\")}}export{s as Lyr3DWorkerHandle};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../chunks/tslib.es6.js\";import t from\"../request.js\";import i from\"../core/Accessor.js\";import r from\"../core/Logger.js\";import{isAbortError as s}from\"../core/promiseUtils.js\";import{watch as n}from\"../core/reactiveUtils.js\";import{addFrameTask as a}from\"../core/scheduling.js\";import{property as o}from\"../core/accessorSupport/decorators/property.js\";import\"../core/has.js\";import\"../core/RandomLCG.js\";import{subclass as l}from\"../core/accessorSupport/decorators/subclass.js\";import{wasmFailedToInit as d,Lyr3DWasmWorkerOutputStatus as h,invalidLayerView as _}from\"./ILyr3DWasmPerSceneView.js\";import{Lyr3DWorkerHandle as u}from\"./Lyr3DWorkerHandle.js\";import{loadLyr3DMainWASM as y}from\"../libs/lyr3d/Lyr3DModule.js\";import{getElevationOffsetInMeters as g}from\"../support/elevationInfoUtils.js\";import{makeScheduleFunction as m}from\"../views/3d/layers/support/makeScheduleFunction.js\";var c,b;!function(e){e[e.Lifetime=0]=\"Lifetime\",e[e.Jobs=1]=\"Jobs\",e[e.Renderables=2]=\"Renderables\"}(c||(c={})),function(e){e[e.Critical=0]=\"Critical\",e[e.Error=1]=\"Error\",e[e.Warning=2]=\"Warning\",e[e.Info=3]=\"Info\"}(b||(b={}));let f=class extends i{constructor(e){super(e),this._lyr3DMainPromise=null,this._lyr3DMain=null,this._layers=new Map,this._debugFlags=new Set,this._debugLevel=b.Critical,this._wasmNotLoaded=\"method requiring WASM was called when WASM isn't loaded\",this._pulseTaskHandle=null,this._session=null,this._debugFlags.add(c.Lifetime),this._debugFlags.add(c.Jobs),this._debugFlags.add(c.Renderables)}_debugLog(e,t,i,s=!0){if(this._debugFlags.has(e)&&this._debugLevel>=t){const e=s?`[js] ${i}`:`${i}`;t===b.Critical||t===b.Error?r.getLogger(this).error(e):t===b.Warning&&r.getLogger(this).warn(e),r.getLogger(this).info(e)}}initialize(){this._debugLevel>b.Warning&&(r.getLogger(this).level=\"info\"),this._debugLog(c.Lifetime,b.Info,\"Lyr3DWasmPerSceneView.initialize()\"),this.addHandles([n((()=>this.view.state?.contentCamera),(()=>this._updateWasmCamera()))]),this._pulseTaskHandle=a({preRender:()=>this._pulseTask()})}destroy(){this._debugLog(c.Lifetime,b.Info,\"Lyr3DWasmPerSceneView.destroy()\"),this._lyr3DMain&&(this._layers.forEach((e=>{e.abortController.abort()})),this._lyr3DMain.uninitialize_lyr3d_wasm(),this._lyr3DMain=null);const e=this._worker;e&&e.destroyWasm().then((()=>{this._worker?.destroy(),this._worker=null})),this._pulseTaskHandle?.remove(),this._pulseTaskHandle=null}add3DTilesLayerView(e){return this._lyr3DMain?this._add3DTilesLayerView(e):(this._debugLog(c.Lifetime,b.Error,\"Lyr3DWasmPerSceneView.add3DTilesLayerView() called when WASM wasn't initialized\"),d)}remove3DTilesLayerView(e){if(!this._lyr3DMain)return this._debugLog(c.Lifetime,b.Error,this._wasmNotLoaded),0;this._doRemoveLayerView(e);const t=this._layers.size;return 0===t&&(this._debugLog(c.Lifetime,b.Info,\"Lyr3DWasmPerSceneView.remove3DTilesLayerView() no Lyr3D layers left after removing a layer, destroying\"),this.destroy()),t}setEnabled(e,t){if(!this._lyr3DMain)return void this._debugLog(c.Lifetime,b.Error,this._wasmNotLoaded);const i=this._layers.get(e.wasmLayerId);i&&(this._lyr3DMain.set_enabled(e.wasmLayerId,t),i.needMemoryUsageUpdate=!0,i.needFrame=!0,i.layerView.updatingFlagChanged())}setLayerOffset(e,t){if(!this._lyr3DMain)return void this._debugLog(c.Lifetime,b.Error,this._wasmNotLoaded);this._layers.get(e.wasmLayerId)&&this._lyr3DMain.set_carto_offset_z(e.wasmLayerId,t)}getAttributionText(){if(!this._lyr3DMain)return this._debugLog(c.Lifetime,b.Error,this._wasmNotLoaded),[];return this._lyr3DMain.get_current_attribution_text().split(\"|\")}onRenderableEvicted(e,t,i){if(!this._lyr3DMain)return void this._debugLog(c.Lifetime,b.Error,this._wasmNotLoaded);this._layers.get(e.wasmLayerId)&&this._lyr3DMain.on_renderable_evicted(e.wasmLayerId,t,i)}isUpdating(e){if(!this._lyr3DMain&&this._lyr3DMainPromise)return!0;const t=this._layers.get(e);return!!t&&(t.outstandingJobCount>0||t.outstandingRenderableCount>0||t.needFrame)}initializeWasm(){return this._lyr3DMain?Promise.resolve():(this._debugLog(c.Lifetime,b.Info,\"Lyr3DWasmPerSceneView.initializeWasm()\"),this._lyr3DMainPromise||(this._lyr3DMainPromise=y().then((e=>{this._lyr3DMain=e,this._lyr3DMainPromise=null;const t=this._lyr3DMain.addFunction(this._onNewJob.bind(this),\"v\"),i=this._lyr3DMain.addFunction(this._onNewRenderable.bind(this),\"v\"),r=this._lyr3DMain.addFunction(this._freeRenderables.bind(this),\"viii\"),s=this._lyr3DMain.addFunction(this._setRenderableVisibility.bind(this),\"viiii\"),n=this._lyr3DMain.addFunction(this._onWasmError.bind(this),\"viiii\"),a=\"global\"===this.view.viewingMode,o=this.view.renderSpatialReference?.isWebMercator?3857:this.view.renderSpatialReference?.wkid??-1,l=this.view.heightModelInfo?.heightModel,d=!l||\"gravity-related-height\"===l;return this._lyr3DMain.initialize_lyr3d_wasm(n,t,i,r,s,a,d,o,this._debugLevel)?(this._worker=new u(m(this.view.resourceController)),this._worker.promise?this._worker.promise:void 0):(this._lyr3DMain=null,void this._debugLog(c.Lifetime,b.Critical,\"Lyr3d Main WASM failed to initialize\",!1))})).catch((e=>{this._debugLog(c.Lifetime,b.Critical,`Lyr3d WASM failed to download error = ${e}`,!1)}))),this._lyr3DMainPromise)}_pulseTask(){if(this._lyr3DMain){let e=0,t=0;this._layers.forEach((i=>{e+=i.layerView.usedMemory,t+=i.layerView.unloadedMemory})),e/=1048576,t/=1048576;const i=this.view.resourceController.memoryController,r=i.usedMemory*i.maxMemory-e;this._lyr3DMain.frame_pulse(i.memoryFactor,e,t,r,i.maxMemory),this._layers.forEach((e=>{!0===e.needFrame&&(e.needFrame=!1,e.layerView.updatingFlagChanged())}))}}_incrementJobCount(e){e.outstandingJobCount+=1,1===e.outstandingJobCount&&e.outstandingRenderableCount<1&&e.layerView.updatingFlagChanged()}_decrementJobCount(e){e.outstandingJobCount-=1,0===e.outstandingJobCount&&e.outstandingRenderableCount<1&&e.layerView.updatingFlagChanged()}_incrementRenderableCount(e){e.outstandingRenderableCount+=1,e.outstandingJobCount<1&&1===e.outstandingRenderableCount&&e.layerView.updatingFlagChanged()}_decrementRenderableCount(e){e.outstandingRenderableCount-=1,e.outstandingJobCount<1&&0===e.outstandingRenderableCount&&e.layerView.updatingFlagChanged()}_onJobFailed(e,t,i){t.error.length&&this._debugLog(c.Jobs,b.Error,t.error,!1),this._lyr3DMain&&this._lyr3DMain.on_job_failed(i.jobId,i.desc),this._decrementJobCount(e)}_onJobSucceeded(e,t,i){if(this._lyr3DMain){const e=t.data.byteLength,r=this._lyr3DMain._malloc(e);new Uint8Array(this._lyr3DMain.HEAPU8.buffer,r,e).set(t.data),this._lyr3DMain.on_job_completed(i.jobId,t.jobDescJson,r,e),this._lyr3DMain._free(r)}this._decrementJobCount(e)}_getRequestPromises(e,i,r){const s=[];for(const n of e){const e=new URL(n),a=e.searchParams.get(\"session\");a?this._session=a:!this._session||e.origin===r.origin&&e.pathname===r.pathname||e.searchParams.append(\"session\",this._session),s.push(t(e.toString(),i).then((e=>e.data)))}return s}_onNewJob(){const e=this._lyr3DMain.get_next_job(),t=this._layers.get(e.layerId);if(!t)return;this._incrementJobCount(t);const i=t.abortController.signal,r={responseType:\"array-buffer\",signal:i,query:{...t.customParameters,token:t.apiKey}},n={inputs:[],jobDescJson:e.desc,isMissingResourceCase:!1},a=new URL(t.layerView.layer.url),o=this._getRequestPromises(e.urls,r,a);Promise.all(o).then((e=>(n.inputs=e,this._worker.invoke(n,i)))).then((e=>e)).catch((t=>(s(t)?this._debugLog(c.Jobs,b.Warning,`job ${e.jobId} was cancelled.`):this._debugLog(c.Jobs,b.Error,`job ${e.jobId} failed with error ${t}.`),{status:h.Failed,error:\"\",jobDescJson:\"\",data:new Uint8Array(0),missingInputUrls:[],inputs:[]}))).then((o=>{if(o.status===h.Failed)this._onJobFailed(t,o,e);else if(o.status===h.Succeeded)this._onJobSucceeded(t,o,e);else if(o.status===h.MissingInputs){const l=this._getRequestPromises(o.missingInputUrls,r,a);Promise.all(l).then((e=>{n.jobDescJson=o.jobDescJson,o.originalInputs?n.inputs=o.originalInputs:n.inputs=[],n.isMissingResourceCase=!0;for(const t of e)n.inputs.push(t);return this._worker.invoke(n,i)})).then((i=>{i.status===h.Failed?this._onJobFailed(t,i,e):i.status===h.Succeeded&&this._onJobSucceeded(t,i,e)})).catch((i=>{this._decrementJobCount(t),s(i)?this._debugLog(c.Jobs,b.Warning,`job ${e.jobId} was cancelled.`):this._debugLog(c.Jobs,b.Error,`job ${e.jobId} failed with error2 ${i}.`),this._lyr3DMain&&this._lyr3DMain.on_job_failed(e.jobId,e.desc)}))}}))}_onNewRenderable(){const e=this._lyr3DMain.get_next_renderable(),t=e.meshData;if(t.data&&t.data.byteLength>0){const e=t.data.slice();t.data=e}const i=this._layers.get(e.layerId);i&&(this._incrementRenderableCount(i),i.layerView.createRenderable(e).then((t=>{this._lyr3DMain&&this._lyr3DMain.on_renderable_created(!0,e.layerId,e.handle,t.memUsageBytes),this._decrementRenderableCount(i)})).catch((t=>{s(t)||this._debugLog(c.Renderables,b.Error,`createRenderable failed with error ${t}.`),this._lyr3DMain&&this._lyr3DMain.on_renderable_created(!1,e.layerId,e.handle,0),this._decrementRenderableCount(i)})))}_freeRenderables(e,t,i){if(i<1)return;const r=this._layers.get(e);if(!r)return;const s=r.layerView,n=[],a=new Uint32Array(this._lyr3DMain.HEAPU32.buffer,t,i);for(let o=0;o<i;++o)n.push(a[o]);for(let o=0;o<i;++o)s.freeRenderable(n[o])}_setRenderableVisibility(e,t,i,r){if(r<1)return;const s=this._layers.get(e);if(!s)return;const n=s.layerView,a=[],o=[],l=new Uint32Array(this._lyr3DMain.HEAPU32.buffer,t,r),d=new Uint8Array(this._lyr3DMain.HEAPU8.buffer,i,r);for(let h=0;h<r;++h)a.push(l[h]),o.push(1===d[h]);n.setRenderableVisibility(a,o,r)}_onWasmError(e,t,i,r){this._lyr3DMain&&this._debugLog(i,r,this._lyr3DMain.UTF8ToString(e,t),!1)}_doRemoveLayerView(e){const t=this._layers.get(e.wasmLayerId);return!!t&&(t.abortController.abort(),this._lyr3DMain.remove_layer(e.wasmLayerId),this._layers.delete(e.wasmLayerId),!0)}_add3DTilesLayerView(e){const t=e.layer;if(!t.url)return _;const i=this._lyr3DMain.get_next_layer_id(),r=new AbortController;this._layers.set(i,{layerView:e,abortController:r,needMemoryUsageUpdate:!1,outstandingJobCount:0,outstandingRenderableCount:0,customParameters:t.customParameters,apiKey:t.apiKey,needFrame:!1});const s=g(t.elevationInfo);return this._lyr3DMain.add_layer(t.url,i,s)?(this._updateWasmCamera(),i):(this._layers.delete(i),_)}_updateWasmCamera(){const e=this.view.state?.contentCamera;if(!e||!this._lyr3DMain)return;const{eye:t,center:i,up:r,near:s,far:n,fovY:a}=e,o=[e.viewport[2],e.viewport[3]],l=e.width/e.height;this._lyr3DMain.set_camera_parameters({eye:t,center:i,up:r,near:s,far:n,fov:a,aspectRatio:l,viewport:o})}};e([o({constructOnly:!0})],f.prototype,\"view\",void 0),f=e([l(\"esri.layers.Lyr3DWasmPerSceneView\")],f);const w=f;export{w as default};\n"],"names":["e","r","immediate","schedule","o","console","error","Error","h","constructor","t","arguments","length","undefined","this","_mainMethod","_transferLists","_listeners","_promise","i","then","_thread","hasInitialize","broadcast","_connectListener","close","catch","s","getLogger","on","removed","eventName","callback","threadHandle","push","remove","destroy","invoke","invokeMethod","transferList","signal","Promise","reject","all","promise","n","a","N","p","c","l","S","g","u","U8","I8","U16","I16","U32","I32","F32","F64","Utf8String","NotSet","Png","Jpeg","Dds","Raw","Dxt1","Dxt5","Etc2","Astc","Pvrtc","Rgb8","Rgba8","R8","Bgr8","Bgra8","Rg8","Position","Normal","TexCoord","Color","Tangent","FeatureIndex","UvRegion","Opaque","Mask","Blend","None","Alpha","PreMultAlpha","Points","Lines","LineStrip","Triangles","TriangleStrip","WrapXBit","WrapYBit","WrapXy","Linear","Nearest","NearestMipmapNearest","LinearMipmapNearest","NearestMipmapLinear","LinearMipmapLinear","FeatureId","GlobalUid","UnspecifiedDateTime","EcmaIso8601DateTime","EcmaIso8601DateOnly","TimeOnly","TimeStamp","ColorRgb","ColorRgba","Unrecognized","Texture","VertexAtrb","Implicit","Front","Back","Pbr","Unlit","Succeeded","Failed","MissingInputs","m","d","_ref","default","locateFile","onRuntimeInitialized","_ref2","super","process","inputs","destroyWasm","b","Lifetime","Jobs","Renderables","Critical","Warning","Info","f","_lyr3DMainPromise","_lyr3DMain","_layers","Map","_debugFlags","Set","_debugLevel","_wasmNotLoaded","_pulseTaskHandle","_session","add","_debugLog","has","warn","info","initialize","level","addHandles","view","state","contentCamera","_updateWasmCamera","preRender","_pulseTask","forEach","abortController","abort","uninitialize_lyr3d_wasm","_worker","add3DTilesLayerView","_add3DTilesLayerView","remove3DTilesLayerView","_doRemoveLayerView","size","setEnabled","get","wasmLayerId","set_enabled","needMemoryUsageUpdate","needFrame","layerView","updatingFlagChanged","setLayerOffset","set_carto_offset_z","getAttributionText","get_current_attribution_text","split","onRenderableEvicted","on_renderable_evicted","isUpdating","outstandingJobCount","outstandingRenderableCount","initializeWasm","resolve","y","addFunction","_onNewJob","bind","_onNewRenderable","_freeRenderables","_setRenderableVisibility","_onWasmError","viewingMode","renderSpatialReference","isWebMercator","wkid","heightModelInfo","heightModel","initialize_lyr3d_wasm","resourceController","usedMemory","unloadedMemory","memoryController","maxMemory","frame_pulse","memoryFactor","_incrementJobCount","_decrementJobCount","_incrementRenderableCount","_decrementRenderableCount","_onJobFailed","on_job_failed","jobId","desc","_onJobSucceeded","data","byteLength","_malloc","Uint8Array","HEAPU8","buffer","set","on_job_completed","jobDescJson","_free","_getRequestPromises","URL","searchParams","origin","pathname","append","toString","get_next_job","layerId","responseType","query","customParameters","token","apiKey","isMissingResourceCase","layer","url","urls","status","missingInputUrls","originalInputs","get_next_renderable","meshData","slice","createRenderable","on_renderable_created","handle","memUsageBytes","Uint32Array","HEAPU32","freeRenderable","setRenderableVisibility","UTF8ToString","remove_layer","delete","_","get_next_layer_id","AbortController","elevationInfo","add_layer","eye","center","up","near","far","fovY","viewport","width","height","set_camera_parameters","fov","aspectRatio","constructOnly","prototype","w"],"sourceRoot":""}