{"version":3,"file":"static/js/156.b86e0156.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/rest/support/meshFeatureSet.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../Graphic.js\";import t from\"../../core/Logger.js\";import{getOrCreateMapValue as r}from\"../../core/MapUtils.js\";import o from\"../../geometry/Extent.js\";import n from\"../../geometry/Mesh.js\";import s from\"../../geometry/Point.js\";import a from\"../../geometry/SpatialReference.js\";import i from\"../../geometry/support/MeshTransform.js\";import{ServiceAssetPart as u,ServiceAsset as f}from\"../../geometry/support/meshUtils/External.js\";import{getFormatIdMimeType as c}from\"../../layers/support/infoFor3D.js\";import l from\"./FeatureSet.js\";const m=()=>t.getLogger(\"esri.rest.support.meshFeatureSet\");function p(t,r,o){const n=o.features;o.features=[],delete o.geometryType;const s=l.fromJSON(o);if(s.geometryType=\"mesh\",!o.assetMaps)return s;const i=d(r,o.assetMaps),u=t.sourceSpatialReference??a.WGS84,f=o.globalIdFieldName,{outFields:c}=t,m=null!=c&&c.length>0?g(c.includes(\"*\")?null:new Set(c)):()=>({});for(const a of n){const t=y(a,f,u,r,i);s.features.push(new e({geometry:t,attributes:m(a)}))}return s}function g(e){return({attributes:t})=>{if(!t)return{};if(!e)return t;for(const r in t)e.has(r)||delete t[r];return t}}function y(e,t,r,s,a){const i=e.attributes[t],u=a.get(i);if(null==u||!e.geometry)return null;const f=E(e,r,s),c=o.fromJSON(e.geometry);c.spatialReference=r;const l=h(e.attributes,s),m=r.isGeographic?\"local\":\"georeferenced\",p=D(u);return p?n.createWithExternalSource(f,p,{extent:c,transform:l,vertexSpace:m}):n.createIncomplete(f,{extent:c,transform:l,vertexSpace:m})}function E({attributes:e},t,{transformFieldRoles:r}){const o=e[r.originX],n=e[r.originY],a=e[r.originZ];return new s({x:o,y:n,z:a,spatialReference:t})}function h(e,{transformFieldRoles:t}){return new i({translation:[e[t.translationX],-e[t.translationZ],e[t.translationY]],rotationAxis:[e[t.rotationX],-e[t.rotationZ],e[t.rotationY]],rotationAngle:e[t.rotationDeg],scale:[e[t.scaleX],e[t.scaleZ],e[t.scaleY]]})}var S;function d(e,t){const o=new Map;for(const n of t){const t=n.parentGlobalId;if(null==t)continue;const s=n.assetName,a=n.assetType,i=n.assetHash,u=n.assetURL,f=n.conversionStatus,l=n.seqNo,p=c(a,e.supportedFormats);if(!p){m().error(\"mesh-feature-set:unknown-format\",`Service returned an asset of type ${a}, but it does not list it as a supported type`);continue}const g=r(o,t,(()=>({files:new Map})));r(g.files,s,(()=>({name:s,type:a,mimeType:p,status:M(f),parts:[]}))).parts[l]={hash:i,url:u}}return o}function D(e){const t=Array.from(e.files.values()),r=new Array;for(const o of t){if(o.status!==S.COMPLETED)return null;const e=new Array;for(const t of o.parts){if(!t)return null;e.push(new u(t.url,t.hash))}r.push(new f(o.name,o.mimeType,e))}return r}function M(e){switch(e){case\"COMPLETED\":case\"SUBMITTED\":return S.COMPLETED;case\"INPROGRESS\":return S.PENDING;default:return S.FAILED}}!function(e){e[e.FAILED=0]=\"FAILED\",e[e.PENDING=1]=\"PENDING\",e[e.COMPLETED=2]=\"COMPLETED\"}(S||(S={}));export{d as assetMapFromAssetMapsJSON,y as extractMesh,p as meshFeatureSetFromJSON};\n"],"names":["m","t","getLogger","p","r","o","n","features","geometryType","s","l","fromJSON","assetMaps","i","d","u","sourceSpatialReference","a","WGS84","f","globalIdFieldName","outFields","c","length","e","includes","Set","_ref","attributes","has","y","push","geometry","get","_ref2","_ref3","transformFieldRoles","originX","originY","originZ","x","z","spatialReference","E","_ref4","translation","translationX","translationZ","translationY","rotationAxis","rotationX","rotationZ","rotationY","rotationAngle","rotationDeg","scale","scaleX","scaleZ","scaleY","h","isGeographic","Array","from","files","values","status","S","COMPLETED","parts","url","hash","name","mimeType","D","createWithExternalSource","extent","transform","vertexSpace","createIncomplete","Map","parentGlobalId","assetName","assetType","assetHash","assetURL","conversionStatus","seqNo","supportedFormats","error","g","type","M","PENDING","FAILED"],"sourceRoot":""}