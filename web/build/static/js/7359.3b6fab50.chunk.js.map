{"version":3,"file":"static/js/7359.3b6fab50.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/chunks/mat3.js","../node_modules/@arcgis/core/chunks/mat4.js","../node_modules/@arcgis/core/geometry/support/buffer/utils.js","../node_modules/@arcgis/core/geometry/support/meshUtils/loadGLTFMesh.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction e(e,t,o){const r=e.typedBuffer,f=e.typedBufferStride,d=t.typedBuffer,n=t.typedBufferStride,c=o?o.count:t.count;let u=(o?.dstIndex??0)*f,l=(o?.srcIndex??0)*n;for(let p=0;p<c;++p){for(let e=0;e<9;++e)r[u+e]=d[l+e];u+=f,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nfunction e(e,t,o){const r=e.typedBuffer,f=e.typedBufferStride,d=t.typedBuffer,n=t.typedBufferStride,c=o?o.count:t.count;let u=(o?.dstIndex??0)*f,l=(o?.srcIndex??0)*n;for(let p=0;p<c;++p){for(let e=0;e<16;++e)r[u+e]=d[l+e];u+=f,l+=n}}const t=Object.freeze(Object.defineProperty({__proto__:null,copy:e},Symbol.toStringTag,{value:\"Module\"}));export{e as c,t as m};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport{elementTypeSize as e}from\"./types.js\";export{m as mat3}from\"../../../chunks/mat3.js\";export{m as mat4}from\"../../../chunks/mat4.js\";export{s as scalar}from\"../../../chunks/scalar.js\";export{v as vec2}from\"../../../chunks/vec2.js\";export{v as vec3}from\"../../../chunks/vec33.js\";export{v as vec4}from\"../../../chunks/vec43.js\";function r(s,r){return new s(new ArrayBuffer(r*s.ElementCount*e(s.ElementType)))}export{r as createBuffer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport e from\"../../../Color.js\";import t from\"../../../request.js\";import r from\"../../../core/Error.js\";import{getOrCreateMapValue as o}from\"../../../core/MapUtils.js\";import{hasScaling as n,rad2deg as s}from\"../../../core/mathUtils.js\";import{normalFromMat4 as a,fromMat4 as i}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as l}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{fromValues as c}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{fromValues as u}from\"../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import f from\"../MeshComponent.js\";import m from\"../MeshMaterialMetallicRoughness.js\";import p from\"../MeshTexture.js\";import d from\"../MeshTextureTransform.js\";import{MeshVertexAttributes as g}from\"../MeshVertexAttributes.js\";import{selectVertexSpace as x}from\"../meshVertexSpaceUtils.js\";import{BufferViewVec4f as h,BufferViewVec4u8 as T,BufferViewVec4u16 as v,BufferViewVec3u8 as w,BufferViewVec3f as j,BufferViewVec3u16 as b,BufferViewVec3f64 as y,BufferViewVec2f as M}from\"../buffer/BufferView.js\";import{d as C,c as R,e as A,f as E}from\"../../../chunks/vec3.js\";import{a as F,n as B,b as S}from\"../../../chunks/vec4.js\";import{createBuffer as $}from\"../buffer/utils.js\";import{convertVertexSpace as U}from\"./vertexSpaceConversion.js\";import{DefaultLoadingContext as O}from\"../../../views/3d/glTF/DefaultLoadingContext.js\";import{loadGLTF as k}from\"../../../views/3d/glTF/loader.js\";import{convertPrimitiveToTriangles as L}from\"../../../views/3d/glTF/internal/indexUtils.js\";import{isEncodedMeshTexture as V}from\"../../../views/3d/glTF/internal/resourceUtils.js\";import{colorGamma as D}from\"../../../views/3d/webgl-engine/materials/DefaultMaterial_COLOR_GAMMA.js\";import{TextureWrapMode as _}from\"../../../views/webgl/enums.js\";import{f as G,a as I}from\"../../../chunks/vec33.js\";import{f as P,a as q}from\"../../../chunks/vec43.js\";import{a as N,f as z}from\"../../../chunks/vec2.js\";async function K(e,t,o){const n=new O(Q(o)),s=(await k(n,t,o,!0)).model,a=s.lods.shift(),i=new Map,l=new Map;s.textures.forEach(((e,t)=>i.set(t,X(e)))),s.materials.forEach(((e,t)=>l.set(t,Y(e,i))));const c=W(a);for(const r of c.parts)Z(c,r,l);const{position:u,normal:f,tangent:m,color:p,texCoord0:d}=c.vertexAttributes,h=x(e,o),T=e.spatialReference.isGeographic?x(e):h,v=U({vertexAttributes:{position:u.typedBuffer,normal:f?.typedBuffer,tangent:m?.typedBuffer},vertexSpace:T,spatialReference:e.spatialReference},h,{allowBufferReuse:!0,sourceUnit:\"meters\"});if(!v)throw new r(\"loadGLTFMesh()\",\"Failed to load mesh from glTF due to projection errors\");return{transform:null,vertexSpace:h,components:c.components,spatialReference:e.spatialReference,vertexAttributes:new g({...v,color:p?.typedBuffer,uv:d?.typedBuffer})}}function Q(e){const r=e?.resolveFile;return r?{busy:!1,request:async(e,o,n)=>{const s=r?.(e)??e,a=\"image\"===o?\"image\":\"binary\"===o||\"image+type\"===o?\"array-buffer\":\"json\";return(await t(s,{responseType:a,signal:n?.signal,timeout:0})).data}}:null}function H(e,t){if(null==e)return\"-\";const r=e.typedBuffer;return`${o(t,r.buffer,(()=>t.size))}/${r.byteOffset}/${r.byteLength}`}function J(e){return null!=e?e.toString():\"-\"}function W(e){let t=0;const has={color:!1,tangent:!1,normal:!1,texCoord0:!1},r=new Map,n=new Map,s=[];for(const a of e.parts){const{attributes:{position:e,normal:i,color:l,tangent:c,texCoord0:u}}=a,f=`\\n      ${H(e,r)}/\\n      ${H(i,r)}/\\n      ${H(l,r)}/\\n      ${H(c,r)}/\\n      ${H(u,r)}/\\n      ${J(a.transform)}\\n    `;let m=!1;const p=o(n,f,(()=>(m=!0,{start:t,length:e.count})));m&&(t+=e.count),i&&(has.normal=!0),l&&(has.color=!0),c&&(has.tangent=!0),u&&(has.texCoord0=!0),s.push({gltf:a,writeVertices:m,region:p})}return{vertexAttributes:{position:$(y,t),normal:has.normal?$(j,t):null,tangent:has.tangent?$(h,t):null,color:has.color?$(T,t):null,texCoord0:has.texCoord0?$(M,t):null},parts:s,components:[]}}function X(e){return new p({data:(V(e.data),e.data),wrap:re(e.parameters.wrap)})}function Y(t,r){const o=new e(se(t.color,t.opacity)),n=t.emissiveFactor?new e(ae(t.emissiveFactor)):null,a=e=>e?new d({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:s(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new m({color:o,colorTexture:r.get(t.textureColor),normalTexture:r.get(t.textureNormal),emissiveColor:n,emissiveTexture:r.get(t.textureEmissive),occlusionTexture:r.get(t.textureOcclusion),alphaMode:te(t.alphaMode),alphaCutoff:t.alphaCutoff,doubleSided:t.doubleSided,metallic:t.metallicFactor,roughness:t.roughnessFactor,metallicRoughnessTexture:r.get(t.textureMetallicRoughness),colorTextureTransform:a(t.colorTextureTransform),normalTextureTransform:a(t.normalTextureTransform),occlusionTextureTransform:a(t.occlusionTextureTransform),emissiveTextureTransform:a(t.emissiveTextureTransform),metallicRoughnessTextureTransform:a(t.metallicRoughnessTextureTransform)})}function Z(e,t,r){t.writeVertices&&ee(e,t);const{indices:o,attributes:n,primitiveType:s,material:a}=t.gltf;let i=L(o||n.position.count,s);const l=t.region.start;if(l){const e=new Uint32Array(i);for(let t=0;t<i.length;t++)e[t]+=l;i=e}e.components.push(new f({name:t.gltf.name,faces:i,material:r.get(a),shading:n.normal?\"source\":\"flat\",trustSourceNormals:!0}))}function ee(e,t){const{position:r,normal:o,tangent:s,color:c,texCoord0:u}=e.vertexAttributes,f=t.region.start,{attributes:m,transform:p}=t.gltf,d=m.position.count;if(C(r.slice(f,d),m.position,p),null!=m.normal&&null!=o){const e=a(l(),p),t=o.slice(f,d);R(t,m.normal,e),n(e)&&A(t,t)}else null!=o&&G(o,0,0,1,{dstIndex:f,count:d});if(null!=m.tangent&&null!=s){const e=i(l(),p),t=s.slice(f,d);F(t,m.tangent,e),n(e)&&B(t,t)}else null!=s&&P(s,0,0,1,1,{dstIndex:f,count:d});if(null!=m.texCoord0&&null!=u?N(u.slice(f,d),m.texCoord0):null!=u&&z(u,0,0,{dstIndex:f,count:d}),null!=m.color&&null!=c){const e=m.color,t=c.slice(f,d);if(4===e.elementCount)e instanceof h?S(t,e,255):e instanceof T?q(t,e):e instanceof v&&S(t,e,1/256);else{P(t,255,255,255,255);const r=w.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof j?E(r,e,255):e instanceof w?I(r,e):e instanceof b&&E(r,e,1/256)}}else null!=c&&P(c.slice(f,d),255,255,255,255)}function te(e){switch(e){case\"OPAQUE\":return\"opaque\";case\"MASK\":return\"mask\";case\"BLEND\":return\"blend\"}}function re(e){return{horizontal:oe(e.s),vertical:oe(e.t)}}function oe(e){switch(e){case _.CLAMP_TO_EDGE:return\"clamp\";case _.MIRRORED_REPEAT:return\"mirror\";case _.REPEAT:return\"repeat\"}}function ne(e){return e**(1/D)*255}function se(e,t){return u(ne(e[0]),ne(e[1]),ne(e[2]),t)}function ae(e){return c(ne(e[0]),ne(e[1]),ne(e[2]))}export{K as loadGLTFMesh};\n"],"names":["Object","freeze","defineProperty","__proto__","copy","e","t","o","_o$dstIndex","_o$srcIndex","r","typedBuffer","f","typedBufferStride","d","n","c","count","u","dstIndex","l","srcIndex","p","Symbol","toStringTag","value","s","ArrayBuffer","ElementCount","ElementType","async","K","O","resolveFile","busy","request","_r","a","responseType","signal","timeout","data","Q","k","model","lods","shift","i","Map","textures","forEach","set","V","wrap","re","parameters","X","materials","ne","se","color","opacity","emissiveFactor","ae","_e$rotation","scale","rotation","offset","m","colorTexture","get","textureColor","normalTexture","textureNormal","emissiveColor","emissiveTexture","textureEmissive","occlusionTexture","textureOcclusion","alphaMode","te","alphaCutoff","doubleSided","metallic","metallicFactor","roughness","roughnessFactor","metallicRoughnessTexture","textureMetallicRoughness","colorTextureTransform","normalTextureTransform","occlusionTextureTransform","emissiveTextureTransform","metallicRoughnessTextureTransform","Y","has","tangent","normal","texCoord0","parts","attributes","position","concat","H","J","transform","start","length","push","gltf","writeVertices","region","vertexAttributes","$","y","j","h","T","M","components","W","Z","x","spatialReference","isGeographic","v","U","vertexSpace","allowBufferReuse","sourceUnit","g","uv","buffer","size","byteOffset","byteLength","toString","C","slice","R","A","G","F","B","P","N","z","elementCount","S","q","w","fromTypedArray","E","I","b","ee","indices","primitiveType","material","L","Uint32Array","name","faces","shading","trustSourceNormals","horizontal","oe","vertical","_","CLAMP_TO_EDGE","MIRRORED_REPEAT","REPEAT","D"],"sourceRoot":""}