{"version":3,"file":"static/js/7440.67fd18fa.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/geometry/support/meshUtils/convertMeshVertexSpace.js","../node_modules/@arcgis/core/geometry/support/meshUtils/vertexSpaceConversion.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport r from\"../../../core/Error.js\";import{clone as e}from\"../../../core/lang.js\";import{throwIfAborted as o}from\"../../../core/promiseUtils.js\";import{MeshVertexAttributes as t}from\"../MeshVertexAttributes.js\";import{convertVertexSpace as s}from\"./vertexSpaceConversion.js\";async function i(i,n,c){await Promise.resolve(),o(c);const m=s(i,n);if(!m)throw new r(\"meshUtils:convertVertexSpace()\",\"Failed to convert to provided vertex space due to projection errors\");const p=i.cloneAndModifyVertexAttributes(new t({...m,uv:e(i.vertexAttributes.uv),color:e(i.vertexAttributes.color)}),n);return p.transform=null,p}export{i as convertMeshVertexSpace};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.30/esri/copyright.txt for details.\n*/\nimport t from\"../../../core/Logger.js\";import{floatEqualUlp as n}from\"../../../core/mathUtils.js\";import{getMetersPerCartesianUnitForSR as r,convertUnit as e}from\"../../../core/unitUtils.js\";import{normalFromMat4 as o}from\"../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as i}from\"../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{invert as l,exactEquals as a,multiply as s,scale as c}from\"../../../core/libs/gl-matrix-2/math/mat4.js\";import{IDENTITY as u,create as f}from\"../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{f as m,h as p,k as g}from\"../../../chunks/vec32.js\";import{create as x}from\"../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{getSphericalPCPF as A}from\"../../spatialReferenceEllipsoidUtils.js\";import{computeTranslationToOriginAndRotation as h}from\"../../projection/computeTranslationToOriginAndRotation.js\";import{projectPointToVector as v}from\"../../projection/projectPointToVector.js\";import{vertexSpaceEquals as R}from\"../meshVertexSpaceUtils.js\";import{b as j,a as w,t as y}from\"../../../chunks/vec3.js\";import{logProjectionError as E,transformNormal as S,transformTangent as T,projectFromPCPF as F,projectNormalFromPCPF as U,projectTangentFromPCPF as b,projectToPCPF as O,projectNormalToPCPF as d,projectTangentToPCPF as C}from\"./projection.js\";const G=()=>t.getLogger(\"esri.geometry.support.meshUtils.vertexSpaceConversion\");function N(t,n,{vertexSpace:r,spatialReference:e}){if(\"georeferenced\"===r.type){const o=t;if(!v(n,o,e))return!1;const{origin:i}=r;return m(t,o,i),!0}const o=A(e),i=t;if(!v(n,i,o))return!1;const{origin:a}=r,s=tt;if(!h(e,a,s,o))return!1;const c=l(tt,s);return null!=c&&(p(t,i,c),!0)}function M(t,r,e){const{vertexSpace:o,transform:i,vertexAttributes:l}=t,s=J(t.spatialReference,e,nt.SOURCE|nt.TARGET);if(R(o,r)&&(!i||a(i.localMatrix,u))&&n(s,1)){const{position:t,normal:n,tangent:r}=l,o=e?.allowBufferReuse;return{position:o?t:t.slice(),normal:o?n:n?.slice(),tangent:o?r:r?.slice()}}switch(t.vertexSpace.type){case\"local\":return\"local\"===r.type?P(t,t.vertexSpace,r.origin,e):B(t,t.vertexSpace,r.origin,e);case\"georeferenced\":return\"local\"===r.type?L(t,t.vertexSpace,r.origin,e):k(t,t.vertexSpace,r.origin,e)}}function k({vertexAttributes:t,transform:n,spatialReference:r},{origin:e},o,i){const{position:l,normal:a,tangent:s}=n?q(t,n.localMatrix):t,c=new Float64Array(l.length);let u=l;if(e&&(u=j(c,u,e)),o){const t=g(_,o);u=j(c,u,t)}J(r,i,nt.NONE);const f=i?.allowBufferReuse;return{position:u!==t.position||f?u:u.slice(),normal:a!==t.normal||f?a:a?.slice(),tangent:s!==t.tangent||f?s:s?.slice()}}function B({spatialReference:t,vertexAttributes:n,transform:r},{origin:e},o,i){const l=A(t);if(!h(t,e,Y,l))return E(G(),t,l),null;r&&s(Y,Y,r.localMatrix),I(Y,t,i,nt.SOURCE);const a=new Float64Array(n.position.length),c=z(n.position,Y,t,a);if(!c)return null;const u=D(c,a,n.normal,Y,t);if(n.normal&&!u)return null;const f=H(c,a,n.tangent,Y,t);if(n.tangent&&!f)return null;if(o){const t=g(_,o);j(c,c,t)}return{position:c,normal:u,tangent:f}}function L({vertexAttributes:t,spatialReference:n,transform:r},{origin:e},i,a){const s=A(n);if(!h(n,i,Y,s))return E(G(),n,s),null;const u=1/J(n,a,nt.TARGET);c(Y,Y,[u,u,u]);const f=l(Z,Y),{position:m,normal:p,tangent:g}=V(t,e,r),x=new Float64Array(m.length),v=K(m,n,f,x);if(!v)return null;const R=o($,f),j=Q(p,m,x,n,R,p!==t.normal?p:void 0);if(!j&&p)return null;const w=W(g,m,x,n,R,g!==t.tangent?g:void 0);return!w&&g?null:{position:v,normal:j,tangent:w}}function V(t,n,r){if(!n)return t;if(!r){const{position:r,normal:e,tangent:o}=t;return{position:j(new Float64Array(r.length),r,n),tangent:o,normal:e}}const e=q(t,r.localMatrix);return j(e.position,e.position,n),e}function P({vertexAttributes:t,spatialReference:n,transform:r},{origin:e},o,i){const a=A(n);if(!h(n,e,Y,a))return E(G(),n,a),null;if(r&&s(Y,Y,r.localMatrix),!h(n,o,Z,a))return E(G(),a,n),null;l(Z,Z);const c=s(Y,Z,Y);return I(c,n,i,nt.SOURCE|nt.TARGET),q(t,c)}function q(t,n){const r=new Float64Array(t.position.length);w(r,t.position,n);const e=t.normal?new Float32Array(t.normal.length):null,o=t.tangent?new Float32Array(t.tangent.length):null;return e&&t.normal&&S(t.normal,e,n),o&&t.tangent&&T(t.tangent,o,n),{position:r,normal:e,tangent:o}}function z(t,n,r,e){w(e,t,n);const o=new Float64Array(t.length);return F(e,o,r)?o:(E(G(),A(r),r),null)}function D(t,n,r,e,o){if(null==r)return null;const i=new Float32Array(r.length);return S(r,i,e),U(i,t,n,o,i)?i:(E(G(),A(o),o),null)}function H(t,n,r,e,o){if(null==r)return null;const i=new Float32Array(r.length);return T(r,i,e),b(i,t,n,o,i)?i:(E(G(),A(o),o),null)}function I(t,n,r,e){const o=J(n,r,e);1!==o&&c(t,t,[o,o,o])}function J(t,n,r){const e=!!(r&nt.SOURCE),o=!!(r&nt.TARGET),i=n?.sourceUnit,l=n?.targetUnit;if(!i&&!l)return 1;let a=X(i,t);!e&&i&&1!==a&&(G().warn(\"source unit conversion not supported\"),a=1);let s=1/X(l,t);return!o&&l&&1!==s&&(G().warn(\"target unit conversion not supported\"),s=1),a*s}function K(t,n,r,e){const o=O(t,n,e);if(!o)return E(G(),n,A(n)),null;const i=new Float64Array(o.length);return w(i,o,r),i}function Q(t,n,r,e,o,i){if(null==t)return null;const l=i??new Float32Array(t.length);return d(t,n,r,e,l)?(y(l,l,o),l):(E(G(),e,A(e)),null)}function W(t,n,r,e,o,i){if(null==t)return null;const l=i??new Float32Array(t.length);return C(t,n,r,e,l)?(y(l,l,o,4),l):(E(G(),e,A(e)),null)}function X(t,n){if(null==t)return 1;const o=r(n);return 1/e(o,\"meters\",t)}const Y=f(),Z=f(),$=i(),_=x(),tt=f();var nt;!function(t){t[t.NONE=0]=\"NONE\",t[t.SOURCE=1]=\"SOURCE\",t[t.TARGET=2]=\"TARGET\"}(nt||(nt={}));export{M as convertVertexSpace,X as getUnitToSpatialReferenceScaleConversion,N as projectPointToVertexSpace};\n"],"names":["async","i","n","c","Promise","resolve","o","m","s","r","p","cloneAndModifyVertexAttributes","t","uv","e","vertexAttributes","color","transform","G","getLogger","N","_ref","vertexSpace","spatialReference","type","v","origin","A","a","tt","h","l","M","J","nt","SOURCE","TARGET","R","localMatrix","u","position","normal","tangent","allowBufferReuse","slice","_ref8","_ref9","Y","E","Z","I","q","P","_ref4","_ref5","Float64Array","length","w","F","z","Float32Array","S","U","D","f","T","b","H","g","_","j","B","_ref6","_ref7","V","x","O","K","$","d","y","Q","C","W","L","_ref2","_ref3","NONE","k","sourceUnit","targetUnit","X","warn"],"sourceRoot":""}