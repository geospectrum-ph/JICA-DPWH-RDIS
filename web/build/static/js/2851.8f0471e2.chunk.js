"use strict";(self.webpackChunkRDIS_Web_Application=self.webpackChunkRDIS_Web_Application||[]).push([[2851],{10760:(e,t,i)=>{i.d(t,{h:()=>s});let r=e=>({vnodeSelector:"",properties:void 0,children:void 0,text:e.toString(),domNode:null}),o=(e,t,i)=>{for(let s=0,n=t.length;s<n;s++){let n=t[s];Array.isArray(n)?o(e,n,i):null!=n&&!1!==n&&("string"==typeof n&&(n=r(n)),i.push(n))}};function s(e,t,i){if(Array.isArray(t))i=t,t=void 0;else if(t&&("string"==typeof t||t.hasOwnProperty("vnodeSelector"))||i&&("string"==typeof i||i.hasOwnProperty("vnodeSelector")))throw new Error("h called with invalid arguments");let r,s;return i&&1===i.length&&"string"==typeof i[0]?r=i[0]:i&&(s=[],o(e,i,s),0===s.length&&(s=void 0)),{vnodeSelector:e,properties:t,children:s,text:""===r?void 0:r,domNode:null}}},70836:(e,t,i)=>{i.d(t,{s:()=>Q});var r=i(69539),o=i(59784),s=(i(81806),i(54901)),n=i(20664),a=i(9392),l=i(14487),c=i(12482),h=i(75655),d=i(68134),u=i(76931),p=i(19555),_=i(72745),m=i(43047),g=i(28608),v=i(18117),f=i(85746),x=i(33169),y=i(62577),S=i(45463),O=i(442),b=i(66470),w=i(425);class R extends f.X{constructor(e){super(e),this._location=(0,a.vt)(),this._direction=(0,a.fA)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,g.fA)(1,0,1,1),this._renderOccluded=S.m$.OccludeAndTransparent,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:D,recreateGeometry:(e,t)=>this._recreateObject3DGeometry(e,t),cameraChanged:()=>this._updateGeometry()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:C,recreateGeometry:e=>this._recreateDrapedGeometry(e)}}get location(){return this._location}set location(e){(0,n.e)(this._location,e)||((0,n.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,n.e)(this._direction,e)||((0,n.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,t){(0,n.n)(this._direction,(0,n.f)(this._direction,t,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,m.a)(e,this._color)||((0,m.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}_createObject3DResources(e){const t=new w.W(this.materialParameters),i=new Array;return this._createObject3DGeometry(t,e,i),{material:t,geometries:i,forEach:e=>{e(t),i.forEach(e)}}}_recreateObject3DGeometry(e,t){e.geometries.length=0,this._createObject3DGeometry(e.material,t,e.geometries)}_createObject3DGeometry(e,t,i){const[r,o]=M(e);t.addGeometry(r),t.addGeometry(o),i.push(r),i.push(o),this._updateVerticesObject3D(t)}_createDrapedResources(){const e=new w.W(this.materialParameters),t=(0,d.wB)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}));return{material:e,geometries:this._createDrapedGeometry(e),pixelRatioHandle:t}}_recreateDrapedGeometry(e){e.geometries=this._createDrapedGeometry(e.material)}_createDrapedGeometry(e){const t=M(e);return this._updateVerticesDraped(t),t.map((e=>new O.$(e)))}_updateMaterial(){var e,t;const{materialParameters:i}=this;null!==(e=this.object3dResources.resources)&&void 0!==e&&e.material.setParameters(i),null===(t=this.drapedResources.resources)||void 0===t||t.material.setParameters(i)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateGeometry(){if(this.isDraped)this.drapedResources.recreateGeometry();else{const e=this.object3dResources.object;e&&this._updateVerticesObject3D(e)}}_updateVerticesObject3D(e){const t=this.view.state.camera;t.projectToScreen(this.location,E),(0,n.g)(P,this.location,this.direction),t.projectToScreen(P,I),(0,p.S8)(I,(0,p.Re)(I,I,E)),this._updateVertexAttributesObject3D(t,e,0,E,I,1),this._updateVertexAttributesObject3D(t,e,1,E,I,-1)}_updateVertexAttributesObject3D(e,t,i,r,o,s){var n;const a=t.geometries[i],l=null===(n=a.getMutableAttribute(b.r.POSITION))||void 0===n?void 0:n.data;if(!l)return;const{start:c,end:h}=z(o,r,s,this.offset,this.width,this.length);e.unprojectFromScreen((0,u.PR)(c),P),l[0]=P[0],l[1]=P[1],l[2]=P[2],e.unprojectFromScreen((0,u.PR)(h),P),l[3]=P[0],l[4]=P[1],l[5]=P[2],t.geometryVertexAttributeUpdated(a,b.r.POSITION)}_updateVerticesDraped(e){const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:i}}}=this,{location:r,width:o,length:s,offset:n}=this,a=j;a.spatialReference=t.renderer.spatialReference,a.x=r[0],a.y=r[1];const l=this.view.overlayPixelSizeInMapUnits(a)*i,c=o*l,h=s*l,d=n*l;this._updateVertexAttributesDraped(e[0],c,h,d,-1),this._updateVertexAttributesDraped(e[1],c,h,d,1)}_updateVertexAttributesDraped(e,t,i,r,o){var s;const n=null===(s=e.getMutableAttribute(b.r.POSITION))||void 0===s?void 0:s.data;if(!n)return;const{location:a,direction:l}=this,{start:c,end:h}=z(l,a,o,r,t,i);n[0]=c[0],n[1]=c[1],n[2]=x.bi,n[3]=h[0],n[4]=h[1],n[5]=x.bi,e.invalidateBoundingInfo()}}function M(e){return[(0,y.Z8)(e,[(0,a.vt)(),(0,a.vt)()]),(0,y.Z8)(e,[(0,a.vt)(),(0,a.vt)()])]}function z(e,t,i,r,o,s){const n=(0,p.hs)(A,(0,p.hZ)(A,e[1]*i,e[0]*-i),r+o/2),a=(0,p.WQ)(G,(0,p.WQ)(G,(0,p.WQ)(G,t,(0,p.hs)(G,e,s/2)),n),n);return{start:a,end:(0,p.WQ)(T,a,(0,p.hs)(T,e,-s))}}function D(e){e.geometries.length=0}function C(e){e.pixelRatioHandle.remove(),e.geometries=[]}const P=(0,a.vt)(),A=(0,_.vt)(),G=(0,_.vt)(),T=(0,_.vt)(),E=(0,u.gs)(),I=(0,u.gs)(),j=(0,v.T)(0,0,void 0,null);var H=i(83574),q=i(47996),F=i(57662),N=i(23862),Z=i(63078),V=i(99791),B=i(70330),k=i(14727),$=i(23543),W=i(17072);class Q extends k.b{sortUniqueHints(e){return e.sort(((e,t)=>(t instanceof $.c?t.length:0)-(e instanceof $.c?e.length:0)))}visualizeIntersectionPoint(e,t){const{spatialReference:i,view:r}=t,o=L(t);return(0,s.DQ)(new H.l({view:r,primitive:"circle",geometry:(0,N.io)(e.intersectionPoint,i),elevationInfo:e.isDraped?c.Tq:c.qt,size:20,outlineSize:2,color:o.intersectionPointColor,outlineColor:o.intersectionPointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizePoint(e,t){const{view:i,spatialReference:r}=t,o=L(t),n=U(e.point,e.domain,t);return(0,s.DQ)(new H.l({view:i,primitive:"circle",geometry:(0,N.io)(n,r),elevationInfo:X(e),size:20,outlineSize:2,color:o.pointColor,outlineColor:o.pointOutlineColor,pixelSnappingEnabled:!1,isDecoration:!0,attached:!0}))}visualizeLine(e,t){const{view:i,spatialReference:r}=t,o=L(t),n=U(e.lineStart,e.domain,t),a=U(e.lineEnd,e.domain,t);return(0,s.DQ)(function(e,t,i,r,o,s,n){let a=arguments.length>7&&void 0!==arguments[7]&&arguments[7],l=!(arguments.length>8&&void 0!==arguments[8])||arguments[8],c=!(arguments.length>9&&void 0!==arguments[9])||arguments[9];const d=J(t,r,o,s,a),u=J(i,r,o,s,a),p=new h.U({view:s,extensionType:h.A.FADED,start:d,end:u,isDraped:a,color:n.lineColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,renderGroup:F.O7.SnappingHint,isDecoration:!0});switch(e){case B.H3.TARGET:p.width=Z.N.lineHintWidthTarget,p.fadedExtensions={start:0,end:Z.N.lineHintFadedExtensions};break;case B.H3.REFERENCE_EXTENSION:p.width=Z.N.lineHintWidthReference,p.fadedExtensions={start:0,end:0};break;case B.H3.REFERENCE:p.width=Z.N.lineHintWidthReference,p.fadedExtensions={start:l?Z.N.lineHintFadedExtensions:0,end:c?Z.N.lineHintFadedExtensions:0}}return p.attached=!0,p}(e.type,n,a,r,X(e),i,o,e.isDraped,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,t){const{view:i,spatialReference:r}=t,o=L(t),{isDraped:a}=e,l=X(e),c=U(e.lineStart,e.domain,t),h=U(e.lineEnd,e.domain,t),d=J(c,r,l,i,a),u=J(h,r,l,i,a),p=(0,n.o)(u,d,u,.5),_=new R({view:i,attached:!1,offset:Z.N.parallelLineHintOffset,length:Z.N.parallelLineHintLength,width:Z.N.parallelLineHintWidth,color:o.parallelSignColor,location:p,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,isDraped:a,renderGroup:F.O7.SnappingHint,isDecoration:!0});return _.setDirectionFromPoints(d,p),_.attached=!0,(0,s.DQ)(_)}visualizeRightAngleQuad(e,t){const{view:i,spatialReference:r}=t,o=L(t),n=X(e),{isDraped:a}=e,l=U(e.previousVertex,e.domain,t),c=U(e.centerVertex,e.domain,t),h=U(e.nextVertex,e.domain,t),d=J(l,r,n,i,a),u=J(c,r,n,i,a),p=J(h,r,n,i,a);return(0,s.DQ)(new q.n({view:i,attached:!0,color:a?o.rightAngleColorDraped:o.rightAngleColor,renderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Transparent,outlineRenderOccluded:a?S.m$.OccludeAndTransparent:S.m$.Opaque,outlineColor:o.rightAngleOutlineColor,outlineSize:Z.N.rightAngleHintOutlineSize,size:Z.N.rightAngleHintSize,isDraped:a,geometry:{previous:d,center:u,next:p},renderGroup:F.O7.SnappingHint,isDecoration:!0}))}}function L(e){const{effectiveTheme:t}=e.view,i=r.A.toUnitRGBA(t.accentColor),s=[0,0,0,0];return{intersectionPointColor:s,intersectionPointOutlineColor:i,pointColor:s,pointOutlineColor:i,lineColor:i,lineOutlineColor:void 0,parallelSignColor:i,rightAngleColor:i,rightAngleColorDraped:r.A.toUnitRGBA((0,o._L)(t.accentColor,.5)),rightAngleOutlineColor:i}}function U(e,t,i){let{selfSnappingZ:r,view:o,spatialReference:s}=i;return t&V.n.SELF&&(0,N.Ex)(e)&&null!=r?(0,N.FH)(e,r,o,s):e}function X(e){return e.isDraped?c.Tq:c.qt}function J(e,t,i,r,o){const s=(0,a.vt)();if(o){const i=r.basemapTerrain.overlayManager.renderer.spatialReference;(0,l.F)(e,t,s,i)}else(0,W.XG)(e,t,i,r,s);return s}},83574:(e,t,i)=>{i.d(t,{l:()=>f});var r=i(15941),o=i(20664),s=i(9392),n=i(43047),a=i(55855),l=i(14487),c=i(42294),h=i(75762),d=i(32314),u=i(67425),p=i(49296),_=i(72900),m=i(62577),g=i(66470),v=i(84248);class f extends d.X{constructor(e){super(e),this._material=null,this._texture=null,this._geometry=null,this._size=3,this._color=(0,a.fA)(1,0,1,1),this._pixelSnappingEnabled=!0,this._primitive="square",this._outlineSize=1,this._outlineColor=(0,a.fA)(1,1,1,1),this._elevationInfo=null,this.applyProperties(e)}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this.recreateGeometry()}get size(){return this._size}set size(e){if(e!==this._size){const t=this._preferredTextureSize;this._size=e,t<this._preferredTextureSize?this.recreate():this._updateSizeAttribute()}}get color(){return this._color}set color(e){(0,n.a)(e,this._color)||((0,n.c)(this._color,e),this._updateMaterial())}get pixelSnappingEnabled(){return this._pixelSnappingEnabled}set pixelSnappingEnabled(e){this._pixelSnappingEnabled!==e&&(this._pixelSnappingEnabled=e,this._updateMaterial())}get primitive(){return this._primitive}set primitive(e){this._primitive!==e&&(this._primitive=e,this.recreate())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,n.a)(e,this._outlineColor)||((0,n.c)(this._outlineColor,e),this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}_updateMaterial(){this._material&&this._material.setParameters(this._materialParameters)}_updateSizeAttribute(){const e=this.object;if(null==e)return;const t=e.geometries[0];if(null==t)return;const i=t.getMutableAttribute(g.r.SIZE).data,r=this._geometrySize;i[0]=r,i[1]=r,e.geometryVertexAttributeUpdated(e.geometries[0],g.r.SIZE)}get _materialParameters(){var e;return{color:this._color,textureIsSignedDistanceField:!0,sampleSignedDistanceFieldTexelCenter:(0,_.ny)(this._primitive),distanceFieldBoundingBox:y,occlusionTest:!1,outlineColor:this._outlineColor,outlineSize:this._outlineSize,textureId:null===(e=this._texture)||void 0===e?void 0:e.id,polygonOffset:!1,shaderPolygonOffset:0,drawInSecondSlot:!0,depthEnabled:!1,pixelSnappingEnabled:this.pixelSnappingEnabled,isDecoration:this.isDecoration}}get _geometrySize(){return this._size/x}createExternalResources(){this._texture=(0,_.sZ)(this._primitive,this._preferredTextureSize),this._material=new v.R(this._materialParameters);const e=this.view._stage;this._texture.load(e.renderView.renderingContext),e.add(this._texture)}destroyExternalResources(){this._texture&&(this.view._stage.remove(this._texture),this._texture.dispose(),this._texture=null),this._material=null}createGeometries(e){const t=this._createRenderGeometry();null!=t&&e.addGeometry(t)}forEachExternalMaterial(e){this._material&&e(this._material)}get _preferredTextureSize(){return(0,r.qE)(2*this._geometrySize,16,128)}calculateMapBounds(e){var t;const i=null===(t=this.object)||void 0===t?void 0:t.geometries[0];if(!i)return!1;const r=i.attributes.get(g.r.POSITION).data;return(0,l.F)(r,this.view.renderCoordsHelper.spatialReference,S,this.view.spatialReference),(0,c.Hq)(e,S),!0}_createRenderGeometry(){const{geometry:e,_material:t}=this;if(null==e||null==t)return null;const{renderCoordsHelper:i,elevationProvider:r}=this.view,s=(0,u.nG)(e,r,p.F.fromElevationInfo(this.elevationInfo),i),n=(0,o.s)(h.rq.get(),e.x,e.y,s),a=h.rq.get();(0,l.F)(n,e.spatialReference,a,i.spatialReference);const c=this._geometrySize;return(0,m.DJ)(t,null,a,null,[c,c],[0,0,0,1])}}const x=_.CN,y=[x/2,x/2,1-x/2,1-x/2],S=(0,s.vt)()},47996:(e,t,i)=>{i.d(t,{n:()=>O});var r=i(68134),o=i(34761),s=i(13191),n=i(20664),a=i(9392),l=i(43047),c=i(55855),h=i(75762),d=i(18117),u=i(85746),p=i(33169),_=i(50468),m=i(51799),g=i(62577),v=i(45463),f=i(442),x=i(66470),y=i(76956),S=i(425);class O extends u.X{constructor(e){super(e),this._maxSize=0,this._position=(0,a.vt)(),this._up=(0,a.vt)(),this._right=(0,a.vt)(),this._renderOccluded=v.m$.OccludeAndTransparent,this._color=(0,c.fA)(1,0,0,1),this._outlineColor=(0,c.fA)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=v.m$.Opaque,this.applyProperties(e)}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:()=>{},cameraChanged:()=>this._updateTransformObject3D()}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:b}}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateQuadMaterial())}get color(){return this._color}set color(e){(0,l.c)(this._color,e),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,l.c)(this._outlineColor,e),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(e){const t=0===this._outlineSize!=(0===e);this._outlineSize=e,t?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(e){this._outlineRenderOccluded=e,this._updateOutlineMaterial()}set geometry(e){let{previous:t,center:i,next:r}=e;this._maxSize=Math.min((0,n.p)(i,t),(0,n.p)(i,r))/3,(0,n.n)(this._up,(0,n.f)(this._up,t,i)),(0,n.n)(this._right,(0,n.f)(this._right,r,i)),(0,n.c)(this._position,i),this.recreateGeometry()}_createObject3DResources(e){const t=new y.v(this._quadMaterialParameters),i=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters);return this._createObject3DGeometries(e,t,i),{quadMaterial:t,outlineMaterial:i,forEach:e=>{e(t),i&&e(i)}}}_createObject3DGeometries(e,t,i){if((0,n.e)(this._up,a.uY)&&(0,n.e)(this._right,a.uY))return;const r=this._createGeometries(t,i);for(const o of r)e.addGeometry(o);this._updateTransformObject3D(e)}_createDrapedResources(){const e=new y.v(this._quadMaterialParameters),t=0===this._outlineSize?void 0:new S.W(this._outlineMaterialParameters),i=this._createGeometries(e,t).map((e=>new f.$(e)));return this._setTransformDraped(i),{quadMaterial:e,outlineMaterial:t,geometries:i,pixelRatioHandle:(0,r.wB)((()=>this.view.state.contentPixelRatio),(()=>{this.drapedResources.recreateGeometry()}))}}_createGeometries(e,t){const{up:i,right:r,corner:o}=this._getVertices(),s=function(e,t,i,r){return new m.V(r,[[x.r.POSITION,new _.n([0,0,0,...t,...e,...i],[0,1,2,1,2,3],3,!0)]])}(i,r,o,e);return t?[s,(0,g.Z8)(t,[i,o,r])]:[s]}_getVertices(){let e=this._up,t=this._right;const i=(0,n.g)(h.rq.get(),e,t);return this.isDraped&&(e=(0,n.c)(h.rq.get(),e),t=(0,n.c)(h.rq.get(),t),e[2]=0,t[2]=0,i[2]=0),{up:e,right:t,corner:i}}_updateTransform(){this.isDraped?this.drapedResources.recreateGeometry():this._updateTransformObject3D()}_updateTransformObject3D(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.object3dResources.object;if(!e)return;const t=this.view.state.camera,i=this._size*t.computeScreenPixelSizeAt(this._position),r=Math.min(this._maxSize,i);(0,o.kN)(w,this._position),(0,o.hs)(w,w,[r,r,r]),e.transformation=w}_setTransformDraped(e){if(0===e.length)return;const{view:{basemapTerrain:{overlayManager:t},state:{contentPixelRatio:i}}}=this,{_position:r,_size:s}=this,a=(0,n.c)(h.rq.get(),r);a[2]=p.bi;const l=R;l.spatialReference=t.renderer.spatialReference,l.x=a[0],l.y=a[1];const c=s*(this.view.overlayPixelSizeInMapUnits(l)*i),d=Math.min(this._maxSize,c);(0,o.kN)(w,a),(0,o.hs)(w,w,[d,d,1]);for(const o of e)o.transformation=w}get _quadMaterialParameters(){return{color:this._color,forceTransparentMode:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateQuadMaterial(){var e,t;null!==(e=this.object3dResources.resources)&&void 0!==e&&e.quadMaterial.setParameters(this._quadMaterialParameters),null===(t=this.drapedResources.resources)||void 0===t||t.quadMaterial.setParameters(this._quadMaterialParameters)}get _outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded,isDecoration:this.isDecoration}}_updateOutlineMaterial(){var e,t;null!==(e=this.object3dResources.resources)&&void 0!==e&&null!==(e=e.outlineMaterial)&&void 0!==e&&e.setParameters(this._outlineMaterialParameters),null===(t=this.drapedResources.resources)||void 0===t||null===(t=t.outlineMaterial)||void 0===t||t.setParameters(this._outlineMaterialParameters)}}function b(e){e.pixelRatioHandle.remove(),e.geometries=[]}const w=(0,s.vt)(),R=(0,d.T)(0,0,void 0,null)},85937:(e,t,i)=>{i.d(t,{I:()=>m});var r=i(20664),o=i(9392),s=i(43047),n=i(55855),a=i(32314),l=i(49296),c=i(44815),h=i(67425);var d=i(83490),u=i(62577),p=i(45463),_=i(84294);class m extends a.X{constructor(e){super(e),this.view=null,this._renderOccluded=p.m$.OccludeAndTransparent,this._vertices=null,this._spatialReference=null,this._color=(0,n.ci)([1,127/255,0,1]),this._size=11,this._outlineColor=(0,n.ci)([0,0,0,.5]),this._outlineSize=1,this._elevationInfo=null,this.applyProperties(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial(),this._updateOutlineMaterial())}get vertices(){return this._vertices}set vertices(e){this._vertices=e,this.recreateGeometry()}get spatialReference(){return this._spatialReference}set spatialReference(e){this._spatialReference=e,this.recreateGeometry()}get color(){return this._color}set color(e){(0,s.a)(e,this._color)||((0,s.c)(this._color,e),this._updateMaterial())}get size(){return this._size}set size(e){e!==this._size&&(this._size=e,this._updateMaterial())}get outlineColor(){return this._outlineColor}set outlineColor(e){(0,s.a)(e,this._outlineColor)||((0,s.c)(this._outlineColor,e),this._updateOutlineMaterial())}get outlineSize(){return this._outlineSize}set outlineSize(e){e!==this._outlineSize&&(this._outlineSize=e,this._updateOutlineMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get _vertexMaterialParameters(){return{color:this._color,screenSizeScale:this.size,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}get _vertexOutlineMaterialParameters(){return{color:this._outlineColor,screenSizeScale:this.size+2*this.outlineSize,renderOccluded:this._renderOccluded,isDecoration:this.isDecoration}}_updateMaterial(){this.attached&&this._vertexMaterial.setParameters(this._vertexMaterialParameters)}_updateOutlineMaterial(){this.attached&&this._vertexOutlineMaterial.setParameters(this._vertexOutlineMaterialParameters)}_createRenderGeometries(){const e=this.vertices;if(null==e||0===e.length)return[];const t=function(e,t,i,r,o){const s=(0,c.jh)(3*e.length),n=(0,c.jh)(s.length);e.forEach(((e,t)=>{s[3*t]=e[0],s[3*t+1]=e[1],s[3*t+2]=e.length>2?e[2]:0}));const a=(0,h.au)(s,t,0,n,0,s,0,s.length/3,i,r,o),l=null!=a;return{numVertices:e.length,position:s,mapPositions:n,projectionSuccess:l,sampledElevation:a}}(e,this.spatialReference,this.view.elevationProvider,this.view.renderCoordsHelper,l.F.fromElevationInfo(this.elevationInfo)),i=[],o=t.numVertices,s=t.position;for(let n=0;n<o;++n){const e=(0,r.s)(g,s[3*n],s[3*n+1],s[3*n+2]),t=v(this._vertexMaterial,.5,e),o=v(this._vertexOutlineMaterial,.5,e);i.push({vertexGeometry:t,vertexOutlineGeometry:o})}return i}createGeometries(e){const t=this._createRenderGeometries();for(const{vertexGeometry:i,vertexOutlineGeometry:r}of t)e.addGeometry(i),e.addGeometry(r)}createExternalResources(){this._vertexMaterial=new _.A({...this._vertexMaterialParameters,writeDepth:!0,cullFace:d.s2.Back,screenSizeEnabled:!0}),this._vertexOutlineMaterial=new _.A({...this._vertexOutlineMaterialParameters,forceTransparentMode:!0,writeDepth:!0,cullFace:d.s2.Front,screenSizeEnabled:!0,shadingEnabled:!1})}destroyExternalResources(){this._vertexMaterial=null,this._vertexOutlineMaterial=null}forEachExternalMaterial(e){e(this._vertexMaterial),e(this._vertexOutlineMaterial)}}const g=(0,o.vt)();function v(e,t,i){return(0,u.CM)(e,t,16,16,{offset:i})}},28048:(e,t,i)=>{i.d(t,{A:()=>p});var r=i(35143),o=i(69539),s=i(91967),n=i(46053),a=(i(81806),i(76460),i(47249),i(85842)),l=(i(27347),i(10760));i(48396);const c={bottom:"esri-text-overlay-item-anchor-bottom","bottom-right":"esri-text-overlay-item-anchor-bottom-right","bottom-left":"esri-text-overlay-item-anchor-bottom-left",top:"esri-text-overlay-item-anchor-top","top-right":"esri-text-overlay-item-anchor-top-right","top-left":"esri-text-overlay-item-anchor-top-left",center:"esri-text-overlay-item-anchor-center",right:"esri-text-overlay-item-anchor-right",left:"esri-text-overlay-item-anchor-left"};let h=class extends s.A{get position(){return[this.x,this.y]}set position(e){this._set("x",e[0]),this._set("y",e[1])}get _textShadowColor(){const{textColor:e,backgroundColor:t}=this,i=t.clone();return i.a*=e.a,i}get _textShadow(){const e=this._textShadowColor.toCss(!0);return"0 0 ".concat(this._textShadowSize,"px ").concat(e)}get padding(){return.5*this.fontSize}get _borderRadius(){return this.padding}constructor(e){super(e),this.x=0,this.y=0,this.text="-",this.fontSize=14,this.anchor="center",this.visible=!0,this.isDecoration=!0,this.backgroundColor=new o.A([0,0,0,.6]),this.textColor=new o.A([255,255,255]),this._textShadowSize=1}render(){return(0,l.h)("div",{classes:this._cssClasses(),styles:{left:Math.floor(this.x)+"px",top:Math.floor(this.y)+"px",visibility:this.visible?"visible":"hidden",fontSize:this.fontSize+"px",lineHeight:this.fontSize+"px",backgroundColor:this.backgroundColor.toCss(!0),color:this.textColor.toCss(!0),padding:this.padding+"px",borderRadius:this._borderRadius+"px",textShadow:this._textShadow}},[this.text])}renderCanvas(e){if(!this.visible)return;const t=e.font.replace(/^(.*?)px/,"");e.font="".concat(this.fontSize,"px ").concat(t);const i=this.padding,r=this._borderRadius,o=e.measureText(this.text).width,s=this.fontSize,n=d[this.anchor];e.textAlign="center",e.textBaseline="middle";const a=o+2*i,l=s+2*i,c=this.x+n.x*a,h=this.y+n.y*l;this._roundedRect(e,c,h,a,l,r),e.fillStyle=this.backgroundColor.toCss(!0),e.fill();const u=this.x+(n.x+.5)*a,p=this.y+(n.y+.5)*l;this._renderTextShadow(e,this.text,u,p),e.fillStyle=this.textColor.toCss(!0),e.fillText(this.text,u,p)}_renderTextShadow(e,t,i,r){e.lineJoin="miter",e.fillStyle="rgba(".concat(this._textShadowColor.r,", ").concat(this._textShadowColor.g,", ").concat(this._textShadowColor.b,", ").concat(1/u.length,")");const o=this._textShadowSize;for(const[s,n]of u)e.fillText(t,i+o*s,r+o*n)}_roundedRect(e,t,i,r,o,s){e.beginPath(),e.moveTo(t,i+s),e.arcTo(t,i,t+s,i,s),e.lineTo(t+r-s,i),e.arcTo(t+r,i,t+r,i+s,s),e.lineTo(t+r,i+o-s),e.arcTo(t+r,i+o,t+r-s,i+o,s),e.lineTo(t+s,i+o),e.arcTo(t,i+o,t,i+o-s,s),e.closePath()}_cssClasses(){const e={"esri-text-overlay-item":!0};let t;for(t in c)e[c[t]]=this.anchor===t;return e}};(0,r._)([(0,n.MZ)()],h.prototype,"x",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"y",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"position",null),(0,r._)([(0,n.MZ)()],h.prototype,"text",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"fontSize",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"anchor",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"visible",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"isDecoration",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"backgroundColor",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"textColor",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"_textShadowSize",void 0),(0,r._)([(0,n.MZ)()],h.prototype,"_textShadowColor",null),(0,r._)([(0,n.MZ)()],h.prototype,"_textShadow",null),(0,r._)([(0,n.MZ)()],h.prototype,"padding",null),(0,r._)([(0,n.MZ)()],h.prototype,"_borderRadius",null),h=(0,r._)([(0,a.$)("esri.views.overlay.TextOverlayItem")],h);const d={bottom:{x:-.5,y:-1,textAlign:"center",textBaseline:"bottom"},"bottom-left":{x:0,y:-1,textAlign:"left",textBaseline:"bottom"},"bottom-right":{x:-1,y:-1,textAlign:"right",textBaseline:"bottom"},center:{x:-.5,y:-.5,textAlign:"center",textBaseline:"middle"},left:{x:0,y:-.5,textAlign:"left",textBaseline:"middle"},right:{x:-1,y:-.5,textAlign:"right",textBaseline:"middle"},top:{x:-.5,y:0,textAlign:"center",textBaseline:"top"},"top-left":{x:0,y:0,textAlign:"left",textBaseline:"top"},"top-right":{x:-1,y:0,textAlign:"right",textBaseline:"top"}},u=[];{const e=16;for(let t=0;t<360;t+=360/e)u.push([Math.cos(Math.PI*t/180),Math.sin(Math.PI*t/180)])}const p=h}}]);
//# sourceMappingURL=2851.8f0471e2.chunk.js.map