"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[3933],{9299:(t,e,r)=>{r.d(e,{I:()=>s});var n=r(33584);class s{constructor(t){this._allocator=t,this._items=[],this._itemsPtr=0,this._grow()}get(){return 0===this._itemsPtr&&(0,n.d)((()=>this._reset())),this._itemsPtr===this._items.length&&this._grow(),this._items[this._itemsPtr++]}_reset(){const t=Math.min(3*Math.max(8,this._itemsPtr),this._itemsPtr+3*o);this._items.length=Math.min(t,this._items.length),this._itemsPtr=0}_grow(){for(let t=0;t<Math.max(8,Math.min(this._items.length,o));t++)this._items.push(this._allocator())}}const o=1024},85792:(t,e,r)=>{r.d(e,{W:()=>i,g:()=>c});var n=r(83800),o=r(54208),a=r(33876);function c(t,e,r,n){var l,f;if((0,o.canProjectWithoutEngine)(t.spatialReference,r)){var d;u[0]=t.x,u[1]=t.y;const o=t.z;return u[2]=null!==(d=null!==o&&void 0!==o?o:n)&&void 0!==d?d:0,(0,a.projectBuffer)(u,t.spatialReference,0,e,r,0,1)}const v=(0,o.tryProjectWithZConversion)(t,r);return!!v&&(e[0]=null===v||void 0===v?void 0:v.x,e[1]=null===v||void 0===v?void 0:v.y,e[2]=null!==(l=null!==(f=null===v||void 0===v?void 0:v.z)&&void 0!==f?f:n)&&void 0!==l?l:0,!0)}async function i(t,e,r,n,a){return await(0,o.initializeProjection)(t.spatialReference,r,null,a),c(t,e,r,n)}const u=(0,n.vt)()},56372:(t,e,r)=>{r.r(e),r.d(e,{assetMapFromAssetMapsJSON:()=>S,extractMesh:()=>h,meshFeatureSetFromJSON:()=>p});var n=r(13812),o=r(89412),a=r(69719),u=r(84661),l=r(72664),f=r(57264),d=r(98664),v=r(45042),_=r(81581),P=r(35999),A=r(94309);const m=()=>o.A.getLogger("esri.rest.support.meshFeatureSet");function p(t,e,r){var o;const a=r.features;r.features=[],delete r.geometryType;const u=A.A.fromJSON(r);if(u.geometryType="mesh",!r.assetMaps)return u;const l=S(e,r.assetMaps),f=null!==(o=t.sourceSpatialReference)&&void 0!==o?o:d.A.WGS84,v=r.globalIdFieldName,{outFields:_}=t,P=null!=_&&_.length>0?function g(t){return e=>{let{attributes:r}=e;if(!r)return{};if(!t)return r;for(const n in r)t.has(n)||delete r[n];return r}}(_.includes("*")?null:new Set(_)):()=>({});for(const d of a){const t=h(d,v,f,e,l);null!=t&&u.features.push(new n.A({geometry:t,attributes:P(d)}))}return u}function h(t,e,r,n,o){const a=t.attributes[e],d=o.get(a);if(null==d)return m().error("mesh-feature-set:asset-not-found","Service returned a feature which was not found in the asset map",t),null;if(!t.geometry)return m().error("mesh-feature-set:no-geometry","Service returned a feature without geometry",t),null;const P=function y(t,e,r){let{attributes:n}=t,{transformFieldRoles:o}=r;const a=n[o.originX],u=n[o.originY],l=n[o.originZ];return new f.A({x:a,y:u,z:l,spatialReference:e})}(t,r,n),A=u.A.fromJSON(t.geometry);A.spatialReference=r;const N=function E(t,e){let{transformFieldRoles:r}=e;return new v.A({translation:[t[r.translationX],-t[r.translationZ],t[r.translationY]],rotationAxis:[t[r.rotationX],-t[r.rotationZ],t[r.rotationY]],rotationAngle:t[r.rotationDeg],scale:[t[r.scaleX],t[r.scaleZ],t[r.scaleY]]})}(t.attributes,n),F=r.isGeographic?"local":"georeferenced",x=function w(t){const e=Array.from(t.files.values()),r=new Array;for(const n of e){if(n.status!==M.COMPLETED)return null;const t=new Array;for(const e of n.parts){if(!e)return null;t.push(new _.Bq(e.url,e.hash))}r.push(new _.Qp(n.name,n.mimeType,t))}return r}(d);return x?l.A.createWithExternalSource(P,x,{extent:A,transform:N,vertexSpace:F}):l.A.createIncomplete(P,{extent:A,transform:N,vertexSpace:F})}var M,N;function S(t,e){const r=new Map;for(const n of e){const e=n.parentGlobalId;if(null==e)continue;const o=n.assetName,u=n.assetType,l=n.assetHash,f=n.assetURL,d=n.conversionStatus,v=n.seqNo,_=(0,P.Fm)(u,t.supportedFormats);if(!_){m().error("mesh-feature-set:unknown-format","Service returned an asset of type ".concat(u,", but it does not list it as a supported type"));continue}const A=(0,a.tE)(r,e,(()=>({files:new Map})));(0,a.tE)(A.files,o,(()=>({name:o,type:u,mimeType:_,status:D(d),parts:[]}))).parts[v]={hash:l,url:f}}return r}function D(t){switch(t){case"COMPLETED":case"SUBMITTED":return M.COMPLETED;case"INPROGRESS":return M.PENDING;default:return M.FAILED}}(N=M||(M={}))[N.FAILED=0]="FAILED",N[N.PENDING=1]="PENDING",N[N.COMPLETED=2]="COMPLETED"}}]);
//# sourceMappingURL=3933.a9779555.chunk.js.map