"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[2217],{88813:(i,a,l)=>{l.d(a,{O:()=>t});class t{constructor(){this._outer=new Map}clear(){this._outer.clear()}get empty(){return 0===this._outer.size}get(i,a){var l;return null===(l=this._outer.get(i))||void 0===l?void 0:l.get(a)}set(i,a,l){const h=this._outer.get(i);h?h.set(a,l):this._outer.set(i,new Map([[a,l]]))}delete(i,a){const l=this._outer.get(i);l&&(l.delete(a),0===l.size&&this._outer.delete(i))}forEach(i){this._outer.forEach(((a,l)=>i(a,l)))}}},19070:(i,a,l)=>{l.d(a,{p:()=>o});var h=l(85402),c=l(48750);const e=i=>{let a="";a+=i[0].toUpperCase();for(let l=1;l<i.length;l++){const h=i[l];h===h.toUpperCase()?(a+="_",a+=h):a+=h.toUpperCase()}return a},s=i=>{const a={};for(const l in i)a[e(l)]=i[l];return(0,c.I)(a)},o=(i,a,l,c)=>{const f=i+i.substring(i.lastIndexOf("/")),p=a+a.substring(a.lastIndexOf("/")),b=s(c);return{attributes:l,shaders:{vertexShader:b+(0,h.Q)("".concat(f,".vert")),fragmentShader:b+(0,h.Q)("".concat(p,".frag"))}}}},44426:(i,a,l)=>{l.d(a,{A:()=>t});var h=l(21847),c=l(2689),f=l(23133);class t extends c.f{renderChildren(i){for(const a of this.children)a.setTransform(i.state);if(super.renderChildren(i),this.attributeView.update(),this.children.some((i=>i.hasData))){switch(i.drawPhase){case h.S5.MAP:this._renderChildren(i,h.RI.All);break;case h.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(i)}this._boundsRenderer&&this._boundsRenderer.doRender(i)}}_renderHighlight(i){(0,f.lB)(i,!1,(i=>{this._renderChildren(i,h.RI.Highlight)}))}}},1101:(i,a,l)=>{l.d(a,{J:()=>e});var h=l(88813),c=l(76073);class e{constructor(i){this._rctx=i,this._store=new h.O}dispose(){this._store.forEach((i=>i.forEach((i=>i.dispose())))),this._store.clear()}acquire(i,a,l,h){const f=this._store.get(i,a);if(null!=f)return f.ref(),f;const p=new c.B(this._rctx,i,a,l,h);return p.ref(),this._store.set(i,a,p),p}get test(){let i=0;return this._store.forEach((a=>a.forEach((a=>i+=a.hasGLName?2:1)))),{cachedWebGLProgramObjects:i}}}},47579:(i,a,l)=>{l.d(a,{e:()=>Z});var h=l(35598),c=l(81618),f=l(73905),p=l(71014),b=l(60985);class n{constructor(){this.blend=!1,this.blendColor={r:0,g:0,b:0,a:0},this.blendFunction={srcRGB:b.dn.ONE,dstRGB:b.dn.ZERO,srcAlpha:b.dn.ONE,dstAlpha:b.dn.ZERO},this.blendEquation={mode:b.Tb.ADD,modeAlpha:b.Tb.ADD},this.colorMask={r:!0,g:!0,b:!0,a:!0},this.faceCulling=!1,this.cullFace=b.Y7.BACK,this.frontFace=b.Ac.CCW,this.scissorTest=!1,this.scissorRect={x:0,y:0,width:0,height:0},this.depthTest=!1,this.depthFunction=b.MT.LESS,this.clearDepth=1,this.depthWrite=!0,this.depthRange={zNear:0,zFar:1},this.viewport=null,this.stencilTest=!1,this.polygonOffsetFill=!1,this.polygonOffset=[0,0],this.stencilFunction={face:b.Y7.FRONT_AND_BACK,func:b.MT.ALWAYS,ref:0,mask:1},this.clearStencil=0,this.stencilWriteMask=1,this.stencilOperation={face:b.Y7.FRONT_AND_BACK,fail:b.eA.KEEP,zFail:b.eA.KEEP,zPass:b.eA.KEEP},this.clearColor={r:0,g:0,b:0,a:0},this.program=null,this.vertexBuffer=null,this.indexBuffer=null,this.uniformBuffer=null,this.pixelPackBuffer=null,this.pixelUnpackBuffer=null,this.copyReadBuffer=null,this.copyWriteBuffer=null,this.transformFeedbackBuffer=null,this.uniformBufferBindingPoints=new Array,this.transformBufferBindingPoints=new Array,this.readFramebuffer=null,this.drawFramebuffer=null,this.renderbuffer=null,this.activeTexture=0,this.textureUnitMap=new Array,this.vertexArrayObject=null}}class e{constructor(i){this._objectType=i,this._active=new Map}add(i){const a=(new Error).stack.split("\n");a.shift(),a.shift(),this._active.set(i,a.join("\n"))}remove(i){this._active.delete(i)}resetLog(){const i=new Map;this._active.forEach(((a,l)=>{var h;let{usedMemory:c}=l;i.has(a)||i.set(a,new Map);const f=i.get(a);f.set(null!==c&&void 0!==c?c:0,null!==(h=f.get(null!==c&&void 0!==c?c:0))&&void 0!==h?h:1)})),this._active.clear();let a=0;const l=new Array;return i.forEach(((i,h)=>{let c=0;i.forEach(((i,a)=>c+=i*a)),i.set(-1,c),a+=c,l.push([h,i])})),i.clear(),l.sort(((i,a)=>a[1].get(-1)-i[1].get(-1))),l.reduce(((i,a)=>{let[l,h]=a;const c=Math.round(h.get(-1)/1024);return h.delete(-1),i+"  ".concat(c,"KB from ").concat(Array.from(h.values()).reduce(((i,a)=>i+a),0)," allocations at ").concat(l,"\n")}),"Total unestimated ".concat(this._objectType," memory: ").concat(Math.round(a/1024),"KB\n"))}}const F=!1;class InstanceCounter_n{constructor(){for(this._current=new Array,this._allocations=F?new e("WebGLObject"):null;this._current.length<b.vt.COUNT;)this._current.push(0)}increment(i,a){var l;let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._current[i]+=h,null===(l=this._allocations)||void 0===l||l.add(a)}decrement(i,a){var l;let h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this._current[i]-=h,null===(l=this._allocations)||void 0===l||l.remove(a)}get current(){return this._current}get total(){return this.current.reduce(((i,a,l)=>i+(l<b.vt.UNCOUNTED?a:0)),0)}get resourceInformation(){var i;let a="";if(this.total>0){a+="Live objects:\n";for(let i=0;i<b.vt.COUNT;++i){const l=this._current[i];l>0&&(a+="".concat(b.vt[i],": ").concat(l,"\n"))}}return a+=null===(i=this._allocations)||void 0===i?void 0:i.resetLog(),a}}class Parameters_e{constructor(i,a,l){var h;const c=a.textureFilterAnisotropic,f=null!==(h=l.maxAnisotropy)&&void 0!==h?h:1/0;this.versionString=i.getParameter(i.VERSION),this.maxVertexTextureImageUnits=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),this.maxVertexAttributes=i.getParameter(i.MAX_VERTEX_ATTRIBS),this.maxMaxAnisotropy=c?Math.min(i.getParameter(c.MAX_TEXTURE_MAX_ANISOTROPY),f):1,this.maxTextureImageUnits=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),this.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),this.maxRenderbufferSize=i.getParameter(i.MAX_RENDERBUFFER_SIZE),this.maxViewportDims=i.getParameter(i.MAX_VIEWPORT_DIMS),this.maxUniformBufferBindings=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS),this.maxVertexUniformBlocks=i.getParameter(i.MAX_VERTEX_UNIFORM_BLOCKS),this.maxFragmentUniformBlocks=i.getParameter(i.MAX_FRAGMENT_UNIFORM_BLOCKS),this.maxUniformBlockSize=i.getParameter(i.MAX_UNIFORM_BLOCK_SIZE),this.uniformBufferOffsetAlignment=i.getParameter(i.UNIFORM_BUFFER_OFFSET_ALIGNMENT),this.maxArrayTextureLayers=i.getParameter(i.MAX_ARRAY_TEXTURE_LAYERS),this.maxSamples=i.getParameter(i.MAX_SAMPLES)}}var m=l(1101),B=l(43474),T=l(83663),x=l(76879),v=l(50886),C=l(96767),O=l(25078);class AppleAmdDriverHelper_n{constructor(i){this._rctx=i,this._indexBuffer=this._createIndexbuffer(),this._program=this._createHelperProgram()}static getShaderSources(){return{vertex:"#version 300 es\n    precision highp float;\n\n    void main(void) {\n      gl_Position = vec4(0.0, 0.0, float(gl_VertexID)-2.0, 1.0);\n    }",fragment:"#version 300 es\n    precision highp float;\n\n    out vec4 fragColor;\n\n    void main(void) {\n      fragColor = vec4(0.0, 0.0, 0.0, 1.0);\n    }"}}_createHelperProgram(){const i=AppleAmdDriverHelper_n.getShaderSources();return this._rctx.programCache.acquire(i.vertex,i.fragment,new Map([]))}_createIndexbuffer(){return O.g.createIndex(this._rctx,b._U.STATIC_DRAW,new Uint32Array([0]))}run(){this._program.compiled&&this._indexBuffer&&(this._rctx.bindVAO(null),this._rctx.useProgram(this._program),this._rctx.bindBuffer(this._indexBuffer,b.NZ.ELEMENT_ARRAY_BUFFER),this._rctx.drawElements(b.WR.POINTS,1,b.pe.UNSIGNED_INT,0))}dispose(){this._program.dispose(),this._indexBuffer.dispose()}get test(){var i;return{cachedWebGLObjects:null!==(i=this._indexBuffer)&&void 0!==i&&i.glName?1:0}}}var U=l(50707),M=l(83881),w=l(17288);class d extends w._{constructor(i){super(),this._rctx=i,this._helperProgram=null,(0,v.A)("mac")&&(0,v.A)("chrome")&&(this._program=this._prepareProgram(),this._helperProgram=this._prepareHelperProgram())}dispose(){var i;super.dispose(),null!==(i=this._helperProgram)&&void 0!==i&&i.dispose(),this._helperProgram=null}_test(i){const a=this._rctx,l=a.getBoundFramebufferObject(),{x:h,y:c,width:f,height:p}=a.getViewport();a.resetState();const F=new M.R(1);F.wrapMode=b.pF.CLAMP_TO_EDGE,F.samplingMode=b.Cj.NEAREST;const m=new U.H(a,F),B=O.g.createIndex(this._rctx,b._U.STATIC_DRAW,new Uint8Array([0]));a.bindFramebuffer(m),a.setViewport(0,0,1,1),a.useProgram(this._helperProgram),a.bindBuffer(B,b.NZ.ELEMENT_ARRAY_BUFFER),a.drawElements(b.WR.POINTS,1,b.pe.UNSIGNED_BYTE,0),a.useProgram(i),a.bindVAO(null),a.drawArrays(b.WR.TRIANGLES,0,258);const T=new Uint8Array(4);return m.readPixels(0,0,1,1,b.Ab.RGBA,b.ld.UNSIGNED_BYTE,T),a.setViewport(h,c,f,p),a.bindFramebuffer(l),m.dispose(),B.dispose(),255===T[0]}_prepareProgram(){const i="#version 300 es\n    precision highp float;\n\n    out float triangleId;\n\n    const vec3 triangleVertices[3] = vec3[3](vec3(-0.5, -0.5, 0.0), vec3(0.5, -0.5, 0.0), vec3(0.0, 0.5, 0.0));\n\n    void main(void) {\n      triangleId = floor(float(gl_VertexID)/3.0);\n\n      vec3 position = triangleVertices[gl_VertexID % 3];\n      float offset = triangleId / ".concat(C.H.float(85),";\n      position.z = 0.5 - offset;\n\n      gl_Position = vec4(position, 1.0);\n    }\n    "),a="#version 300 es\n    precision highp float;\n\n    in float triangleId;\n\n    out vec4 fragColor;\n\n    void main(void) {\n      fragColor = triangleId == ".concat(C.H.float(85)," ? vec4(0.0, 1.0, 0.0, 1.0) : vec4(1.0, 0.0, 0.0, 1.0);\n    }\n    ");return this._rctx.programCache.acquire(i,a,new Map([]))}_prepareHelperProgram(){const i=AppleAmdDriverHelper_n.getShaderSources();return this._rctx.programCache.acquire(i.vertex,i.fragment,new Map([]))}}var I=l(31714),D=l(83800),y=l(55299),k=l(77127),G=l(40332);class _ extends w._{constructor(i){super(),this._rctx=i,this._program=A(this._rctx,!1),this._obfuscated=A(this._rctx,!0)}dispose(){super.dispose(),this._obfuscated=(0,h.WD)(this._obfuscated)}_test(i){if((0,v.A)("force-double-precision-obfuscation"))return!0;if(null==this._obfuscated)return!1;const a=this._rctx,l=a.getBoundFramebufferObject(),{x:h,y:c,width:f,height:p}=a.getViewport(),b=this._runProgram(i),F=this._runProgram(this._obfuscated);return a.setViewport(h,c,f,p),a.bindFramebuffer(l),0!==b&&(0===F||b/F>5)}_runProgram(i){const a=this._rctx;a.resetState();const l=new M.R(1);l.wrapMode=b.pF.CLAMP_TO_EDGE,l.samplingMode=b.Cj.NEAREST;const h=new U.H(a,l),c=O.g.createVertex(a,b._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),f=new k.Z(a,new Map([["position",0]]),{geometry:[new G._("position",2,b.pe.UNSIGNED_SHORT,0,4)]},{geometry:c}),p=(0,D.fA)(5633261.287538229,2626832.878767164,1434988.0495278358),F=(0,D.fA)(5633271.46742708,2626873.6381334523,1434963.231608387),m=new Float32Array(6);(0,y.jS)(p,m,3);const B=new Float32Array(6);(0,y.jS)(F,B,3),a.useProgram(i),i.setUniform3f("u_highA",m[0],m[2],m[4]),i.setUniform3f("u_lowA",m[1],m[3],m[5]),i.setUniform3f("u_highB",B[0],B[2],B[4]),i.setUniform3f("u_lowB",B[1],B[3],B[5]),a.bindFramebuffer(h),a.setViewport(0,0,1,1),a.bindVAO(f),a.drawArrays(b.WR.TRIANGLE_STRIP,0,4);const T=new Uint8Array(4);h.readPixels(0,0,1,1,b.Ab.RGBA,b.ld.UNSIGNED_BYTE,T),f.dispose(),h.dispose();const x=(p[2]-F[2])/25,v=(0,I.T)(T);return Math.abs(x-v)}}function A(i,a){const l="\n\n  precision highp float;\n\n  attribute vec2 position;\n\n  uniform vec3 u_highA;\n  uniform vec3 u_lowA;\n  uniform vec3 u_highB;\n  uniform vec3 u_lowB;\n\n  varying vec4 v_color;\n\n  ".concat(a?"#define DOUBLE_PRECISION_REQUIRES_OBFUSCATION":"","\n\n  #ifdef DOUBLE_PRECISION_REQUIRES_OBFUSCATION\n\n  vec3 dpPlusFrc(vec3 a, vec3 b) {\n    return mix(a, a + b, vec3(notEqual(b, vec3(0))));\n  }\n\n  vec3 dpMinusFrc(vec3 a, vec3 b) {\n    return mix(vec3(0), a - b, vec3(notEqual(a, b)));\n  }\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = dpPlusFrc(hiA, hiB);\n    vec3 e = dpMinusFrc(t1, hiA);\n    vec3 t2 = dpMinusFrc(hiB, e) + dpMinusFrc(hiA, dpMinusFrc(t1, e)) + loA + loB;\n    return t1 + t2;\n  }\n\n  #else\n\n  vec3 dpAdd(vec3 hiA, vec3 loA, vec3 hiB, vec3 loB) {\n    vec3 t1 = hiA + hiB;\n    vec3 e = t1 - hiA;\n    vec3 t2 = ((hiB - e) + (hiA - (t1 - e))) + loA + loB;\n    return t1 + t2;\n  }\n\n  #endif\n\n  const float MAX_RGBA_FLOAT =\n    255.0 / 256.0 +\n    255.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 +\n    255.0 / 256.0 / 256.0 / 256.0 / 256.0;\n\n  const vec4 FIXED_POINT_FACTORS = vec4(1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0);\n\n  vec4 float2rgba(const float value) {\n    // Make sure value is in the domain we can represent\n    float valueInValidDomain = clamp(value, 0.0, MAX_RGBA_FLOAT);\n\n    // Decompose value in 32bit fixed point parts represented as\n    // uint8 rgba components. Decomposition uses the fractional part after multiplying\n    // by a power of 256 (this removes the bits that are represented in the previous\n    // component) and then converts the fractional part to 8bits.\n    vec4 fixedPointU8 = floor(fract(valueInValidDomain * FIXED_POINT_FACTORS) * 256.0);\n\n    // Convert uint8 values (from 0 to 255) to floating point representation for\n    // the shader\n    const float toU8AsFloat = 1.0 / 255.0;\n\n    return fixedPointU8 * toU8AsFloat;\n  }\n\n  void main() {\n    vec3 val = dpAdd(u_highA, u_lowA, -u_highB, -u_lowB);\n\n    v_color = float2rgba(val.z / 25.0);\n\n    gl_Position = vec4(position * 2.0 - 1.0, 0.0, 1.0);\n  }\n  ");return i.programCache.acquire(l,"\n  precision highp float;\n\n  varying vec4 v_color;\n\n  void main() {\n    gl_FragColor = v_color;\n  }\n  ",new Map([["position",0]]))}var L=l(55082);class u extends w._{constructor(i){var a,l;if(super(),this._rctx=i,!i.gl)return;if(null===(a=i.capabilities.colorBufferFloat)||void 0===a||!a.textureFloat||null===(l=i.capabilities.colorBufferFloat)||void 0===l||!l.floatBlend)return;this._program=i.programCache.acquire("\n    precision highp float;\n    attribute vec2 a_pos;\n\n    void main() {\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n     precision highp float;\n\n     void main() {\n      gl_FragColor = vec4(0.5, 0.5, 0.5, 0.5);\n     }\n    ",new Map([["a_pos",0]]))}_test(i){const a=this._rctx,l=new M.R(1);l.wrapMode=b.pF.CLAMP_TO_EDGE,l.dataType=b.ld.FLOAT,l.internalFormat=b.H0.RGBA32F,l.samplingMode=b.Cj.NEAREST;const h=new U.H(a,l),c=O.g.createVertex(a,b._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),f=new k.Z(a,new Map([["a_pos",0]]),{geometry:[new G._("a_pos",2,b.pe.UNSIGNED_SHORT,0,4)]},{geometry:c});a.useProgram(i);const p=a.getBoundFramebufferObject(),{x:F,y:m,width:T,height:x}=a.getViewport();a.bindFramebuffer(h),a.setViewport(0,0,1,1),a.bindVAO(f),a.drawArrays(b.WR.TRIANGLE_STRIP,0,4);const v=(0,B.Ey)({blending:L.AJ});a.setPipelineState(v),a.drawArrays(b.WR.TRIANGLE_STRIP,0,4);const C=a.gl.getError();return a.setViewport(F,m,T,x),a.bindFramebuffer(p),f.dispose(),h.dispose(),1282!==C||(console.warn("Device claims support for WebGL extension EXT_float_blend but does not support it. Using fall back."),!1)}}var W=l(89412);class g extends w._{constructor(i){super(),this._rctx=i;this._program=i.programCache.acquire("\n      precision highp float;\n      attribute vec2 a_pos;\n      uniform highp sampler2D u_texture;\n      varying vec4 v_color;\n\n      float getBit(in float bitset, in int bitIndex) {\n        float offset = pow(2.0, float(bitIndex));\n        return mod(floor(bitset / offset), 2.0);\n      }\n\n      void main() {\n        vec4 value = texture2D(u_texture, vec2(0.0));\n        float bit = getBit(value.x * 255.0, 1);\n\n        v_color = bit * vec4(1.0);\n        gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n      }\n      ","\n      precision highp float;\n      varying vec4 v_color;\n\n      void main() {\n        gl_FragColor = v_color;\n      }\n      ",new Map([["a_pos",0]]))}_test(i){const a=this._rctx,l=new M.R(1);l.wrapMode=b.pF.CLAMP_TO_EDGE,l.samplingMode=b.Cj.NEAREST;const h=new U.H(a,l),c=new Uint8Array(4),f=O.g.createVertex(a,b._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),p=new k.Z(a,new Map([["a_position",0]]),{geometry:[new G._("a_position",2,b.pe.SHORT,0,4)]},{geometry:f});a.useProgram(i);const F=new T.g(a,l,new Uint8Array([2,255,0,0]));i.setUniform1i("u_texture",0),a.bindTexture(F,0);const m=a.getBoundFramebufferObject();a.bindFramebuffer(h),a.useProgram(i);const{x:B,y:x,width:v,height:C}=a.getViewport();a.setViewport(0,0,1,1),a.bindVAO(p),a.drawArrays(b.WR.TRIANGLE_STRIP,0,4),a.setViewport(B,x,v,C),h.readPixels(0,0,1,1,b.Ab.RGBA,b.ld.UNSIGNED_BYTE,c),p.dispose(),h.dispose();const w=255!==c[0]||255!==c[1]||255!==c[2]||255!==c[3];return w&&W.A.getLogger("esri.views.webgl.testSamplerPrecision").warn("A problem was detected with your graphics driver. Your driver does not appear to honor sampler precision specifiers, which may result in rendering issues due to numerical instability. We recommend ensuring that your drivers have been updated to the latest version. Applying lowp sampler workaround. [".concat(c[0],".").concat(c[1],".").concat(c[2],".").concat(c[3],"]")),a.bindFramebuffer(m),w}}var X=l(46081);class o{constructor(i){this.rctx=i,this.floatBufferBlend=new u(i),this.svgPremultipliesAlpha=new X.H(i),this.doublePrecisionRequiresObfuscation=new _(i),this.ignoresSamplerPrecision=new g(i),this.drawArraysRequiresIndicesTypeReset=new d(i)}dispose(){this.ignoresSamplerPrecision.dispose(),this.doublePrecisionRequiresObfuscation.dispose(),this.svgPremultipliesAlpha.dispose(),this.floatBufferBlend.dispose(),this.drawArraysRequiresIndicesTypeReset.dispose()}}var V=l(61995);function S(i,a,l,h,c){if(h)return!0;if(a[l])return!1;for(const f of c)if(i.getExtension(f))return!0;return!1}class Capabilities_u{constructor(i,a){this._gl=i,this._compressedTextureETC=null,this._compressedTextureS3TC=null,this._textureFilterAnisotropic=null,this._textureFloat=null,this._colorBufferFloat=null,this._loseContext=null,this._textureNorm16=null,this._depthTexture=null,this._textureFloatLinear=null,this._disabledExtensions=a.disabledExtensions||{},this._debugWebGLExtensions=a.debugWebGLExtensions||{}}get compressedTextureETC(){return this._compressedTextureETC||(this._compressedTextureETC=function load_(i,a){if(a.compressedTextureETC)return null;const l=i.getExtension("WEBGL_compressed_texture_etc");return l?{COMPRESSED_R11_EAC:l.COMPRESSED_R11_EAC,COMPRESSED_SIGNED_R11_EAC:l.COMPRESSED_SIGNED_R11_EAC,COMPRESSED_RG11_EAC:l.COMPRESSED_RG11_EAC,COMPRESSED_SIGNED_RG11_EAC:l.COMPRESSED_SIGNED_RG11_EAC,COMPRESSED_RGB8_ETC2:l.COMPRESSED_RGB8_ETC2,COMPRESSED_SRGB8_ETC2:l.COMPRESSED_SRGB8_ETC2,COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:l.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:l.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,COMPRESSED_RGBA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC,COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC}:null}(this._gl,this._disabledExtensions)),this._compressedTextureETC}get compressedTextureS3TC(){return this._compressedTextureS3TC||(this._compressedTextureS3TC=function E(i,a){if(a.compressedTextureS3TC)return null;const l=i.getExtension("WEBGL_compressed_texture_s3tc");return l?{COMPRESSED_RGB_S3TC_DXT1:l.COMPRESSED_RGB_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT1:l.COMPRESSED_RGBA_S3TC_DXT1_EXT,COMPRESSED_RGBA_S3TC_DXT3:l.COMPRESSED_RGBA_S3TC_DXT3_EXT,COMPRESSED_RGBA_S3TC_DXT5:l.COMPRESSED_RGBA_S3TC_DXT5_EXT}:null}(this._gl,this._disabledExtensions)),this._compressedTextureS3TC}get textureFilterAnisotropic(){return this._textureFilterAnisotropic||(this._textureFilterAnisotropic=function R(i,a){if(a.textureFilterAnisotropic)return null;const l=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");return l?{MAX_TEXTURE_MAX_ANISOTROPY:l.MAX_TEXTURE_MAX_ANISOTROPY_EXT,TEXTURE_MAX_ANISOTROPY:l.TEXTURE_MAX_ANISOTROPY_EXT}:null}(this._gl,this._disabledExtensions)),this._textureFilterAnisotropic}get disjointTimerQuery(){return this._disjointTimerQuery||(this._disjointTimerQuery=(0,V._R)(this._gl,this._disabledExtensions)),this._disjointTimerQuery}get textureFloat(){if(!this._textureFloat){const{textureFloatLinear:i}=this._disabledExtensions;this._textureFloat={textureFloatLinear:!i&&!!this._gl.getExtension("OES_texture_float_linear")}}return this._textureFloat}get colorBufferFloat(){return this._colorBufferFloat||(this._colorBufferFloat=function t(i,a){const l=!a.colorBufferHalfFloat&&i.getExtension("EXT_color_buffer_half_float")||!a.colorBufferFloat&&i.getExtension("EXT_color_buffer_float"),h=!a.colorBufferFloat&&i.getExtension("EXT_color_buffer_float"),c=!a.floatBlend&&!a.colorBufferFloat&&i.getExtension("EXT_float_blend");return l||h||c?{textureFloat:!!h,textureHalfFloat:!!l,floatBlend:!!c,R16F:i.R16F,RG16F:i.RG16F,RGBA16F:i.RGBA16F,R32F:i.R32F,RG32F:i.RG32F,RGBA32F:i.RGBA32F,R11F_G11F_B10F:i.R11F_G11F_B10F,RGB16F:i.RGB16F}:null}(this._gl,this._disabledExtensions)),this._colorBufferFloat}get depthTexture(){return null===this._depthTexture&&(this._depthTexture=S(this._gl,this._disabledExtensions,"depthTexture",!0,["WEBGL_depth_texture","MOZ_WEBGL_depth_texture","WEBKIT_WEBGL_depth_texture"])),this._depthTexture}get loseContext(){return this._loseContext||(this._loseContext=function LoseContext_e(i,a){const l=a.loseContext&&i.getExtension("WEBGL_lose_context");return l?{loseRenderingContext:()=>l.loseContext()}:null}(this._gl,this._debugWebGLExtensions)),this._loseContext}get textureNorm16(){return this._textureNorm16||(this._textureNorm16=function load_e(i,a){if(a.textureNorm16)return null;const l=i.getExtension("EXT_texture_norm16");return l?{R16:l.R16_EXT,RG16:l.RG16_EXT,RGB16:l.RGB16_EXT,RGBA16:l.RGBA16_EXT,R16_SNORM:l.R16_SNORM_EXT,RG16_SNORM:l.RG16_SNORM_EXT,RGB16_SNORM:l.RGB16_SNORM_EXT,RGBA16_SNORM:l.RGBA16_SNORM_EXT}:null}(this._gl,this._disabledExtensions)),this._textureNorm16}get textureFloatLinear(){return null===this._textureFloatLinear&&(this._textureFloatLinear=S(this._gl,this._disabledExtensions,"textureFloatLinear",!1,["OES_texture_float_linear"])),this._textureFloatLinear}enable(i){return this[i]}}let Z=class{constructor(i,a){this.gl=i,this.instanceCounter=new InstanceCounter_n,this.programCache=new m.J(this),this._transformFeedbackRequestInfo=null,this._state=new n,this._numOfDrawCalls=0,this._numOfTriangles=0,this._loadExtensions(),this.configure(a)}configure(i){this._capabilities=new Capabilities_u(this.gl,i),this._parameters=new Parameters_e(this.gl,this._capabilities,i),T.g.TEXTURE_UNIT_FOR_UPDATES=this._parameters.maxTextureImageUnits-1;const a=this.gl.getParameter(this.gl.VIEWPORT);this._state=new n,this._state.viewport={x:a[0],y:a[1],width:a[2],height:a[3]},this._stateTracker=new B.Ms({setBlending:i=>{if(i){this.setBlendingEnabled(!0),this.setBlendEquationSeparate(i.opRgb,i.opAlpha),this.setBlendFunctionSeparate(i.srcRgb,i.dstRgb,i.srcAlpha,i.dstAlpha);const a=i.color;this.setBlendColor(a.r,a.g,a.b,a.a)}else this.setBlendingEnabled(!1)},setCulling:i=>{i?(this.setFaceCullingEnabled(!0),this.setCullFace(i.face),this.setFrontFace(i.mode)):this.setFaceCullingEnabled(!1)},setPolygonOffset:i=>{i?(this.setPolygonOffsetFillEnabled(!0),this.setPolygonOffset(i.factor,i.units)):this.setPolygonOffsetFillEnabled(!1)},setDepthTest:i=>{i?(this.setDepthTestEnabled(!0),this.setDepthFunction(i.func)):this.setDepthTestEnabled(!1)},setStencilTest:i=>{if(i){this.setStencilTestEnabled(!0);const a=i.function;this.setStencilFunction(a.func,a.ref,a.mask);const l=i.operation;this.setStencilOp(l.fail,l.zFail,l.zPass)}else this.setStencilTestEnabled(!1)},setDepthWrite:i=>{i?(this.setDepthWriteEnabled(!0),this.setDepthRange(i.zNear,i.zFar)):this.setDepthWriteEnabled(!1)},setColorWrite:i=>{i?this.setColorMask(i.r,i.g,i.b,i.a):this.setColorMask(!1,!1,!1,!1)},setStencilWrite:i=>{i?this.setStencilWriteMask(i.mask):this.setStencilWriteMask(0)},setDrawBuffers:i=>{const{gl:a}=this;if(i)a.drawBuffers(i.buffers);else{const{drawFramebuffer:i}=this._state;null===i||0===i.colorAttachments.length?a.drawBuffers([b.Hr.BACK]):a.drawBuffers([b.Nm.COLOR_ATTACHMENT0])}}}),this.enforceState(),(0,h.WD)(this._driverTest),this._driverTest=new o(this)}dispose(){(0,h.WD)(this._driverTest),this.programCache.dispose(),this.bindVAO(null),this.unbindBuffer(b.NZ.ARRAY_BUFFER),this.unbindBuffer(b.NZ.ELEMENT_ARRAY_BUFFER),this.unbindBuffer(b.NZ.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(b.NZ.PIXEL_PACK_BUFFER),this.unbindBuffer(b.NZ.PIXEL_UNPACK_BUFFER),this.unbindBuffer(b.NZ.COPY_READ_BUFFER),this.unbindBuffer(b.NZ.COPY_WRITE_BUFFER),this._state.textureUnitMap.length=0,(0,p.en)()&&console.log(this.instanceCounter.resourceInformation)}get driverTest(){return this._driverTest}get contextAttributes(){return this.gl.getContextAttributes()}get parameters(){return this._parameters}setPipelineState(i){this._stateTracker.setPipeline(i)}setBlendingEnabled(i){this._state.blend!==i&&(!0===i?this.gl.enable(this.gl.BLEND):this.gl.disable(this.gl.BLEND),this._state.blend=i,this._stateTracker.invalidateBlending())}externalProgramUpdate(){var i;null!==(i=this._state.program)&&void 0!==i&&i.stop(),this._state.program=null}externalTextureUnitUpdate(i,a){for(let l=0;l<i.length;++l)this._state.textureUnitMap[i[l]]=null;a>=0&&(this._state.activeTexture=a)}externalVertexArrayObjectUpdate(){this.gl.bindVertexArray(null),this._state.vertexArrayObject=null,this._state.vertexBuffer=null,this._state.indexBuffer=null}externalVertexBufferUpdate(){this._state.vertexBuffer=null}externalIndexBufferUpdate(){this._state.indexBuffer=null}setBlendColor(i,a,l,h){i===this._state.blendColor.r&&a===this._state.blendColor.g&&l===this._state.blendColor.b&&h===this._state.blendColor.a||(this.gl.blendColor(i,a,l,h),this._state.blendColor.r=i,this._state.blendColor.g=a,this._state.blendColor.b=l,this._state.blendColor.a=h,this._stateTracker.invalidateBlending())}setBlendFunction(i,a){i===this._state.blendFunction.srcRGB&&a===this._state.blendFunction.dstRGB||(this.gl.blendFunc(i,a),this._state.blendFunction.srcRGB=i,this._state.blendFunction.srcAlpha=i,this._state.blendFunction.dstRGB=a,this._state.blendFunction.dstAlpha=a,this._stateTracker.invalidateBlending())}setBlendFunctionSeparate(i,a,l,h){this._state.blendFunction.srcRGB===i&&this._state.blendFunction.srcAlpha===l&&this._state.blendFunction.dstRGB===a&&this._state.blendFunction.dstAlpha===h||(this.gl.blendFuncSeparate(i,a,l,h),this._state.blendFunction.srcRGB=i,this._state.blendFunction.srcAlpha=l,this._state.blendFunction.dstRGB=a,this._state.blendFunction.dstAlpha=h,this._stateTracker.invalidateBlending())}setBlendEquation(i){this._state.blendEquation.mode!==i&&(this.gl.blendEquation(i),this._state.blendEquation.mode=i,this._state.blendEquation.modeAlpha=i,this._stateTracker.invalidateBlending())}setBlendEquationSeparate(i,a){this._state.blendEquation.mode===i&&this._state.blendEquation.modeAlpha===a||(this.gl.blendEquationSeparate(i,a),this._state.blendEquation.mode=i,this._state.blendEquation.modeAlpha=a,this._stateTracker.invalidateBlending())}setColorMask(i,a,l,h){this._state.colorMask.r===i&&this._state.colorMask.g===a&&this._state.colorMask.b===l&&this._state.colorMask.a===h||(this.gl.colorMask(i,a,l,h),this._state.colorMask.r=i,this._state.colorMask.g=a,this._state.colorMask.b=l,this._state.colorMask.a=h,this._stateTracker.invalidateColorWrite())}setClearColor(i,a,l,h){this._state.clearColor.r===i&&this._state.clearColor.g===a&&this._state.clearColor.b===l&&this._state.clearColor.a===h||(this.gl.clearColor(i,a,l,h),this._state.clearColor.r=i,this._state.clearColor.g=a,this._state.clearColor.b=l,this._state.clearColor.a=h)}setFaceCullingEnabled(i){this._state.faceCulling!==i&&(!0===i?this.gl.enable(this.gl.CULL_FACE):this.gl.disable(this.gl.CULL_FACE),this._state.faceCulling=i,this._stateTracker.invalidateCulling())}setPolygonOffsetFillEnabled(i){this._state.polygonOffsetFill!==i&&(!0===i?this.gl.enable(this.gl.POLYGON_OFFSET_FILL):this.gl.disable(this.gl.POLYGON_OFFSET_FILL),this._state.polygonOffsetFill=i,this._stateTracker.invalidatePolygonOffset())}setPolygonOffset(i,a){this._state.polygonOffset[0]===i&&this._state.polygonOffset[1]===a||(this._state.polygonOffset[0]=i,this._state.polygonOffset[1]=a,this.gl.polygonOffset(i,a),this._stateTracker.invalidatePolygonOffset())}setCullFace(i){this._state.cullFace!==i&&(this.gl.cullFace(i),this._state.cullFace=i,this._stateTracker.invalidateCulling())}setFrontFace(i){this._state.frontFace!==i&&(this.gl.frontFace(i),this._state.frontFace=i,this._stateTracker.invalidateCulling())}setScissorTestEnabled(i){this._state.scissorTest!==i&&(!0===i?this.gl.enable(this.gl.SCISSOR_TEST):this.gl.disable(this.gl.SCISSOR_TEST),this._state.scissorTest=i)}setScissorRect(i,a,l,h){this._state.scissorRect.x===i&&this._state.scissorRect.y===a&&this._state.scissorRect.width===l&&this._state.scissorRect.height===h||(this.gl.scissor(i,a,l,h),this._state.scissorRect.x=i,this._state.scissorRect.y=a,this._state.scissorRect.width=l,this._state.scissorRect.height=h)}setDepthTestEnabled(i){this._state.depthTest!==i&&(!0===i?this.gl.enable(this.gl.DEPTH_TEST):this.gl.disable(this.gl.DEPTH_TEST),this._state.depthTest=i,this._stateTracker.invalidateDepthTest())}setClearDepth(i){this._state.clearDepth!==i&&(this.gl.clearDepth(i),this._state.clearDepth=i)}setDepthFunction(i){this._state.depthFunction!==i&&(this.gl.depthFunc(i),this._state.depthFunction=i,this._stateTracker.invalidateDepthTest())}setDepthWriteEnabled(i){this._state.depthWrite!==i&&(this.gl.depthMask(i),this._state.depthWrite=i,this._stateTracker.invalidateDepthWrite())}setDepthRange(i,a){this._state.depthRange.zNear===i&&this._state.depthRange.zFar===a||(this.gl.depthRange(i,a),this._state.depthRange.zNear=i,this._state.depthRange.zFar=a,this._stateTracker.invalidateDepthWrite())}setStencilTestEnabled(i){this._state.stencilTest!==i&&(!0===i?this.gl.enable(this.gl.STENCIL_TEST):this.gl.disable(this.gl.STENCIL_TEST),this._state.stencilTest=i,this._stateTracker.invalidateStencilTest())}setClearStencil(i){i!==this._state.clearStencil&&(this.gl.clearStencil(i),this._state.clearStencil=i)}setStencilFunction(i,a,l){this._state.stencilFunction.func===i&&this._state.stencilFunction.ref===a&&this._state.stencilFunction.mask===l||(this.gl.stencilFunc(i,a,l),this._state.stencilFunction.face=b.Y7.FRONT_AND_BACK,this._state.stencilFunction.func=i,this._state.stencilFunction.ref=a,this._state.stencilFunction.mask=l,this._stateTracker.invalidateStencilTest())}setStencilFunctionSeparate(i,a,l,h){this._state.stencilFunction.face===i&&this._state.stencilFunction.func===a&&this._state.stencilFunction.ref===l&&this._state.stencilFunction.mask===h||(this.gl.stencilFuncSeparate(i,a,l,h),this._state.stencilFunction.face=i,this._state.stencilFunction.func=a,this._state.stencilFunction.ref=l,this._state.stencilFunction.mask=h,this._stateTracker.invalidateStencilTest())}setStencilWriteMask(i){this._state.stencilWriteMask!==i&&(this.gl.stencilMask(i),this._state.stencilWriteMask=i,this._stateTracker.invalidateStencilWrite())}setStencilOp(i,a,l){this._state.stencilOperation.face===b.Y7.FRONT_AND_BACK&&this._state.stencilOperation.fail===i&&this._state.stencilOperation.zFail===a&&this._state.stencilOperation.zPass===l||(this.gl.stencilOp(i,a,l),this._state.stencilOperation.face=b.Y7.FRONT_AND_BACK,this._state.stencilOperation.fail=i,this._state.stencilOperation.zFail=a,this._state.stencilOperation.zPass=l,this._stateTracker.invalidateStencilTest())}setStencilOpSeparate(i,a,l,h){this._state.stencilOperation.face===i&&this._state.stencilOperation.fail===a&&this._state.stencilOperation.zFail===l&&this._state.stencilOperation.zPass===h||(this.gl.stencilOpSeparate(i,a,l,h),this._state.stencilOperation.face=i,this._state.stencilOperation.fail=a,this._state.stencilOperation.zFail=l,this._state.stencilOperation.zPass=h,this._stateTracker.invalidateStencilTest())}setActiveTexture(i){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const l=this._state.activeTexture;return i>=0&&(a||i!==this._state.activeTexture)&&(this.gl.activeTexture(b.xM+i),this._state.activeTexture=i),l}clear(i){i&&this.gl.clear(i)}clearSafe(i){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:255;i&&(i&b.hn.COLOR_BUFFER_BIT&&this.setColorMask(!0,!0,!0,!0),i&b.hn.DEPTH_BUFFER_BIT&&this.setDepthWriteEnabled(!0),i&b.hn.STENCIL_BUFFER_BIT&&this.setStencilWriteMask(a),this.gl.clear(i))}clearFramebuffer(i){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],l=arguments.length>2&&void 0!==arguments[2]&&arguments[2],h=0;if(i){const a=1e-13,l=Math.max(a,i[3]);this.setClearColor(i[0],i[1],i[2],l),h|=b.hn.COLOR_BUFFER_BIT}a&&(h|=b.hn.DEPTH_BUFFER_BIT),!1===l?l=0:(!0===l&&(l=255),h|=b.hn.STENCIL_BUFFER_BIT),h&&this.clearSafe(h,l)}drawArrays(i,a,l){if(this._transformFeedbackRequestInfo){var h;if(i!==this._transformFeedbackRequestInfo.primitiveType)throw new Error("DrawArrays called during transform feedback, but primitiveType does not match that of the current transform feedback request");if(null==(null===(h=this._state.program)||void 0===h?void 0:h.hasTransformFeedbackVaryings))throw new Error("DrawArrays called during transform feedback, but the shader program was not linked with a transform feedback varying")}if((0,p.en)()){this._numOfDrawCalls++,this._numOfTriangles+=N(i,l);const a=this._state.textureUnitMap;for(let i=0;i<a.length;i++){var c;const l=a[i];if(null!=l&&l===(null===(c=this._state.drawFramebuffer)||void 0===c?void 0:c.colorTexture))throw new Error("Detected readWrite. Texture already bound at index ".concat(i))}}this.gl.drawArrays(i,a,l),(0,p.Y2)(this.gl)}drawArraysInstanced(i,a,l,h){this.gl.drawArraysInstanced(i,a,l,h),(0,p.Y2)(this.gl)}drawElements(i,a,l,h){if(this._transformFeedbackRequestInfo)throw new Error("Cannot called drawElements during a transform feedback request");if((0,p.en)()&&(this._numOfDrawCalls++,this._numOfTriangles+=N(i,a)),this.gl.drawElements(i,a,l,h),(0,p.en)()){const f=(0,x.WH)(this);if(f){var c;const p=this.getBoundVAO(),b=null===p||void 0===p?void 0:p.indexBuffer,F={indexBuffer:b,vertexBuffers:null===p||void 0===p?void 0:p.vertexBuffers},m={mode:i,count:a,type:l,offset:h},B=null!==(c=null===b||void 0===b?void 0:b.size)&&void 0!==c?c:0,T=h+a,x=B<T?". Buffer is too small. Attempted to draw index ".concat(T," of ").concat(B):"";console.error("drawElements: ".concat(f).concat(x),{args:m,vao:F})}}}logInfo(){(0,p.en)()&&console.log("DrawCalls: ".concat(this._numOfDrawCalls,", Triangles: ").concat(this._numOfTriangles))}resetInfo(){(0,p.en)()&&(this._numOfDrawCalls=0,this._numOfTriangles=0)}get capabilities(){return this._capabilities}setViewport(i,a,l,h){l=Math.max(Math.round(l),1),h=Math.max(Math.round(h),1);const c=this._state.viewport;c.x===i&&c.y===a&&c.width===l&&c.height===h||(c.x=i,c.y=a,c.width=l,c.height=h,this.gl.viewport(i,a,l,h))}setViewport4fv(i){this.setViewport(i[0],i[1],i[2],i[3])}restoreViewport(i){let{x:a,y:l,width:h,height:c}=i;this.setViewport(a,l,h,c)}getViewport(){const i=this._state.viewport;return{x:i.x,y:i.y,width:i.width,height:i.height}}useProgram(i){var a,l;this._state.program!==i&&(null!==(a=this._state.program)&&void 0!==a&&a.stop(),this._state.program=i,this.gl.useProgram(null!==(l=null===i||void 0===i?void 0:i.glName)&&void 0!==l?l:null))}bindTexture(i,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];(a>=this.parameters.maxTextureImageUnits||a<0)&&console.error("Input texture unit is out of range of available units!");const h=this._state.textureUnitMap[a];return null==(null===i||void 0===i?void 0:i.glName)?(null!=h&&(this.setActiveTexture(a,l),this.gl.bindTexture(h.descriptor.target,null)),this._state.textureUnitMap[a]=null,h):l||h!==i?(this.setActiveTexture(a,l),this.gl.bindTexture(i.descriptor.target,i.glName),i.applyChanges(),this._state.textureUnitMap[a]=i,h):(i.isDirty&&(this.setActiveTexture(a,l),i.applyChanges()),h)}unbindTexture(i){if(null!=i)for(let a=0;a<this.parameters.maxTextureImageUnits;a++)this._state.textureUnitMap[a]===i&&(this.bindTexture(null,a),this._state.textureUnitMap[a]=null)}bindFramebuffer(i){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this._state.readFramebuffer!==i||this._state.drawFramebuffer!==i){if(this._stateTracker.invalidateDrawBuffers(),null==i)return this.gl.bindFramebuffer(b.R.FRAMEBUFFER,null),void(this._state.readFramebuffer=this._state.drawFramebuffer=null);i.initializeAndBind(b.R.FRAMEBUFFER),this._state.readFramebuffer=i,this._state.drawFramebuffer=i}}bindFramebufferSeparate(i,a){let l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const h=a===b.R.READ_FRAMEBUFFER,c=h?this._state.readFramebuffer:this._state.drawFramebuffer;(l||c!==i)&&(null==i?this.gl.bindFramebuffer(a,null):i.initializeAndBind(a),h?this._state.readFramebuffer=null!==i&&void 0!==i?i:null:this._state.drawFramebuffer=null!==i&&void 0!==i?i:null)}blitFramebuffer(i,a){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,h=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:i.width,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:i.height,p=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,F=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,m=arguments.length>8&&void 0!==arguments[8]?arguments[8]:a.width,B=arguments.length>9&&void 0!==arguments[9]?arguments[9]:a.height,T=arguments.length>10&&void 0!==arguments[10]?arguments[10]:b.hn.COLOR_BUFFER_BIT,x=arguments.length>11&&void 0!==arguments[11]?arguments[11]:b.Cj.NEAREST;this.bindFramebufferSeparate(i,b.R.READ_FRAMEBUFFER),this.bindFramebufferSeparate(a,b.R.DRAW_FRAMEBUFFER),this.gl.blitFramebuffer(l,h,c,f,p,F,m,B,T,x)}bindBuffer(i,a){var l;if(i)switch(null!==(l=a)&&void 0!==l||(a=i.bufferType),a){case b.NZ.ARRAY_BUFFER:this._state.vertexBuffer=P(this.gl,i,a,this._state.vertexBuffer);break;case b.NZ.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=P(this.gl,i,a,this._state.indexBuffer);break;case b.NZ.UNIFORM_BUFFER:this._state.uniformBuffer=P(this.gl,i,a,this._state.uniformBuffer);break;case b.NZ.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=P(this.gl,i,a,this._state.pixelPackBuffer);break;case b.NZ.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=P(this.gl,i,a,this._state.pixelUnpackBuffer);break;case b.NZ.COPY_READ_BUFFER:this._state.copyReadBuffer=P(this.gl,i,a,this._state.copyReadBuffer);break;case b.NZ.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=P(this.gl,i,a,this._state.copyWriteBuffer);break;case b.NZ.TRANSFORM_FEEDBACK_BUFFER:this._state.transformFeedbackBuffer=P(this.gl,i,a,this._state.transformFeedbackBuffer)}}bindRenderbuffer(i){const a=this.gl;i||(a.bindRenderbuffer(a.RENDERBUFFER,null),this._state.renderbuffer=null),this._state.renderbuffer!==i&&(a.bindRenderbuffer(a.RENDERBUFFER,i.glName),this._state.renderbuffer=i)}_getBufferBinding(i,a){if(a>=this.parameters.maxUniformBufferBindings||a<0)return console.error("Uniform buffer binding point is out of range!"),null;const l=i===b.NZ.UNIFORM_BUFFER?this._state.uniformBufferBindingPoints:this._state.transformBufferBindingPoints;let h=l[a];return null==h&&(h={buffer:null,offset:0,size:0},l[a]=h),h}bindBufferBase(i,a,l){const h=this._getBufferBinding(i,a);null!=h&&(h.buffer===l&&0===h.offset&&0===h.size||(this.gl.bindBufferBase(i,a,l?l.glName:null),h.buffer=l,h.offset=0,h.size=0))}bindBufferRange(i,a,l,h,c){const f=this._getBufferBinding(i,a);null!=f&&(f.buffer===l&&f.offset===h&&f.size===c||(h%this._parameters.uniformBufferOffsetAlignment==0?(this.gl.bindBufferRange(i,a,l.glName,h,c),f.buffer=l,f.offset=h,f.size=c):console.error("Uniform buffer binding offset is not a multiple of the context offset alignment")))}bindUBO(i,a,l,h){null!=a?((0,p.en)()&&(null!==h&&void 0!==h?h:a.byteLength)>this._parameters.maxUniformBlockSize&&console.error("Attempting to bind more data than the maximum uniform block size"),a.initialize(),void 0!==l&&void 0!==h?this.bindBufferRange(b.NZ.UNIFORM_BUFFER,i,a.buffer,l,h):this.bindBufferBase(b.NZ.UNIFORM_BUFFER,i,a.buffer)):this.bindBufferBase(b.NZ.UNIFORM_BUFFER,i,null)}unbindUBO(i){for(let a=0,l=this._state.uniformBufferBindingPoints.length;a<l;a++){const l=this._state.uniformBufferBindingPoints[a];null!=l&&l.buffer===i.buffer&&this.bindBufferBase(b.NZ.UNIFORM_BUFFER,a,null)}}unbindBuffer(i){switch(i){case b.NZ.ARRAY_BUFFER:this._state.vertexBuffer=P(this.gl,null,i,this._state.vertexBuffer);break;case b.NZ.ELEMENT_ARRAY_BUFFER:this._state.indexBuffer=P(this.gl,null,i,this._state.indexBuffer);break;case b.NZ.UNIFORM_BUFFER:this._state.uniformBuffer=P(this.gl,null,i,this._state.uniformBuffer);break;case b.NZ.PIXEL_PACK_BUFFER:this._state.pixelPackBuffer=P(this.gl,null,i,this._state.pixelPackBuffer);break;case b.NZ.PIXEL_UNPACK_BUFFER:this._state.pixelUnpackBuffer=P(this.gl,null,i,this._state.pixelUnpackBuffer);break;case b.NZ.COPY_READ_BUFFER:this._state.copyReadBuffer=P(this.gl,null,i,this._state.copyReadBuffer);break;case b.NZ.COPY_WRITE_BUFFER:this._state.copyWriteBuffer=P(this.gl,null,i,this._state.copyWriteBuffer)}}bindVAO(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null!=i?this._state.vertexArrayObject!==i&&(i.bind(),this._state.vertexArrayObject=i):this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null)}bindTransformFeedback(i){const{gl:a}=this;a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,i.glName)}beginTransformFeedback(i,a){if(this._transformFeedbackRequestInfo)throw new Error("Already in a transform feedback request");const{gl:l}=this;l.bindTransformFeedback(l.TRANSFORM_FEEDBACK,i.glName),l.beginTransformFeedback(a),this._transformFeedbackRequestInfo={primitiveType:a}}endTransformFeedback(){if(!this._transformFeedbackRequestInfo)throw new Error("Not in a transform feedback request");const{gl:i}=this;i.endTransformFeedback(),i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),this._transformFeedbackRequestInfo=null}async clientWaitAsync(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,f.l5)(10);const{gl:a}=this,l=a.fenceSync(b.tx.SYNC_GPU_COMMANDS_COMPLETE,0);if(!l)throw new Error("Client wait failed, could not create sync object");let h;this.instanceCounter.increment(b.vt.Sync,l),a.flush();do{await(0,c.Pl)(i),h=a.clientWaitSync(l,0,0)}while(h===b.sS.TIMEOUT_EXPIRED);if(this.instanceCounter.decrement(b.vt.Sync,l),a.deleteSync(l),h===b.sS.WAIT_FAILED)throw new Error("Client wait failed")}getBoundFramebufferObject(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:b.R.FRAMEBUFFER)===b.R.READ_FRAMEBUFFER?this._state.readFramebuffer:this._state.drawFramebuffer}getBoundVAO(){return this._state.vertexArrayObject}resetState(){this.useProgram(null),this.bindVAO(null),this.bindFramebuffer(null,!0),this.unbindBuffer(b.NZ.ARRAY_BUFFER),this.unbindBuffer(b.NZ.ELEMENT_ARRAY_BUFFER),this.unbindBuffer(b.NZ.UNIFORM_BUFFER),this._state.uniformBufferBindingPoints.length=0,this.unbindBuffer(b.NZ.PIXEL_PACK_BUFFER),this.unbindBuffer(b.NZ.PIXEL_UNPACK_BUFFER),this.unbindBuffer(b.NZ.COPY_READ_BUFFER),this.unbindBuffer(b.NZ.COPY_WRITE_BUFFER);for(let i=0;i<this.parameters.maxTextureImageUnits;++i)this.bindTexture(null,i);this.setBlendingEnabled(!1),this.setBlendFunction(b.dn.ONE,b.dn.ZERO),this.setBlendEquation(b.Tb.ADD),this.setBlendColor(0,0,0,0),this.setFaceCullingEnabled(!1),this.setCullFace(b.Y7.BACK),this.setFrontFace(b.Ac.CCW),this.setPolygonOffsetFillEnabled(!1),this.setPolygonOffset(0,0),this.setScissorTestEnabled(!1),this.setScissorRect(0,0,this.gl.canvas.width,this.gl.canvas.height),this.setDepthTestEnabled(!1),this.setDepthFunction(b.MT.LESS),this.setDepthRange(0,1),this.setStencilTestEnabled(!1),this.setStencilFunction(b.MT.ALWAYS,0,0),this.setStencilOp(b.eA.KEEP,b.eA.KEEP,b.eA.KEEP),this.setClearColor(0,0,0,0),this.setClearDepth(1),this.setClearStencil(0),this.setColorMask(!0,!0,!0,!0),this.setStencilWriteMask(4294967295),this.setDepthWriteEnabled(!0),this.setViewport(0,0,this.gl.canvas.width,this.gl.canvas.height)}enforceState(){var i,a,l,h,c,f;const{gl:p}=this;p.bindVertexArray(null);for(let b=0;b<this.parameters.maxVertexAttributes;b++)p.disableVertexAttribArray(b);this._state.vertexBuffer?p.bindBuffer(this._state.vertexBuffer.bufferType,this._state.vertexBuffer.glName):p.bindBuffer(b.NZ.ARRAY_BUFFER,null),this._state.indexBuffer?p.bindBuffer(this._state.indexBuffer.bufferType,this._state.indexBuffer.glName):p.bindBuffer(b.NZ.ELEMENT_ARRAY_BUFFER,null),this._state.uniformBuffer?p.bindBuffer(this._state.uniformBuffer.bufferType,this._state.uniformBuffer.glName):p.bindBuffer(b.NZ.UNIFORM_BUFFER,null);for(let m=0;m<this._parameters.maxUniformBufferBindings;m++){const i=this._state.uniformBufferBindingPoints[m];if(null!=i){const{buffer:a,offset:l,size:h}=i;null!==a?0===l&&0===h?p.bindBufferBase(b.NZ.UNIFORM_BUFFER,m,a.glName):p.bindBufferRange(b.NZ.UNIFORM_BUFFER,m,a.glName,l,h):p.bindBufferBase(b.NZ.UNIFORM_BUFFER,m,null)}}if(this._state.pixelPackBuffer?p.bindBuffer(this._state.pixelPackBuffer.bufferType,this._state.pixelPackBuffer.glName):p.bindBuffer(b.NZ.PIXEL_PACK_BUFFER,null),this._state.pixelUnpackBuffer?p.bindBuffer(this._state.pixelUnpackBuffer.bufferType,this._state.pixelUnpackBuffer.glName):p.bindBuffer(b.NZ.PIXEL_UNPACK_BUFFER,null),this._state.copyReadBuffer?p.bindBuffer(this._state.copyReadBuffer.bufferType,this._state.copyReadBuffer.glName):p.bindBuffer(b.NZ.COPY_READ_BUFFER,null),this._state.copyWriteBuffer?p.bindBuffer(this._state.copyWriteBuffer.bufferType,this._state.copyWriteBuffer.glName):p.bindBuffer(b.NZ.COPY_WRITE_BUFFER,null),p.bindFramebuffer(b.R.READ_FRAMEBUFFER,null),p.readBuffer(p.BACK),this._state.readFramebuffer&&(p.bindFramebuffer(b.R.READ_FRAMEBUFFER,this._state.readFramebuffer.glName),p.readBuffer(b.Nm.COLOR_ATTACHMENT0)),p.bindFramebuffer(b.R.DRAW_FRAMEBUFFER,null!==(i=null===(a=this._state.drawFramebuffer)||void 0===a?void 0:a.glName)&&void 0!==i?i:null),this._state.vertexArrayObject){const i=this._state.vertexArrayObject;this._state.vertexArrayObject&&(this._state.vertexArrayObject.unbind(),this._state.vertexArrayObject=null),this.bindVAO(i)}p.useProgram(null!==(l=null===(h=this._state.program)||void 0===h?void 0:h.glName)&&void 0!==l?l:null),p.blendColor(this._state.blendColor.r,this._state.blendColor.g,this._state.blendColor.b,this._state.blendColor.a),p.bindRenderbuffer(p.RENDERBUFFER,null!==(c=null===(f=this._state.renderbuffer)||void 0===f?void 0:f.glName)&&void 0!==c?c:null),!0===this._state.blend?p.enable(this.gl.BLEND):p.disable(this.gl.BLEND),p.blendEquationSeparate(this._state.blendEquation.mode,this._state.blendEquation.modeAlpha),p.blendFuncSeparate(this._state.blendFunction.srcRGB,this._state.blendFunction.dstRGB,this._state.blendFunction.srcAlpha,this._state.blendFunction.dstAlpha),p.clearColor(this._state.clearColor.r,this._state.clearColor.g,this._state.clearColor.b,this._state.clearColor.a),p.clearDepth(this._state.clearDepth),p.clearStencil(this._state.clearStencil),p.colorMask(this._state.colorMask.r,this._state.colorMask.g,this._state.colorMask.b,this._state.colorMask.a),p.cullFace(this._state.cullFace),p.depthFunc(this._state.depthFunction),p.depthRange(this._state.depthRange.zNear,this._state.depthRange.zFar),!0===this._state.depthTest?p.enable(p.DEPTH_TEST):p.disable(p.DEPTH_TEST),p.depthMask(this._state.depthWrite),p.frontFace(this._state.frontFace),p.lineWidth(1),!0===this._state.faceCulling?p.enable(p.CULL_FACE):p.disable(p.CULL_FACE),p.polygonOffset(this._state.polygonOffset[0],this._state.polygonOffset[1]),!0===this._state.polygonOffsetFill?p.enable(p.POLYGON_OFFSET_FILL):p.disable(p.POLYGON_OFFSET_FILL),p.scissor(this._state.scissorRect.x,this._state.scissorRect.y,this._state.scissorRect.width,this._state.scissorRect.height),!0===this._state.scissorTest?p.enable(p.SCISSOR_TEST):p.disable(p.SCISSOR_TEST),p.stencilFunc(this._state.stencilFunction.func,this._state.stencilFunction.ref,this._state.stencilFunction.mask),p.stencilOpSeparate(this._state.stencilOperation.face,this._state.stencilOperation.fail,this._state.stencilOperation.zFail,this._state.stencilOperation.zPass),!0===this._state.stencilTest?p.enable(p.STENCIL_TEST):p.disable(p.STENCIL_TEST),p.stencilMask(this._state.stencilWriteMask);for(let m=0;m<this.parameters.maxTextureImageUnits;m++){p.activeTexture(b.xM+m),p.bindTexture(b.Ap.TEXTURE_2D,null),p.bindTexture(b.Ap.TEXTURE_CUBE_MAP,null),p.bindTexture(b.Ap.TEXTURE_3D,null),p.bindTexture(b.Ap.TEXTURE_2D_ARRAY,null);const i=this._state.textureUnitMap[m];null!=i&&p.bindTexture(i.descriptor.target,i.glName)}p.activeTexture(b.xM+this._state.activeTexture);const F=this._state.viewport;p.viewport(F.x,F.y,F.width,F.height),this.resetInfo()}_loadExtensions(){this.gl.getExtension("KHR_parallel_shader_compile")}};function P(i,a,l,h){return a?h!==a&&i.bindBuffer(l,a.glName):i.bindBuffer(l,null),a}function N(i,a){switch(i){case b.WR.POINTS:return 2*a;case b.WR.TRIANGLES:return a/3;case b.WR.TRIANGLE_STRIP:case b.WR.TRIANGLE_FAN:return a-2;default:return 0}}},55299:(i,a,l)=>{function t(i,a,l){for(let h=0;h<l;++h)a[2*h]=i[h],a[2*h+1]=i[h]-a[2*h]}function o(i,a){const l=i.length;for(let c=0;c<l;++c)h[0]=i[c],a[c]=h[0];return a}function r(i,a){const l=i.length;for(let c=0;c<l;++c)h[0]=i[c],h[1]=i[c]-h[0],a[c]=h[1];return a}l.d(a,{Zo:()=>o,jA:()=>r,jS:()=>t});const h=new Float32Array(2)},48750:(i,a,l)=>{function e(i){const{options:a,value:l}=i;return"number"==typeof a[l]}function n(i){let a="";for(const l in i){const h=i[l];if("boolean"==typeof h)h&&(a+="#define ".concat(l,"\n"));else if("number"==typeof h)a+="#define ".concat(l," ").concat(h.toFixed(),"\n");else if("object"==typeof h)if(e(h)){const{value:i,options:c,namespace:f}=h,p=f?"".concat(f,"_"):"";for(const l in c)a+="#define ".concat(p).concat(l," ").concat(c[l].toFixed(),"\n");a+="#define ".concat(l," ").concat(p).concat(i,"\n")}else{const i=h.options;let c=0;for(const l in i)a+="#define ".concat(i[l]," ").concat((c++).toFixed(),"\n");a+="#define ".concat(l," ").concat(i[h.value],"\n")}}return a}l.d(a,{I:()=>n})}}]);
//# sourceMappingURL=2217.d7ce5f18.chunk.js.map