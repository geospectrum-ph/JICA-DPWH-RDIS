"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[4187],{30925:(M,C,E)=>{E.d(C,{w:()=>s});var A=E(16842),X=E(17244),q=E(60964);class s{constructor(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,C=arguments.length>1?arguments[1]:void 0;this._compareMinX=o,this._compareMinY=l,this._toBBox=M=>M,this._maxEntries=Math.max(4,M||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),C&&("function"==typeof C?this._toBBox=C:this._initFormat(C)),this.clear()}destroy(){this.clear(),Z.prune(),N.prune(),z.prune(),k.prune()}all(M){this._all(this._data,M)}search(M,C){let E=this._data;const A=this._toBBox;if(x(M,E))for(Z.clear();E;){for(let X=0,q=E.children.length;X<q;X++){const q=E.children[X],N=E.leaf?A(q):q;x(M,N)&&(E.leaf?C(q):_(M,N)?this._all(q,C):Z.push(q))}E=Z.pop()}}collides(M){let C=this._data;const E=this._toBBox;if(!x(M,C))return!1;for(Z.clear();C;){for(let A=0,X=C.children.length;A<X;A++){const X=C.children[A],q=C.leaf?E(X):X;if(x(M,q)){if(C.leaf||_(M,q))return!0;Z.push(X)}}C=Z.pop()}return!1}load(M){if(!M.length)return this;if(M.length<this._minEntries){for(let C=0,E=M.length;C<E;C++)this.insert(M[C]);return this}let C=this._build(M.slice(0,M.length),0,M.length-1,0);if(this._data.children.length)if(this._data.height===C.height)this._splitRoot(this._data,C);else{if(this._data.height<C.height){const M=this._data;this._data=C,C=M}this._insert(C,this._data.height-C.height-1,!0)}else this._data=C;return this}insert(M){return M&&this._insert(M,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(M){if(!M)return this;let C,E=this._data,X=null,q=0,Z=!1;const N=this._toBBox(M);for(z.clear(),k.clear();E||z.length>0;){var L;if(E||(E=z.pop(),X=z.data[z.length-1],q=null!==(L=k.pop())&&void 0!==L?L:0,Z=!0),E.leaf&&(C=(0,A.qh)(E.children,M,E.children.length,E.indexHint),-1!==C))return E.children.splice(C,1),z.push(E),this._condense(z),this;Z||E.leaf||!_(E,N)?X?(q++,E=X.children[q],Z=!1):E=null:(z.push(E),k.push(q),q=0,X=E,E=E.children[0])}return this}toJSON(){return this._data}fromJSON(M){return this._data=M,this}_all(M,C){let E=M;for(N.clear();E;){var A;if(!0===E.leaf)for(const M of E.children)C(M);else N.pushArray(E.children);E=null!==(A=N.pop())&&void 0!==A?A:null}}_build(M,C,E,A){const X=E-C+1;let q=this._maxEntries;if(X<=q){const A=new w(M.slice(C,E+1));return h(A,this._toBBox),A}A||(A=Math.ceil(Math.log(X)/Math.log(q)),q=Math.ceil(X/q**(A-1)));const Z=new b([]);Z.height=A;const N=Math.ceil(X/q),z=N*Math.ceil(Math.sqrt(q));f(M,C,E,z,this._compareMinX);for(let k=C;k<=E;k+=z){const C=Math.min(k+z-1,E);f(M,k,C,N,this._compareMinY);for(let E=k;E<=C;E+=N){const X=Math.min(E+N-1,C);Z.children.push(this._build(M,E,X,A-1))}}return h(Z,this._toBBox),Z}_chooseSubtree(M,C,E,A){for(;A.push(C),!0!==C.leaf&&A.length-1!==E;){let E,A=1/0,X=1/0;for(let q=0,Z=C.children.length;q<Z;q++){const Z=C.children[q],N=c(Z),z=d(M,Z)-N;z<X?(X=z,A=N<A?N:A,E=Z):z===X&&N<A&&(A=N,E=Z)}C=E||C.children[0]}return C}_insert(M,C,E){const A=this._toBBox,X=E?M:A(M);z.clear();const q=this._chooseSubtree(X,this._data,C,z);for(q.children.push(M),r(q,X);C>=0&&z.data[C].children.length>this._maxEntries;)this._split(z,C),C--;this._adjustParentBBoxes(X,z,C)}_split(M,C){const E=M.data[C],A=E.children.length,X=this._minEntries;this._chooseSplitAxis(E,X,A);const q=this._chooseSplitIndex(E,X,A);if(!q)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const Z=E.children.splice(q,E.children.length-q),N=E.leaf?new w(Z):new b(Z);N.height=E.height,h(E,this._toBBox),h(N,this._toBBox),C?M.data[C-1].children.push(N):this._splitRoot(E,N)}_splitRoot(M,C){this._data=new b([M,C]),this._data.height=M.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(M,C,E){let A,X,q;A=X=1/0;for(let Z=C;Z<=E-C;Z++){const C=a(M,0,Z,this._toBBox),N=a(M,Z,E,this._toBBox),z=u(C,N),k=c(C)+c(N);z<A?(A=z,q=Z,X=k<X?k:X):z===A&&k<X&&(X=k,q=Z)}return q}_chooseSplitAxis(M,C,E){const A=M.leaf?this._compareMinX:o,X=M.leaf?this._compareMinY:l;this._allDistMargin(M,C,E,A)<this._allDistMargin(M,C,E,X)&&M.children.sort(A)}_allDistMargin(M,C,E,A){M.children.sort(A);const X=this._toBBox,q=a(M,0,C,X),Z=a(M,E-C,E,X);let N=m(q)+m(Z);for(let z=C;z<E-C;z++){const C=M.children[z];r(q,M.leaf?X(C):C),N+=m(q)}for(let z=E-C-1;z>=C;z--){const C=M.children[z];r(Z,M.leaf?X(C):C),N+=m(Z)}return N}_adjustParentBBoxes(M,C,E){for(let A=E;A>=0;A--)r(C.data[A],M)}_condense(M){for(let C=M.length-1;C>=0;C--){const E=M.data[C];if(0===E.children.length)if(C>0){const X=M.data[C-1],q=X.children;q.splice((0,A.qh)(q,E,q.length,X.indexHint),1)}else this.clear();else h(E,this._toBBox)}}_initFormat(M){const C=["return a"," - b",";"];this._compareMinX=new Function("a","b",C.join(M[0])),this._compareMinY=new Function("a","b",C.join(M[1])),this._toBBox=new Function("a","return {minX: a"+M[0]+", minY: a"+M[1]+", maxX: a"+M[2]+", maxY: a"+M[3]+"};")}}function h(M,C){a(M,0,M.children.length,C,M)}function a(M,C,E,A,X){X||(X=new w([])),X.minX=1/0,X.minY=1/0,X.maxX=-1/0,X.maxY=-1/0;for(let q,Z=C;Z<E;Z++)q=M.children[Z],r(X,M.leaf?A(q):q);return X}function r(M,C){M.minX=Math.min(M.minX,C.minX),M.minY=Math.min(M.minY,C.minY),M.maxX=Math.max(M.maxX,C.maxX),M.maxY=Math.max(M.maxY,C.maxY)}function o(M,C){return M.minX-C.minX}function l(M,C){return M.minY-C.minY}function c(M){return(M.maxX-M.minX)*(M.maxY-M.minY)}function m(M){return M.maxX-M.minX+(M.maxY-M.minY)}function d(M,C){return(Math.max(C.maxX,M.maxX)-Math.min(C.minX,M.minX))*(Math.max(C.maxY,M.maxY)-Math.min(C.minY,M.minY))}function u(M,C){const E=Math.max(M.minX,C.minX),A=Math.max(M.minY,C.minY),X=Math.min(M.maxX,C.maxX),q=Math.min(M.maxY,C.maxY);return Math.max(0,X-E)*Math.max(0,q-A)}function _(M,C){return M.minX<=C.minX&&M.minY<=C.minY&&C.maxX<=M.maxX&&C.maxY<=M.maxY}function x(M,C){return C.minX<=M.maxX&&C.minY<=M.maxY&&C.maxX>=M.minX&&C.maxY>=M.minY}function f(M,C,E,A,X){const Z=[C,E];for(;Z.length;){const C=Z.pop(),E=Z.pop();if(C-E<=A)continue;const N=E+Math.ceil((C-E)/A/2)*A;(0,q.q)(M,N,E,C,X),Z.push(E,N,N,C)}}const Z=new X.A,N=new X.A,z=new X.A,k=new X.A({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new A.vW}}class w extends B{constructor(M){super(),this.children=M,this.leaf=!0}}class b extends B{constructor(M){super(),this.children=M,this.leaf=!1}}},77026:(M,C,E)=>{E.d(C,{g:()=>A});const A={convertToGEGeometry:function s(M,C){return null==C?null:M.convertJSONToGeometry(C)},exportPoint:function n(M,C,E){const A=new i(M.getPointX(C),M.getPointY(C),E),X=M.hasZ(C),q=M.hasM(C);return X&&(A.z=M.getPointZ(C)),q&&(A.m=M.getPointM(C)),A},exportPolygon:function o(M,C,E){return new e(M.exportPaths(C),E,M.hasZ(C),M.hasM(C))},exportPolyline:function a(M,C,E){return new h(M.exportPaths(C),E,M.hasZ(C),M.hasM(C))},exportMultipoint:function c(M,C,E){return new r(M.exportPoints(C),E,M.hasZ(C),M.hasM(C))},exportExtent:function m(M,C,E){const A=M.hasZ(C),X=M.hasM(C),q=new x(M.getXMin(C),M.getYMin(C),M.getXMax(C),M.getYMax(C),E);if(A){const E=M.getZExtent(C);q.zmin=E.vmin,q.zmax=E.vmax}if(X){const E=M.getMExtent(C);q.mmin=E.vmin,q.mmax=E.vmax}return q}};class i{constructor(M,C,E){this.x=M,this.y=C,this.spatialReference=E,this.z=void 0,this.m=void 0}}class e{constructor(M,C,E,A){this.rings=M,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,E&&(this.hasZ=E),A&&(this.hasM=A)}}class h{constructor(M,C,E,A){this.paths=M,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,E&&(this.hasZ=E),A&&(this.hasM=A)}}class r{constructor(M,C,E,A){this.points=M,this.spatialReference=C,this.hasZ=void 0,this.hasM=void 0,E&&(this.hasZ=E),A&&(this.hasM=A)}}class x{constructor(M,C,E,A,X){this.xmin=M,this.ymin=C,this.xmax=E,this.ymax=A,this.spatialReference=X,this.zmin=void 0,this.zmax=void 0,this.mmin=void 0,this.mmax=void 0}}},61816:(M,C,E)=>{E.d(C,{F:()=>o});var A=E(50886),X=E(30925),q=E(88965);const Z={minX:0,minY:0,maxX:0,maxY:0};function e(M,C,E){(function t(M){Z.minX=M[0],Z.minY=M[1],Z.maxX=M[2],Z.maxY=M[3]})(C),M.search(Z,E)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new X.w(9,(0,A.A)("esri-csp-restrictions")?M=>({minX:M[0],minY:M[1],maxX:M[2],maxY:M[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const M=new Array(this._idByBounds.size);let C=0;this._idByBounds.forEach(((E,A)=>{M[C++]=A})),this._indexInvalid=!1,this._index.clear(),this._index.load(M)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((M=>this._idByBounds.has(M)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const M=(0,q.Ie)();for(const C of this._boundsById.values())C&&(M[0]=Math.min(C[0],M[0]),M[1]=Math.min(C[1],M[1]),M[2]=Math.max(C[2],M[2]),M[3]=Math.max(C[3],M[3]));return M}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(M){const C=this._boundsById.get(M);this._boundsById.delete(M),C&&(this._idByBounds.delete(C),this._indexInvalid||this._index.remove(C))}forEachInBounds(M,C){this._loadIndex(),e(this._index,M,(M=>C(this._idByBounds.get(M))))}get(M){return this._boundsById.get(M)}has(M){return this._boundsById.has(M)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(M,C){if(!this._indexInvalid){const C=this._boundsById.get(M);C&&(this._index.remove(C),this._idByBounds.delete(C))}this._boundsById.set(M,C),C&&(this._idByBounds.set(C,M),this._indexInvalid||(this._boundsToLoad.push(C),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},45691:(M,C,E)=>{E.d(C,{A:()=>m});var A=E(16842),X=E(4180),q=E(73067),Z=E(89412),N=E(21374),z=E(88965),k=E(32050),L=E(61816),O=E(23047),J=E(19464);const Q=(0,N.vt)();class m{constructor(M){this.geometryInfo=M,this._boundsStore=new L.F,this._featuresById=new Map,this._markedIds=new Set,this.events=new q.A,this.featureAdapter=J.T}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let M=0;return this._featuresById.forEach((C=>{null!=C.geometry&&C.geometry.coords&&(M+=C.geometry.coords.length)})),{featureCount:this._featuresById.size,vertexCount:M/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(M){if(null==this.fullBounds)return null;const[C,E,A,X]=this.fullBounds;return{xmin:C,ymin:E,xmax:A,ymax:X,spatialReference:(0,O.ag)(M)}}add(M){this._add(M),this._emitChanged()}addMany(M){for(const C of M)this._add(C);this._emitChanged()}upsertMany(M){const C=M.map((M=>this._upsert(M)));return this._emitChanged(),C.filter(A.Ru)}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(M){const C=this._featuresById.get(M);return C?(this._remove(C),this._emitChanged(),C):null}removeManyById(M){this._boundsStore.invalidateIndex();for(const C of M){const M=this._featuresById.get(C);M&&this._remove(M)}this._emitChanged()}forEachBounds(M,C){for(const E of M){const M=this._boundsStore.get(E.objectId);M&&C((0,N.Jt)(Q,M))}}getFeature(M){return this._featuresById.get(M)}has(M){return this._featuresById.has(M)}forEach(M){this._featuresById.forEach((C=>M(C)))}forEachInBounds(M,C){this._boundsStore.forEachInBounds(M,(M=>{C(this._featuresById.get(M))}))}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let M=!1;this._featuresById.forEach(((C,E)=>{this._markedIds.has(E)||(M=!0,this._remove(C))})),this._markedIds.clear(),M&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(M){var C;if(!M)return;const E=M.objectId;if(null==E)return void Z.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new X.A("featurestore:invalid-feature","feature id is missing",{feature:M}));const A=this._featuresById.get(E);let q;if(this._markedIds.add(E),A?(M.displayId=A.displayId,q=this._boundsStore.get(E),this._boundsStore.delete(E)):null!=this.onFeatureAdd&&this.onFeatureAdd(M),null===(C=M.geometry)||void 0===C||null===(C=C.coords)||void 0===C||!C.length)return this._boundsStore.set(E,null),void this._featuresById.set(E,M);q=(0,k.jQ)(null!=q?q:(0,z.vt)(),M.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),null!=q&&this._boundsStore.set(E,q),this._featuresById.set(E,M)}_upsert(M){var C;const E=null===M||void 0===M?void 0:M.objectId;if(null==E)return Z.A.getLogger("esri.layers.graphics.data.FeatureStore").error(new X.A("featurestore:invalid-feature","feature id is missing",{feature:M})),null;const A=this._featuresById.get(E);if(!A)return this._add(M),M;this._markedIds.add(E);const{geometry:q,attributes:N}=M;for(const X in N)A.attributes[X]=N[X];return q&&(A.geometry=q,this._boundsStore.set(E,null!==(C=(0,k.jQ)((0,z.vt)(),q,this.geometryInfo.hasZ,this.geometryInfo.hasM))&&void 0!==C?C:null)),A}_remove(M){null!=this.onFeatureRemove&&this.onFeatureRemove(M);const C=M.objectId;return this._markedIds.delete(C),this._boundsStore.delete(C),this._featuresById.delete(C),M}}},23047:(M,C,E)=>{E.d(C,{LQ:()=>y,ag:()=>h,pL:()=>a});var A=E(32050),X=E(41156);const q=new X.A,Z=new X.A,N=new X.A,z={esriGeometryPoint:A.DF,esriGeometryPolyline:A.BW,esriGeometryPolygon:A.z5,esriGeometryMultipoint:A.qK};function y(M,C,E){let X=arguments.length>3&&void 0!==arguments[3]?arguments[3]:M.hasZ,q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:M.hasM;if(null==C)return null;const Z=M.hasZ&&X,z=M.hasM&&q;if(E){const k=(0,A.Nl)(N,C,M.hasZ,M.hasM,"esriGeometryPoint",E,X,q);return(0,A.DF)(k,Z,z)}return(0,A.DF)(C,Z,z)}function a(M,C,E,X,k,L){var O,J;let Q=arguments.length>6&&void 0!==arguments[6]?arguments[6]:C,D=arguments.length>7&&void 0!==arguments[7]?arguments[7]:E;const K=C&&Q,W=E&&D,$=null!=X?"coords"in X?X:X.geometry:null;if(null==$)return null;if(k){var H,V;let X=(0,A.kz)(Z,$,C,E,M,k,Q,D);return L&&(X=(0,A.Nl)(N,X,K,W,M,L)),null!==(H=null===(V=z[M])||void 0===V?void 0:V.call(z,X,K,W))&&void 0!==H?H:null}if(L){var tt,et;const X=(0,A.Nl)(N,$,C,E,M,L,Q,D);return null!==(tt=null===(et=z[M])||void 0===et?void 0:et.call(z,X,K,W))&&void 0!==tt?tt:null}return(0,A.Q4)(q,$,C,E,Q,D),null!==(O=null===(J=z[M])||void 0===J?void 0:J.call(z,q,K,W))&&void 0!==O?O:null}function h(M){return M&&k in M?JSON.parse(JSON.stringify(M,G)):M}const k="_geVersion",G=(M,C)=>M!==k?C:void 0},22786:(M,C,E)=>{E.d(C,{Cv:()=>j,Nk:()=>x,lK:()=>b});var A=E(16842),X=E(81618),q=E(54208),Z=E(77026),N=E(78395),z=E(80417);const k=[0,0];function h(M,C){if(!C)return null;if("x"in C){const E={x:0,y:0};return[E.x,E.y]=M(C.x,C.y,k),null!=C.z&&(E.z=C.z),null!=C.m&&(E.m=C.m),E}if("xmin"in C){const E={xmin:0,ymin:0,xmax:0,ymax:0};return[E.xmin,E.ymin]=M(C.xmin,C.ymin,k),[E.xmax,E.ymax]=M(C.xmax,C.ymax,k),C.hasZ&&(E.zmin=C.zmin,E.zmax=C.zmax,E.hasZ=!0),C.hasM&&(E.mmin=C.mmin,E.mmax=C.mmax,E.hasM=!0),E}return"rings"in C?{rings:l(C.rings,M),hasM:C.hasM,hasZ:C.hasZ}:"paths"in C?{paths:l(C.paths,M),hasM:C.hasM,hasZ:C.hasZ}:"points"in C?{points:f(C.points,M),hasM:C.hasM,hasZ:C.hasZ}:null}function l(M,C){const E=[];for(const A of M)E.push(f(A,C));return E}function f(M,C){const E=[];for(const A of M){const M=C(A[0],A[1],[0,0]);E.push(M),A.length>2&&M.push(A[2]),A.length>3&&M.push(A[3])}return E}async function x(M,C){if(!M||!C)return;const E=Array.isArray(M)?M.map((M=>null!=M.geometry?M.geometry.spatialReference:null)).filter(A.Ru):[M];await(0,q.initializeProjection)(E.map((M=>({source:M,dest:C}))))}const L=h.bind(null,z.je),O=h.bind(null,z.tD);function j(M,C,E,A){if(!M)return M;if(E||(E=C,C=M.spatialReference),!(0,N.fn)(C)||!(0,N.fn)(E)||(0,N.aI)(C,E))return M;if((0,z.y7)(C,E)){const C=(0,N.K8)(E)?L(M):O(M);return C.spatialReference=E,C}return(0,q.projectMany)(Z.g,[M],C,E,null,A)[0]}const J=new class _{constructor(){this._jobs=[],this._timer=null,this._process=this._process.bind(this)}async push(M,C,E,A){var q;if(null===M||void 0===M||!M.length||!C||!E||(0,N.aI)(C,E))return M;const Z={geometries:M,inSpatialReference:C,outSpatialReference:E,geographicTransformation:A,resolve:(0,X.Tw)()};return this._jobs.push(Z),null!==(q=this._timer)&&void 0!==q||(this._timer=setTimeout(this._process,10)),Z.resolve.promise}_process(){this._timer=null;const M=this._jobs.shift();if(!M)return;const{geometries:C,inSpatialReference:E,outSpatialReference:A,resolve:X,geographicTransformation:k}=M;(0,z.y7)(E,A)?(0,N.K8)(A)?X(C.map(L)):X(C.map(O)):X((0,q.projectMany)(Z.g,C,E,A,k,null)),this._jobs.length>0&&(this._timer=setTimeout(this._process,10))}};function b(M,C,E,A){return J.push(M,C,E,A)}},70857:(M,C,E)=>{E.d(C,{GC:()=>S,T2:()=>j,v8:()=>J});var A=E(40530),X=E(49049),q=E(54208),Z=E(25076),N=E(31670),z=E(30172),k=E(78395),L=E(22786);const O=new A.J({esriSRUnit_Meter:"meters",esriSRUnit_Kilometer:"kilometers",esriSRUnit_Foot:"feet",esriSRUnit_StatuteMile:"miles",esriSRUnit_NauticalMile:"nautical-miles",esriSRUnit_USNauticalMile:"us-nautical-miles"}),J=Object.freeze({});async function S(M,C,E){const{outFields:A,orderByFields:X,groupByFieldsForStatistics:q,outStatistics:Z}=M;if(A)for(let N=0;N<A.length;N++)A[N]=A[N].trim();if(X)for(let N=0;N<X.length;N++)X[N]=X[N].trim();if(q)for(let N=0;N<q.length;N++)q[N]=q[N].trim();if(Z)for(let N=0;N<Z.length;N++)Z[N].onStatisticField&&(Z[N].onStatisticField=Z[N].onStatisticField.trim());return M.geometry&&!M.outSR&&(M.outSR=M.geometry.spatialReference),j(M,C,E)}async function j(M,C,A){var q;if(!M)return null;let{where:Q}=M;if(M.where=Q=null===(q=Q)||void 0===q?void 0:q.trim(),(!Q||/^1 *= *1$/.test(Q)||C&&C===Q)&&(M.where=null),!M.geometry)return M;let D=await async function d(M){const{distance:C,units:A}=M,q=M.geometry;if(null==C||"vertexAttributes"in q)return q;const Z=q.spatialReference,N=A?O.fromJSON(A):(0,X.Ij)(Z),z=Z&&((0,k.EA)(Z)||(0,k.K8)(Z))?q:await(0,L.Nk)(Z,k.KK).then((()=>(0,L.Cv)(q,k.KK)));return(await async function U(){return(await Promise.all([E.e(8300),E.e(6282)]).then(E.bind(E,93901))).geodesicBuffer}())(z.spatialReference,z,C,N)}(M);if(M.distance=0,M.units=null,"esriSpatialRelEnvelopeIntersects"===M.spatialRel){const{spatialReference:C}=M.geometry;D=(0,Z.HA)(D),D.spatialReference=C}if(D){var K;await(0,L.Nk)(D.spatialReference,A),D=function x(M,C){const E=M.spatialReference;return w(M,C)&&(0,N.ZC)(M)?{spatialReference:E,rings:[[[M.xmin,M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]]]}:M}(D,A);const C=(await(0,z.el)((0,N.rS)(D)))[0];if(null==C)throw J;const E="quantizationParameters"in M&&(null===(K=M.quantizationParameters)||void 0===K?void 0:K.tolerance)||"maxAllowableOffset"in M&&M.maxAllowableOffset||0,X=E&&w(D,A)?{densificationStep:8*E}:void 0,q=C.toJSON(),Z=(0,L.Cv)(q,q.spatialReference,A,X);if(!Z)throw J;Z.spatialReference=A,M.geometry=Z}return M}function w(M,C){if(!M)return!1;const E=M.spatialReference;return((0,N.ZC)(M)||(0,N.Bi)(M)||(0,N.Rg)(M))&&!(0,k.aI)(E,C)&&!(0,q.canProjectWithoutEngine)(E,C)}},70564:(M,C,E)=>{E.d(C,{tC:()=>I,c0:()=>P,xt:()=>v});var A=E(4180),X=E(94224),q=E(5522);var Z=E(31670),N=E(78395);function n(M,C){return M?C?4:3:C?3:2}function contains_r(M,C,E,A,X,q){const Z=n(X,q),{coords:N,lengths:z}=A;if(!z)return!1;for(let k=0,L=0;k<z.length;k++,L+=Z)if(!o(M,C,E,N[L],N[L+1]))return!1;return!0}function o(M,C,E,A,X){if(!M)return!1;const q=n(C,E),{coords:Z,lengths:N}=M;let z=!1,k=0;for(const L of N)z=e(z,Z,q,k,L,A,X),k+=L*q;return z}function e(M,C,E,A,X,q,Z){let N=M,z=A;for(let k=A,L=A+X*E;k<L;k+=E){z=k+E,z===L&&(z=A);const M=C[k],X=C[k+1],O=C[z],J=C[z+1];(X<Z&&J>=Z||J<Z&&X>=Z)&&M+(Z-X)/(J-X)*(O-M)<q&&(N=!N)}return N}var z=E(32050),k=E(41156),L=E(23047),O=E(22786);const J="unsupported-query",Q={esriSpatialRelIntersects:"intersects",esriSpatialRelContains:"contains",esriSpatialRelCrosses:"crosses",esriSpatialRelDisjoint:"disjoint",esriSpatialRelEnvelopeIntersects:"intersects",esriSpatialRelIndexIntersects:null,esriSpatialRelOverlaps:"overlaps",esriSpatialRelTouches:"touches",esriSpatialRelWithin:"within",esriSpatialRelRelation:null},D={spatialRelationship:{esriSpatialRelIntersects:!0,esriSpatialRelContains:!0,esriSpatialRelWithin:!0,esriSpatialRelCrosses:!0,esriSpatialRelDisjoint:!0,esriSpatialRelTouches:!0,esriSpatialRelOverlaps:!0,esriSpatialRelEnvelopeIntersects:!0,esriSpatialRelIndexIntersects:!1,esriSpatialRelRelation:!1},queryGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!0},layerGeometry:{esriGeometryPoint:!0,esriGeometryMultipoint:!0,esriGeometryPolyline:!0,esriGeometryPolygon:!0,esriGeometryEnvelope:!1}};function v(M,C,A,N,O){if((0,Z.Bi)(C)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M)){const M=(0,z.Ye)(new k.A,C,!1,!1);return Promise.resolve((C=>function t(M,C,E,A){return o(M,C,E,A.coords[0],A.coords[1])}(M,!1,!1,C)))}if((0,Z.Bi)(C)&&"esriGeometryMultipoint"===A){const E=(0,z.Ye)(new k.A,C,!1,!1);if("esriSpatialRelContains"===M)return Promise.resolve((M=>contains_r(E,!1,!1,M,N,O)))}if((0,Z.ZC)(C)&&"esriGeometryPoint"===A&&("esriSpatialRelIntersects"===M||"esriSpatialRelContains"===M))return Promise.resolve((M=>(0,X.qz)(C,(0,L.pL)(A,N,O,M))));if((0,Z.ZC)(C)&&"esriGeometryMultipoint"===A&&"esriSpatialRelContains"===M)return Promise.resolve((M=>(0,X.rL)(C,(0,L.pL)(A,N,O,M))));if((0,Z.ZC)(C)&&"esriSpatialRelIntersects"===M){const M=function s(M){return"mesh"===M?q.xB:(0,q.xK)(M)}(A);return Promise.resolve((E=>M(C,(0,L.pL)(A,N,O,E))))}return function h(){return Promise.all([E.e(8300),E.e(6282)]).then(E.bind(E,93901))}().then((E=>{const X=E[Q[M]].bind(null,C.spatialReference,C);return M=>X((0,L.pL)(A,N,O,M))}))}async function P(M,C,E){const{spatialRel:X,geometry:q}=M;if(q){if(!function G(M){return null!=M&&!0===D.spatialRelationship[M]}(X))throw new A.A(J,"Unsupported query spatial relationship",{query:M});if((0,N.fn)(q.spatialReference)&&(0,N.fn)(E)){var z;if(!function g(M){return null!=M&&!0===D.queryGeometry[(0,Z.$B)(M)]}(q))throw new A.A(J,"Unsupported query geometry type",{query:M});if(!function j(M){return null!=M&&!0===D.layerGeometry[M]}(C))throw new A.A(J,"Unsupported layer geometry type",{query:M});if(M.outSR)return(0,O.Nk)(null===(z=M.geometry)||void 0===z?void 0:z.spatialReference,M.outSR)}}}function I(M){if((0,Z.ZC)(M))return!0;if((0,Z.Bi)(M)){for(const C of M.rings){if(5!==C.length)return!1;if(C[0][0]!==C[1][0]||C[0][0]!==C[4][0]||C[2][0]!==C[3][0]||C[0][1]!==C[3][1]||C[0][1]!==C[4][1]||C[1][1]!==C[2][1])return!1}return!0}return!1}},66174:(M,C,E)=>{async function n(M,C){if(!M)return null;const E=C.featureAdapter,{startTimeField:A,endTimeField:X}=M;let q=Number.POSITIVE_INFINITY,Z=Number.NEGATIVE_INFINITY;if(A&&X)await C.forEach((M=>{const C=E.getAttribute(M,A),N=E.getAttribute(M,X);null==C||isNaN(C)||(q=Math.min(q,C)),null==N||isNaN(N)||(Z=Math.max(Z,N))}));else{const M=A||X;await C.forEach((C=>{const A=E.getAttribute(C,M);null==A||isNaN(A)||(q=Math.min(q,A),Z=Math.max(Z,A))}))}return{start:q,end:Z}}function t(M,C,E){var A,X;if(!C||!M)return null;const{startTimeField:q,endTimeField:Z}=M;if(!q&&!Z)return null;const{start:N,end:z}=C;if(null===N&&null===z)return null;if(void 0===N&&void 0===z)return()=>!1;const k=null!==(A=null===(X=E.getAttributeAsTimestamp)||void 0===X?void 0:X.bind(E))&&void 0!==A?A:E.getAttribute.bind(E);return q&&Z?function l(M,C,E,A,X){return null!=A&&null!=X?q=>{const Z=M(q,C),N=M(q,E);return(null==Z||Z<=X)&&(null==N||N>=A)}:null!=A?C=>{const X=M(C,E);return null==X||X>=A}:null!=X?E=>{const A=M(E,C);return null==A||A<=X}:void 0}(k,q,Z,N,z):function u(M,C,E,A){return null!=E&&null!=A&&E===A?A=>M(A,C)===E:null!=E&&null!=A?X=>{const q=M(X,C);return null!=q&&q>=E&&q<=A}:null!=E?A=>{const X=M(A,C);return null!=X&&X>=E}:null!=A?E=>{const X=M(E,C);return null!=X&&X<=A}:void 0}(k,q||Z,N,z)}E.d(C,{I:()=>t,W:()=>n})},10161:(M,C,E)=>{E.r(C),E.d(C,{default:()=>R});var A=E(87149),X=E(4180),q=E(89412),Z=E(81618),N=E(4282),z=E(78395),k=E(32050),L=E(45691),O=E(22786),J=E(56103),Q=E(86595),D=E(67818),K=E(24860),W=E(8084),$=E(52994);const H="esri.layers.WFSLayer";class R{constructor(){this._customParameters=null,this._queryEngine=null,this._supportsPagination=!0}destroy(){var M;null!==(M=this._queryEngine)&&void 0!==M&&M.destroy(),this._queryEngine=null}async load(M){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{getFeatureUrl:E,getFeatureOutputFormat:A,fields:q,geometryType:N,featureType:z,maxRecordCount:k,maxTotalRecordCount:Q,maxPageCount:D,objectIdField:H,customParameters:V}=M,{spatialReference:tt,getFeatureSpatialReference:et}=(0,K.UH)(E,z,M.spatialReference);try{await(0,O.Nk)(et,tt)}catch{throw new X.A("unsupported-projection","Projection not supported",{inSpatialReference:et,outSpatialReference:tt})}(0,Z.Te)(C),this._customParameters=V,this._featureType=z,this._fieldsIndex=W.A.fromLayerJSON({fields:q,dateFieldsTimeReference:q.some((M=>"esriFieldTypeDate"===M.type))?{timeZoneIANA:$.n$}:null}),this._geometryType=N,this._getFeatureUrl=E,this._getFeatureOutputFormat=A,this._getFeatureSpatialReference=et,this._maxRecordCount=k,this._maxTotalRecordCount=Q,this._maxPageCount=D,this._objectIdField=H,this._spatialReference=tt;let nt=await this._snapshotFeatures(C);if(nt.errors.length>0&&(this._supportsPagination=!1,nt=await this._snapshotFeatures(C),nt.errors.length>0))throw nt.errors[0];return this._queryEngine=new J.d({fieldsIndex:this._fieldsIndex,geometryType:N,hasM:!1,hasZ:!1,objectIdField:H,spatialReference:tt,timeInfo:null,featureStore:new L.A({geometryType:N,hasM:!1,hasZ:!1})}),this._queryEngine.featureStore.addMany(nt.features),{warnings:T(nt),extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async applyEdits(){throw new X.A("wfs-source:editing-not-supported","applyEdits() is not supported on WFSLayer")}async queryFeatures(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQuery(M,C.signal)}async queryFeatureCount(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForCount(M,C.signal)}async queryObjectIds(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForIds(M,C.signal)}async queryExtent(){let M=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForExtent(M,C.signal)}async querySnapping(M){let C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this._waitSnapshotComplete(),this._queryEngine.executeQueryForSnapping(M,C.signal)}async refresh(M){var C;return this._customParameters=M.customParameters,this._maxRecordCount=M.maxRecordCount,this._maxTotalRecordCount=M.maxTotalRecordCount,this._maxPageCount=M.maxPageCount,null!==(C=this._snapshotTask)&&void 0!==C&&C.abort(),this._snapshotTask=(0,A.UT)((M=>this._snapshotFeatures({signal:M}))),this._snapshotTask.promise.then((M=>{var C;this._queryEngine.featureStore.clear(),this._queryEngine.featureStore.addMany(M.features);for(const E of T(M))q.A.getLogger(H).warn(new N.A("wfs-layer:refresh-warning",E.message,E.details));(null===(C=M.errors)||void 0===C?void 0:C.length)&&q.A.getLogger(H).warn(new N.A("wfs-layer:refresh-error","Refresh completed with errors",{errors:M.errors}))}),(()=>{this._queryEngine.featureStore.clear()})),await this._waitSnapshotComplete(),{extent:(await this._queryEngine.fetchRecomputedExtents()).fullExtent}}async _waitSnapshotComplete(){if(this._snapshotTask&&!this._snapshotTask.finished){try{await this._snapshotTask.promise}catch{}return this._waitSnapshotComplete()}}async _snapshotFeatures(M){const C=null===M||void 0===M?void 0:M.signal,E=this._maxTotalRecordCount,A=this._maxPageCount,X=this._supportsPagination?await(0,K.E)(this._getFeatureUrl,this._featureType.typeName,{customParameters:this._customParameters,signal:C}):void 0;let q=[];const N=[];if(null==X)try{q=await this._singleQuery(C)}catch(z){(0,Z.zf)(z)||N.push(z)}else{const M=Math.min(X,E),z=function*F(M,C,E){for(let A=0;A<C;A++)yield M._pageQuery(A,E)}(this,Math.max(1,Math.min(Math.ceil(M/this._maxRecordCount),A)),C);await Promise.allSettled(Array.from({length:10}).map((()=>async function S(M,C,E){let X=M.next();for(;!X.done;){try{const M=await X.value;C.push(...M)}catch(A){(0,Z.zf)(A)||E.push(A)}X=M.next()}}(z,q,N))))}return(0,Z.Te)(C),{features:q,totalRecordCount:X,maxTotalRecordCount:E,maxPageCount:A,errors:N}}async _singleQuery(M){const C=await(0,K.x$)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,signal:M});return this._processGeoJSON(C,{signal:M})}async _pageQuery(M,C){const E=M*this._maxRecordCount,A=await(0,K.x$)(this._getFeatureUrl,this._featureType.typeName,this._getFeatureSpatialReference,this._getFeatureOutputFormat,{customParameters:this._customParameters,startIndex:E,count:this._maxRecordCount,signal:C});return this._processGeoJSON(A,{startIndex:E,signal:C})}_processGeoJSON(M,C){(0,Q.sO)(M,this._getFeatureSpatialReference.wkid);const{startIndex:E,signal:A}=C;(0,Z.Te)(A);const X=(0,Q.bd)(M,{geometryType:this._geometryType,hasZ:!1,objectIdField:this._objectIdField});if(!(0,z.aI)(this._spatialReference,this._getFeatureSpatialReference))for(const Z of X)null!=Z.geometry&&(Z.geometry=(0,k.Ux)((0,O.Cv)((0,k.zv)(Z.geometry,this._geometryType,!1,!1),this._getFeatureSpatialReference,this._spatialReference)));let q=null!==E&&void 0!==E?E:1;for(const Z of X){const M={};(0,D.MB)(this._fieldsIndex,M,Z.attributes,!0),Z.attributes=M,null==M[this._objectIdField]&&(Z.objectId=M[this._objectIdField]=q++)}return X}}function T(M){const C=[];return null!=M.totalRecordCount&&(M.features.length<M.totalRecordCount&&C.push({name:"wfs-layer:maxRecordCount-too-low",message:"Could only fetch ".concat(M.features.length," of ").concat(M.totalRecordCount," in ").concat(M.maxPageCount," queries. Try increasing the value of WFSLayer.maxRecordCount."),details:{recordCount:M.features.length,totalRecordCount:M.totalRecordCount}}),M.totalRecordCount>M.maxTotalRecordCount&&C.push({name:"wfs-layer:large-dataset",message:"The number of ".concat(M.totalRecordCount," features exceeds the maximum allowed of ").concat(M.maxTotalRecordCount,"."),details:{recordCount:M.features.length,totalRecordCount:M.totalRecordCount,maxTotalRecordCount:M.maxTotalRecordCount}})),C}},67818:(M,C,E)=>{E.d(C,{$1:()=>j,CR:()=>y,MB:()=>p,Yx:()=>f,bP:()=>d});var A=E(62408),X=E(78395),q=E(57022);class u{constructor(){this.code=null,this.description=null}}class c{constructor(M){this.error=new u,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=M}}function f(M){return new c(M)}class a{constructor(M){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=M}}function d(M){return new a(M)}const Z=new Set;function p(M,C,E){let A=arguments.length>3&&void 0!==arguments[3]&&arguments[3];Z.clear();for(const N in E){const X=M.get(N);if(!X)continue;const z=g(X,E[N]);if(Z.add(X.name),X&&(A||X.editable)){const M=(0,q.CJ)(X,z);if(M)return f((0,q.uo)(M,X,z));C[X.name]=z}}for(const q of null!==(X=null===M||void 0===M?void 0:M.requiredFields)&&void 0!==X?X:[]){var X;if(!Z.has(q.name))return f('missing required field "'.concat(q.name,'"'))}return null}function g(M,C){let E=C;return(0,q.WA)(M)&&"string"==typeof C?E=parseFloat(C):(0,q.yM)(M)&&null!=C&&"string"!=typeof C?E=String(C):(0,q.vE)(M)&&"string"==typeof C&&(E=(0,A._U)(C)),(0,q.WX)(E)}let N;function y(M,C){if(!M||!(0,X.fn)(C))return M;if("rings"in M||"paths"in M){if(null==N)throw new TypeError("geometry engine not loaded");return N.simplify(C,M)}return M}async function j(M,C){!(0,X.fn)(M)||"esriGeometryPolygon"!==C&&"esriGeometryPolyline"!==C||await async function w(){return null==N&&(N=await Promise.all([E.e(8300),E.e(3901)]).then(E.bind(E,93901))),N}()}}}]);
//# sourceMappingURL=4187.d44fae72.chunk.js.map