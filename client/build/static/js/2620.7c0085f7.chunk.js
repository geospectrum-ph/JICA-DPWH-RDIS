"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[2620],{73602:(e,y,v)=>{v.d(y,{P:()=>j});var _=v(4180),A=v(52482),L=v(37531),M=v(4270),E=v(51523),Z=v(76402),R=v(57532),T=v(57453),D=v(28330),q=v(85173);function j(e){var y;const v=null!==(y=null===e||void 0===e?void 0:e.origins)&&void 0!==y?y:[void 0];return(y,_)=>{const A=function U(e,y,v){var _;if("resource"===(null===e||void 0===e?void 0:e.type))return function w(e,y,v){const _=(0,Z.z4)(y,v);return{type:String,read:(e,y,v)=>{const A=(0,q.r)(e,y,v);return _.type===String?A:"function"==typeof _.type?new _.type({url:A}):void 0},write:{writer(y,A,E,Z){if(null===Z||void 0===Z||!Z.resources)return"string"==typeof y?void(A[E]=(0,q.t)(y,Z)):void(A[E]=y.write({},Z));const T=function x(e){return null==e?null:"string"==typeof e?e:e.url}(y),C=(0,q.t)(T,{...Z,verifyItemRelativeUrls:null!==Z&&void 0!==Z&&Z.verifyItemRelativeUrls?{writtenUrls:Z.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},q.M.NO),V=_.type!==String&&(!(0,L.H)(this)||(null===Z||void 0===Z?void 0:Z.origin)&&this.originIdOf(v)>(0,R.aB)(Z.origin)),k={object:this,propertyName:v,value:y,targetUrl:C,dest:A,targetPropertyName:E,context:Z,params:e};null!==Z&&void 0!==Z&&Z.portalItem&&C&&!(0,M.oP)(C)?V&&null!==e&&void 0!==e&&e.contentAddressed?I(k):V?function N(e){var y;const{context:v,targetUrl:_,params:A,value:L,dest:E,targetPropertyName:Z}=e;if(!v.portalItem)return;const R=v.portalItem.resourceFromPath(_),T=S(L,_,v),q=(0,D.n)(T),C=(0,M.Zo)(R.path),V=null!==(y=null===A||void 0===A?void 0:A.compress)&&void 0!==y&&y;q===C?(v.resources&&b({...e,resource:R,content:T,compress:V,updates:v.resources.toUpdate}),E[Z]=_):I(e)}(k):function P(e){let{context:y,targetUrl:v,dest:_,targetPropertyName:A}=e;y.portalItem&&y.resources&&(y.resources.toKeep.push({resource:y.portalItem.resourceFromPath(v),compress:!1}),_[A]=v)}(k):null!==Z&&void 0!==Z&&Z.portalItem&&(null==C||null!=(0,q.i)(C)||(0,M.w8)(C)||V)?I(k):A[E]=C}}}}(e,y,v);switch(null!==(_=null===e||void 0===e?void 0:e.type)&&void 0!==_?_:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:e,write:y}=q.b;return{read:e,write:y}}}}(e,y,_);for(const e of v){const v=(0,T.rM)(y,e,_);for(const e in A)v[e]=A[e]}}}function I(e){var y,v,L,Z;const{targetUrl:R,params:T,value:C,context:V,dest:k,targetPropertyName:G}=e;if(!V.portalItem)return;const Q=(0,q.p)(R),W=S(C,R,V);if(null!==T&&void 0!==T&&T.contentAddressed&&"json"!==W.type)return void(null===(y=V.messages)||void 0===y||y.push(new _.A("persistable:contentAddressingUnsupported",'Property "'.concat(G,'" is trying to serializing a resource with content of type ').concat(W.type," with content addressing. Content addressing is only supported for json resources."),{content:W})));const H=null!==T&&void 0!==T&&T.contentAddressed&&"json"===W.type?(0,A.d)(W.jsonString):null!==(v=null===Q||void 0===Q?void 0:Q.filename)&&void 0!==v?v:(0,E.lk)(),z=(0,M.fj)(null!==(L=null===T||void 0===T?void 0:T.prefix)&&void 0!==L?L:null===Q||void 0===Q?void 0:Q.prefix,H),J="".concat(z,".").concat((0,D.n)(W));if(null!==T&&void 0!==T&&T.contentAddressed&&V.resources&&"json"===W.type){var K;const e=null!==(K=V.resources.toKeep.find((e=>{let{resource:y}=e;return y.path===J})))&&void 0!==K?K:V.resources.toAdd.find((e=>{let{resource:y}=e;return y.path===J}));if(e)return void(k[G]=e.resource.itemRelativeUrl)}const $=V.portalItem.resourceFromPath(J);(0,M.w8)(R)&&V.resources&&V.resources.pendingOperations.push((0,M.tk)(R).then((e=>{$.path="".concat(z,".").concat((0,D.n)({type:"blob",blob:e})),k[G]=$.itemRelativeUrl})).catch((()=>{})));const X=null!==(Z=null===T||void 0===T?void 0:T.compress)&&void 0!==Z&&Z;V.resources&&b({...e,resource:$,content:W,compress:X,updates:V.resources.toAdd}),k[G]=$.itemRelativeUrl}function b(e){let{object:y,propertyName:v,updates:_,resource:A,content:L,compress:M}=e;_.push({resource:A,content:L,compress:M,finish:e=>{!function O(e,y,v){"string"==typeof e[y]?e[y]=v.url:e[y].url=v.url}(y,v,e)}})}function S(e,y,v){return"string"==typeof e?{type:"url",url:y}:{type:"json",jsonString:JSON.stringify(e.toJSON(v))}}},82620:(e,y,v)=>{v.r(y),v.d(y,{default:()=>$e});var _=v(80671),A=v(13812),L=v(21365),M=(v(1804),v(26374),v(2725),v(66178),v(52902),v(55088),v(27150),v(16534),v(53440),v(80830)),E=v(53705),Z=v(88706),R=v(39652),T=v(4180),D=v(89412),q=v(13132),C=v(81618),V=v(63390),k=v(4270),G=v(57453),Q=(v(50886),v(76761),v(39242)),W=v(59299),H=v(68682),z=v(57532),J=v(72664),K=v(57264),$=v(78658),X=v(1372),Y=v(98878),B=v(47478),ee=v(21642),te=v(19459),re=v(1921),ie=v(32465),oe=v(38362),se=v(96712),ne=v(45771),ae=v(26128),le=v(75427),de=v(33789),ue=v(32277),pe=v(48303),ce=v(78020),ye=v(4016),he=v(19894),fe=v(8084),ve=v(57022),me=v(17539),ge=v(35999),be=v(48823),we=v(97241),Ie=v(218),Fe=v(77247),_e=v(83375);let Ae=class extends _e.oY{constructor(){super(...arguments),this.name=null,this.field=null,this.currentRangeExtent=null,this.fullRangeExtent=null,this.type="rangeInfo"}};(0,_._)([(0,G.MZ)({type:String,json:{read:!0,write:!0}})],Ae.prototype,"name",void 0),(0,_._)([(0,G.MZ)({type:String,json:{read:!0,write:!0}})],Ae.prototype,"field",void 0),(0,_._)([(0,G.MZ)({type:[Number],json:{read:!0,write:!0}})],Ae.prototype,"currentRangeExtent",void 0),(0,_._)([(0,G.MZ)({type:[Number],json:{read:!0,write:!0}})],Ae.prototype,"fullRangeExtent",void 0),(0,_._)([(0,G.MZ)({type:["rangeInfo"],readOnly:!0,json:{read:!1,write:!0}})],Ae.prototype,"type",void 0),Ae=(0,_._)([(0,H.$)("esri.layers.support.RangeInfo")],Ae);var Le,Se=v(66004),je=v(73602),Me=v(4282),xe=v(48343),Ee=v(54208);let Oe=Le=class extends((0,_e.Te)(R.A.ofType(xe.A))){constructor(e){super(e)}clone(){return new Le(this.items.map((e=>e.clone())))}write(e,y){return this.toJSON(y)}toJSON(e){var y;const v=null===e||void 0===e||null===(y=e.layer)||void 0===y?void 0:y.spatialReference;return v?this.toArray().map((y=>{if(!v.equals(y.spatialReference)){if(!(0,Ee.canProjectWithoutEngine)(y.spatialReference,v))return null!==e&&void 0!==e&&e.messages&&e.messages.push(new Me.A("scenefilter:unsupported","Scene filters with incompatible spatial references are not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),null;const _=new xe.A;(0,Ee.projectPolygon)(y,_,v),y=_}const _=y.toJSON(e);return delete _.spatialReference,_})).filter((e=>null!=e)):(null!==e&&void 0!==e&&e.messages&&e.messages.push(new Me.A("scenefilter:unsupported","Writing Scene filters without context layer is not supported",{modification:this,spatialReference:e.layer.spatialReference,context:e})),this.toArray().map((y=>y.toJSON(e))))}static fromJSON(e,y){const v=new Le;return e.forEach((e=>v.add(xe.A.fromJSON(e,y)))),v}};Oe=Le=(0,_._)([(0,H.$)("esri.layers.support.PolygonCollection")],Oe);const Pe=Oe;var Ze,Re=v(85173);let Te=Ze=class extends _e.oY{constructor(e){super(e),this.spatialRelationship="disjoint",this.geometries=new Pe,this._geometriesSource=null}initialize(){this.addHandles((0,V.on)((()=>this.geometries),"after-changes",(()=>this.geometries=this.geometries),V.OH))}readGeometries(e,y,v){Array.isArray(e)?this.geometries=Pe.fromJSON(e,v):this._geometriesSource={url:(0,Re.f)(e,v),context:v}}async loadGeometries(e,y){if(null==this._geometriesSource)return;const{url:v,context:_}=this._geometriesSource,A=await(0,E.A)(v,{responseType:"json",signal:null===y||void 0===y?void 0:y.signal}),L=e.toJSON(),M=A.data.map((e=>({...e,spatialReference:L})));this.geometries=Pe.fromJSON(M,_),this._geometriesSource=null}clone(){const e=new Ze({geometries:(0,Se.o8)(this.geometries),spatialRelationship:this.spatialRelationship});return e._geometriesSource=this._geometriesSource,e}};(0,_._)([(0,G.MZ)({type:["disjoint","contains"],nonNullable:!0,json:{write:!0}})],Te.prototype,"spatialRelationship",void 0),(0,_._)([(0,G.MZ)({type:Pe,nonNullable:!0,json:{write:!0}}),(0,je.P)({origins:["web-scene","portal-item"],type:"resource",prefix:"geometries",contentAddressed:!0})],Te.prototype,"geometries",void 0),(0,_._)([(0,W.w)(["web-scene","portal-item"],"geometries")],Te.prototype,"readGeometries",null),Te=Ze=(0,_._)([(0,H.$)("esri.layers.support.SceneFilter")],Te);const De=Te;var Ue=v(36125),Ne=v(49096),qe=v(89722),Ce=v(4255),Ve=v(7445);async function zipUtils_e(e){const y=[];for(const v of e)v.name.toLowerCase().endsWith(".zip")?y.push(t(v)):y.push(Promise.resolve(v));return(await Promise.all(y)).flat()}async function t(e){const{BlobReader:y,ZipReader:_,BlobWriter:A}=await v.e(3862).then(v.bind(v,23862)),L=[],M=new _(new y(e));return(await M.getEntries()).forEach((e=>{var y;if(e.directory||/^__MACOS/i.test(e.filename))return;const v=new A,_=null===(y=e.getData)||void 0===y?void 0:y.call(e,v).then((y=>new File([y],e.filename)));_&&L.push(_)})),Promise.all(L)}var ke=v(72015),Ge=v(54217),Qe=v(85423);const We=new Set(["3DObject","Point"]),He=(0,he.p)();let ze=class extends((0,ne.M)((0,te.w6)((0,se.w6)((0,B.b)((0,re.q)((0,ie.A)((0,oe.j)((0,q.P)((0,ee.d)((0,Y.p)((0,Z.O)($.A)))))))))))){constructor(){super(...arguments),this.featureReduction=null,this.rangeInfos=null,this.operationalLayerType="ArcGISSceneServiceLayer",this.type="scene",this.fields=null,this.floorInfo=null,this.outFields=null,this.nodePages=null,this.materialDefinitions=null,this.textureSetDefinitions=null,this.geometryDefinitions=null,this.serviceUpdateTimeStamp=null,this.excludeObjectIds=new R.A,this.definitionExpression=null,this.filter=null,this.path=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.priority=null,this.semantic=null,this.cachedDrawingInfo={color:!1},this.popupEnabled=!0,this.popupTemplate=null,this.objectIdField=null,this.globalIdField=null,this._fieldUsageInfo={},this.screenSizePerspectiveEnabled=!0,this.serviceItemId=void 0}normalizeCtorArgs(e,y){return"string"==typeof e?{url:e,...y}:e}destroy(){this._set("renderer",null)}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e,y){var v,_,A;const L=null===(v=this.getFeatureType(null===y||void 0===y?void 0:y.feature))||void 0===v||null===(v=v.domains)||void 0===v?void 0:v[e];return L&&"inherited"!==L.type?L:null!==(_=null===(A=this.getField(e))||void 0===A?void 0:A.domain)&&void 0!==_?_:null}getFeatureType(e){return e&&this.associatedLayer?this.associatedLayer.getFeatureType(e):null}get types(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.types)&&void 0!==e?e:[]}get typeIdField(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.typeIdField)&&void 0!==e?e:null}get templates(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.templates)&&void 0!==e?e:null}get formTemplate(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.formTemplate)&&void 0!==e?e:null}get fieldsIndex(){return new fe.A(this.fields)}readNodePages(e,y,v){return"Point"===y.layerType&&(e=y.pointNodePages),null==e||"object"!=typeof e?null:me.W4.fromJSON(e,v)}set elevationInfo(e){this._set("elevationInfo",e),this.loaded&&this._validateElevationInfo()}get effectiveCapabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.effectiveCapabilities)}get effectiveEditingEnabled(){return null!=this.associatedLayer&&(0,pe.C$)(this.associatedLayer)}get geometryType(){return Ke[this.profile]||"mesh"}set renderer(e){(0,ve.yp)(e,this.fieldsIndex),this._set("renderer",e)}readCachedDrawingInfo(e){return null!=e&&"object"==typeof e||(e={}),null==e.color&&(e.color=!1),e}get capabilities(){var e;return this._capabilitiesFromAssociatedFeatureLayer(null===(e=this.associatedLayer)||void 0===e?void 0:e.capabilities)}_capabilitiesFromAssociatedFeatureLayer(e){var y;e=null!=e?e:de.P;const{query:v,queryRelated:_,editing:{supportsGlobalId:A,supportsRollbackOnFailure:L,supportsUploadWithItemId:M,supportsGeometryUpdate:E,supportsReturnServiceEditsInSourceSpatialReference:Z},data:{supportsZ:R,supportsM:T,isVersioned:D,supportsAttachment:q},operations:{supportsEditing:C,supportsAdd:V,supportsUpdate:k,supportsDelete:G,supportsQuery:Q,supportsQueryAttachments:W,supportsAsyncConvert3D:H}}=e,z=e.operations.supportsChangeTracking,J=!(null===(y=this.associatedLayer)||void 0===y||!y.infoFor3D)&&(0,Ce.Vo)();return{query:v,queryRelated:_,editing:{supportsGlobalId:A,supportsReturnServiceEditsInSourceSpatialReference:Z,supportsRollbackOnFailure:L,supportsGeometryUpdate:J&&E,supportsUploadWithItemId:M},data:{supportsAttachment:q,supportsZ:R,supportsM:T,isVersioned:D},operations:{supportsQuery:Q,supportsQueryAttachments:W,supportsEditing:C&&z,supportsAdd:J&&V&&z,supportsDelete:J&&G&&z,supportsUpdate:k&&z,supportsAsyncConvert3D:H}}}get editingEnabled(){var e,y;return this._isOverridden("editingEnabled")?this._get("editingEnabled"):null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.editingEnabled)&&void 0!==e&&e}set editingEnabled(e){this._overrideIfSome("editingEnabled",e)}get infoFor3D(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.infoFor3D)&&void 0!==e?e:null}get relationships(){var e;return null===(e=this.associatedLayer)||void 0===e?void 0:e.relationships}get defaultPopupTemplate(){return this.associatedLayer||this.attributeStorageInfo?this.createPopupTemplate():null}readObjectIdField(e,y){return!e&&y.fields&&y.fields.some((y=>("esriFieldTypeOID"===y.type&&(e=y.name),!!e))),e||void 0}readGlobalIdField(e,y){return!e&&y.fields&&y.fields.some((y=>("esriFieldTypeGlobalID"===y.type&&(e=y.name),!!e))),e||void 0}get displayField(){var e,y;return null!==(e=null===(y=this.associatedLayer)||void 0===y?void 0:y.displayField)&&void 0!==e?e:null}readProfile(e,y){const v=y.store.profile;return null!=v&&Je[v]?Je[v]:(D.A.getLogger(this).error("Unknown or missing profile",{profile:v,layer:this}),"mesh-pyramids")}load(e){return this.addResolvingPromise(this._load(e)),Promise.resolve(this)}async _load(e){const y=null!=e?e.signal:null;await this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(C.QP),await this._fetchService(y),await Promise.all([this._fetchIndexAndUpdateExtent(this.nodePages,y),this._setAssociatedFeatureLayer(y),this._loadFilterGeometries()]),this._validateElevationInfo(),this._applyAssociatedLayerOverrides(),this._populateFieldUsageInfo(),await(0,Ue.L)(this,{origin:"service"},y),(0,ve.yp)(this.renderer,this.fieldsIndex),await this.finishLoadEditablePortalLayer(e)}async beforeSave(){null!=this.filter&&(this.filter=this.filter.clone(),await this.load())}async _loadFilterGeometries(){if(this.filter)try{await this.filter.loadGeometries(this.spatialReference)}catch(e){D.A.getLogger(this).error("#_loadFilterGeometries()",this,"Failed to load filter geometries. Geometry filter will not be applied for this layer.",{error:e}),this.filter=null}}createQuery(){const e=new Ne.A;return"mesh"!==this.geometryType&&(e.returnGeometry=!0,e.returnZ=!0),e.where=this.definitionExpression||"1=1",e.sqlFormat="standard",e.outFields=["*"],e}queryExtent(e,y){return this._getAssociatedLayerForQuery().then((v=>v.queryExtent(e||this.createQuery(),y)))}queryFeatureCount(e,y){return this._getAssociatedLayerForQuery().then((v=>v.queryFeatureCount(e||this.createQuery(),y)))}queryFeatures(e,y){return this._getAssociatedLayerForQuery().then((v=>v.queryFeatures(e||this.createQuery(),y))).then((e=>{if(null!==e&&void 0!==e&&e.features)for(const y of e.features)y.layer=this,y.sourceLayer=this;return e}))}async queryRelatedFeatures(e,y){if(await this.load(),!this.associatedLayer)throw new T.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeatures(e,y)}async queryRelatedFeaturesCount(e,y){if(await this.load(),!this.associatedLayer)throw new T.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});return this.associatedLayer.queryRelatedFeaturesCount(e,y)}async queryCachedAttributes(e,y){var v;const _=(0,ve.hL)(this.fieldsIndex,await(0,Ge.TO)(this,(0,Ge.D8)(this)));return(0,ke.s1)(this.parsedUrl.path,null!==(v=this.attributeStorageInfo)&&void 0!==v?v:[],e,y,_,this.apiKey,this.customParameters)}async queryCachedFeature(e,y){const v=await this.queryCachedAttributes(e,[y]);if(!v||0===v.length)throw new T.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const _=new A.A;return _.attributes=v[0],_.layer=this,_.sourceLayer=this,_}queryObjectIds(e,y){return this._getAssociatedLayerForQuery().then((v=>v.queryObjectIds(e||this.createQuery(),y)))}queryAttachments(e,y){return this._getAssociatedLayerForQuery().then((v=>v.queryAttachments(e,y)))}getFieldUsageInfo(e){const y={supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1};return this.loaded?this._fieldUsageInfo[e]||y:(D.A.getLogger(this).error("#getFieldUsageInfo()","Unavailable until layer is loaded"),y)}createPopupTemplate(e){return(0,Ve.tn)(this,e)}_getAssociatedLayerForQuery(){const e=this.associatedLayer;return null!==e&&void 0!==e&&e.loaded?Promise.resolve(e):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),!this.associatedLayer)throw new T.A("scenelayer:query-not-available","SceneLayer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(e){throw new T.A("scenelayer:query-not-available","SceneLayer associated feature layer could not be loaded",{layer:this,error:e})}return this.associatedLayer}hasCachedStatistics(e){return null!=this.statisticsInfo&&this.statisticsInfo.some((y=>y.name===e))}async queryCachedStatistics(e,y){if(await this.load(y),!this.statisticsInfo)throw new T.A("scenelayer:no-cached-statistics","Cached statistics are not available for this layer");const v=this.fieldsIndex.get(e);if(!v)throw new T.A("scenelayer:field-unexisting","Field '".concat(e,"' does not exist on the layer"));for(const _ of this.statisticsInfo)if(_.name===v.name){const e=(0,k.fj)(this.parsedUrl.path,_.href);return(0,E.A)(e,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:y?y.signal:null}).then((e=>e.data))}throw new T.A("scenelayer:no-cached-statistics","Cached statistics for this attribute are not available")}async saveAs(e,y){return this._debouncedSaveOperations(se.Xh.SAVE_AS,{...y,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"},e)}async save(){const e={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"scene"};return this._debouncedSaveOperations(se.Xh.SAVE,e)}async applyEdits(e,y){var _,A;const{applyEdits:L}=await v.e(2381).then(v.bind(v,64762));let M=y;await this.load();const E=this.associatedLayer;if(!E)throw new T.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");await E.load();const{globalIdField:Z}=E,R=!!E.infoFor3D,D=null===(_=null===(A=M)||void 0===A?void 0:A.globalIdUsed)||void 0===_||_;if(R&&null==Z)throw new T.A("".concat(this.type,"-layer:not-editable"),"Valid globalIdField expected on editable SceneLayer");if(R&&!D)throw new T.A("".concat(this.type,"-layer:globalid-required"),"globalIdUsed must not be false for SceneLayer editing as globalIds are required.");return(0,ae.Wo)(E.url)&&R&&null!=e.deleteFeatures&&null!=Z&&(M={...M,globalIdToObjectId:await(0,pe.GA)(E,e.deleteFeatures,Z)}),L(this,E.source,e,M)}async uploadAssets(e,y){if(await this.load(),null==this.associatedLayer)throw new T.A("".concat(this.type,"-layer:not-editable"),"Service is not editable");return await this.associatedLayer.load(),this.associatedLayer.uploadAssets(e,y)}on(e,y){return super.on(e,y)}async convertMesh(e,y){var v;const r=e=>{throw D.A.getLogger(this).error(".convertMesh()",e.message),e};await this.load(),this.infoFor3D||r(new T.A("invalid:layer","SceneLayer has no capability for mesh conversion"));const _=await this.extractAndFilterFiles(e),A=_.reduce(((e,y)=>(0,ge.oF)(this.infoFor3D,y)?e+1:e),0);0===A&&r(new X.VP),A>1&&r(new X.XQ);const L=this.spatialReference,M=null!==(v=null===y||void 0===y?void 0:y.location)&&void 0!==v?v:new K.A({x:0,y:0,z:0,spatialReference:L}),E=M.spatialReference.isGeographic?"local":"georeferenced",Z=J.A.createWithExternalSource(M,_,{vertexSpace:E}),[R]=await this.uploadAssets([Z],y);return R}async extractAndFilterFiles(e){await this.load();const y=this.infoFor3D;return y?(await zipUtils_e(e)).filter((e=>(0,ge.fu)(y,e))):e}validateLayer(e){if(e.layerType&&!We.has(e.layerType))throw new T.A("scenelayer:layer-type-not-supported","SceneLayer does not support this layer type",{layerType:e.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor))throw new T.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});if(this.version.major>2)throw new T.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"1.x, 2.x"});!function t(e,y){let v=!1,_=!1;if(null==e)v=!0,_=!0;else{const A=y&&y.isGeographic;switch(e){case"east-north-up":case"earth-centered":v=!0,_=A;break;case"vertex-reference-frame":v=!0,_=!A;break;default:v=!1}}if(!v)throw new T.A("scenelayer:unsupported-normal-reference-frame","Normal reference frame is invalid.");if(!_)throw new T.A("scenelayer:incompatible-normal-reference-frame","Normal reference frame is incompatible with layer spatial reference.")}(this.normalReferenceFrame,this.spatialReference)}_getTypeKeywords(){const e=[];if("points"===this.profile)e.push("Point");else{if("mesh-pyramids"!==this.profile)throw new T.A("scenelayer:unknown-profile","SceneLayer:save() encountered an unknown SceneLayer profile: "+this.profile);e.push("3DObject")}return e}_populateFieldUsageInfo(){if(this._fieldUsageInfo={},this.fields)for(const y of this.fields){var e;const v=!(!this.attributeStorageInfo||!this.attributeStorageInfo.some((e=>e.name===y.name))),_=!(null===(e=this.associatedLayer)||void 0===e||null===(e=e.fields)||void 0===e||!e.some((e=>e&&y.name===e.name))),A={supportsLabelingInfo:v,supportsRenderer:v,supportsPopupTemplate:v||_,supportsLayerQuery:_};this._fieldUsageInfo[y.name]=A}}_applyAssociatedLayerOverrides(){this._applyAssociatedLayerFieldsOverrides(),this._applyAssociatedLayerPopupOverrides(),this._applyAssociatedLayerExtentOverride(),this._applyAssociatedLayerPrivileges()}_applyAssociatedLayerFieldsOverrides(){var e;if(null===(e=this.associatedLayer)||void 0===e||!e.fields)return;let y=null;for(const v of this.associatedLayer.fields){const e=this.getField(v.name);e?(!e.domain&&v.domain&&(e.domain=v.domain.clone()),e.editable=v.editable,e.nullable=v.nullable,e.length=v.length):(y||(y=this.fields?this.fields.slice():[]),y.push(v.clone()))}y&&this._set("fields",y)}_applyAssociatedLayerPopupOverrides(){if(!this.associatedLayer)return;const e=["popupTemplate","popupEnabled"],y=(0,Q.oY)(this);for(let v=0;v<e.length;v++){const _=e[v],A=this.originIdOf(_),L=this.associatedLayer.originIdOf(_);A<L&&(L===z.Gr.SERVICE||L===z.Gr.PORTAL_ITEM)&&y.setAtOrigin(_,this.associatedLayer[_],L)}}_applyAssociatedLayerExtentOverride(){var e,y,v,_,A,L;const M=null===(e=this.associatedLayer)||void 0===e||null===(e=e.editingInfo)||void 0===e?void 0:e.lastEditDate,E=null===(y=this.associatedLayer)||void 0===y?void 0:y.serverGens,Z=null===(v=this.associatedLayer)||void 0===v?void 0:v.getAtOrigin("fullExtent","service");(0,Ce.Vo)()&&null!=(null===(_=this.associatedLayer)||void 0===_?void 0:_.infoFor3D)&&Z&&(0,ae.Wo)(null===(A=this.associatedLayer)||void 0===A?void 0:A.url)&&M&&(null===(L=this.serviceUpdateTimeStamp)||void 0===L?void 0:L.lastUpdate)!==M.getTime()&&(this.serviceUpdateTimeStamp||(null===E||void 0===E?void 0:E.minServerGen)!==(null===E||void 0===E?void 0:E.serverGen))&&(0,Q.oY)(this).setAtOrigin("fullExtent",Z.clone(),z.Gr.SERVICE)}_applyAssociatedLayerPrivileges(){const e=this.associatedLayer;e&&(this._set("userHasEditingPrivileges",e.userHasEditingPrivileges),this._set("userHasFullEditingPrivileges",e.userHasFullEditingPrivileges),this._set("userHasUpdateItemPrivileges",e.userHasUpdateItemPrivileges))}async _setAssociatedFeatureLayer(e){if(["mesh-pyramids","points"].includes(this.profile))try{const{serverUrl:y,layerId:v,portalItem:_}=await(0,le.L)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:e}),A=await Fe.S.FeatureLayer();this.associatedLayer=new A({url:y,customParameters:this.customParameters,layerId:v,portalItem:_}),await this.associatedLayer.load()}catch(t){(0,C.zf)(t)||this._logWarningOnPopupEnabled()}}async _logWarningOnPopupEnabled(){await(0,V.C_)((()=>this.popupEnabled&&null!=this.popupTemplate));const e="this SceneLayer: ".concat(this.title);null==this.attributeStorageInfo?D.A.getLogger(this).warn("Associated FeatureLayer could not be loaded and no binary attributes found. Popups will not work on ".concat(e)):D.A.getLogger(this).info("Associated FeatureLayer could not be loaded. Falling back to binary attributes for Popups on ".concat(e))}_validateElevationInfo(){const e=this.elevationInfo;"mesh-pyramids"===this.profile&&(0,qe.XF)(D.A.getLogger(this),(0,qe.$7)("Mesh scene layers","relative-to-scene",e)),(0,qe.XF)(D.A.getLogger(this),(0,qe.tW)("Scene layers",e))}};(0,_._)([(0,G.MZ)({types:{key:"type",base:ce.c,typeMap:{selection:ye.A}},json:{origins:{"web-scene":{name:"layerDefinition.featureReduction",write:!0},"portal-item":{name:"layerDefinition.featureReduction",write:!0}}}})],ze.prototype,"featureReduction",void 0),(0,_._)([(0,G.MZ)({type:[Ae],json:{read:!1,origins:{"web-scene":{name:"layerDefinition.rangeInfos",write:!0},"portal-item":{name:"layerDefinition.rangeInfos",write:!0}}}})],ze.prototype,"rangeInfos",void 0),(0,_._)([(0,G.MZ)({json:{read:!1}})],ze.prototype,"associatedLayer",void 0),(0,_._)([(0,G.MZ)({type:["show","hide"]})],ze.prototype,"listMode",void 0),(0,_._)([(0,G.MZ)({type:["ArcGISSceneServiceLayer"]})],ze.prototype,"operationalLayerType",void 0),(0,_._)([(0,G.MZ)({json:{read:!1},readOnly:!0})],ze.prototype,"type",void 0),(0,_._)([(0,G.MZ)({...He.fields,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ze.prototype,"fields",void 0),(0,_._)([(0,G.MZ)()],ze.prototype,"types",null),(0,_._)([(0,G.MZ)()],ze.prototype,"typeIdField",null),(0,_._)([(0,G.MZ)()],ze.prototype,"templates",null),(0,_._)([(0,G.MZ)()],ze.prototype,"formTemplate",null),(0,_._)([(0,G.MZ)({readOnly:!0,clonable:!1})],ze.prototype,"fieldsIndex",null),(0,_._)([(0,G.MZ)({type:Ie.A,json:{read:{source:"layerDefinition.floorInfo"},write:{target:"layerDefinition.floorInfo"}}})],ze.prototype,"floorInfo",void 0),(0,_._)([(0,G.MZ)(He.outFields)],ze.prototype,"outFields",void 0),(0,_._)([(0,G.MZ)({type:me.W4,readOnly:!0,json:{read:!1}})],ze.prototype,"nodePages",void 0),(0,_._)([(0,W.w)("service","nodePages",["nodePages","pointNodePages"])],ze.prototype,"readNodePages",null),(0,_._)([(0,G.MZ)({type:[me.uV],readOnly:!0})],ze.prototype,"materialDefinitions",void 0),(0,_._)([(0,G.MZ)({type:[me.Ot],readOnly:!0})],ze.prototype,"textureSetDefinitions",void 0),(0,_._)([(0,G.MZ)({type:[me.L0],readOnly:!0})],ze.prototype,"geometryDefinitions",void 0),(0,_._)([(0,G.MZ)({readOnly:!0})],ze.prototype,"serviceUpdateTimeStamp",void 0),(0,_._)([(0,G.MZ)({readOnly:!0})],ze.prototype,"attributeStorageInfo",void 0),(0,_._)([(0,G.MZ)({readOnly:!0})],ze.prototype,"statisticsInfo",void 0),(0,_._)([(0,G.MZ)({type:R.A.ofType(Number),nonNullable:!0,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.excludeObjectIds",write:{enabled:!0}}})],ze.prototype,"excludeObjectIds",void 0),(0,_._)([(0,G.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],ze.prototype,"definitionExpression",void 0),(0,_._)([(0,G.MZ)({type:De,json:{name:"layerDefinition.polygonFilter",write:{enabled:!0,allowNull:!0},origins:{service:{read:!1,write:!1}}}})],ze.prototype,"filter",void 0),(0,_._)([(0,G.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],ze.prototype,"path",void 0),(0,_._)([(0,G.MZ)(ue.Yj)],ze.prototype,"elevationInfo",null),(0,_._)([(0,G.MZ)({readOnly:!0,json:{read:!1}})],ze.prototype,"effectiveCapabilities",null),(0,_._)([(0,G.MZ)({readOnly:!0})],ze.prototype,"effectiveEditingEnabled",null),(0,_._)([(0,G.MZ)({type:String})],ze.prototype,"geometryType",null),(0,_._)([(0,G.MZ)(ue.kF)],ze.prototype,"labelsVisible",void 0),(0,_._)([(0,G.MZ)({type:[be.A],json:{origins:{service:{name:"drawingInfo.labelingInfo",read:{reader:we.w},write:!1}},name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:we.w},write:!0}})],ze.prototype,"labelingInfo",void 0),(0,_._)([(0,G.MZ)(ue.fV)],ze.prototype,"legendEnabled",void 0),(0,_._)([(0,G.MZ)({type:Number,json:{origins:{"web-document":{default:1,write:{enabled:!0,target:{opacity:{type:Number},"layerDefinition.drawingInfo.transparency":{type:Number}}},read:{source:["opacity","layerDefinition.drawingInfo.transparency"],reader(e,y){var v;if("number"==typeof e&&e>=0&&e<=1)return e;const _=null===(v=y.layerDefinition)||void 0===v||null===(v=v.drawingInfo)||void 0===v?void 0:v.transparency;return void 0!==_?(0,Qe.D)(_):void 0}}},"portal-item":{write:!0},service:{read:!1}}}})],ze.prototype,"opacity",void 0),(0,_._)([(0,G.MZ)({type:["Low","High"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ze.prototype,"priority",void 0),(0,_._)([(0,G.MZ)({type:["Labels"],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],ze.prototype,"semantic",void 0),(0,_._)([(0,G.MZ)({types:M.X,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],ze.prototype,"renderer",null),(0,_._)([(0,G.MZ)({json:{read:!1}})],ze.prototype,"cachedDrawingInfo",void 0),(0,_._)([(0,W.w)("service","cachedDrawingInfo")],ze.prototype,"readCachedDrawingInfo",null),(0,_._)([(0,G.MZ)({readOnly:!0,json:{read:!1}})],ze.prototype,"capabilities",null),(0,_._)([(0,G.MZ)({type:Boolean,json:{read:!1}})],ze.prototype,"editingEnabled",null),(0,_._)([(0,G.MZ)({readOnly:!0,json:{write:!1,read:!1}})],ze.prototype,"infoFor3D",null),(0,_._)([(0,G.MZ)({readOnly:!0,json:{write:!1,read:!1}})],ze.prototype,"relationships",null),(0,_._)([(0,G.MZ)(ue.M6)],ze.prototype,"popupEnabled",void 0),(0,_._)([(0,G.MZ)({type:L.A,json:{name:"popupInfo",write:!0}})],ze.prototype,"popupTemplate",void 0),(0,_._)([(0,G.MZ)({readOnly:!0,json:{read:!1}})],ze.prototype,"defaultPopupTemplate",null),(0,_._)([(0,G.MZ)({type:String,json:{read:!1}})],ze.prototype,"objectIdField",void 0),(0,_._)([(0,W.w)("service","objectIdField",["objectIdField","fields"])],ze.prototype,"readObjectIdField",null),(0,_._)([(0,G.MZ)({type:String,json:{read:!1}})],ze.prototype,"globalIdField",void 0),(0,_._)([(0,W.w)("service","globalIdField",["globalIdField","fields"])],ze.prototype,"readGlobalIdField",null),(0,_._)([(0,G.MZ)({readOnly:!0,type:String,json:{read:!1}})],ze.prototype,"displayField",null),(0,_._)([(0,G.MZ)({type:String,json:{read:!1}})],ze.prototype,"profile",void 0),(0,_._)([(0,W.w)("service","profile",["store.profile"])],ze.prototype,"readProfile",null),(0,_._)([(0,G.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],ze.prototype,"normalReferenceFrame",void 0),(0,_._)([(0,G.MZ)(ue.PY)],ze.prototype,"screenSizePerspectiveEnabled",void 0),(0,_._)([(0,G.MZ)({json:{read:!1,origins:{service:{read:!0}}}})],ze.prototype,"serviceItemId",void 0),ze=(0,_._)([(0,H.$)("esri.layers.SceneLayer")],ze);const Je={"mesh-pyramids":"mesh-pyramids",meshpyramids:"mesh-pyramids","features-meshes":"mesh-pyramids",points:"points","features-points":"points",lines:"lines","features-lines":"lines",polygons:"polygons","features-polygons":"polygons"},Ke={"mesh-pyramids":"mesh",points:"point",lines:"polyline",polygons:"polygon"},$e=ze},1372:(e,y,v)=>{v.d(y,{$1:()=>u,H2:()=>c,MT:()=>l,VP:()=>i,WF:()=>p,Wt:()=>r,XQ:()=>m,hK:()=>d,nS:()=>a,uh:()=>t,xY:()=>n});var _=v(4180);const A="upload-assets",o=()=>new Error;class r extends _.A{constructor(){super("".concat(A,":unsupported"),"Layer does not support asset uploads.",o())}}class t extends _.A{constructor(){super("".concat(A,":no-glb-support"),"Layer does not support glb.",o())}}class n extends _.A{constructor(){super("".concat(A,":no-supported-source"),"No supported external source found",o())}}class u extends _.A{constructor(){super("".concat(A,":not-base-64"),"Expected gltf data in base64 format after conversion.",o())}}class p extends _.A{constructor(){super("".concat(A,":unable-to-prepare-options"),"Unable to prepare uploadAsset request options.",o())}}class a extends _.A{constructor(e,y){super("".concat(A,":bad-response"),"Bad response. Uploaded ".concat(e," items and received ").concat(y," results."),o())}}class d extends _.A{constructor(e,y){var v,_;super("".concat(A,"-layer:upload-failed"),"Failed to upload mesh file ".concat(e,". Error code: ").concat(null!==(v=null===y||void 0===y?void 0:y.code)&&void 0!==v?v:"-1",". Error message: ").concat(null!==(_=null===y||void 0===y?void 0:y.messages)&&void 0!==_?_:"unknown"),o())}}class c extends _.A{constructor(e){super("".concat(A,"-layer:unsupported-format"),"The service allowed us to upload an asset of FormatID ".concat(e,", but it does not list it in its supported formats."),o())}}class l extends _.A{constructor(){super("".concat(A,":convert3D-failed"),"convert3D failed.")}}class i extends _.A{constructor(){super("invalid-input:no-model","No supported model found")}}class m extends _.A{constructor(){super("invalid-input:multiple-models","Multiple supported models found")}}},19459:(e,y,v)=>{v.d(y,{Mk:()=>p,Zk:()=>h,w6:()=>F});var _=v(80671),A=v(73067),L=v(66004),M=v(81618),E=(v(89412),v(50886),v(4180),v(68682)),Z=v(14010);const R=new A.A.EventEmitter;function h(e,y){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,_=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const A=(0,M.Tw)();return _=null==y||_,R.emit("apply-edits",{serviceUrl:e,layerId:y,gdbVersion:v,mayReceiveServiceEdits:_,result:A.promise}),A}const T="esri.layers.mixins.EditBusLayer",D=Symbol(T);function p(e){return null!=e&&"object"==typeof e&&D in e}function b(e){return null!=e&&"object"==typeof e&&"gdbVersion"in e}function g(e,y,v){const _=new URL(e).host,A=Z.Z3.get(_),n=e=>!e||e===A;return n(y)&&n(v)||y===v}const F=e=>{var y;let v=class extends e{constructor(){super(...arguments),this[y]=!0,this._applyEditsHandler=e=>{const{serviceUrl:y,layerId:v,gdbVersion:_,mayReceiveServiceEdits:A,result:M}=e,E=y===this.url,R=null!=v&&null!=this.layerId&&v===this.layerId,T=b(this),D=b(this)&&g(y,_,this.gdbVersion);if(!E||T&&!D||!R&&!A)return;const q=M.then((e=>{var y;if(R&&(e.addedFeatures.length||e.updatedFeatures.length||e.deletedFeatures.length||e.addedAttachments.length||e.updatedAttachments.length||e.deletedAttachments.length))return this.emit("edits",(0,L.o8)(e)),e;const v=null===(y=e.editedFeatures)||void 0===y?void 0:y.find((e=>{let{layerId:y}=e;return y===this.layerId}));if(v){const{adds:y,updates:_,deletes:A}=v.editedFeatures,M={edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:y?y.map((e=>{let{attributes:y}=e;return{objectId:this.objectIdField&&y[this.objectIdField],globalId:this.globalIdField&&y[this.globalIdField]}})):[],deletedFeatures:A?A.map((e=>{let{attributes:y}=e;return{objectId:this.objectIdField&&y[this.objectIdField],globalId:this.globalIdField&&y[this.globalIdField]}})):[],updatedFeatures:_?_.map((e=>{let{current:{attributes:y}}=e;return{objectId:this.objectIdField&&y[this.objectIdField],globalId:this.globalIdField&&y[this.globalIdField]}})):[],editedFeatures:(0,L.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,L.o8)(e.historicMoment)};return this.emit("edits",M),M}return{edits:null,addedAttachments:[],deletedAttachments:[],updatedAttachments:[],addedFeatures:[],deletedFeatures:[],updatedFeatures:[],editedFeatures:(0,L.o8)(e.editedFeatures),exceededTransferLimit:!1,historicMoment:(0,L.o8)(e.historicMoment)}})).then((e=>("historicMoment"in this&&this.historicMoment!==e.historicMoment&&(0,Z.w5)(y,_)&&(this.historicMoment=e.historicMoment),e)));this.emit("apply-edits",{result:q})},this._updateMomentHandler=e=>{const{serviceUrl:y,gdbVersion:v,moment:_}=e,A=y===this.url,L=b(this),M=b(this)&&g(y,v,this.gdbVersion),E=b(this)&&!g(y,this.gdbVersion,null);A&&L&&M&&E&&"historicMoment"in this&&this.historicMoment!==_&&(this.historicMoment=_)},this.when().then((()=>{this.addHandles(function l(e){return R.on("apply-edits",new WeakRef(e))}(this._applyEditsHandler)),"historicMoment"in this&&this.addHandles(function a(e){return R.on("update-moment",new WeakRef(e))}(this._updateMomentHandler))}),(()=>{}))}};return y=D,v=(0,_._)([(0,E.$)(T)],v),v}},35999:(e,y,v)=>{v.d(y,{E1:()=>i,Fm:()=>s,JZ:()=>F,R_:()=>u,fu:()=>t,oF:()=>r,rq:()=>c});const _=[["binary","application/octet-stream","bin",""]];function t(e,y){var v;return null!=d(y.name,null!==(v=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==v?v:[])}function r(e,y){var v;if(!e)return!1;const _=c(y,null!==(v=e.supportedFormats)&&void 0!==v?v:[]);return null!=_&&e.editFormats.includes(_)}function u(e,y){return m(function p(e,y){const v=e.toLowerCase();return a(y).find((e=>l(e)===v))}(e,y))}function i(e,y){return m(d(e,y))}function s(e,y){return l(function f(e,y){return a(y).find((y=>m(y)===e))}(e,y))}function c(e,y){var v;return null!==(v=i(e.name,y))&&void 0!==v?v:u(e.type,y)}function a(e){return[..._,...e]}function d(e,y){const v=e.toLowerCase();return a(y).find((e=>w(e).some((e=>v.endsWith(e)))))}function m(e){return null===e||void 0===e?void 0:e[0]}function l(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function w(e){var y;return null!==(y=null===e||void 0===e?void 0:e[2].split(",").map((e=>e.toLowerCase())))&&void 0!==y?y:[]}function F(e){var y;return null===(y=e.tables)||void 0===y?void 0:y.find((e=>"assetMaps"===e.role))}},28330:(e,y,v)=>{v.d(y,{n:()=>p});var _=v(4270);function p(e){return A[function t(e){return"json"===e.type?"application/json":"blob"===e.type?e.blob.type:function n(e){const y=(0,_.Zo)(e);return E[y]||L}(e.url)}(e)]||M}const A={},L="text/plain",M=A[L],E={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const Z in E)A[E[Z]]=Z},36125:(e,y,v)=>{v.d(y,{L:()=>t});var _=v(87149),A=v(81618),L=v(4282);async function t(e,y,v){const M=e&&e.getAtOrigin&&e.getAtOrigin("renderer",y.origin);if(M&&"unique-value"===M.type&&M.styleOrigin){const E=await(0,_.Ke)(M.populateFromStyle());if((0,A.Te)(v),!1===E.ok){const v=E.error;null!==y&&void 0!==y&&y.messages&&y.messages.push(new L.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(v.message),{error:v,context:y})),e.clear("renderer",null===y||void 0===y?void 0:y.origin)}}}},14010:(e,y,v)=>{v.d(y,{TA:()=>A,We:()=>a,Z3:()=>L,ZJ:()=>i,w5:()=>c});var _=v(53705);const A=(0,v(51523).vD)(),L=new Map,M=new Map;new Map;async function a(e,y,v){if(!e||!v)return!1;if(!y)return!0;const A=new URL(e).host;let M=L.get(A);if(!M){const y=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,"");M=(await(0,_.A)(y,{responseType:"json",query:{f:"json"}})).data.defaultVersionName}return M===y}async function i(e,y){var _;let L=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e||!y)return!0;const E=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),Z=null===(_=M.get(E))||void 0===_?void 0:_.entries();if(Z)for(const[M,T]of Z)if(T.name===y){var R;const e=!(null!==(R=T.stack)&&void 0!==R&&R.hasForwardEdits());if(!e&&L){const[{deleteForwardEdits:e},{default:y}]=await Promise.all([v.e(2508).then(v.bind(v,42508)),v.e(5676).then(v.bind(v,75676))]);return e(E,M,new y({sessionId:A,moment:T.moment}))}return e}return!0}function c(e,y){var v;if(!e)return!1;const _=e.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),A=null===(v=M.get(_))||void 0===v?void 0:v.entries();if(A)for(const[L,M]of A)if(M.name===y)return"edit"===M.lockType;return!1}}}]);
//# sourceMappingURL=2620.7c0085f7.chunk.js.map