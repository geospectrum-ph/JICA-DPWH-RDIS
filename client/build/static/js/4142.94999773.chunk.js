"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[4142,9326],{72284:(y,u,d)=>{d.d(u,{Q:()=>t});var p=d(59741);async function t(y,u){var d;const{loadContext:m,...O}=u||{},W=m?await m.fetchServiceMetadata(y,O):await(0,p.V)(y,O);c(W),n(W);const V={serviceJSON:W};if((null!==(d=W.currentVersion)&&void 0!==d?d:0)<10.5)return V;const U="".concat(y,"/layers"),B=m?await m.fetchServiceMetadata(U,O):await(0,p.V)(U,O);return c(B),n(B),V.layersJSON={layers:B.layers,tables:B.tables},V}function a(y){return"Feature Layer"===y.type||"Oriented Imagery Layer"===y.type}function r(y){return"Table"===y.type}function n(y){var u,d;y.layers=null===(u=y.layers)||void 0===u?void 0:u.filter(a),y.tables=null===(d=y.tables)||void 0===d?void 0:d.filter(r)}function s(y){y.type||(y.type="Feature Layer")}function i(y){y.type||(y.type="Table")}function c(y){var u,d;null!==(u=y.layers)&&void 0!==u&&u.forEach(s),null===(d=y.tables)||void 0===d||d.forEach(i)}},59326:(y,u,d)=>{d.d(u,{N:()=>w,populateOperationalLayers:()=>c});var p=d(39652),m=(d(50886),d(22507)),O=d(77247),W=d(35799);function t(y,u){return!(!y.layerType||"ArcGISFeatureLayer"!==y.layerType)&&y.featureCollectionType===u}var V=d(53087),U=d(36125);async function c(y,u,d){if(!u)return;const p=u.map((y=>async function f(y,u){return async function G(y,u,d){const p=new y;return p.read(u,d.context),"group"===p.type&&("GroupLayer"===u.layerType?await w(p,u,d):b(u)?function h(y,u,d){u.itemId&&(y.portalItem=new W.default({id:u.itemId,portal:null===d||void 0===d?void 0:d.portal}),y.when((()=>{var p,m;const t=p=>{var m;const O=p.layerId;F(p,y,u,O,d);const W=null===(m=u.featureCollection)||void 0===m||null===(m=m.layers)||void 0===m?void 0:m[O];W&&p.read(W,d)};null!==(p=y.layers)&&void 0!==p&&p.forEach(t),null===(m=y.tables)||void 0===m||m.forEach(t)})))}(p,u,d.context):A(u)&&await async function C(y,u,d){var p;const m=O.S.FeatureLayer,W=await m(),V=u.featureCollection,U=null===V||void 0===V?void 0:V.showLegend,B=null===V||void 0===V||null===(p=V.layers)||void 0===p?void 0:p.map(((p,m)=>{const O=new W;O.read(p,d);const V={...d,ignoreDefaults:!0};return F(O,y,u,m,V),null!=U&&O.read({showLegend:U},V),O}));y.layers.addMany(null!==B&&void 0!==B?B:[])}(p,u,d.context)),await(0,U.L)(p,d.context),p}(await M(y,u),y,u)}(y,d))),m=await Promise.allSettled(p);for(const O of m)"rejected"===O.status||O.value&&y.add(O.value)}const B={ArcGISDimensionLayer:"DimensionLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",PointCloudLayer:"PointCloudLayer",ArcGISSceneServiceLayer:"SceneLayer",IntegratedMeshLayer:"IntegratedMeshLayer",OGCFeatureLayer:"OGCFeatureLayer",BuildingSceneLayer:"BuildingSceneLayer",ArcGISTiledElevationServiceLayer:"ElevationLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",GroupLayer:"GroupLayer",GeoJSON:"GeoJSONLayer",WebTiledLayer:"WebTileLayer",CSV:"CSVLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer",IntegratedMesh3DTilesLayer:"IntegratedMesh3DTilesLayer",KML:"KMLLayer",RasterDataLayer:"UnsupportedLayer",Voxel:"VoxelLayer",LineOfSightLayer:"LineOfSightLayer"},R={ArcGISTiledElevationServiceLayer:"ElevationLayer",DefaultTileLayer:"ElevationLayer",RasterDataElevationLayer:"UnsupportedLayer"},N={ArcGISFeatureLayer:"FeatureLayer"},J={ArcGISTiledMapServiceLayer:"TileLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",OpenStreetMap:"OpenStreetMapLayer",WebTiledLayer:"WebTileLayer",VectorTileLayer:"VectorTileLayer",ArcGISImageServiceLayer:"UnsupportedLayer",WMS:"UnsupportedLayer",ArcGISMapServiceLayer:"UnsupportedLayer",ArcGISSceneServiceLayer:"SceneLayer",DefaultTileLayer:"TileLayer"},_={ArcGISAnnotationLayer:"UnsupportedLayer",ArcGISDimensionLayer:"UnsupportedLayer",ArcGISFeatureLayer:"FeatureLayer",ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISStreamLayer:"StreamLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",CatalogLayer:"CatalogLayer",CSV:"CSVLayer",DefaultTileLayer:"TileLayer",GeoRSS:"GeoRSSLayer",GeoJSON:"GeoJSONLayer",GroupLayer:"GroupLayer",KML:"KMLLayer",KnowledgeGraphLayer:"UnsupportedLayer",MediaLayer:"MediaLayer",OGCFeatureLayer:"OGCFeatureLayer",OrientedImageryLayer:"OrientedImageryLayer",SubtypeGroupLayer:"SubtypeGroupLayer",VectorTileLayer:"VectorTileLayer",WFS:"WFSLayer",WMS:"WMSLayer",WebTiledLayer:"WebTileLayer"},K={ArcGISFeatureLayer:"FeatureLayer",SubtypeGroupTable:"UnsupportedLayer"},H={ArcGISImageServiceLayer:"ImageryLayer",ArcGISImageServiceVectorLayer:"ImageryLayer",ArcGISMapServiceLayer:"MapImageLayer",ArcGISTiledImageServiceLayer:"ImageryTileLayer",ArcGISTiledMapServiceLayer:"TileLayer",OpenStreetMap:"OpenStreetMapLayer",VectorTileLayer:"VectorTileLayer",WebTiledLayer:"WebTileLayer",BingMapsAerial:"BingMapsLayer",BingMapsRoad:"BingMapsLayer",BingMapsHybrid:"BingMapsLayer",WMS:"WMSLayer",DefaultTileLayer:"TileLayer"},q={..._,LinkChartLayer:"LinkChartLayer"},z={...K},Q={...H};async function M(y,u){var d,p;const U=u.context,B=v(U);let R=y.layerType||y.type;!R&&(null===u||void 0===u?void 0:u.defaultLayerType)&&(R=u.defaultLayerType);const N=B[R];let J=N?O.S[N]:O.S.UnknownLayer;if(b(y)){const u=null===U||void 0===U?void 0:U.portal;if(y.itemId){const d=new W.default({id:y.itemId,portal:u});await d.load();const p=(await(0,V.n)(d,new m.v)).className||"UnknownLayer";J=O.S[p]}}else"ArcGISFeatureLayer"===R?function featureCollectionUtils_e(y){return t(y,"notes")}(y)||function r(y){return t(y,"markup")}(y)?J=O.S.MapNotesLayer:function n(y){return t(y,"route")}(y)?J=O.S.RouteLayer:A(y)&&(J=O.S.GroupLayer):null!==(d=y.wmtsInfo)&&void 0!==d&&d.url&&y.wmtsInfo.layerIdentifier?J=O.S.WMTSLayer:"WFS"===R&&"2.0.0"!==(null===(p=y.wfsInfo)||void 0===p?void 0:p.version)&&(J=O.S.UnsupportedLayer);return J()}function A(y){var u,d;return"ArcGISFeatureLayer"===y.layerType&&!b(y)&&(null!==(u=null===(d=y.featureCollection)||void 0===d||null===(d=d.layers)||void 0===d?void 0:d.length)&&void 0!==u?u:0)>1}function b(y){return"Feature Collection"===y.type}function v(y){let u;switch(y.origin){case"web-scene":switch(y.layerContainerType){case"basemap":u=J;break;case"ground":u=R;break;case"tables":u=N;break;default:u=B}break;case"link-chart":switch(y.layerContainerType){case"basemap":u=Q;break;case"tables":u=z;break;default:u=q}break;default:switch(y.layerContainerType){case"basemap":u=H;break;case"tables":u=K;break;default:u=_}}return u}async function w(y,u,d){const m=new p.A,O=c(m,Array.isArray(u.layers)?u.layers:[],d);try{try{if(await O,"group"===y.type)return y.layers.addMany(m),y}catch(W){y.destroy();for(const y of m)y.destroy();throw W}}catch(W){throw W}}function F(y,u,d,p,m){var O,W;y.read({id:"".concat(u.id,"-sublayer-").concat(p),visibility:null===(O=null===(W=d.visibleLayers)||void 0===W?void 0:W.includes(p))||void 0===O||O},m)}},67390:(y,u,d)=>{d.d(u,{m:()=>o,v:()=>e});var p=d(4270),m=d(91710);function e(y,u){return{...l(y,u),readResourcePaths:[]}}function o(y,u,d){const m=(0,p.An)(y.itemUrl);return{...l(y,u),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:m?{rootPath:m.path,writtenUrls:[]}:null,resources:d?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:null}}function l(y,u){return{origin:u,url:(0,p.An)(y.itemUrl),portal:y.portal||m.A.getDefault(),portalItem:y}}},34142:(y,u,d)=>{d.d(u,{load:()=>I});var p=d(4180),m=d(26128),O=d(72284),W=d(22507),V=d(59326),U=d(77247),B=d(91710),R=d(67390),N=d(2522),J=d(67177),_=d(36125),K=d(59741);async function I(y,u){const d=y.instance.portalItem;if(null!==d&&void 0!==d&&d.id)return await d.load(u),function L(y){const u=y.instance.portalItem;if(null===u||void 0===u||!u.type||!y.supportedTypes.includes(u.type))throw new p.A("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:null===u||void 0===u?void 0:u.type,expectedType:y.supportedTypes.join(", ")})}(y),y.validateItem&&y.validateItem(d),async function v(y,u){var d;const m=y.instance,U=m.portalItem;if(!U)return;const{url:B,title:H}=U,q=(0,R.v)(U,"portal-item");if("group"===m.type)return async function S(y,u,d){const m=y.portalItem;if(!y.sourceIsPortalItem)return;const{title:U,type:B}=m;if("Group Layer"===B){if(!(0,J.Y)(m,"Map"))throw new p.A("portal:invalid-layer-item-typekeyword","'Group Layer' item without 'Map' type keyword is not supported");return async function T(y){var u;const d=y.portalItem,p=await d.fetchData("json");if(!p)return;const m=(0,R.v)(d,"web-map");y.read(p,m),await(0,V.N)(y,p,{context:m}),y.resourceReferences={portalItem:d,paths:null!==(u=m.readResourcePaths)&&void 0!==u?u:[]}}(y)}return y.read({title:U},u),async function j(y,u){let d;const{portalItem:m}=y;if(!m)return;const V=m.type,U=u.layerModuleTypeMap;switch(V){case"Feature Service":case"Feature Collection":d=U.FeatureLayer;break;case"Stream Service":d=U.StreamLayer;break;case"Scene Service":d=U.SceneLayer;break;default:throw new p.A("portal:unsupported-item-type-as-group","The item type '".concat(V,"' is not supported as a 'IGroupLayer'"))}const B=new W.v;let[R,J]=await Promise.all([d(),C(u,B)]),g=()=>R;if("Feature Service"===V){var _;const u=null===(_=(0,N.pJ)(J))||void 0===_?void 0:_.customParameters;J=m.url?await(0,N.bO)(J,m.url,B):{};const d=(0,N.z8)(J),p=(0,N.ay)(J),W=(0,N.PC)(J),V=[];if(d.length||null!==p&&void 0!==p&&p.length){d.length&&V.push("SubtypeGroupLayer"),null!==p&&void 0!==p&&p.length&&V.push("OrientedImageryLayer"),(null===W||void 0===W?void 0:W.length)&&V.push("CatalogLayer");const y=[];for(const d of V){const u=U[d];y.push(u())}const u=await Promise.all(y),m=new Map;V.forEach(((y,d)=>{m.set(y,u[d])})),g=y=>{var u;return y.layerType&&null!==(u=m.get(y.layerType))&&void 0!==u?u:R}}const K=await async function G(y,u){const{layersJSON:d}=await(0,O.Q)(y,u);if(!d)return null;const p=[...d.layers,...d.tables];return y=>p.find((u=>u.id===y.id))}(m.url,{customParameters:u,loadContext:B});return await M(y,g,J,K)}return"Scene Service"===V&&m.url&&(J=await(0,N.nu)(m,J,B)),(0,N.XH)(J)>0?await M(y,g,J):await async function P(y,u){var d,p;const{portalItem:m}=y;if(null===m||void 0===m||!m.url)return;const O=await(0,K.V)(m.url);O&&M(y,u,{layers:null===(d=O.layers)||void 0===d?void 0:d.map(N._r),tables:null===(p=O.tables)||void 0===p?void 0:p.map(N._r)})}(y,g)}(y,d)}(m,q,y);B&&"media"!==m.type&&m.read({url:B},q);const z=new W.v,Q=await C(y,z,u);return Q&&m.read(Q,q),m.resourceReferences={portalItem:U,paths:null!==(d=q.readResourcePaths)&&void 0!==d?d:[]},"subtype-group"!==m.type&&m.read({title:H},q),(0,_.L)(m,q)}(y,u)}async function M(y,u,d,p){var m;let O=d.layers||[];const W=d.tables||[];if("Feature Collection"===(null===(m=y.portalItem)||void 0===m?void 0:m.type)?(O.forEach(((y,u)=>{var d;y.id=u,"Table"===(null===y||void 0===y||null===(d=y.layerDefinition)||void 0===d?void 0:d.type)&&W.push(y)})),O=O.filter((y=>{var u;return"Table"!==(null===y||void 0===y||null===(u=y.layerDefinition)||void 0===u?void 0:u.type)}))):(O.reverse(),W.reverse()),O.forEach((m=>{const O=null===p||void 0===p?void 0:p(m);if(O||!p){const p=x(y,u(m),d,m,O);y.add(p)}})),W.length){const u=await U.S.FeatureLayer();W.forEach((m=>{const O=null===p||void 0===p?void 0:p(m);if(O||!p){const p=x(y,u,d,m,O);y.tables.add(p)}}))}}function x(y,u,d,p,m){const O=y.portalItem,W={portalItem:O.clone(),layerId:p.id};null!=p.url&&(W.url=p.url);const V=new u(W);if("sourceJSON"in V&&(V.sourceJSON=m),"subtype-group"!==V.type&&"catalog"!==V.type&&(V.sublayerTitleMode="service-name"),"Feature Collection"===O.type){const y={origin:"portal-item",portal:O.portal||B.A.getDefault()};V.read(p,y);const u=d.showLegend;null!=u&&V.read({showLegend:u},y)}return V}async function C(y,u,d){if(!1===y.supportsData)return;const p=y.instance,O=p.portalItem;if(!O)return;let W=null;try{W=await O.fetchData("json",d)}catch(B){}if(function k(y){return"stream"!==y.type&&"layerId"in y}(p)){var V,U;let y=null;const d=await async function F(y,u,d){var p,O,W,V,U,B,R,J,_;if(null!==u&&void 0!==u&&u.layers&&null!==u&&void 0!==u&&u.tables)return(0,N.XH)(u);const K=(0,m.qg)(y.url);if(!K)return 1;const H=await d.fetchServiceMetadata(K.url.path,{customParameters:null===(p=(0,N.pJ)(u))||void 0===p?void 0:p.customParameters}).catch((()=>null));return(null!==(O=null!==(W=null===u||void 0===u||null===(V=u.layers)||void 0===V?void 0:V.length)&&void 0!==W?W:null===H||void 0===H||null===(U=H.layers)||void 0===U?void 0:U.length)&&void 0!==O?O:0)+(null!==(B=null!==(R=null===u||void 0===u||null===(J=u.tables)||void 0===J?void 0:J.length)&&void 0!==R?R:null===H||void 0===H||null===(_=H.tables)||void 0===_?void 0:_.length)&&void 0!==B?B:0)}(O,W,u);if((null!==(V=W)&&void 0!==V&&V.layers||null!==(U=W)&&void 0!==U&&U.tables)&&d>0){if(null==p.layerId){const y=(0,N.z8)(W);p.layerId="subtype-group"===p.type?null===y||void 0===y?void 0:y[0]:(0,N.WZ)(W)}y=function D(y,u){var d,p;const{layerId:m}=u,O=(null===(d=y.layers)||void 0===d?void 0:d.find((y=>y.id===m)))||(null===(p=y.tables)||void 0===p?void 0:p.find((y=>y.id===m)));return O&&function E(y,u){return!("feature"===u.type&&"layerType"in y&&"SubtypeGroupLayer"===y.layerType||"subtype-group"===u.type&&!("layerType"in y))}(O,u)?O:null}(W,p),y&&null!=W.showLegend&&(y.showLegend=W.showLegend)}return d>1&&"sublayerTitleMode"in p&&"service-name"!==p.sublayerTitleMode&&(p.sublayerTitleMode="item-title-and-service-name"),y}return W}},36125:(y,u,d)=>{d.d(u,{L:()=>t});var p=d(87149),m=d(81618),O=d(4282);async function t(y,u,d){const W=y&&y.getAtOrigin&&y.getAtOrigin("renderer",u.origin);if(W&&"unique-value"===W.type&&W.styleOrigin){const V=await(0,p.Ke)(W.populateFromStyle());if((0,m.Te)(d),!1===V.ok){const d=V.error;null!==u&&void 0!==u&&u.messages&&u.messages.push(new O.A("renderer:style-reference","Failed to create unique value renderer from style reference: ".concat(d.message),{error:d,context:u})),y.clear("renderer",null===u||void 0===u?void 0:u.origin)}}}}}]);
//# sourceMappingURL=4142.94999773.chunk.js.map