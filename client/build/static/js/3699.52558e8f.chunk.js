"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[3699],{23699:(e,t,r)=>{r.r(t),r.d(t,{registerFunctions:()=>C});var o=r(61272),i=(r(30174),r(75587)),a=r(58989),s=r(55421),u=r(80004),p=r(39090),c=r(66445),d=r(54208),f=r(80417),h=r(91710),y=r(35799),m=r(98881),v=r(63721),g=r(31827),w=r(68708),A=r(13389),S=r(83836),_=r(28534),R=r(98664);let G=null;async function M(e,t){const o=new y.default({portal:e,id:t});return await o.load(),null===G&&(G=await r.e(9422).then(r.bind(r,9422))),await G.fetchKnowledgeGraph(o.url)}function Q(e,t,r,o,i){if(null===e)return null;if((0,u.c)(e)||(0,u.b)(e))return e;if((0,u.k)(e))return e.toJSDate();if((0,u.k)(e))return e.toJSDate();if((0,u.m)(e))return e.toStorageFormat();if((0,u.n)(e))return e.toStorageString();if((0,u.v)(e)){const a={};for(const s of e.keys())a[s]=Q(e.field(s),t,r,o,i),a[s]instanceof c.A&&i.push({container:a,indexer:s});return a}if((0,u.o)(e)){const a=e.map((e=>Q(e,t,r,o,i)));for(let e=0;e<a.length;e++)a[e]instanceof c.A&&i.push({container:a,indexer:e});return a}if((0,u.p)(e)){if(e.spatialReference.isWGS84)return e;if(e.spatialReference.isWebMercator&&t)return(0,f.ci)(e);if(!t||!r)return e;throw new s.D$(o,s.TX.WrongSpatialReference,null)}}function K(e,t){if(!e)return null;const r={};for(const o in e)r[o]=V(e[o],t);return r}function V(e,t){var r,o;return null===e?null:(0,u.o)(e)?e.map((e=>V(e,t))):e instanceof v.A?{graphTypeName:e.typeName,id:e.id,graphType:"entity",properties:K(e.properties,t)}:e instanceof w.A?{graphType:"object",properties:K(e.properties,t)}:e instanceof S.A?{graphTypeName:e.typeName,id:e.id,graphType:"relationship",originId:null!==(r=e.originId)&&void 0!==r?r:null,destinationId:null!==(o=e.destinationId)&&void 0!==o?o:null,properties:K(e.properties,t)}:e instanceof A.A?{graphType:"path",path:e.path?e.path.map((e=>V(e,t))):null}:(0,u.p)(e)?function E(e,t){if(!e)return e;if(e.spatialReference.isWGS84&&t.spatialReference.isWebMercator)return(0,f.Gh)(e);if(e.spatialReference.equals(t.spatialReference))return e;throw new s.D$(t,s.TX.WrongSpatialReference,null)}(e,t):(0,u.c)(e)||(0,u.b)(e)||(0,u.a7)(e)?e:null}function C(e){"async"===e.mode&&(e.functions.knowledgegraphbyportalitem=function(t,r){return e.standardFunctionAsync(t,r,((e,o,a)=>{var c,d;if((0,u.H)(a,2,2,t,r),null===a[0])throw new s.D$(t,s.TX.PortalRequired,r);if(a[0]instanceof i.A){var f;const e=(0,u.j)(a[1]);let r=null;return r=null!==(f=t.services)&&void 0!==f&&f.portal?t.services.portal:h.A.getDefault(),M((0,p.R)(a[0],r),e)}if(!1===(0,u.c)(a[0]))throw new s.D$(t,s.TX.InvalidParameter,r);const y=(0,u.j)(a[0]);return M(null!==(c=null===(d=t.services)||void 0===d?void 0:d.portal)&&void 0!==c?c:h.A.getDefault(),y)}))},e.signatures.push({name:"knowledgegraphbyportalitem",min:2,max:2}),e.functions.querygraph=function(t,i){return e.standardFunctionAsync(t,i,(async(e,p,c)=>{var f,h;(0,u.H)(c,2,4,t,i);const y=c[0];if(!(0,u.w)(y))throw new s.D$(t,s.TX.InvalidParameter,i);const v=c[1];if(!(0,u.c)(v))throw new s.D$(t,s.TX.InvalidParameter,i);null===G&&(G=await r.e(9422).then(r.bind(r,9422)));let w=null;const A=(0,u.K)(c[2],null);if(!(A instanceof a.A||null===A))throw new s.D$(t,s.TX.InvalidParameter,i);if(A){let e=[];w=Q(A,!0,!1,t,e),e=e.filter((e=>!e.container[e.indexer].spatialReference.isWGS84)),e.length>0&&await async function J(e){var t;const r=null!==(t=o.A.geometryServiceUrl)&&void 0!==t?t:"";if(!r){(0,d.isLoaded)()||await(0,d.load)();for(const t of e)t.container[t.indexer]=(0,d.project)(t.container[t.indexer],R.A.WGS84);return}const i=e.map((e=>e.container[e.indexer])),a=new _.A({geometries:i,outSpatialReference:R.A.WGS84}),s=await(0,m.C)(r,a);for(let o=0;o<s.length;o++){const t=e[o];t.container[t.indexer]=s[o]}}(e)}const S=new g.A({openCypherQuery:v,bindParameters:w});(null!==(f=null===y||void 0===y||null===(h=y.serviceDefinition)||void 0===h?void 0:h.currentVersion)&&void 0!==f?f:11.3)>11.2&&(S.outputSpatialReference=t.spatialReference);const b=(await G.executeQueryStreaming(y,S)).resultRowsStream.getReader(),j=[];try{for(;;){const{done:e,value:r}=await b.read();if(e)break;if((0,u.o)(r))for(const o of r)j.push(V(o,t));else{const e=[];for(const o of r)e.push(V(r[o],t));j.push(e)}}}catch(x){throw x}return a.A.convertJsonToArcade(j,(0,u.N)(t),!1,!0)}))},e.signatures.push({name:"querygraph",min:2,max:4}))}},39090:(e,t,r)=>{r.d(t,{R:()=>l});var o=r(91710);function l(e,t){return null===e?t:new o.A({url:e.field("url")})}},98881:(e,t,r)=>{r.d(t,{C:()=>n});var o=r(53705),i=r(6493),a=r(31670),s=r(95530),u=r(10182),p=r(28534);const c=(0,i.dp)(p.A);async function n(e,t,r){t=c(t);const i=(0,s.Dl)(e),p={...i.query,f:"json",...t.toJSON()},d=t.outSpatialReference,f=(0,a.$B)(t.geometries[0]),h=(0,s.jV)(p,r);return(0,o.A)(i.path+"/project",h).then((e=>{let{data:{geometries:t}}=e;return(0,u.V)(t,f,d)}))}},63721:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(80671),i=(r(30174),r(57453)),a=(r(50886),r(89412),r(76761),r(68682)),s=r(9248),u=r(57264);let p=class extends s.A{constructor(e){super(e),this.layoutGeometry=null}};(0,o._)([(0,i.MZ)({type:u.A,json:{write:!0}})],p.prototype,"layoutGeometry",void 0),p=(0,o._)([(0,a.$)("esri.rest.knowledgeGraph.Entity")],p);const c=p},9248:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(80671),i=r(57453),a=(r(50886),r(89412),r(76761),r(68682)),s=r(87831);let u=class extends s.A{constructor(e){super(e),this.typeName=null,this.id=null}};(0,o._)([(0,i.MZ)({type:String,json:{write:!0}})],u.prototype,"typeName",void 0),(0,o._)([(0,i.MZ)({type:String,json:{write:!0}})],u.prototype,"id",void 0),u=(0,o._)([(0,a.$)("esri.rest.knowledgeGraph.GraphNamedObject")],u);const p=u},87831:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(80671),i=r(83375),a=r(57453),s=(r(50886),r(89412),r(76761),r(68682));let u=class extends i.oY{constructor(e){super(e),this.properties=null}};(0,o._)([(0,a.MZ)({json:{write:!0}})],u.prototype,"properties",void 0),u=(0,o._)([(0,s.$)("esri.rest.knowledgeGraph.GraphObject")],u);const p=u},31827:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(80671),i=r(57453),a=(r(50886),r(89412),r(76761),r(68682)),s=r(18763);let u=class extends s.A{constructor(e){super(e),this.openCypherQuery=""}};(0,o._)([(0,i.MZ)()],u.prototype,"openCypherQuery",void 0),u=(0,o._)([(0,a.$)("esri.rest.knowledgeGraph.GraphQuery")],u);const p=u;let c=class extends p{constructor(e){super(e),this.bindParameters=null,this.bindGeometryQuantizationParameters=null,this.outputQuantizationParameters=null,this.outputSpatialReference=null}};(0,o._)([(0,i.MZ)()],c.prototype,"bindParameters",void 0),(0,o._)([(0,i.MZ)()],c.prototype,"bindGeometryQuantizationParameters",void 0),(0,o._)([(0,i.MZ)()],c.prototype,"outputQuantizationParameters",void 0),(0,o._)([(0,i.MZ)()],c.prototype,"outputSpatialReference",void 0),c=(0,o._)([(0,a.$)("esri.rest.knowledgeGraph.GraphQueryStreaming")],c);const d=c},68708:(e,t,r)=>{r.d(t,{A:()=>u});var o=r(80671),i=(r(89412),r(50886),r(76761),r(4180),r(68682)),a=r(87831);let s=class extends a.A{constructor(e){super(e)}};s=(0,o._)([(0,i.$)("esri.rest.knowledgeGraph.ObjectValue")],s);const u=s},13389:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(80671),i=r(83375),a=r(57453),s=(r(50886),r(89412),r(76761),r(68682)),u=r(87831);let p=class extends i.oY{constructor(e){super(e),this.path=null}};(0,o._)([(0,a.MZ)({type:[u.A],json:{write:!0}})],p.prototype,"path",void 0),p=(0,o._)([(0,s.$)("esri.rest.knowledgeGraph.Path")],p);const c=p},83836:(e,t,r)=>{r.d(t,{A:()=>c});var o=r(80671),i=(r(30174),r(57453)),a=(r(50886),r(89412),r(76761),r(68682)),s=r(9248),u=r(60141);let p=class extends s.A{constructor(e){super(e),this.originId=null,this.destinationId=null,this.layoutGeometry=null}};(0,o._)([(0,i.MZ)({type:String,json:{write:!0}})],p.prototype,"originId",void 0),(0,o._)([(0,i.MZ)({type:String,json:{write:!0}})],p.prototype,"destinationId",void 0),(0,o._)([(0,i.MZ)({type:u.A,json:{write:!0}})],p.prototype,"layoutGeometry",void 0),p=(0,o._)([(0,a.$)("esri.rest.Relationship.Relationship")],p);const c=p},28534:(e,t,r)=>{r.d(t,{A:()=>d});var o=r(80671),i=r(83375),a=r(57453),s=(r(50886),r(89412),r(76761),r(68682)),u=r(31670),p=r(78395);let c=class extends i.oY{constructor(e){super(e),this.geometries=[],this.outSpatialReference=null,this.transformation=null,this.transformForward=null}toJSON(){const e=this.geometries.map((e=>e.toJSON())),t=this.geometries[0],r={};return r.outSR=(0,p.YX)(this.outSpatialReference),r.inSR=(0,p.YX)(t.spatialReference),r.geometries=JSON.stringify({geometryType:(0,u.$B)(t),geometries:e}),this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation)),null!=this.transformForward&&(r.transformForward=this.transformForward),r}};(0,o._)([(0,a.MZ)()],c.prototype,"geometries",void 0),(0,o._)([(0,a.MZ)({json:{read:{source:"outSR"}}})],c.prototype,"outSpatialReference",void 0),(0,o._)([(0,a.MZ)()],c.prototype,"transformation",void 0),(0,o._)([(0,a.MZ)()],c.prototype,"transformForward",void 0),c=(0,o._)([(0,s.$)("esri.rest.support.ProjectParameters")],c);const d=c}}]);
//# sourceMappingURL=3699.52558e8f.chunk.js.map