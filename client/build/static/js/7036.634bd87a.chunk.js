"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[7036],{34009:(e,p,v)=>{v.r(p),v.d(p,{default:()=>Re});var g=v(80671),f=v(88706),b=v(39652),w=v(4180),A=v(15461),S=v(13132),j=v(81618),F=v(63390),I=v(25986),O=v(4270),U=v(57453),E=(v(50886),v(89412)),T=(v(76761),v(59299)),Z=v(68682),x=v(78658),R=v(98878),L=v(47478),P=v(53200),D=v(21642),q=v(19459),G=v(16119),V=v(1921),z=v(32465),N=v(68777),$=v(38362),X=v(26905),J=v(26128),Y=v(32277),ee=v(48303),te=v(19894),se=v(57022),ie=v(21365),ne=v(1804),oe=(v(26374),v(2725),v(66178),v(52902),v(55088)),le=v(27150),ae=v(16534),ue=(v(53440),v(16904)),pe=v(66004),de=v(3616),ye=v(2395),ce=v(51715),he=v(2934),ve=v(93158),ge=v(10171),fe=v(48823),be=v(97241),me=v(49096),_e=v(7445),we=v(99442);const Ae={key:"type",base:oe.A,errorContext:"renderer",typeMap:{simple:le.A,"unique-value":ae.A,"class-breaks":ne.A}},Se=(0,te.p)(),je=(0,he.C)({types:Ae});let Fe=0;function k(e){const p=e.json.write;return"object"==typeof p?p.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function _(e){switch(e){case"point":case"multipoint":return we.UK.clone();case"polyline":return we.A7.clone();case"polygon":case"multipatch":return we.Cx.clone();default:return null}}function H(e,p){var v;return null==e?null:null===(v=p.subtypes)||void 0===v?void 0:v.find((p=>p.code===e))}function Q(e,p){let v=null;switch(p.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":v="point";break;case"esriGeometryPolyline":v="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":v="polygon";break;default:p.type,v=null}const g={},f=H(e,p);if(null!=f){const{defaultValues:e}=f;for(const p in e)g[p]=e[p]}return g[p.subtypeField]=e,new ge.A({name:"New Feature",drawingTool:v,prototype:{attributes:g}})}const Me="esri.layers.support.SubtypeSublayer";let Ce=class extends((0,S.P)((0,f.O)((0,ue.sA)(de.A)))){constructor(e){super(e),this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id="".concat(Date.now().toString(16),"-subtype-sublayer-").concat(Fe++),this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.parent=null,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}get capabilities(){var e;return null===(e=this.parent)||void 0===e?void 0:e.capabilities}get effectiveCapabilities(){var e;return null===(e=this.parent)||void 0===e?void 0:e.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){var e;return null===(e=this.parent)||void 0===e?void 0:e.elevationInfo}writeFieldOverrides(e,p,v){var g;const{fields:f,parent:b}=this;let w;if(f){w=[];let e=0;f.forEach((p=>{var v;let{name:g,alias:f,editable:A,visible:S}=p;if(!S)return;const j=null===b||void 0===b||null===(v=b.fields)||void 0===v?void 0:v.find((e=>e.name===g));if(!j)return;const F={name:g};let I=!1;f!==j.alias&&(F.alias=f,I=!0),A!==j.editable&&(F.editable=A,I=!0),w.push(F),I&&e++})),0===e&&w.length===f.length&&(w=null)}else w=(0,pe.o8)(e);(null===(g=w)||void 0===g?void 0:g.length)&&(0,ye.sM)(v,w,p)}get fields(){const{parent:e,fieldOverrides:p,subtypeCode:v}=this,g=null===e||void 0===e?void 0:e.fields;if(!e||null===g||void 0===g||!g.length)return null;const{subtypes:f,subtypeField:b}=e,w=null===f||void 0===f?void 0:f.find((e=>e.code===v)),A=null===w||void 0===w?void 0:w.defaultValues,S=null===w||void 0===w?void 0:w.domains,j=[];for(const O of g){var F,I;const e=O.clone(),{name:g}=e,f=null===p||void 0===p?void 0:p.find((e=>e.name===g));if(e.visible=!p||!!f,f){const{alias:p,editable:v}=f;p&&(e.alias=p),!1===v&&(e.editable=!1)}const w=null!==(F=null===A||void 0===A?void 0:A[g])&&void 0!==F?F:null;e.defaultValue=g===b?v:w;const U=null!==(I=null===S||void 0===S?void 0:S[g])&&void 0!==I?I:null;e.domain=g===b?null:U?"inherited"===U.type?e.domain:U.clone():null,j.push(e)}return j}get floorInfo(){var e;return null===(e=this.parent)||void 0===e?void 0:e.floorInfo}get geometryType(){var e;return null===(e=this.parent)||void 0===e?void 0:e.geometryType}get effectiveScaleRange(){const{minScale:e,maxScale:p}=this;return{minScale:e,maxScale:p}}get objectIdField(){var e;return this.parent||E.A.getLogger(Me).error(W("objectIdField")),null===(e=this.parent)||void 0===e?void 0:e.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,se.yp)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function M(e){return new le.A({symbol:_(e)})}(e.geometryType):null}readRendererFromService(e,p,v){var g,f;if("Table"===p.type)return null;const b=null===(g=p.drawingInfo)||void 0===g?void 0:g.renderer,w=je(b,p,v);let A;const{subtypeCode:S}=this;if(null!=S&&function B(e,p){return!!p&&"unique-value"===(null===e||void 0===e?void 0:e.type)&&"string"==typeof e.field&&e.field.toLowerCase()===p.toLowerCase()&&!e.field2&&!e.field3&&!e.valueExpression}(w,p.subtypeField)){var j;const e=null===(j=w.uniqueValueInfos)||void 0===j?void 0:j.find((e=>{let{value:p}=e;return(p="number"==typeof p?String(p):p)===String(S)}));e&&(A=new le.A({symbol:e.symbol}))}else"simple"!==(null===w||void 0===w?void 0:w.type)||(null===(f=w.visualVariables)||void 0===f?void 0:f.length)||(A=w);return A}readRenderer(e,p,v){var g,f;const b=null===p||void 0===p||null===(g=p.layerDefinition)||void 0===g||null===(g=g.drawingInfo)||void 0===g?void 0:g.renderer;if(!b)return;const w=null===(f=b.visualVariables)||void 0===f?void 0:f.some((e=>"rotationInfo"!==e.type));return w?void 0:je(b,p,v)||void 0}get spatialReference(){var e;return null===(e=this.parent)||void 0===e?void 0:e.spatialReference}get subtypeField(){var e;return null===(e=this.parent)||void 0===e?void 0:e.subtypeField}readTemplatesFromService(e,p){return[Q(this.subtypeCode,p)]}readTitleFromService(e,p){const v=H(this.subtypeCode,p);return null!=v?v.name:null}get url(){var e;return null===(e=this.parent)||void 0===e?void 0:e.url}get userHasUpdateItemPrivileges(){var e;return!(null===(e=this.parent)||void 0===e||!e.userHasUpdateItemPrivileges)}async addAttachment(e,p){const{parent:v}=this;if(!v)throw W("addAttachment");if(e.getAttribute(v.subtypeField)!==this.subtypeCode)throw new w.A("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return v.addAttachment(e,p)}async updateAttachment(e,p,v){const{parent:g}=this;if(!g)throw W("updateAttachment");if(e.getAttribute(g.subtypeField)!==this.subtypeCode)throw new w.A("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return g.updateAttachment(e,p,v)}async deleteAttachments(e,p){const{parent:v}=this;if(!v)throw W("deleteAttachments");if(e.getAttribute(v.subtypeField)!==this.subtypeCode)throw new w.A("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return v.deleteAttachments(e,p)}async applyEdits(e,p){if(!this.parent)throw W("applyEdits");return this.parent.applyEdits(e,p)}createPopupTemplate(e){let p=this;const{parent:v,fields:g,title:f}=this;if(v){const{displayField:e,editFieldsInfo:b,objectIdField:w}=v;p={displayField:e,editFieldsInfo:b,fields:g,objectIdField:w,title:f}}return(0,_e.tn)(p,e)}createQuery(){if(!this.parent)throw W("createQuery");const e=(0,ee.VZ)(this.parent),p="".concat(this.parent.subtypeField,"=").concat(this.subtypeCode);return e.where=(0,I.m)(p,this.parent.definitionExpression),e}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){return this._getLayerDomain(e)}async queryAttachments(e,p){const v=await this.load();if(!v.parent)throw W("queryAttachments");const g=e.clone();return g.where=K(g.where,v.parent.subtypeField,v.subtypeCode),v.parent.queryAttachments(e,p)}async queryFeatures(e,p){var v;const g=await this.load();if(!g.parent)throw W("queryFeatures");const f=null!==(v=me.A.from(e))&&void 0!==v?v:g.createQuery();return null!=e&&(f.where=K(f.where,g.parent.subtypeField,g.subtypeCode)),g.parent.queryFeatures(f,p)}_getLayerDomain(e){const p=this.fieldsIndex.get(e);return p?p.domain:null}};(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"capabilities",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"effectiveCapabilities",null),(0,g._)([(0,U.MZ)({json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"charts",void 0),(0,g._)([(0,U.MZ)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],Ce.prototype,"editingEnabled",void 0),(0,g._)([(0,U.MZ)({type:Boolean,readOnly:!0})],Ce.prototype,"effectiveEditingEnabled",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"elevationInfo",null),(0,g._)([(0,U.MZ)({json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],Ce.prototype,"fieldOverrides",void 0),(0,g._)([(0,ce.K)("fieldOverrides")],Ce.prototype,"writeFieldOverrides",null),(0,g._)([(0,U.MZ)({...Se.fields,readOnly:!0,json:{read:!1}})],Ce.prototype,"fields",null),(0,g._)([(0,U.MZ)(Se.fieldsIndex)],Ce.prototype,"fieldsIndex",void 0),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"floorInfo",null),(0,g._)([(0,U.MZ)({type:ve.A,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],Ce.prototype,"formTemplate",void 0),(0,g._)([(0,U.MZ)({type:String,clonable:!1,readOnly:!0,json:{origins:{service:{read:!1},"portal-item":{read:!1}},write:{ignoreOrigin:!0}}})],Ce.prototype,"id",void 0),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"geometryType",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"type",void 0),(0,g._)([(0,U.MZ)(k((0,pe.o8)(Y.kF)))],Ce.prototype,"labelsVisible",void 0),(0,g._)([(0,U.MZ)({type:[fe.A],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:be.w},write:{ignoreOrigin:!0}}})],Ce.prototype,"labelingInfo",void 0),(0,g._)([(0,U.MZ)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],Ce.prototype,"layerType",void 0),(0,g._)([(0,U.MZ)(k((0,pe.o8)(Y.fV)))],Ce.prototype,"legendEnabled",void 0),(0,g._)([(0,U.MZ)({type:["show","hide"]})],Ce.prototype,"listMode",void 0),(0,g._)([(0,U.MZ)((()=>{const e=(0,pe.o8)(Y.hn);return e.json.origins.service.read=!1,k(e)})())],Ce.prototype,"minScale",void 0),(0,g._)([(0,U.MZ)((()=>{const e=(0,pe.o8)(Y.hG);return e.json.origins.service.read=!1,k(e)})())],Ce.prototype,"maxScale",void 0),(0,g._)([(0,U.MZ)({readOnly:!0})],Ce.prototype,"effectiveScaleRange",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"objectIdField",null),(0,g._)([(0,U.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"opacity",void 0),(0,g._)([(0,U.MZ)({clonable:!1})],Ce.prototype,"parent",void 0),(0,g._)([(0,U.MZ)(k((0,pe.o8)(Y.M6)))],Ce.prototype,"popupEnabled",void 0),(0,g._)([(0,U.MZ)({type:ie.A,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],Ce.prototype,"popupTemplate",void 0),(0,g._)([(0,U.MZ)({readOnly:!0})],Ce.prototype,"defaultPopupTemplate",null),(0,g._)([(0,U.MZ)({types:Ae,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],Ce.prototype,"renderer",null),(0,g._)([(0,T.w)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],Ce.prototype,"readRendererFromService",null),(0,g._)([(0,T.w)("renderer",["layerDefinition.drawingInfo.renderer"])],Ce.prototype,"readRenderer",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"spatialReference",null),(0,g._)([(0,U.MZ)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],Ce.prototype,"subtypeCode",void 0),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"subtypeField",null),(0,g._)([(0,U.MZ)({type:[ge.A],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],Ce.prototype,"templates",void 0),(0,g._)([(0,T.w)("service","templates",["geometryType","subtypeField","subtypes","type"])],Ce.prototype,"readTemplatesFromService",null),(0,g._)([(0,U.MZ)({type:String,json:{write:{ignoreOrigin:!0}}})],Ce.prototype,"title",void 0),(0,g._)([(0,T.w)("service","title",["subtypes"])],Ce.prototype,"readTitleFromService",null),(0,g._)([(0,U.MZ)({readOnly:!0,json:{read:!1}})],Ce.prototype,"url",null),(0,g._)([(0,U.MZ)({readOnly:!0})],Ce.prototype,"userHasUpdateItemPrivileges",null),(0,g._)([(0,U.MZ)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],Ce.prototype,"visible",void 0),Ce=(0,g._)([(0,Z.$)(Me)],Ce);const K=(e,p,v)=>{const g=new RegExp("".concat(p,"\\s*=\\s*\\d+")),f="".concat(p,"=").concat(v),b=null!==e&&void 0!==e?e:"";return g.test(b)?b.replace(g,f):(0,I.m)(f,b)},W=e=>new w.A("This sublayer must have a parent SubtypeGroupLayer in order to use ".concat(e)),Ie=Ce;var Oe=v(94982),Ue=v(13918),Ee=v(96253);const Te="SubtypeGroupLayer";function re(e,p){return new w.A("layer:unsupported","Layer (".concat(e.title,", ").concat(e.id,") of type '").concat(e.declaredClass,"' ").concat(p),{layer:e})}const Ze=(0,te.p)();let xe=class extends((0,G.j)((0,q.w6)((0,P.d)((0,X.e)((0,$.j)((0,N.J)((0,L.b)((0,V.q)((0,z.A)((0,S.P)((0,D.d)((0,R.p)((0,f.O)(x.A)))))))))))))){constructor(){super(...arguments),this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.sublayers=new(b.A.ofType(Ie)),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this._debouncedSaveOperations=(0,j.sg)((async(e,p,g)=>{const{save:f,saveAs:b}=await v.e(6453).then(v.bind(v,56453));switch(e){case Ee.X.SAVE:return f(this,p);case Ee.X.SAVE_AS:return b(this,g,p)}})),this.addHandles((0,F.wB)((()=>this.sublayers),((e,p)=>this._handleSublayersChange(e,p)),F.OH))}destroy(){var e;null===(e=this.source)||void 0===e||e.destroy()}normalizeCtorArgs(e,p){return"string"==typeof e?{url:e,...p}:e}load(e){const p=null!=e?e.signal:null,v=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(j.QP).then((async()=>{if(!this.url)throw new w.A("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==this.layerId)throw new w.A("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return this._initLayerProperties(await this.createGraphicsSource(p))})).then((()=>(0,ee.VA)(this,"load",e)));return this.addResolvingPromise(v),Promise.resolve(this)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!==(e=this._get("createQueryVersion"))&&void 0!==e?e:0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,ee.C$)(this)}get parsedUrl(){const e=(0,O.An)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,O.fj)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,p){let{name:v}=p;return this.url?(0,J.yG)(this.url,v):v}async addAttachment(e,p){return(0,ee.Xl)(this,e,p,Te)}async updateAttachment(e,p,v){return(0,ee.bt)(this,e,p,v,Te)}async applyEdits(e,p){return(0,ee.ct)(this,e,p)}on(e,p){return super.on(e,p)}async createGraphicsSource(e){const{default:p}=await(0,j.qr)(Promise.all([v.e(2050),v.e(4714),v.e(4963),v.e(6542),v.e(734)]).then(v.bind(v,86542)),e);return new p({layer:this}).load({signal:e})}createQuery(){const e=(0,ee.VZ)(this),p=this.sublayers.map((e=>e.subtypeCode));return e.where=(0,I.m)("".concat(this.subtypeField," IN (").concat(p.join(","),")"),this.definitionExpression),e}async deleteAttachments(e,p){return(0,ee.mm)(this,e,p,Te)}async fetchRecomputedExtents(e){return(0,ee.WP)(this,e,Te)}findSublayerForFeature(e){const p=this.fieldsIndex.get(this.subtypeField),v=e.attributes[p.name];return this.findSublayerForSubtypeCode(v)}findSublayerForSubtypeCode(e){return this._sublayerLookup.get(e)}getFieldDomain(e,p){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}loadAll(){return(0,A.g)(this,(e=>{e(this.sublayers)}))}async queryAttachments(e,p){return(0,ee.lV)(this,e,p,Te)}async queryFeatures(e,p){var v,g;const f=await this.load(),b=null!==(v=me.A.from(e))&&void 0!==v?v:f.createQuery(),w=null!==(g=b.outFields)&&void 0!==g?g:[];w.includes(this.subtypeField)||(w.push(this.subtypeField),b.outFields=w);const A=await f.source.queryFeatures(b,p);if(null!==A&&void 0!==A&&A.features)for(const S of A.features)S.layer=S.sourceLayer=this.findSublayerForFeature(S);return A}async queryObjectIds(e,p){return(0,ee.sg)(this,e,p,Te)}async queryFeatureCount(e,p){return(0,ee.Ye)(this,e,p,Te)}async queryExtent(e,p){return(0,ee.B5)(this,e,p,Te)}async queryRelatedFeatures(e,p){return(0,ee.hM)(this,e,p,Te)}async queryRelatedFeaturesCount(e,p){return(0,ee.S2)(this,e,p,Te)}async save(e){return this._debouncedSaveOperations(Ee.X.SAVE,e)}async saveAs(e,p){return this._debouncedSaveOperations(Ee.X.SAVE_AS,p,e)}write(e,p){var v;const{origin:g,layerContainerType:f,messages:b}=p;if(this.isTable){if("web-scene"===g||"web-map"===g&&"tables"!==f)return null!==b&&void 0!==b&&b.push(re(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===g&&"tables"===f)return null!==b&&void 0!==b&&b.push(re(this,"using a non-table source cannot be written to tables in web maps")),null;return null!==(v=this.sublayers)&&void 0!==v&&v.length?super.write(e,p):(null!==b&&void 0!==b&&b.push(new w.A("web-document-write:invalid-property","Layer (".concat(this.title,", ").concat(this.id,") of type '").concat(this.declaredClass,"' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer"),{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Ue.D)(this,e)}_getLayerDomain(e){const p=this.fieldsIndex.get(e);return p?p.domain:null}async _initLayerProperties(e){var p;this._set("source",e);const{sourceJSON:v}=e;if(v&&(this.sourceJSON=v,this.read(v,{origin:"service",url:this.parsedUrl})),this.isTable)throw new w.A("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");if(null===(p=this.subtypes)||void 0===p||!p.length)throw new w.A("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");this._verifyFields(),(0,se.sv)(this.timeInfo,this.fieldsIndex)}async hasDataChanged(){return(0,ee.jp)(this)}_verifyFields(){var e,p,v;const g=null!==(e=null===(p=this.parsedUrl)||void 0===p?void 0:p.path)&&void 0!==e?e:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+g+")"),this.isTable||-1!==g.search(/\/FeatureServer\//i)||(null===(v=this.fields)||void 0===v?void 0:v.some((e=>"geometry"===e.type)))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+g+")")}_handleSublayersChange(e,p){p&&(p.forEach((e=>{e.parent=null})),this.removeHandles("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach((e=>{e.parent=this,this._sublayerLookup.set(e.subtypeCode,e)})),this.addHandles([e.on("after-add",(e=>{let{item:p}=e;p.parent=this,this._sublayerLookup.set(p.subtypeCode,p)})),e.on("after-remove",(e=>{let{item:p}=e;p.parent=null,this._sublayerLookup.delete(p.subtypeCode)}))],"sublayers-owner"))}};(0,g._)([(0,U.MZ)({readOnly:!0})],xe.prototype,"createQueryVersion",null),(0,g._)([(0,U.MZ)({readOnly:!0})],xe.prototype,"editingEnabled",null),(0,g._)([(0,U.MZ)({readOnly:!0})],xe.prototype,"effectiveEditingEnabled",null),(0,g._)([(0,U.MZ)({...Ze.fields,readOnly:!0,json:{origins:{service:{read:!0}},read:!1}})],xe.prototype,"fields",void 0),(0,g._)([(0,U.MZ)(Ze.fieldsIndex)],xe.prototype,"fieldsIndex",void 0),(0,g._)([(0,U.MZ)(Y.id)],xe.prototype,"id",void 0),(0,g._)([(0,U.MZ)({type:["show","hide","hide-children"],json:{origins:{"portal-item":{read:!1,write:!1}}}})],xe.prototype,"listMode",void 0),(0,g._)([(0,U.MZ)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"],json:{origins:{"portal-item":{name:"layerType",write:{enabled:!0,ignoreOrigin:!0}}}}})],xe.prototype,"operationalLayerType",void 0),(0,g._)([(0,U.MZ)(Ze.outFields)],xe.prototype,"outFields",void 0),(0,g._)([(0,U.MZ)({readOnly:!0})],xe.prototype,"parsedUrl",null),(0,g._)([(0,U.MZ)({clonable:!1})],xe.prototype,"source",null),(0,g._)([(0,U.MZ)({type:b.A.ofType(Ie),json:{origins:{service:{read:{source:"subtypes",reader:(e,p,v)=>{const g=e.map((e=>{let{code:g}=e;const f=new Ie({subtypeCode:g});return f.read(p,v),f}));return new(b.A.ofType(Ie))(g)}}}},name:"layers",write:{ignoreOrigin:!0}}})],xe.prototype,"sublayers",void 0),(0,g._)([(0,U.MZ)({type:Oe.A})],xe.prototype,"timeInfo",void 0),(0,g._)([(0,U.MZ)({json:{origins:{"portal-item":{write:{enabled:!0,ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],xe.prototype,"title",void 0),(0,g._)([(0,T.w)("service","title",["name"])],xe.prototype,"readTitleFromService",null),(0,g._)([(0,U.MZ)({json:{read:!1}})],xe.prototype,"type",void 0),xe=(0,g._)([(0,Z.$)("esri.layers.SubtypeGroupLayer")],xe);const Re=xe},98878:(e,p,v)=>{v.d(p,{p:()=>i});var g=v(80671),f=v(57453),b=(v(50886),v(89412),v(76761),v(68682));const i=e=>{let p=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function s(e){return"portalItem"in e}(this)?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,g._)([(0,f.MZ)({type:String})],p.prototype,"apiKey",null),p=(0,g._)([(0,b.$)("esri.layers.mixins.APIKeyMixin")],p),p}},47478:(e,p,v)=>{v.d(p,{b:()=>l});var g=v(80671),f=v(89412),b=v(57453),w=(v(50886),v(76761),v(68682)),A=v(26128);const l=e=>{let p=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,A.qg)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,A.Jf)(e,f.A.getLogger(this)))}};return(0,g._)([(0,b.MZ)()],p.prototype,"title",null),(0,g._)([(0,b.MZ)({type:String})],p.prototype,"url",null),p=(0,g._)([(0,w.$)("esri.layers.mixins.ArcGISService")],p),p}},218:(e,p,v)=>{v.d(p,{A:()=>F});var g,f=v(80671),b=v(39652),w=v(83375),A=v(57453),S=(v(50886),v(89412),v(76761),v(68682));let j=g=class extends w.oY{constructor(e){super(e),this.floorField=null,this.viewAllMode=!1,this.viewAllLevelIds=new b.A}clone(){return new g({floorField:this.floorField,viewAllMode:this.viewAllMode,viewAllLevelIds:this.viewAllLevelIds})}};(0,f._)([(0,A.MZ)({type:String,json:{write:!0}})],j.prototype,"floorField",void 0),(0,f._)([(0,A.MZ)({json:{read:!1,write:!1}})],j.prototype,"viewAllMode",void 0),(0,f._)([(0,A.MZ)({json:{read:!1,write:!1}})],j.prototype,"viewAllLevelIds",void 0),j=g=(0,f._)([(0,S.$)("esri.layers.support.LayerFloorInfo")],j);const F=j},26487:(e,p,v)=>{v.d(p,{S:()=>a});var g=v(50886),f=v(26128);function jsonUtils_n(e,p,v){return!!t(e,p,v)}function r(e,p,v){return t(e,p,v)}function t(e,p,v){return e&&e.hasOwnProperty(p)?e[p]:v}const b={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function o(e){var p;const v=null===e||void 0===e||null===(p=e.supportedSpatialAggregationStatistics)||void 0===p?void 0:p.map((e=>e.toLowerCase()));return{envelope:!(null===v||void 0===v||!v.includes("envelopeaggregate")),centroid:!(null===v||void 0===v||!v.includes("centroidaggregate")),convexHull:!(null===v||void 0===v||!v.includes("convexhullaggregate"))}}function u(e,p){var v;const g=null===e||void 0===e||null===(v=e.supportedOperationsWithCacheHint)||void 0===v?void 0:v.map((e=>e.toLowerCase()));return!(null===g||void 0===g||!g.includes(p.toLowerCase()))}function a(e,p){return{analytics:n(e),attachment:i(e),data:c(e),metadata:d(e),operations:l(e.capabilities,e,p),query:y(e,p),queryRelated:m(e),queryTopFeatures:C(e),editing:h(e)}}function n(e){return{supportsCacheHint:u(e.advancedQueryCapabilities,"queryAnalytics")}}function i(e){const p=e.attachmentProperties,v={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:u(e.advancedQueryCapabilities,"queryAttachments"),supportsResize:jsonUtils_n(e,"supportsAttachmentsResizing",!1)};return p&&Array.isArray(p)&&p.forEach((e=>{const p=b[e.name];p&&(v[p]=!!e.isEnabled)})),v}function c(e){return{isVersioned:jsonUtils_n(e,"isDataVersioned",!1),supportsAttachment:jsonUtils_n(e,"hasAttachments",!1),supportsM:jsonUtils_n(e,"hasM",!1),supportsZ:jsonUtils_n(e,"hasZ",!1)}}function d(e){return{supportsAdvancedFieldProperties:jsonUtils_n(e,"supportsFieldDescriptionProperty",!1)}}function l(e,p,v){const g=e?e.toLowerCase().split(",").map((e=>e.trim())):[],b=v?(0,f.qg)(v):null,w=g.includes(null!=b&&"MapServer"===b.serverType?"data":"query"),A=g.includes("editing")&&!p.datesInUnknownTimezone;let S=A&&g.includes("create"),j=A&&g.includes("delete"),F=A&&g.includes("update");const I=g.includes("changetracking"),O=p.advancedQueryCapabilities;return A&&!(S||j||F)&&(S=j=F=!0),{supportsCalculate:jsonUtils_n(p,"supportsCalculate",!1),supportsTruncate:jsonUtils_n(p,"supportsTruncate",!1),supportsValidateSql:jsonUtils_n(p,"supportsValidateSql",!1),supportsAdd:S,supportsDelete:j,supportsEditing:A,supportsChangeTracking:I,supportsQuery:w,supportsQueryAnalytics:jsonUtils_n(O,"supportsQueryAnalytic",!1),supportsQueryAttachments:jsonUtils_n(O,"supportsQueryAttachments",!1),supportsQueryTopFeatures:jsonUtils_n(O,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:jsonUtils_n(p,"supportsAttachmentsResizing",!1),supportsSync:g.includes("sync"),supportsUpdate:F,supportsExceedsLimitStatistics:jsonUtils_n(p,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:jsonUtils_n(p,"supportsAsyncConvert3D",!1)}}function y(e,p){var v;const b=e.advancedQueryCapabilities,w=e.ownershipBasedAccessControlForFeatures,A=e.archivingInfo,S=e.currentVersion,j=!(null===p||void 0===p?void 0:p.includes("MapServer"))||S>=(0,g.A)("mapserver-pbf-version-support"),F=(0,f.Wo)(p),I=new Set((null!==(v=e.supportedQueryFormats)&&void 0!==v?v:"").split(",").map((e=>e.toLowerCase().trim())));return{supportsStatistics:jsonUtils_n(b,"supportsStatistics",e.supportsStatistics),supportsPercentileStatistics:jsonUtils_n(b,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:jsonUtils_n(b,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:o(b),supportsCentroid:jsonUtils_n(b,"supportsReturningGeometryCentroid",!1),supportsDistance:jsonUtils_n(b,"supportsQueryWithDistance",!1),supportsDistinct:jsonUtils_n(b,"supportsDistinct",e.supportsAdvancedQueries),supportsExtent:jsonUtils_n(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:jsonUtils_n(b,"supportsReturningGeometryProperties",!1),supportsHavingClause:jsonUtils_n(b,"supportsHavingClause",!1),supportsOrderBy:jsonUtils_n(b,"supportsOrderBy",e.supportsAdvancedQueries),supportsPagination:jsonUtils_n(b,"supportsPagination",!1),supportsQuantization:jsonUtils_n(e,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:jsonUtils_n(e,"supportsQuantizationEditMode",!1),supportsQueryGeometry:jsonUtils_n(e,"supportsReturningQueryGeometry",!1),supportsResultType:jsonUtils_n(b,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:jsonUtils_n(b,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:jsonUtils_n(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:jsonUtils_n(e,"useStandardizedQueries",!1),supportsTopFeaturesQuery:jsonUtils_n(b,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:jsonUtils_n(w,"allowAnonymousToQuery",!0),supportsQueryByOthers:jsonUtils_n(w,"allowOthersToQuery",!0),supportsHistoricMoment:jsonUtils_n(A,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:j&&I.has("pbf"),supportsDisjointSpatialRelationship:jsonUtils_n(b,"supportsDisjointSpatialRel",!1),supportsCacheHint:jsonUtils_n(b,"supportsQueryWithCacheHint",!1)||u(b,"query"),supportsDefaultSpatialReference:jsonUtils_n(b,"supportsDefaultSR",!1),supportsCompactGeometry:F,supportsFullTextSearch:jsonUtils_n(b,"supportsFullTextSearch",!1),maxRecordCountFactor:r(e,"maxRecordCountFactor",void 0),maxRecordCount:r(e,"maxRecordCount",void 0),standardMaxRecordCount:r(e,"standardMaxRecordCount",void 0),tileMaxRecordCount:r(e,"tileMaxRecordCount",void 0)}}function m(e){const p=e.advancedQueryCapabilities,v=jsonUtils_n(p,"supportsAdvancedQueryRelated",!1);return{supportsPagination:jsonUtils_n(p,"supportsQueryRelatedPagination",!1),supportsCount:v,supportsOrderBy:v,supportsCacheHint:u(p,"queryRelated")}}function C(e){return{supportsCacheHint:u(e.advancedQueryCapabilities,"queryTopFilter")}}function h(e){const p=e.ownershipBasedAccessControlForFeatures,v=e?e.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:jsonUtils_n(e,"allowGeometryUpdates",!0),supportsGlobalId:jsonUtils_n(e,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:jsonUtils_n(e,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:jsonUtils_n(e,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:jsonUtils_n(e,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:jsonUtils_n(e,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:jsonUtils_n(p,"allowAnonymousToDelete",!0),supportsDeleteByOthers:jsonUtils_n(p,"allowOthersToDelete",!0),supportsUpdateByAnonymous:jsonUtils_n(p,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:jsonUtils_n(p,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:jsonUtils_n(v,"supportsAsyncApplyEdits",!1),zDefault:r(e,"zDefault",void 0)}}}}]);
//# sourceMappingURL=7036.634bd87a.chunk.js.map