"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[2088],{2744:(e,r,o)=>{o.d(r,{v:()=>i});var s=o(37531);function i(e){(null===e||void 0===e?void 0:e.writtenProperties)&&e.writtenProperties.forEach((e=>{let{target:r,propName:o,newOrigin:n}=e;(0,s.H)(r)&&n&&r.originOf(o)!==n&&r.updateOrigin(o,n)}))}},37531:(e,r,o)=>{function i(e){return e&&"getAtOrigin"in e&&"originOf"in e}o.d(r,{H:()=>i})},62088:(e,r,o)=>{o.r(r),o.d(r,{default:()=>Nt});var s=o(80671),n=o(61272),l=o(30174),a=o(13812),u=o(21365),p=(o(1804),o(26374),o(2725),o(66178),o(52902),o(55088),o(27150),o(16534),o(53440)),c=o(89412),m=o(39652),f=o(4180),h=o(13132),g=o(2395),_=o(81618),S=o(63390),A=o(49049),M=o(4270),b=o(57453),T=(o(50886),o(76761),o(59299)),B=o(68682),N=o(51715),P=o(2744),O=o(84661),I=o(54208),j=o(78395),D=o(78658),E=o(53200),x=o(1921),F=o(32465),G=o(38362),W=o(26128),q=o(21343),V=o(83375),re=o(65844);let oe=class extends V.oY{constructor(e){super(e),this.break=new re.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new re.A({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new re.A({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new re.A({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new re.A({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new re.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"break",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"first",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"unlocated",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"last",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"middle",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],oe.prototype,"waypoint",void 0),oe=(0,s._)([(0,B.$)("esri.layers.support.RouteStopSymbols")],oe);const ie=oe;var se=o(40943),ne=o(6835);let le=class extends V.oY{constructor(e){super(e),this.directionLines=new se.A({color:[0,122,194],width:6}),this.directionPoints=new re.A({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new re.A({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new ne.A({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new se.A({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new se.A({width:8,color:[20,89,127]}),this.stops=new ie}};(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"directionLines",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"directionPoints",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"pointBarriers",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"polygonBarriers",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"polylineBarriers",void 0),(0,s._)([(0,b.MZ)({types:q.Es})],le.prototype,"routeInfo",void 0),(0,s._)([(0,b.MZ)({type:ie})],le.prototype,"stops",void 0),le=(0,s._)([(0,B.$)("esri.layers.support.RouteSymbols")],le);const ae=le;var pe=o(91710),de=o(35799),ce=o(67177),ye=o(53705),ve=o(95530),me=o(99825),fe=o(62599);let he=class extends V.oY{constructor(e){super(e),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,s._)([(0,b.MZ)({type:String})],he.prototype,"dataType",void 0),(0,s._)([(0,me.e)(fe.et,{ignoreUnknown:!1})],he.prototype,"name",void 0),(0,s._)([(0,b.MZ)({type:[String]})],he.prototype,"parameterNames",void 0),(0,s._)([(0,b.MZ)({type:String})],he.prototype,"restrictionUsageParameterName",void 0),(0,s._)([(0,me.e)(fe.Mm,{ignoreUnknown:!1})],he.prototype,"timeNeutralAttributeName",void 0),(0,s._)([(0,b.MZ)({type:String})],he.prototype,"trafficSupport",void 0),(0,s._)([(0,me.e)(fe.dn)],he.prototype,"units",void 0),(0,s._)([(0,me.e)(fe.WU)],he.prototype,"usageType",void 0),he=(0,s._)([(0,B.$)("esri.rest.support.NetworkAttribute")],he);const we=he;let ge=class extends V.oY{constructor(e){super(e),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,s._)([(0,b.MZ)({type:Number})],ge.prototype,"buildTime",void 0),(0,s._)([(0,b.MZ)({type:String})],ge.prototype,"name",void 0),(0,s._)([(0,b.MZ)({type:[we]})],ge.prototype,"networkAttributes",void 0),(0,s._)([(0,b.MZ)()],ge.prototype,"networkSources",void 0),(0,s._)([(0,b.MZ)({type:String})],ge.prototype,"state",void 0),ge=(0,s._)([(0,B.$)("esri.rest.support.NetworkDataset")],ge);const _e=ge;var Se=o(59160);let Ae=class extends V.oY{constructor(e){super(e),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(e){return null==e?null:e.map((e=>fe.et.fromJSON(e)))}writeAccumulateAttributes(e,r,o){(null===e||void 0===e?void 0:e.length)&&(r[o]=e.map((e=>fe.et.toJSON(e))))}get capabilities(){var e;return{supportsNow:(null!==(e=this.currentVersion)&&void 0!==e?e:10)>=10.81}}readDefaultTravelMode(e,r){var o,s,n;const l=null!==(o=null===(s=r.supportedTravelModes)||void 0===s?void 0:s.find((e=>{let{id:o}=e;return o===r.defaultTravelMode})))&&void 0!==o?o:null===(n=r.supportedTravelModes)||void 0===n?void 0:n.find((e=>{let{itemId:o}=e;return o===r.defaultTravelMode}));return l?Se.A.fromJSON(l):null}};(0,s._)([(0,b.MZ)()],Ae.prototype,"accumulateAttributeNames",void 0),(0,s._)([(0,T.w)("accumulateAttributeNames")],Ae.prototype,"readAccumulateAttributes",null),(0,s._)([(0,N.K)("accumulateAttributeNames")],Ae.prototype,"writeAccumulateAttributes",null),(0,s._)([(0,b.MZ)()],Ae.prototype,"attributeParameterValues",void 0),(0,s._)([(0,b.MZ)()],Ae.prototype,"capabilities",null),(0,s._)([(0,b.MZ)()],Ae.prototype,"currentVersion",void 0),(0,s._)([(0,b.MZ)()],Ae.prototype,"defaultTravelMode",void 0),(0,s._)([(0,T.w)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],Ae.prototype,"readDefaultTravelMode",null),(0,s._)([(0,b.MZ)()],Ae.prototype,"directionsLanguage",void 0),(0,s._)([(0,me.e)(fe.Z7)],Ae.prototype,"directionsLengthUnits",void 0),(0,s._)([(0,b.MZ)()],Ae.prototype,"directionsSupportedLanguages",void 0),(0,s._)([(0,me.e)(fe.Mm,{ignoreUnknown:!1})],Ae.prototype,"directionsTimeAttribute",void 0),(0,s._)([(0,b.MZ)()],Ae.prototype,"hasZ",void 0),(0,s._)([(0,me.e)(fe.et,{ignoreUnknown:!1})],Ae.prototype,"impedance",void 0),(0,s._)([(0,b.MZ)({type:_e})],Ae.prototype,"networkDataset",void 0),(0,s._)([(0,b.MZ)({type:[Se.A]})],Ae.prototype,"supportedTravelModes",void 0),Ae=(0,s._)([(0,B.$)("esri.rest.support.NetworkServiceDescription")],Ae);const Me=Ae,networkService_l=()=>c.A.getLogger("esri.rest.networkService");function networkService_u(e,r,o,s){s[o]=[r.length,r.length+e.length],e.forEach((e=>{r.push(e.geometry)}))}async function networkService_d(e,r,o){if(!e)throw new f.A("network-service:missing-url","Url to Network service is missing");const s=(0,ve.jV)({f:"json",token:r},o),{data:n}=await(0,ye.A)(e,s),l=n.currentVersion>=10.4?async function networkService_p(e,r,o){try{const s=(0,ve.jV)({f:"json",token:r},o),n=(0,M.UC)(e)+"/retrieveTravelModes",{data:{supportedTravelModes:l,defaultTravelMode:a}}=await(0,ye.A)(n,s);return{supportedTravelModes:l,defaultTravelMode:a}}catch(_e){throw new f.A("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:_e})}}(e,r,o):async function v(e,r){var o;const s=(0,ve.jV)({f:"json"},r),{data:n}=await(0,ye.A)(e.replace(/\/rest\/.*$/i,"/info"),s);if(null===n||void 0===n||!n.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:l}=n,a=(0,M.UC)(l)+"/sharing/rest/portals/self",{data:u}=await(0,ye.A)(a,s),p=(0,g.wc)("helperServices.routingUtilities.url",u);if(!p)return{supportedTravelModes:[],defaultTravelMode:null};const c=(0,ve.Dl)(l),m=/\/solve$/i.test(c.path)?"Route":/\/solveclosestfacility$/i.test(c.path)?"ClosestFacility":"ServiceAreas",f=(0,ve.jV)({f:"json",serviceName:m},r),h=(0,M.UC)(p)+"/GetTravelModes/execute",_=await(0,ye.A)(h,f),S=[];let A=null;if(null!==_&&void 0!==_&&null!==(o=_.data)&&void 0!==o&&null!==(o=o.results)&&void 0!==o&&o.length){const e=_.data.results;for(const r of e)if("supportedTravelModes"===r.paramName){var b;if(null!==(b=r.value)&&void 0!==b&&b.features)for(const{attributes:e}of r.value.features)if(e){const r=JSON.parse(e.TravelMode);S.push(r)}}else"defaultTravelMode"===r.paramName&&(A=r.value)}return{supportedTravelModes:S,defaultTravelMode:A}}(e,o),{defaultTravelMode:a,supportedTravelModes:u}=await l;return n.defaultTravelMode=a,n.supportedTravelModes=u,Me.fromJSON(n)}var be=o(13295),Te=o(30172),Be=o(3764),Ze=o(94309),Ne=o(16842),Re=o(40530);const Pe=new Re.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let Oe=class extends V.oY{constructor(e){super(e),this.description=null,this.type=null}};(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],Oe.prototype,"description",void 0),(0,s._)([(0,b.MZ)({type:String,json:{read:Pe.read,write:Pe.write}})],Oe.prototype,"type",void 0),Oe=(0,s._)([(0,B.$)("esri.rest.support.GPMessage")],Oe);const Ie=Oe,Le=new Re.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let je=class extends Ie{constructor(e){super(e),this.type=null}};(0,s._)([(0,b.MZ)({type:String,json:{read:Le.read,write:Le.write}})],je.prototype,"type",void 0),je=(0,s._)([(0,B.$)("esri.rest.support.NAMessage")],je);const De=je;let ke=class extends V.oY{constructor(e){super(e)}};(0,s._)([(0,b.MZ)({json:{read:{source:"string"}}})],ke.prototype,"text",void 0),(0,s._)([(0,me.e)(fe.Ec,{name:"stringType"})],ke.prototype,"type",void 0),ke=(0,s._)([(0,B.$)("esri.rest.support.DirectionsString")],ke);const Ce=ke;var Je=o(57264);let Ee=class extends V.oY{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,r){return(0,Be.Zn)(r.ETA,r.arriveTimeUTC)}readGeometry(e,r){return Je.A.fromJSON(r.point)}};(0,s._)([(0,b.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],Ee.prototype,"arriveTime",void 0),(0,s._)([(0,b.MZ)()],Ee.prototype,"arriveTimeOffset",void 0),(0,s._)([(0,T.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],Ee.prototype,"readArriveTimeOffset",null),(0,s._)([(0,b.MZ)({type:Je.A})],Ee.prototype,"geometry",void 0),(0,s._)([(0,T.w)("geometry",["point"])],Ee.prototype,"readGeometry",null),(0,s._)([(0,b.MZ)({type:[Ce]})],Ee.prototype,"strings",void 0),Ee=(0,s._)([(0,B.$)("esri.rest.support.DirectionsEvent")],Ee);const xe=Ee;var Fe=o(60141);let Ue=class extends a.A{constructor(e){super(e),this.events=null,this.strings=null}readGeometry(e,r){const o=function DirectionsFeature_c(e){if(null==e||""===e)return null;let r=0,o=0,s=0,n=0;const l=[];let a,u,p,c,m,f,h,g,_=0,S=0,A=0;if(m=e.match(/((\+|\-)[^\+\-\|]+|\|)/g),m||(m=[]),0===parseInt(m[_],32)){_=2;const e=parseInt(m[_],32);_++,f=parseInt(m[_],32),_++,1&e&&(S=m.indexOf("|")+1,h=parseInt(m[S],32),S++),2&e&&(A=m.indexOf("|",S)+1,g=parseInt(m[A],32),A++)}else f=parseInt(m[_],32),_++;for(;_<m.length&&"|"!==m[_];){a=parseInt(m[_],32)+r,_++,r=a,u=parseInt(m[_],32)+o,_++,o=u;const e=[a/f,u/f];S&&(c=parseInt(m[S],32)+s,S++,s=c,e.push(c/h)),A&&(p=parseInt(m[A],32)+n,A++,n=p,e.push(p/g)),l.push(e)}return{paths:[l],hasZ:S>0,hasM:A>0}}(r.compressedGeometry);return null!=o?Fe.A.fromJSON(o):null}};(0,s._)([(0,b.MZ)({type:[xe]})],Ue.prototype,"events",void 0),(0,s._)([(0,T.w)("geometry",["compressedGeometry"])],Ue.prototype,"readGeometry",null),(0,s._)([(0,b.MZ)({type:[Ce]})],Ue.prototype,"strings",void 0),Ue=(0,s._)([(0,B.$)("esri.rest.support.DirectionsFeature")],Ue);const Ge=Ue;var $e=o(98664);let Ke=class extends Ze.A{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,r){var o;if(!e)return[];const s=null!==(o=r.summary.envelope.spatialReference)&&void 0!==o?o:r.spatialReference,n=s&&$e.A.fromJSON(s);return e.map((e=>{const r=Ge.fromJSON(e);if(null!=r.geometry&&(r.geometry.spatialReference=n),null!=r.events)for(const o of r.events)null!=o.geometry&&(o.geometry.spatialReference=n);return r}))}get mergedGeometry(){return this.features?function DirectionsFeatureSet_m(e,r){if(0===e.length)return new Fe.A({spatialReference:r});const o=[];for(const a of e)for(const e of a.paths)o.push(...e);const s=[];o.forEach(((e,r)=>{0!==r&&e[0]===o[r-1][0]&&e[1]===o[r-1][1]||s.push(e)}));const{hasM:n,hasZ:l}=e[0];return new Fe.A({hasM:n,hasZ:l,paths:[s],spatialReference:r})}(this.features.map((e=>{let{geometry:r}=e;return r})),this.extent.spatialReference):null}get strings(){return this.features.flatMap((e=>{let{strings:r}=e;return r})).filter(Ne.Ru)}};(0,s._)([(0,b.MZ)({type:O.A,json:{read:{source:"summary.envelope"}}})],Ke.prototype,"extent",void 0),(0,s._)([(0,b.MZ)({nonNullable:!0})],Ke.prototype,"features",void 0),(0,s._)([(0,T.w)("features")],Ke.prototype,"readFeatures",null),(0,s._)([(0,b.MZ)()],Ke.prototype,"geometryType",void 0),(0,s._)([(0,b.MZ)({readOnly:!0})],Ke.prototype,"mergedGeometry",null),(0,s._)([(0,b.MZ)()],Ke.prototype,"routeId",void 0),(0,s._)([(0,b.MZ)()],Ke.prototype,"routeName",void 0),(0,s._)([(0,b.MZ)({value:null,readOnly:!0})],Ke.prototype,"strings",null),(0,s._)([(0,b.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],Ke.prototype,"totalDriveTime",void 0),(0,s._)([(0,b.MZ)({json:{read:{source:"summary.totalLength"}}})],Ke.prototype,"totalLength",void 0),(0,s._)([(0,b.MZ)({json:{read:{source:"summary.totalTime"}}})],Ke.prototype,"totalTime",void 0),Ke=(0,s._)([(0,B.$)("esri.rest.support.DirectionsFeatureSet")],Ke);const We=Ke;let qe=class extends V.oY{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,s._)([(0,b.MZ)({type:Ze.A,json:{write:!0}})],qe.prototype,"directionLines",void 0),(0,s._)([(0,b.MZ)({type:Ze.A,json:{write:!0}})],qe.prototype,"directionPoints",void 0),(0,s._)([(0,b.MZ)({type:We,json:{write:!0}})],qe.prototype,"directions",void 0),(0,s._)([(0,b.MZ)({type:a.A,json:{write:!0}})],qe.prototype,"route",void 0),(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],qe.prototype,"routeName",void 0),(0,s._)([(0,b.MZ)({type:[a.A],json:{write:!0}})],qe.prototype,"stops",void 0),(0,s._)([(0,b.MZ)({type:Ze.A,json:{write:!0}})],qe.prototype,"traversedEdges",void 0),(0,s._)([(0,b.MZ)({type:Ze.A,json:{write:!0}})],qe.prototype,"traversedJunctions",void 0),(0,s._)([(0,b.MZ)({type:Ze.A,json:{write:!0}})],qe.prototype,"traversedTurns",void 0),qe=(0,s._)([(0,B.$)("esri.rest.support.RouteResult")],qe);const Ve=qe;function RouteSolveResult_u(e){return e?Ze.A.fromJSON(e).features.filter(Ne.Ru):[]}let ze=class extends V.oY{constructor(e){super(e),this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,r){return RouteSolveResult_u(r.barriers)}readPolylineBarriers(e){return RouteSolveResult_u(e)}readPolygonBarriers(e){return RouteSolveResult_u(e)}};(0,s._)([(0,b.MZ)({type:[De]})],ze.prototype,"messages",void 0),(0,s._)([(0,b.MZ)({type:[a.A]})],ze.prototype,"pointBarriers",void 0),(0,s._)([(0,T.w)("pointBarriers",["barriers"])],ze.prototype,"readPointBarriers",null),(0,s._)([(0,b.MZ)({type:[a.A]})],ze.prototype,"polylineBarriers",void 0),(0,s._)([(0,T.w)("polylineBarriers")],ze.prototype,"readPolylineBarriers",null),(0,s._)([(0,b.MZ)({type:[a.A]})],ze.prototype,"polygonBarriers",void 0),(0,s._)([(0,T.w)("polygonBarriers")],ze.prototype,"readPolygonBarriers",null),(0,s._)([(0,b.MZ)({type:[Ve]})],ze.prototype,"routeResults",void 0),ze=(0,s._)([(0,B.$)("esri.rest.support.RouteSolveResult")],ze);const Ye=ze;function route_c(e){return e instanceof Ze.A}async function route_l(e,r,o){const s=[],n=[],l={},a={},u=(0,ve.Dl)(e),{path:p}=u;route_c(r.stops)&&networkService_u(r.stops.features,n,"stops.features",l),route_c(r.pointBarriers)&&networkService_u(r.pointBarriers.features,n,"pointBarriers.features",l),route_c(r.polylineBarriers)&&networkService_u(r.polylineBarriers.features,n,"polylineBarriers.features",l),route_c(r.polygonBarriers)&&networkService_u(r.polygonBarriers.features,n,"polygonBarriers.features",l);const c=await(0,Te.el)(n);for(const g in l){const e=l[g];s.push(g),a[g]=c.slice(e[0],e[1])}if(function networkService_c(e,r){for(let o=0;o<r.length;o++){const s=e[r[o]];if(s&&s.length)for(const e of s)if(null!=e&&e.hasZ)return!0}return!1}(a,s)){let e=null;try{e=await networkService_d(p,r.apiKey,o)}catch{}e&&!e.hasZ&&function networkService_f(e,r){for(let o=0;o<r.length;o++){const s=e[r[o]];if(s&&s.length)for(const e of s)e.z=void 0}networkService_l().warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}(a,s)}for(const g in a)a[g].forEach(((e,o)=>{(0,be.Jt)(r,g)[o].geometry=e}));const m={...o,query:{...u.query,...(0,Be.r9)(r),f:"json"}},f=p.endsWith("/solve")?p:"".concat(p,"/solve"),{data:h}=await(0,ye.A)(f,m);return function route_m(e){var r;const{barriers:o,directionLines:s,directionPoints:n,directions:l,messages:a,polygonBarriers:u,polylineBarriers:p,routes:c,stops:m,traversedEdges:f,traversedJunctions:h,traversedTurns:g}=e,y=e=>{const r=_.find((r=>r.routeName===e));if(null!=r)return r;const o={routeId:_.length+1,routeName:e};return _.push(o),o},d=e=>{const r=_.find((r=>r.routeId===e));if(null!=r)return r;const o={routeId:e,routeName:null};return _.push(o),o},_=[];null!==c&&void 0!==c&&c.features.forEach(((e,r)=>{var o;e.geometry.spatialReference=null!==(o=c.spatialReference)&&void 0!==o?o:void 0;const s=e.attributes.Name,n=r+1;_.push({routeId:n,routeName:s,route:e})})),null===l||void 0===l||l.forEach((e=>{const{routeName:r}=e;y(r).directions=e}));const S=null!==(r=null===m||void 0===m?void 0:m.features.every((e=>null==e.attributes.RouteName)))&&void 0!==r&&r&&_.length>0?_[0].routeName:null;return null!==m&&void 0!==m&&m.features.forEach((e=>{var r,o,s,n;e.geometry&&(null!==(o=(r=e.geometry).spatialReference)&&void 0!==o||(r.spatialReference=null!==(s=m.spatialReference)&&void 0!==s?s:void 0));const l=null!==S&&void 0!==S?S:e.attributes.RouteName,a=y(l);null!==(n=a.stops)&&void 0!==n||(a.stops=[]),a.stops.push(e)})),null!==s&&void 0!==s&&s.features.forEach((e=>{var r;const o=e.attributes.RouteID,n=d(o),{geometryType:l,spatialReference:a}=s;null!==(r=n.directionLines)&&void 0!==r||(n.directionLines={features:[],geometryType:l,spatialReference:a}),n.directionLines.features.push(e)})),null!==n&&void 0!==n&&n.features.forEach((e=>{var r;const o=e.attributes.RouteID,s=d(o),{geometryType:l,spatialReference:a}=n;null!==(r=s.directionPoints)&&void 0!==r||(s.directionPoints={features:[],geometryType:l,spatialReference:a}),s.directionPoints.features.push(e)})),null!==f&&void 0!==f&&f.features.forEach((e=>{var r;const o=e.attributes.RouteID,s=d(o),{geometryType:n,spatialReference:l}=f;null!==(r=s.traversedEdges)&&void 0!==r||(s.traversedEdges={features:[],geometryType:n,spatialReference:l}),s.traversedEdges.features.push(e)})),null!==h&&void 0!==h&&h.features.forEach((e=>{var r;const o=e.attributes.RouteID,s=d(o),{geometryType:n,spatialReference:l}=h;null!==(r=s.traversedJunctions)&&void 0!==r||(s.traversedJunctions={features:[],geometryType:n,spatialReference:l}),s.traversedJunctions.features.push(e)})),null!==g&&void 0!==g&&g.features.forEach((e=>{var r;const o=e.attributes.RouteID,s=d(o);null!==(r=s.traversedTurns)&&void 0!==r||(s.traversedTurns={features:[]}),s.traversedTurns.features.push(e)})),Ye.fromJSON({routeResults:_,barriers:o,polygonBarriers:u,polylineBarriers:p,messages:a})}(h)}var He=o(64980),Xe=o(61810),Qe=o(1442),et=o(74754),tt=o(68232),rt=o(20466),ot=o(88706),it=o(6493);const st={type:String,json:{read:{source:"token"},write:{target:"token"}}};var nt=o(31670);let lt=class extends((0,ot.O)(V.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],lt.prototype,"doNotLocateOnRestrictedElements",void 0),(0,s._)([(0,b.MZ)({types:l.yR,json:{read:nt.rS,write:!0}})],lt.prototype,"geometry",void 0),(0,s._)([(0,me.e)(fe.Vj)],lt.prototype,"geometryType",void 0),(0,s._)([(0,b.MZ)({type:String,json:{name:"layerName",write:!0}})],lt.prototype,"name",void 0),(0,s._)([(0,me.e)(fe.vS,{name:"spatialRel"})],lt.prototype,"spatialRelationship",void 0),(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],lt.prototype,"type",void 0),(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],lt.prototype,"where",void 0),lt=(0,s._)([(0,B.$)("esri.rest.support.DataLayer")],lt);const at=lt;var ut;let pt=ut=class extends Ze.A{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new ut({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements,...this.cloneProperties()})}};(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],pt.prototype,"doNotLocateOnRestrictedElements",void 0),pt=ut=(0,s._)([(0,B.$)("esri.rest.support.NetworkFeatureSet")],pt);const dt=pt;let ct=class extends((0,ot.O)(V.oY)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],ct.prototype,"doNotLocateOnRestrictedElements",void 0),(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],ct.prototype,"url",void 0),ct=(0,s._)([(0,B.$)("esri.rest.support.NetworkUrl")],ct);const yt=ct;var vt;let mt=vt=class extends((0,ot.O)(V.oY)){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,it.PZ)(vt,e)}readAccumulateAttributes(e){return null==e?null:e.map((e=>fe.et.fromJSON(e)))}writeAccumulateAttributes(e,r,o){(null===e||void 0===e?void 0:e.length)&&(r[o]=e.map((e=>fe.et.toJSON(e))))}writePointBarriers(e,r,o){k(e,r,o)}writePolygonBarrier(e,r,o){k(e,r,o)}writePolylineBarrier(e,r,o){k(e,r,o)}readRestrictionAttributes(e){return null==e?null:e.map((e=>fe.OC.fromJSON(e)))}writeRestrictionAttributes(e,r,o){(null===e||void 0===e?void 0:e.length)&&(r[o]=e.map((e=>fe.OC.toJSON(e))))}readStartTime(e,r){const{startTime:o}=r;return null==o?null:"now"===o?"now":new Date(o)}writeStartTime(e,r){null!=e&&(r.startTime="now"===e?"now":e.getTime())}readStops(e,r){return function C(e){return function J(e){return e&&"type"in e}(e)?at.fromJSON(e):function R(e){return e&&"url"in e}(e)?yt.fromJSON(e):function L(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?dt.fromJSON(e):function U(e){return e&&"features"in e}(e)?Ze.A.fromJSON(e):null}(r.stops)}writeStops(e,r,o){k(e,r,o)}};(0,s._)([(0,b.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],mt.prototype,"accumulateAttributes",void 0),(0,s._)([(0,T.w)("accumulateAttributes")],mt.prototype,"readAccumulateAttributes",null),(0,s._)([(0,N.K)("accumulateAttributes")],mt.prototype,"writeAccumulateAttributes",null),(0,s._)([(0,b.MZ)(st)],mt.prototype,"apiKey",void 0),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"attributeParameterValues",void 0),(0,s._)([(0,b.MZ)({type:String,json:{write:!0}})],mt.prototype,"directionsLanguage",void 0),(0,s._)([(0,me.e)(fe.Z7)],mt.prototype,"directionsLengthUnits",void 0),(0,s._)([(0,me.e)(fe.aJ)],mt.prototype,"directionsOutputType",void 0),(0,s._)([(0,me.e)(fe.$n)],mt.prototype,"directionsStyleName",void 0),(0,s._)([(0,me.e)(fe.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],mt.prototype,"directionsTimeAttribute",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"findBestSequence",void 0),(0,s._)([(0,b.MZ)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecision",void 0),(0,s._)([(0,b.MZ)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionM",void 0),(0,s._)([(0,b.MZ)({type:Number,json:{write:!0}})],mt.prototype,"geometryPrecisionZ",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"ignoreInvalidLocations",void 0),(0,s._)([(0,me.e)(fe.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],mt.prototype,"impedanceAttribute",void 0),(0,s._)([(0,b.MZ)({type:Number,json:{write:!0}})],mt.prototype,"outputGeometryPrecision",void 0),(0,s._)([(0,me.e)(fe.hY)],mt.prototype,"outputGeometryPrecisionUnits",void 0),(0,s._)([(0,me.e)(fe.Sr)],mt.prototype,"outputLines",void 0),(0,s._)([(0,b.MZ)({type:$e.A,json:{name:"outSR",write:!0}})],mt.prototype,"outSpatialReference",void 0),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"overrides",void 0),(0,s._)([(0,b.MZ)({json:{name:"barriers",write:!0}})],mt.prototype,"pointBarriers",void 0),(0,s._)([(0,N.K)("pointBarriers")],mt.prototype,"writePointBarriers",null),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"polygonBarriers",void 0),(0,s._)([(0,N.K)("polygonBarriers")],mt.prototype,"writePolygonBarrier",null),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"polylineBarriers",void 0),(0,s._)([(0,N.K)("polylineBarriers")],mt.prototype,"writePolylineBarrier",null),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveFirstStop",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveLastStop",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"preserveObjectID",void 0),(0,s._)([(0,b.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],mt.prototype,"restrictionAttributes",void 0),(0,s._)([(0,T.w)("restrictionAttributes")],mt.prototype,"readRestrictionAttributes",null),(0,s._)([(0,N.K)("restrictionAttributes")],mt.prototype,"writeRestrictionAttributes",null),(0,s._)([(0,me.e)(fe.hE)],mt.prototype,"restrictUTurns",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnBarriers",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnDirections",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolygonBarriers",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnPolylineBarriers",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnRoutes",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnStops",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedEdges",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedJunctions",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnTraversedTurns",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"returnZ",void 0),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"startTime",void 0),(0,s._)([(0,T.w)("startTime")],mt.prototype,"readStartTime",null),(0,s._)([(0,N.K)("startTime")],mt.prototype,"writeStartTime",null),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"startTimeIsUTC",void 0),(0,s._)([(0,b.MZ)({json:{write:!0}})],mt.prototype,"stops",void 0),(0,s._)([(0,T.w)("stops")],mt.prototype,"readStops",null),(0,s._)([(0,N.K)("stops")],mt.prototype,"writeStops",null),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"timeWindowsAreUTC",void 0),(0,s._)([(0,b.MZ)({type:Se.A,json:{write:!0}})],mt.prototype,"travelMode",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"useHierarchy",void 0),(0,s._)([(0,b.MZ)({type:Boolean,json:{write:!0}})],mt.prototype,"useTimeWindows",void 0),mt=vt=(0,s._)([(0,B.$)("esri.rest.support.RouteParameters")],mt);const ft=mt;function k(e,r,o){null!=e&&(r[o]=m.A.isCollection(e)?{features:e.toArray().map((e=>e.toJSON()))}:e.toJSON())}var ht=o(47171),wt=o(46779),gt=o(22156);function z(e){return e.length?e:null}function H(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:H("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:H("esriGeometryPolyline")}}}function K(e){return"layers"in e}async function $(e){const r=$e.A.WGS84;return await(0,I.initializeProjection)(e.spatialReference,r),(0,I.project)(e,r)}function X(e,r){switch(r){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function ee(e,r){return"decimal-degrees"===r||"points"===r||"unknown"===r?e:(0,A.oU)(e,r,"meters")}const _t=m.A.ofType(He.A),St=m.A.ofType(Xe.A),At=m.A.ofType(Qe.A),Mt=m.A.ofType(et.A),bt=m.A.ofType(tt.A),Tt=m.A.ofType(wt.A),Bt="esri.layers.RouteLayer",ue=()=>c.A.getLogger(Bt);let Zt=class extends((0,E.d)((0,G.j)((0,x.q)((0,F.A)((0,h.P)(D.A)))))){constructor(e){super(e),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.defaultSymbols=new ae,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new At,this.polygonBarriers=new Mt,this.polylineBarriers=new bt,this.routeInfo=null,this.spatialReference=$e.A.WGS84,this.stops=new Tt,this.type="route";const t=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,S.on)((()=>this.stops),"change",t,{sync:!0,onListenerAdd:t}))}writeFeatureCollectionWebmap(e,r,o,s){const n=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter((e=>!!e)),l=n.map(((e,r)=>r)),a="web-map"===s.origin?"featureCollection.layers":"layers";(0,g.sM)(a,n,r),r.opacity=this.opacity,r.visibility=this.visible,r.visibleLayers=l}readDirectionLines(e,r){return this._getNetworkFeatures(r,"DirectionLines",(e=>He.A.fromGraphic(e)))}readDirectionPoints(e,r){return this._getNetworkFeatures(r,"DirectionPoints",(e=>Xe.A.fromGraphic(e)))}get fullExtent(){var e,r;const o=new O.A({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:$e.A.WGS84});if(null!=(null===(e=this.routeInfo)||void 0===e?void 0:e.geometry))return null!==(r=this.routeInfo.geometry.extent)&&void 0!==r?r:o;if(null==this.stops)return o;const s=this.stops.filter((e=>null!=e.geometry));if(s.length<2)return o;const{spatialReference:n}=s.at(0).geometry;if(null==n)return o;const l=s.toArray().map((e=>{const r=e.geometry;return[r.x,r.y]}));return new gt.A({points:l,spatialReference:n}).extent}readMaxScale(e,r){var o,s;const n=K(r)?r.layers:null===(o=r.featureCollection)||void 0===o?void 0:o.layers,l=null===n||void 0===n?void 0:n.find((e=>null!=e.layerDefinition.maxScale));return null!==(s=null===l||void 0===l?void 0:l.layerDefinition.maxScale)&&void 0!==s?s:0}readMinScale(e,r){var o,s;const n=K(r)?r.layers:null===(o=r.featureCollection)||void 0===o?void 0:o.layers,l=null===n||void 0===n?void 0:n.find((e=>null!=e.layerDefinition.minScale));return null!==(s=null===l||void 0===l?void 0:l.layerDefinition.minScale)&&void 0!==s?s:0}readPointBarriers(e,r){return this._getNetworkFeatures(r,"Barriers",(e=>Qe.A.fromGraphic(e)))}readPolygonBarriers(e,r){return this._getNetworkFeatures(r,"PolygonBarriers",(e=>et.A.fromGraphic(e)))}readPolylineBarriers(e,r){return this._getNetworkFeatures(r,"PolylineBarriers",(e=>tt.A.fromGraphic(e)))}readRouteInfo(e,r){const o=this._getNetworkFeatures(r,"RouteInfo",(e=>rt.A.fromGraphic(e)));return o.length>0?o.at(0):null}readSpatialReference(e,r){var o,s,n,l,a,u;const p=K(r)?r.layers:null===(o=r.featureCollection)||void 0===o?void 0:o.layers;if(null===p||void 0===p||!p.length)return $e.A.WGS84;const{layerDefinition:c,featureSet:m}=p[0],f=m.features[0],h=null!==(s=null!==(n=null!==(l=null!==(a=null===f||void 0===f||null===(u=f.geometry)||void 0===u?void 0:u.spatialReference)&&void 0!==a?a:m.spatialReference)&&void 0!==l?l:c.spatialReference)&&void 0!==n?n:c.extent.spatialReference)&&void 0!==s?s:j.KK;return $e.A.fromJSON(h)}readStops(e,r){return this._getNetworkFeatures(r,"Stops",(e=>wt.A.fromGraphic(e)),(e=>this._setStopSymbol(e)))}get title(){var e;return null!=(null===(e=this.routeInfo)||void 0===e?void 0:e.name)?this.routeInfo.name:"Route"}set title(e){this._overrideIfSome("title",e)}get url(){return n.A.routeServiceUrl}set url(e){null!=e?this._set("url",(0,W.Jf)(e,ue())):this._set("url",n.A.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}async save(){await this.load();const{fullExtent:e,portalItem:r}=this;if(!r)throw new f.A("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!r.id)throw new f.A("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==r.type)throw new f.A("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(null==this.routeInfo)throw new f.A("routelayer:route-unsolved","save() requires a solved route");const{portal:o}=r;await o.signIn(),o.user||await r.reload();const{itemUrl:s,itemControl:n}=r;if("admin"!==n&&"update"!==n)throw new f.A("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const l={messages:[],origin:"portal-item",portal:o,url:s?(0,M.An)(s):void 0,writtenProperties:[]},a=this.write(void 0,l);return r.extent=await $(e),r.title=this.title,await r.update({data:a}),r}async saveAs(e){var r,o,s,n;let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(await this.load(),null==this.routeInfo)throw new f.A("routelayer:route-unsolved","saveAs() requires a solved route");const a=de.default.from(e).clone();null!==(r=a.extent)&&void 0!==r||(a.extent=await $(this.fullExtent)),a.id=null,null!==(o=a.portal)&&void 0!==o||(a.portal=pe.A.getDefault()),null!==(s=a.title)&&void 0!==s||(a.title=this.title),a.type="Feature Collection",a.typeKeywords=["Data","Feature Collection",ce.mm.MULTI_LAYER,"Route Layer"];const{portal:u}=a,p={messages:[],origin:"portal-item",portal:u,url:null,writtenProperties:[]};await u.signIn();const c=null===l||void 0===l?void 0:l.folder,m=this.write(void 0,p);return await(null===(n=u.user)||void 0===n?void 0:n.addItem({item:a,folder:c,data:m})),this.portalItem=a,(0,P.v)(p),p.portalItem=a,a}async solve(e,r){var o,s,n,l,a,u,p;const c=null!==(o=null===e||void 0===e?void 0:e.stops)&&void 0!==o?o:this.stops,h=null!==(s=null===e||void 0===e?void 0:e.pointBarriers)&&void 0!==s?s:z(this.pointBarriers),g=null!==(n=null===e||void 0===e?void 0:e.polylineBarriers)&&void 0!==n?n:z(this.polylineBarriers),S=null!==(l=null===e||void 0===e?void 0:e.polygonBarriers)&&void 0!==l?l:z(this.polygonBarriers);if(null==c)throw new f.A("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function Q(e){return"esri.rest.support.FeatureSet"===e.declaredClass}(c)||function Y(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}(c))&&c.features.length<2||m.A.isCollection(c)&&c.length<2)throw new f.A("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(m.A.isCollection(c))for(const m of c)m.routeName=null;const A=null===e||void 0===e?void 0:e.apiKey,M=this.url,b=await this._getServiceDescription(M,A,r),T=null!==(a=null===e||void 0===e?void 0:e.travelMode)&&void 0!==a?a:b.defaultTravelMode,B=null!==(u=null===e||void 0===e?void 0:e.accumulateAttributes)&&void 0!==u?u:[];null!=T&&(B.push(T.distanceAttributeName),T.timeAttributeName&&B.push(T.timeAttributeName));const N={accumulateAttributes:B,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:h,polylineBarriers:g,polygonBarriers:S,preserveFirstStop:!0,preserveLastStop:!0,returnBarriers:!!h,returnDirections:!0,returnPolygonBarriers:!!S,returnPolylineBarriers:!!g,returnRoutes:!0,returnStops:!0,stops:c},P=ft.from(null!==e&&void 0!==e?e:{});let O;P.set(N);try{O=await route_l(M,P,r)}catch(j){throw(0,_.zf)(j)?j:new f.A("routelayer:failed-route-request","the routing request failed",{error:j})}const I=this._toRouteLayerSolution(O);return this._isOverridden("title")||(this.title=null!==(p=I.routeInfo.name)&&void 0!==p?p:"Route"),function Z(e,r,o){var s,n,l,a,u,p,c,m,h,g,_,S,A,M,b,T,B;const N=null===(s=r.networkDataset)||void 0===s?void 0:s.networkAttributes,P=null!==(n=null===N||void 0===N?void 0:N.filter((e=>{let{usageType:r}=e;return"cost"===r})))&&void 0!==n?n:[],O=null!==(l=o.travelMode)&&void 0!==l?l:r.defaultTravelMode;if(null==O)return void ue().warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:I,distanceAttributeName:j}=O,D=P.find((e=>{let{name:r}=e;return r===I})),E=P.find((e=>{let{name:r}=e;return r===j})),x=null!==(a=null!==(u=null===(p=o.travelMode)||void 0===p?void 0:p.impedanceAttributeName)&&void 0!==u?u:o.impedanceAttribute)&&void 0!==a?a:r.impedance,F=null===D||void 0===D?void 0:D.units,G=null===E||void 0===E?void 0:E.units;if(!F||!G)throw new f.A("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const W=null!==(c=o.directionsLanguage)&&void 0!==c?c:r.directionsLanguage,q=null!==(m=null!==(h=o.accumulateAttributes)&&void 0!==h?h:r.accumulateAttributeNames)&&void 0!==m?m:[],V=new Set(P.filter((e=>{let{name:r}=e;return r===I||r===j||r===x||null!=r&&q.includes(r)})).map((e=>{let{name:r}=e;return r}))),w=e=>{for(const r in e)V.has(r)||delete e[r]};for(const f of e.pointBarriers){var re;null!=f.costs&&(f.addedCost=null!==(re=f.costs[x])&&void 0!==re?re:0,w(f.costs))}for(const f of e.polygonBarriers){var oe;null!=f.costs&&(f.scaleFactor=null!==(oe=f.costs[x])&&void 0!==oe?oe:1,w(f.costs))}for(const f of e.polylineBarriers){var ie;null!=f.costs&&(f.scaleFactor=null!==(ie=f.costs[x])&&void 0!==ie?ie:1,w(f.costs))}const{routeInfo:se}=e,{findBestSequence:ne,preserveFirstStop:le,preserveLastStop:ae,startTimeIsUTC:pe,timeWindowsAreUTC:de}=o;se.analysisSettings=new ht.A({accumulateAttributes:q,directionsLanguage:W,findBestSequence:ne,preserveFirstStop:le,preserveLastStop:ae,startTimeIsUTC:pe,timeWindowsAreUTC:de,travelMode:O}),se.totalDuration=X(null!==(g=null===(_=se.totalCosts)||void 0===_?void 0:_[I])&&void 0!==g?g:0,F),se.totalDistance=ee(null!==(S=null===(A=se.totalCosts)||void 0===A?void 0:A[j])&&void 0!==S?S:0,G),se.totalLateDuration=X(null!==(M=null===(b=se.totalViolations)||void 0===b?void 0:b[I])&&void 0!==M?M:0,F),se.totalWaitDuration=X(null!==(T=null===(B=se.totalWait)||void 0===B?void 0:B[I])&&void 0!==T?T:0,F),null!=se.totalCosts&&w(se.totalCosts),null!=se.totalViolations&&w(se.totalViolations),null!=se.totalWait&&w(se.totalWait);for(const f of e.stops){var ce,ye,ve,me,fe,he;null!=f.serviceCosts&&(f.serviceDuration=X(null!==(ce=f.serviceCosts[I])&&void 0!==ce?ce:0,F),f.serviceDistance=ee(null!==(ye=f.serviceCosts[j])&&void 0!==ye?ye:0,G),w(f.serviceCosts)),null!=f.cumulativeCosts&&(f.cumulativeDuration=X(null!==(ve=f.cumulativeCosts[I])&&void 0!==ve?ve:0,F),f.cumulativeDistance=ee(null!==(me=f.cumulativeCosts[j])&&void 0!==me?me:0,G),w(f.cumulativeCosts)),null!=f.violations&&(f.lateDuration=X(null!==(fe=f.violations[I])&&void 0!==fe?fe:0,F),w(f.violations)),null!=f.wait&&(f.waitDuration=X(null!==(he=f.wait[I])&&void 0!==he?he:0,F),w(f.wait))}}(I,b,P),I}update(e){const{stops:r,directionLines:o,directionPoints:s,pointBarriers:n,polylineBarriers:l,polygonBarriers:a,routeInfo:u}=e;this.set({stops:r,pointBarriers:n,polylineBarriers:l,polygonBarriers:a}),this._set("directionLines",o),this._set("directionPoints",s),this._set("routeInfo",u),null!=u.geometry&&(this.spatialReference=u.geometry.spatialReference)}_getNetworkFeatures(e,r,o,s){var n,l,c,f;const h=K(e)?e.layers:null===(n=e.featureCollection)||void 0===n?void 0:n.layers,g=null===h||void 0===h?void 0:h.find((e=>e.layerDefinition.name===r));if(null==g)return new m.A;const{layerDefinition:_,popupInfo:S,featureSet:A}=g,M=_.drawingInfo.renderer,{features:b}=A,T=null!==(l=null!==(c=null!==(f=A.spatialReference)&&void 0!==f?f:_.spatialReference)&&void 0!==c?c:_.extent.spatialReference)&&void 0!==l?l:j.KK,B=M&&(0,p.L)(M),N=$e.A.fromJSON(T),P=b.map((e=>{var s,n,l;const p=a.A.fromJSON(e);null!=p.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(p.geometry.spatialReference=N);const c=o(p);return null!==(s=c.symbol)&&void 0!==s||(c.symbol=null!==(n=null===B||void 0===B?void 0:B.getSymbol(p))&&void 0!==n?n:this._getNetworkSymbol(r)),null!==(l=c.popupTemplate)&&void 0!==l||(c.popupTemplate=S&&u.A.fromJSON(S)),c}));return s&&P.some((e=>!e.symbol))&&s(P),new m.A(P)}_getNetworkSymbol(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}async _getServiceDescription(e,r,o){if(null!=this._cachedServiceDescription&&this._cachedServiceDescription.url===e)return this._cachedServiceDescription.serviceDescription;const s=await networkService_d(e,r,o);return this._cachedServiceDescription={serviceDescription:s,url:e},s}_setStopSymbol(e){if(!e||0===e.length)return;if(null==this.defaultSymbols.stops)return;if(e.every((e=>{let{symbol:r}=e;return null!=r})))return;const{first:r,last:o,middle:s,unlocated:n,waypoint:l,break:a}=this.defaultSymbols.stops;if(null==this.routeInfo||1===e.length)return void e.forEach(((n,l)=>{switch(l){case 0:n.symbol=r;break;case e.length-1:n.symbol=o;break;default:n.symbol=s}}));const u=e.map((e=>{let{sequence:r}=e;return r})).filter((e=>null!=e)),p=Math.min(...u),c=Math.max(...u);for(const m of e)m.sequence!==p?m.sequence!==c?"ok"===m.status||"not-located-on-closest"===m.status?"waypoint"!==m.locationType?"break"!==m.locationType?m.symbol=s:m.symbol=a:m.symbol=l:m.symbol=n:m.symbol=o:m.symbol=r}_toRouteLayerSolution(e){var r,o,s,n,l,a,u;const p=null===(r=e.routeResults[0].stops)||void 0===r?void 0:r.map((e=>wt.A.fromJSON(e.toJSON())));this._setStopSymbol(p);const c=new Tt(p),m=new Mt(null===(o=e.polygonBarriers)||void 0===o?void 0:o.map((e=>{const r=et.A.fromJSON(e.toJSON());return r.symbol=this.defaultSymbols.polygonBarriers,r}))),f=new bt(null===(s=e.polylineBarriers)||void 0===s?void 0:s.map((e=>{const r=tt.A.fromJSON(e.toJSON());return r.symbol=this.defaultSymbols.polylineBarriers,r}))),h=new At(null===(n=e.pointBarriers)||void 0===n?void 0:n.map((e=>{const r=Qe.A.fromJSON(e.toJSON());return r.symbol=this.defaultSymbols.pointBarriers,r}))),g=null===(l=e.routeResults[0].route)||void 0===l?void 0:l.toJSON(),_=rt.A.fromJSON(g);_.symbol=this.defaultSymbols.routeInfo;const S=new St(null===(a=e.routeResults[0].directionPoints)||void 0===a?void 0:a.features.map((e=>{const r=Xe.A.fromJSON(e.toJSON());return r.symbol=this.defaultSymbols.directionPoints,r})));return{directionLines:new _t(null===(u=e.routeResults[0].directionLines)||void 0===u?void 0:u.features.map((e=>{const r=He.A.fromJSON(e.toJSON());return r.symbol=this.defaultSymbols.directionLines,r}))),directionPoints:S,pointBarriers:h,polygonBarriers:m,polylineBarriers:f,routeInfo:_,stops:c}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",He.A.fields,He.A.popupInfo,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",Xe.A.fields,Xe.A.popupInfo,"DirectionPoints","Direction Points")}_writeNetworkFeatures(e,r,o,s,n,l,a){if(null===e||void 0===e||!e.length)return null;const u=this.spatialReference.toJSON(),{fullExtent:p,maxScale:c,minScale:m}=this;return{featureSet:{features:e.toArray().map((e=>function te(e){const{attributes:r,geometry:o,popupTemplate:s,symbol:n}=e.toGraphic().toJSON();return{attributes:r,geometry:o,popupInfo:s,symbol:n}}(e))),geometryType:o,spatialReference:u},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=r?r.toJSON():H(o)}},extent:p.toJSON(),fields:s,geometryType:o,hasM:!1,hasZ:!1,maxScale:c,minScale:m,name:l,objectIdField:"ObjectID",spatialReference:u,title:a,type:"Feature Layer",typeIdField:""},popupInfo:n}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Qe.A.fields,Qe.A.popupInfo,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",et.A.fields,et.A.popupInfo,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",tt.A.fields,tt.A.popupInfo,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new m.A([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",rt.A.fields,rt.A.popupInfo,"RouteInfo","Route Details")}_writeStops(){var e,r,o;const s=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",wt.A.fields,wt.A.popupInfo,"Stops","Stops");if(null==s)return null;const{stops:n}=this.defaultSymbols,l=null===n||void 0===n||null===(e=n.first)||void 0===e?void 0:e.toJSON(),a=null===n||void 0===n||null===(r=n.middle)||void 0===r?void 0:r.toJSON(),u=null===n||void 0===n||null===(o=n.last)||void 0===o?void 0:o.toJSON();return s.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:a,uniqueValueInfos:[{value:"1",symbol:l,label:"First Stop"},{value:"".concat(this.stops.length),symbol:u,label:"Last Stop"}]},s}};(0,s._)([(0,b.MZ)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],Zt.prototype,"_featureCollection",void 0),(0,s._)([(0,N.K)(["web-map","portal-item"],"_featureCollection")],Zt.prototype,"writeFeatureCollectionWebmap",null),(0,s._)([(0,b.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],Zt.prototype,"_type",void 0),(0,s._)([(0,b.MZ)({nonNullable:!0,type:ae})],Zt.prototype,"defaultSymbols",void 0),(0,s._)([(0,b.MZ)({readOnly:!0})],Zt.prototype,"directionLines",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],Zt.prototype,"readDirectionLines",null),(0,s._)([(0,b.MZ)({readOnly:!0})],Zt.prototype,"directionPoints",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],Zt.prototype,"readDirectionPoints",null),(0,s._)([(0,b.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],Zt.prototype,"featureCollectionType",void 0),(0,s._)([(0,b.MZ)({readOnly:!0})],Zt.prototype,"fullExtent",null),(0,s._)([(0,b.MZ)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],Zt.prototype,"legendEnabled",void 0),(0,s._)([(0,b.MZ)({type:["show","hide"]})],Zt.prototype,"listMode",void 0),(0,s._)([(0,b.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],Zt.prototype,"maxScale",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],Zt.prototype,"readMaxScale",null),(0,s._)([(0,b.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],Zt.prototype,"minScale",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],Zt.prototype,"readMinScale",null),(0,s._)([(0,b.MZ)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],Zt.prototype,"operationalLayerType",void 0),(0,s._)([(0,b.MZ)({nonNullable:!0,type:m.A.ofType(Qe.A)})],Zt.prototype,"pointBarriers",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],Zt.prototype,"readPointBarriers",null),(0,s._)([(0,b.MZ)({nonNullable:!0,type:m.A.ofType(et.A)})],Zt.prototype,"polygonBarriers",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],Zt.prototype,"readPolygonBarriers",null),(0,s._)([(0,b.MZ)({nonNullable:!0,type:m.A.ofType(tt.A)})],Zt.prototype,"polylineBarriers",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],Zt.prototype,"readPolylineBarriers",null),(0,s._)([(0,b.MZ)({readOnly:!0})],Zt.prototype,"routeInfo",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],Zt.prototype,"readRouteInfo",null),(0,s._)([(0,b.MZ)({type:$e.A})],Zt.prototype,"spatialReference",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],Zt.prototype,"readSpatialReference",null),(0,s._)([(0,b.MZ)({nonNullable:!0,type:m.A.ofType(wt.A)})],Zt.prototype,"stops",void 0),(0,s._)([(0,T.w)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],Zt.prototype,"readStops",null),(0,s._)([(0,b.MZ)()],Zt.prototype,"title",null),(0,s._)([(0,b.MZ)({readOnly:!0,json:{read:!1}})],Zt.prototype,"type",void 0),(0,s._)([(0,b.MZ)()],Zt.prototype,"url",null),Zt=(0,s._)([(0,B.$)(Bt)],Zt);const Nt=Zt}}]);
//# sourceMappingURL=2088.3156b33b.chunk.js.map