"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[9946],{49946:(e,t,s)=>{s.d(t,{addOrUpdateResources:()=>a,bg:()=>m,cL:()=>p,fetchResources:()=>o,removeAllResources:()=>c,removeResource:()=>n});var r=s(53705),d=s(4180),f=s(4270);async function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;await e.load(s);const r=(0,f.fj)(e.itemUrl,"resources"),{start:d=1,num:h=10,sortOrder:v="asc",sortField:w="resource"}=t,g={query:{start:d,num:h,sortOrder:v,sortField:w,token:e.apiKey},signal:null===s||void 0===s?void 0:s.signal},y=await e.portal.request(r,g);return{total:y.total,nextStart:y.nextStart,resources:y.resources.map((t=>{let{created:s,size:r,resource:d}=t;return{created:new Date(s),size:r,resource:e.resourceFromPath(d)}}))}}async function a(e,t,s,r){const h=new Map;for(const{resource:f,content:w,compress:g,access:y}of t){if(!f.hasPath())throw new d.A("portal-item-resource-".concat(s,":invalid-path"),"Resource does not have a valid path");const[e,t]=l(f.path),r="".concat(e,"/").concat(null!==g&&void 0!==g?g:"","/").concat(null!==y&&void 0!==y?y:"");h.has(r)||h.set(r,{prefix:e,compress:g,access:y,files:[]}),h.get(r).files.push({fileName:t,content:w})}await e.load(r);const v=(0,f.fj)(e.userItemUrl,"add"===s?"addResources":"updateResources");for(const{prefix:d,compress:f,access:w,files:g}of h.values()){const t=25;for(let s=0;s<g.length;s+=t){const h=g.slice(s,s+t),y=new FormData;d&&"."!==d&&y.append("resourcesPrefix",d),f&&y.append("compress","true"),w&&y.append("access",w);let b=0;for(const{fileName:e,content:t}of h)y.append("file"+ ++b,t,e);y.append("f","json"),await e.portal.request(v,{method:"post",body:y,signal:null===r||void 0===r?void 0:r.signal})}}}async function n(e,t,s){if(!t.hasPath())throw new d.A("portal-item-resources-remove:invalid-path","Resource does not have a valid path");await e.load(s);const r=(0,f.fj)(e.userItemUrl,"removeResources");await e.portal.request(r,{method:"post",query:{resource:t.path},signal:null===s||void 0===s?void 0:s.signal}),t.portalItem=null}async function c(e,t){await e.load(t);const s=(0,f.fj)(e.userItemUrl,"removeResources");return e.portal.request(s,{method:"post",query:{deleteAll:!0},signal:null===t||void 0===t?void 0:t.signal})}function l(e){const t=e.lastIndexOf("/");return-1===t?[".",e]:[e.slice(0,t),e.slice(t+1)]}function i(e){const[t,s]=function u(e){const t=(0,f.Zo)(e);return null==t?[e,""]:[e.slice(0,e.length-t.length-1),".".concat(t)]}(e),[r,d]=l(t);return[r,d,s]}async function p(e){return"blob"===e.type?e.blob:"json"===e.type?new Blob([e.jsonString],{type:"application/json"}):(await(0,r.A)(e.url,{responseType:"blob"})).data}function m(e,t){if(!e.hasPath())return null;const[s,,r]=i(e.path);return e.portalItem.resourceFromPath((0,f.fj)(s,t+r))}}}]);
//# sourceMappingURL=9946.2e0083ca.chunk.js.map