{"version":3,"file":"static/js/3710.f81c4b78.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/layers/StreamLayerView.js","../node_modules/@arcgis/core/views/2d/layers/StreamLayerView2D.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as s}from\"../../chunks/tslib.es6.js\";import{property as e}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/Logger.js\";import\"../../core/RandomLCG.js\";import{subclass as t}from\"../../core/accessorSupport/decorators/subclass.js\";import o from\"../../layers/support/FeatureFilter.js\";const r=r=>{let i=class extends r{resume(){this._isUserPaused=!1,this.suspended||this._doResume()}pause(){this._isUserPaused=!0,this.suspended||this._doPause()}disconnect(){this._doDisconnect()}connect(){this._doConnect()}clear(){this._doClear()}constructor(...s){super(...s),this._isUserPaused=!1,this.filter=null}get connectionStatus(){return(this._isUserPaused||this.suspended)&&\"connected\"===this._streamConnectionStatus?\"paused\":this._streamConnectionStatus}_onSuspendedChange(s){s?this._doPause():this._isUserPaused||this._doResume()}};return s([e()],i.prototype,\"_isUserPaused\",void 0),s([e({readOnly:!0})],i.prototype,\"connectionStatus\",null),s([e({type:o})],i.prototype,\"filter\",void 0),i=s([t(\"esri.layers.mixins.StreamLayerView\")],i),i};export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.29/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../chunks/tslib.es6.js\";import r from\"../../../core/Error.js\";import{handlesGroup as t,makeHandle as s}from\"../../../core/handleUtils.js\";import{watch as o}from\"../../../core/reactiveUtils.js\";import{property as n}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import a from\"../../../rest/support/FeatureSet.js\";import c from\"./FeatureLayerView2D.js\";import l from\"../../layers/StreamLayerView.js\";let h=class extends(l(c)){constructor(){super(...arguments),this.pipelineConnectionStatus=\"disconnected\",this.pipelineErrorString=null}initialize(){this.addHandles([o((()=>this.layer.customParameters),(e=>this._worker.streamMessenger.updateCustomParameters(e))),this.layer.on(\"send-message-to-socket\",(e=>this._worker.streamMessenger.sendMessageToSocket(e))),this.layer.on(\"send-message-to-client\",(e=>{this._worker.streamMessenger.sendMessageToClient(e),this._isUserPaused&&\"type\"in e&&\"clear\"===e.type&&this.incrementSourceRefreshVersion()})),o((()=>this.layer.purgeOptions),(()=>this._update())),o((()=>this.suspended),this._onSuspendedChange.bind(this))],\"constructor\"),this._doResume()}destroy(){this._doPause()}get connectionError(){return this.pipelineErrorString?new r(\"stream-controller\",this.pipelineErrorString):null}on(e,r){if(Array.isArray(e))return t(e.map((e=>this.on(e,r))));const o=[\"data-received\",\"message-received\"].includes(e);o&&this._worker.streamMessenger.enableEvent(e,!0);const n=super.on(e,r),i=this;return s((()=>{n.remove(),o&&(i._worker.closed||i.hasEventListener(e)||i._worker.streamMessenger.enableEvent(e,!1))}))}queryLatestObservations(e,t){if(!(this.layer.timeInfo?.endField||this.layer.timeInfo?.startField||this.layer.timeInfo?.trackIdField))throw new r(\"streamlayer-no-timeField\",\"queryLatestObservation can only be used with services that define a TrackIdField\");return this._worker.features.executeQueryForLatestObservations(this._cleanUpQuery(e),t).then((e=>{const r=a.fromJSON(e);return r.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),r}))}detach(){super.detach(),this.pipelineConnectionStatus=\"disconnected\"}get _streamConnectionStatus(){return this.pipelineConnectionStatus}_doPause(){null!=this._refreshInterval&&(clearInterval(this._refreshInterval),this._refreshInterval=null)}_doResume(){this._refreshInterval=setInterval((()=>this.incrementSourceRefreshVersion()),this.layer.updateInterval)}_doDisconnect(){this._worker.streamMessenger.disconnect(),this._doPause()}_doConnect(){this._worker.streamMessenger.connect(),this.resume()}_doClear(){this._worker.streamMessenger.clear(),null==this._refreshInterval&&this.incrementSourceRefreshVersion()}_createClientOptions(){const e=super._createClientOptions(),r=this;return{...e,get container(){return r.featureContainer},setProperty:e=>{this.set(e.propertyName,e.value)}}}};e([n()],h.prototype,\"pipelineConnectionStatus\",void 0),e([n()],h.prototype,\"pipelineErrorString\",void 0),e([n({readOnly:!0})],h.prototype,\"connectionError\",null),e([n({readOnly:!0})],h.prototype,\"_streamConnectionStatus\",null),h=e([i(\"esri.views.2d.layers.StreamLayerView2D\")],h);const p=h;export{p as default};\n"],"names":["r","i","resume","this","_isUserPaused","suspended","_doResume","pause","_doPause","disconnect","_doDisconnect","connect","_doConnect","clear","_doClear","constructor","super","arguments","filter","connectionStatus","_streamConnectionStatus","_onSuspendedChange","s","e","prototype","readOnly","type","o","t","h","l","c","pipelineConnectionStatus","pipelineErrorString","initialize","addHandles","layer","customParameters","_worker","streamMessenger","updateCustomParameters","on","sendMessageToSocket","sendMessageToClient","incrementSourceRefreshVersion","purgeOptions","_update","bind","destroy","connectionError","Array","isArray","map","includes","enableEvent","n","remove","closed","hasEventListener","queryLatestObservations","_this$layer$timeInfo","_this$layer$timeInfo2","_this$layer$timeInfo3","timeInfo","endField","startField","trackIdField","features","executeQueryForLatestObservations","_cleanUpQuery","then","a","fromJSON","forEach","sourceLayer","detach","_refreshInterval","clearInterval","setInterval","updateInterval","_createClientOptions","container","featureContainer","setProperty","set","propertyName","value","p"],"sourceRoot":""}