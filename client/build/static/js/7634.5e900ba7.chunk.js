"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[7634],{31714:(y,g,v)=>{v.d(g,{T:()=>r,U:()=>o});var S=v(48237);function o(y,g){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const M=(0,S.qE)(y,0,R);for(let S=0;S<4;S++)g[v+S]=Math.floor(256*l(M*T[S]))}function r(y){let g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=0;for(let S=0;S<4;S++)v+=y[g+S]*M[S];return v}const T=[1,256,65536,16777216],M=[1/256,1/65536,1/16777216,1/4294967296],R=r(new Uint8ClampedArray([255,255,255,255]));function l(y){return y-Math.floor(y)}},30925:(y,g,v)=>{v.d(g,{w:()=>s});var S=v(16842),T=v(17244),M=v(60964);class s{constructor(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,g=arguments.length>1?arguments[1]:void 0;this._compareMinX=o,this._compareMinY=l,this._toBBox=y=>y,this._maxEntries=Math.max(4,y||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),g&&("function"==typeof g?this._toBBox=g:this._initFormat(g)),this.clear()}destroy(){this.clear(),R.prune(),A.prune(),D.prune(),C.prune()}all(y){this._all(this._data,y)}search(y,g){let v=this._data;const S=this._toBBox;if(x(y,v))for(R.clear();v;){for(let T=0,M=v.children.length;T<M;T++){const M=v.children[T],A=v.leaf?S(M):M;x(y,A)&&(v.leaf?g(M):_(y,A)?this._all(M,g):R.push(M))}v=R.pop()}}collides(y){let g=this._data;const v=this._toBBox;if(!x(y,g))return!1;for(R.clear();g;){for(let S=0,T=g.children.length;S<T;S++){const T=g.children[S],M=g.leaf?v(T):T;if(x(y,M)){if(g.leaf||_(y,M))return!0;R.push(T)}}g=R.pop()}return!1}load(y){if(!y.length)return this;if(y.length<this._minEntries){for(let g=0,v=y.length;g<v;g++)this.insert(y[g]);return this}let g=this._build(y.slice(0,y.length),0,y.length-1,0);if(this._data.children.length)if(this._data.height===g.height)this._splitRoot(this._data,g);else{if(this._data.height<g.height){const y=this._data;this._data=g,g=y}this._insert(g,this._data.height-g.height-1,!0)}else this._data=g;return this}insert(y){return y&&this._insert(y,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(y){if(!y)return this;let g,v=this._data,T=null,M=0,R=!1;const A=this._toBBox(y);for(D.clear(),C.clear();v||D.length>0;){var L;if(v||(v=D.pop(),T=D.data[D.length-1],M=null!==(L=C.pop())&&void 0!==L?L:0,R=!0),v.leaf&&(g=(0,S.qh)(v.children,y,v.children.length,v.indexHint),-1!==g))return v.children.splice(g,1),D.push(v),this._condense(D),this;R||v.leaf||!_(v,A)?T?(M++,v=T.children[M],R=!1):v=null:(D.push(v),C.push(M),M=0,T=v,v=v.children[0])}return this}toJSON(){return this._data}fromJSON(y){return this._data=y,this}_all(y,g){let v=y;for(A.clear();v;){var S;if(!0===v.leaf)for(const y of v.children)g(y);else A.pushArray(v.children);v=null!==(S=A.pop())&&void 0!==S?S:null}}_build(y,g,v,S){const T=v-g+1;let M=this._maxEntries;if(T<=M){const S=new w(y.slice(g,v+1));return h(S,this._toBBox),S}S||(S=Math.ceil(Math.log(T)/Math.log(M)),M=Math.ceil(T/M**(S-1)));const R=new b([]);R.height=S;const A=Math.ceil(T/M),D=A*Math.ceil(Math.sqrt(M));f(y,g,v,D,this._compareMinX);for(let C=g;C<=v;C+=D){const g=Math.min(C+D-1,v);f(y,C,g,A,this._compareMinY);for(let v=C;v<=g;v+=A){const T=Math.min(v+A-1,g);R.children.push(this._build(y,v,T,S-1))}}return h(R,this._toBBox),R}_chooseSubtree(y,g,v,S){for(;S.push(g),!0!==g.leaf&&S.length-1!==v;){let v,S=1/0,T=1/0;for(let M=0,R=g.children.length;M<R;M++){const R=g.children[M],A=c(R),D=d(y,R)-A;D<T?(T=D,S=A<S?A:S,v=R):D===T&&A<S&&(S=A,v=R)}g=v||g.children[0]}return g}_insert(y,g,v){const S=this._toBBox,T=v?y:S(y);D.clear();const M=this._chooseSubtree(T,this._data,g,D);for(M.children.push(y),r(M,T);g>=0&&D.data[g].children.length>this._maxEntries;)this._split(D,g),g--;this._adjustParentBBoxes(T,D,g)}_split(y,g){const v=y.data[g],S=v.children.length,T=this._minEntries;this._chooseSplitAxis(v,T,S);const M=this._chooseSplitIndex(v,T,S);if(!M)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const R=v.children.splice(M,v.children.length-M),A=v.leaf?new w(R):new b(R);A.height=v.height,h(v,this._toBBox),h(A,this._toBBox),g?y.data[g-1].children.push(A):this._splitRoot(v,A)}_splitRoot(y,g){this._data=new b([y,g]),this._data.height=y.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(y,g,v){let S,T,M;S=T=1/0;for(let R=g;R<=v-g;R++){const g=a(y,0,R,this._toBBox),A=a(y,R,v,this._toBBox),D=u(g,A),C=c(g)+c(A);D<S?(S=D,M=R,T=C<T?C:T):D===S&&C<T&&(T=C,M=R)}return M}_chooseSplitAxis(y,g,v){const S=y.leaf?this._compareMinX:o,T=y.leaf?this._compareMinY:l;this._allDistMargin(y,g,v,S)<this._allDistMargin(y,g,v,T)&&y.children.sort(S)}_allDistMargin(y,g,v,S){y.children.sort(S);const T=this._toBBox,M=a(y,0,g,T),R=a(y,v-g,v,T);let A=m(M)+m(R);for(let D=g;D<v-g;D++){const g=y.children[D];r(M,y.leaf?T(g):g),A+=m(M)}for(let D=v-g-1;D>=g;D--){const g=y.children[D];r(R,y.leaf?T(g):g),A+=m(R)}return A}_adjustParentBBoxes(y,g,v){for(let S=v;S>=0;S--)r(g.data[S],y)}_condense(y){for(let g=y.length-1;g>=0;g--){const v=y.data[g];if(0===v.children.length)if(g>0){const T=y.data[g-1],M=T.children;M.splice((0,S.qh)(M,v,M.length,T.indexHint),1)}else this.clear();else h(v,this._toBBox)}}_initFormat(y){const g=["return a"," - b",";"];this._compareMinX=new Function("a","b",g.join(y[0])),this._compareMinY=new Function("a","b",g.join(y[1])),this._toBBox=new Function("a","return {minX: a"+y[0]+", minY: a"+y[1]+", maxX: a"+y[2]+", maxY: a"+y[3]+"};")}}function h(y,g){a(y,0,y.children.length,g,y)}function a(y,g,v,S,T){T||(T=new w([])),T.minX=1/0,T.minY=1/0,T.maxX=-1/0,T.maxY=-1/0;for(let M,R=g;R<v;R++)M=y.children[R],r(T,y.leaf?S(M):M);return T}function r(y,g){y.minX=Math.min(y.minX,g.minX),y.minY=Math.min(y.minY,g.minY),y.maxX=Math.max(y.maxX,g.maxX),y.maxY=Math.max(y.maxY,g.maxY)}function o(y,g){return y.minX-g.minX}function l(y,g){return y.minY-g.minY}function c(y){return(y.maxX-y.minX)*(y.maxY-y.minY)}function m(y){return y.maxX-y.minX+(y.maxY-y.minY)}function d(y,g){return(Math.max(g.maxX,y.maxX)-Math.min(g.minX,y.minX))*(Math.max(g.maxY,y.maxY)-Math.min(g.minY,y.minY))}function u(y,g){const v=Math.max(y.minX,g.minX),S=Math.max(y.minY,g.minY),T=Math.min(y.maxX,g.maxX),M=Math.min(y.maxY,g.maxY);return Math.max(0,T-v)*Math.max(0,M-S)}function _(y,g){return y.minX<=g.minX&&y.minY<=g.minY&&g.maxX<=y.maxX&&g.maxY<=y.maxY}function x(y,g){return g.minX<=y.maxX&&g.minY<=y.maxY&&g.maxX>=y.minX&&g.maxY>=y.minY}function f(y,g,v,S,T){const R=[g,v];for(;R.length;){const g=R.pop(),v=R.pop();if(g-v<=S)continue;const A=v+Math.ceil((g-v)/S/2)*S;(0,M.q)(y,A,v,g,T),R.push(v,A,A,g)}}const R=new T.A,A=new T.A,D=new T.A,C=new T.A({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new S.vW}}class w extends B{constructor(y){super(),this.children=y,this.leaf=!0}}class b extends B{constructor(y){super(),this.children=y,this.leaf=!1}}},40954:(y,g,v)=>{v.d(g,{A:()=>n});var S,T,M=v(50886),R=v(83157);(T=S||(S={}))[T.varint=0]="varint",T[T.fixed64=1]="fixed64",T[T.delimited=2]="delimited",T[T.fixed32=5]="fixed32",T[T.unknown=99]="unknown";const A=4294967296,D=new TextDecoder("utf-8"),C=(0,M.A)("safari")||(0,M.A)("ios")?6:(0,M.A)("ff")?12:32;class n{constructor(y,g){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,T=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y?y.byteLength:0;this._tag=0,this._dataType=S.unknown,this._init(y,g,v,T)}_init(y,g,v,S){this._data=y,this._dataView=g,this._pos=v,this._end=S}asUnsafe(){return this}clone(){return new n(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(y){this._pos=y}nextTag(y){for(;;){if(this._pos===this._end)return!1;const g=this._decodeVarint();if(this._tag=g>>3,this._dataType=7&g,!y||y===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const y=this._decodeVarint();return this._tag=y>>3,this._dataType=7&y,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let y=4294967295;if(y=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return y;if(y=(y|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return y;if(y=(y|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return y;if(y=(y|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return y;if(y=(y|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return y;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const y=this.getUInt32();return y>>>1^-(1&y)|0}getSInt64(){return this._decodeSVarint()}getBool(){const y=0!==this._data[this._pos];return this._skip(1),y}getEnum(){return this._decodeVarint()}getFixed64(){const y=this._dataView,g=this._pos,v=y.getUint32(g,!0)+y.getUint32(g+4,!0)*A;return this._skip(8),v}getSFixed64(){const y=this._dataView,g=this._pos,v=y.getUint32(g,!0)+y.getInt32(g+4,!0)*A;return this._skip(8),v}getDouble(){const y=this._dataView.getFloat64(this._pos,!0);return this._skip(8),y}getFixed32(){const y=this._dataView.getUint32(this._pos,!0);return this._skip(4),y}getSFixed32(){const y=this._dataView.getInt32(this._pos,!0);return this._skip(4),y}getFloat(){const y=this._dataView.getFloat32(this._pos,!0);return this._skip(4),y}getString(){const y=this._getLength(),g=this._pos,v=this._toString(this._data,g,g+y);return this._skip(y),v}getBytes(){const y=this._getLength(),g=this._pos,v=this._toBytes(this._data,g,g+y);return this._skip(y),v}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(y,g,v,S){const T=this.getMessage(),M=y(T,g,v,S);return T.release(),M}processMessage(y){const g=this.getMessage(),v=y(g);return g.release(),v}getMessage(){const y=this._getLength(),g=n.pool.acquire();return g._init(this._data,this._dataView,this._pos,this._pos+y),this._skip(y),g}release(){n.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case S.varint:this._decodeVarint();break;case S.fixed64:this._skip(8);break;case S.delimited:this._skip(this._getLength());break;case S.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(y){this._skip(y)}_skip(y){if(this._pos+y>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=y}_decodeVarint(){const y=this._data;let g=this._pos,v=0,S=0;if(this._end-g>=10)do{if(S=y[g++],v|=127&S,0==(128&S))break;if(S=y[g++],v|=(127&S)<<7,0==(128&S))break;if(S=y[g++],v|=(127&S)<<14,0==(128&S))break;if(S=y[g++],v|=(127&S)<<21,0==(128&S))break;if(S=y[g++],v+=268435456*(127&S),0==(128&S))break;if(S=y[g++],v+=34359738368*(127&S),0==(128&S))break;if(S=y[g++],v+=4398046511104*(127&S),0==(128&S))break;if(S=y[g++],v+=562949953421312*(127&S),0==(128&S))break;if(S=y[g++],v+=72057594037927940*(127&S),0==(128&S))break;if(S=y[g++],v+=0x8000000000000000*(127&S),0==(128&S))break;throw new Error("Varint too long!")}while(0);else{let T=1;for(;g!==this._end&&(S=y[g],0!=(128&S));)++g,v+=(127&S)*T,T*=128;if(g===this._end)throw new Error("Varint overrun!");++g,v+=S*T}return this._pos=g,v}_decodeSVarint(){const y=this._data;let g,v=0,S=0;const T=1&y[this._pos];if(S=y[this._pos++],v|=127&S,0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v|=(127&S)<<7,0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v|=(127&S)<<14,0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v|=(127&S)<<21,0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v+=268435456*(127&S),0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v+=34359738368*(127&S),0==(128&S))return T?-(v+1)/2:v/2;if(S=y[this._pos++],v+=4398046511104*(127&S),0==(128&S))return T?-(v+1)/2:v/2;if(g=BigInt(v),S=y[this._pos++],g+=0x2000000000000n*BigInt(127&S),0==(128&S))return Number(T?-(g+1n)/2n:g/2n);if(S=y[this._pos++],g+=0x100000000000000n*BigInt(127&S),0==(128&S))return Number(T?-(g+1n)/2n:g/2n);if(S=y[this._pos++],g+=0x8000000000000000n*BigInt(127&S),0==(128&S))return Number(T?-(g+1n)/2n:g/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==S.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(y,g,v){if((v=Math.min(this._end,v))-g>C){const S=y.subarray(g,v);return D.decode(S)}let S="",T="";for(let M=g;M<v;++M){const g=y[M];128&g?T+="%"+g.toString(16):(S+=decodeURIComponent(T)+String.fromCharCode(g),T="")}return T.length&&(S+=decodeURIComponent(T)),S}_toBytes(y,g,v){return v=Math.min(this._end,v),new Uint8Array(y.buffer,g,v-g)}}n.pool=new R.A(n,void 0,(y=>{y._data=null,y._dataView=null}))},5144:(y,g,v)=>{v.d(g,{O3:()=>e,Ox:()=>_,bR:()=>h,dC:()=>S});var S,T;!function(y){y[y.Unknown=0]="Unknown",y[y.Point=1]="Point",y[y.LineString=2]="LineString",y[y.Polygon=3]="Polygon"}(S||(S={}));class h{constructor(y,g){this.x=y,this.y=g}clone(){return new h(this.x,this.y)}equals(y,g){return y===this.x&&g===this.y}isEqual(y){return y.x===this.x&&y.y===this.y}setCoords(y,g){return this.x=y,this.y=g,this}normalize(){const y=this.x,g=this.y,v=Math.sqrt(y*y+g*g);return this.x/=v,this.y/=v,this}rightPerpendicular(){const y=this.x;return this.x=this.y,this.y=-y,this}leftPerpendicular(){const y=this.x;return this.x=-this.y,this.y=y,this}move(y,g){return this.x+=y,this.y+=g,this}assign(y){return this.x=y.x,this.y=y.y,this}assignAdd(y,g){return this.x=y.x+g.x,this.y=y.y+g.y,this}assignSub(y,g){return this.x=y.x-g.x,this.y=y.y-g.y,this}rotate(y,g){const v=this.x,S=this.y;return this.x=v*y-S*g,this.y=v*g+S*y,this}scale(y){return this.x*=y,this.y*=y,this}length(){const y=this.x,g=this.y;return Math.sqrt(y*y+g*g)}sub(y){return this.x-=y.x,this.y-=y.y,this}add(y){return this.x+=y.x,this.y+=y.y,this}static distance(y,g){const v=g.x-y.x,S=g.y-y.y;return Math.sqrt(v*v+S*S)}static add(y,g){return new h(y.x+g.x,y.y+g.y)}static sub(y,g){return new h(y.x-g.x,y.y-g.y)}}class n{constructor(y,g,v){this.ratio=y,this.x=g,this.y=v}}class e{constructor(y,g,v){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,T=arguments.length>4&&void 0!==arguments[4]?arguments[4]:8;this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=S,this._pixelMargin=T,this._tileSize=512*S,this._dz=y,this._yPos=g,this._xPos=v}setPixelMargin(y){y!==this._pixelMargin&&(this._pixelMargin=y,this.setExtent(this._extent))}setExtent(y){this._extent=y,this._finalRatio=this._tileSize/y*(1<<this._dz);let g=this._pixelRatio*this._pixelMargin;g/=this._finalRatio;const v=y>>this._dz;g>v&&(g=v),this._margin=g,this._xmin=v*this._xPos-g,this._ymin=v*this._yPos-g,this._xmax=this._xmin+v+2*g,this._ymax=this._ymin+v+2*g}reset(y){this._type=y,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(y,g){this._pushLine(),this._prevIsIn=this._isIn(y,g),this._moveTo(y,g,this._prevIsIn),this._prevPt=new h(y,g),this._firstPt=new h(y,g),this._dist=0}lineTo(y,g){const v=this._isIn(y,g),S=new h(y,g),T=h.distance(this._prevPt,S);let M,R,A,D,C,L,k,U;if(v)this._prevIsIn?this._lineTo(y,g,!0):(M=this._prevPt,R=S,A=this._intersect(R,M),this._start=this._dist+T*(1-this._r),this._lineTo(A.x,A.y,!0),this._lineTo(R.x,R.y,!0));else if(this._prevIsIn)R=this._prevPt,M=S,A=this._intersect(R,M),this._lineTo(A.x,A.y,!0),this._lineTo(M.x,M.y,!1);else{const y=this._prevPt,g=S;if(y.x<=this._xmin&&g.x<=this._xmin||y.x>=this._xmax&&g.x>=this._xmax||y.y<=this._ymin&&g.y<=this._ymin||y.y>=this._ymax&&g.y>=this._ymax)this._lineTo(g.x,g.y,!1);else{const v=[];if((y.x<this._xmin&&g.x>this._xmin||y.x>this._xmin&&g.x<this._xmin)&&(D=(this._xmin-y.x)/(g.x-y.x),U=y.y+D*(g.y-y.y),U<=this._ymin?L=!1:U>=this._ymax?L=!0:v.push(new n(D,this._xmin,U))),(y.x<this._xmax&&g.x>this._xmax||y.x>this._xmax&&g.x<this._xmax)&&(D=(this._xmax-y.x)/(g.x-y.x),U=y.y+D*(g.y-y.y),U<=this._ymin?L=!1:U>=this._ymax?L=!0:v.push(new n(D,this._xmax,U))),(y.y<this._ymin&&g.y>this._ymin||y.y>this._ymin&&g.y<this._ymin)&&(D=(this._ymin-y.y)/(g.y-y.y),k=y.x+D*(g.x-y.x),k<=this._xmin?C=!1:k>=this._xmax?C=!0:v.push(new n(D,k,this._ymin))),(y.y<this._ymax&&g.y>this._ymax||y.y>this._ymax&&g.y<this._ymax)&&(D=(this._ymax-y.y)/(g.y-y.y),k=y.x+D*(g.x-y.x),k<=this._xmin?C=!1:k>=this._xmax?C=!0:v.push(new n(D,k,this._ymax))),0===v.length)C?L?this._lineTo(this._xmax,this._ymax,!0):this._lineTo(this._xmax,this._ymin,!0):L?this._lineTo(this._xmin,this._ymax,!0):this._lineTo(this._xmin,this._ymin,!0);else if(v.length>1&&v[0].ratio>v[1].ratio)this._start=this._dist+T*v[1].ratio,this._lineTo(v[1].x,v[1].y,!0),this._lineTo(v[0].x,v[0].y,!0);else{this._start=this._dist+T*v[0].ratio;for(let y=0;y<v.length;y++)this._lineTo(v[y].x,v[y].y,!0)}this._lineTo(g.x,g.y,!1)}}this._dist+=T,this._prevIsIn=v,this._prevPt=S}close(){if(this._line.length>2){const y=this._firstPt,g=this._prevPt;y.x===g.x&&y.y===g.y||this.lineTo(y.x,y.y);const v=this._line;let S=v.length;for(;S>=4&&(v[0].x===v[1].x&&v[0].x===v[S-2].x||v[0].y===v[1].y&&v[0].y===v[S-2].y);)v.pop(),v[0].x=v[S-2].x,v[0].y=v[S-2].y,--S}}result(){let y=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._pushLine(),0===this._lines.length?null:(this._type===S.Polygon&&y&&x.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==S.LineString)throw new Error("Only valid for lines");this._pushLine();const y=this._lines,g=y.length;if(0===g)return null;const v=[];for(let S=0;S<g;S++)v.push({line:y[S],start:this._starts[S]||0});return v}_isIn(y,g){return y>=this._xmin&&y<=this._xmax&&g>=this._ymin&&g<=this._ymax}_intersect(y,g){let v,S,T;if(g.x>=this._xmin&&g.x<=this._xmax)S=g.y<=this._ymin?this._ymin:this._ymax,T=(S-y.y)/(g.y-y.y),v=y.x+T*(g.x-y.x);else if(g.y>=this._ymin&&g.y<=this._ymax)v=g.x<=this._xmin?this._xmin:this._xmax,T=(v-y.x)/(g.x-y.x),S=y.y+T*(g.y-y.y);else{S=g.y<=this._ymin?this._ymin:this._ymax,v=g.x<=this._xmin?this._xmin:this._xmax;const M=(v-y.x)/(g.x-y.x),R=(S-y.y)/(g.y-y.y);M<R?(T=M,S=y.y+M*(g.y-y.y)):(T=R,v=y.x+R*(g.x-y.x))}return this._r=T,new h(v,S)}_pushLine(){this._line&&(this._type===S.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===S.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===S.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(y,g,v){this._type!==S.Polygon?v&&(y=Math.round((y-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line.push(new h(y,g))):(v||(y<this._xmin&&(y=this._xmin),y>this._xmax&&(y=this._xmax),g<this._ymin&&(g=this._ymin),g>this._ymax&&(g=this._ymax)),y=Math.round((y-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line.push(new h(y,g)),this._isH=!1,this._isV=!1)}_lineTo(y,g,v){let T,M;if(this._type!==S.Polygon)if(v){if(y=Math.round((y-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(T=this._line[this._line.length-1],T.equals(y,g)))return;this._line.push(new h(y,g))}else this._line&&this._line.length>0&&this._pushLine();else if(v||(y<this._xmin&&(y=this._xmin),y>this._xmax&&(y=this._xmax),g<this._ymin&&(g=this._ymin),g>this._ymax&&(g=this._ymax)),y=Math.round((y-(this._xmin+this._margin))*this._finalRatio),g=Math.round((g-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){T=this._line[this._line.length-1];const v=T.x===y,S=T.y===g;if(v&&S)return;this._isH&&v||this._isV&&S?(T.x=y,T.y=g,M=this._line[this._line.length-2],M.x===y&&M.y===g?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(M=this._line[this._line.length-2],this._isH=M.x===y,this._isV=M.y===g)):(this._isH=M.x===y,this._isV=M.y===g)):(this._line.push(new h(y,g)),this._isH=v,this._isV=S)}else this._line.push(new h(y,g))}}class _{setExtent(y){this._ratio=4096===y?1:4096/y}get validateTessellation(){return this._ratio<1}reset(y){this._lines=[],this._line=null}moveTo(y,g){this._line&&this._lines.push(this._line),this._line=[];const v=this._ratio;this._line.push(new h(y*v,g*v))}lineTo(y,g){const v=this._ratio;this._line.push(new h(y*v,g*v))}close(){const y=this._line;y&&!y[0].isEqual(y[y.length-1])&&y.push(y[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(y){y[y.sideLeft=0]="sideLeft",y[y.sideRight=1]="sideRight",y[y.sideTop=2]="sideTop",y[y.sideBottom=3]="sideBottom"}(T||(T={}));class x{static simplify(y,g,v){if(!v)return;const S=-g,M=y+g,R=-g,A=y+g,D=[],C=[],L=v.length;for(let U=0;U<L;++U){const y=v[U];if(!y||y.length<2)continue;let g,L=y[0];const k=y.length;for(let v=1;v<k;++v)g=y[v],L.x===g.x&&(L.x<=S&&(L.y>g.y?(D.push(U),D.push(v),D.push(T.sideLeft),D.push(-1)):(C.push(U),C.push(v),C.push(T.sideLeft),C.push(-1))),L.x>=M&&(L.y<g.y?(D.push(U),D.push(v),D.push(T.sideRight),D.push(-1)):(C.push(U),C.push(v),C.push(T.sideRight),C.push(-1)))),L.y===g.y&&(L.y<=R&&(L.x<g.x?(D.push(U),D.push(v),D.push(T.sideTop),D.push(-1)):(C.push(U),C.push(v),C.push(T.sideTop),C.push(-1))),L.y>=A&&(L.x>g.x?(D.push(U),D.push(v),D.push(T.sideBottom),D.push(-1)):(C.push(U),C.push(v),C.push(T.sideBottom),C.push(-1)))),L=g}if(0===D.length||0===C.length)return;x.fillParent(v,C,D),x.fillParent(v,D,C);const k=[];x.calcDeltas(k,C,D),x.calcDeltas(k,D,C),x.addDeltas(k,v)}static fillParent(y,g,v){const S=v.length,M=g.length;for(let R=0;R<M;R+=4){const M=g[R],A=g[R+1],D=g[R+2],C=y[M][A-1],L=y[M][A];let k=8092,U=-1;for(let g=0;g<S;g+=4){if(v[g+2]!==D)continue;const S=v[g],M=v[g+1],R=y[S][M-1],A=y[S][M];switch(D){case T.sideLeft:case T.sideRight:if(l(C.y,R.y,A.y)&&l(L.y,R.y,A.y)){const y=Math.abs(A.y-R.y);y<k&&(k=y,U=g)}break;case T.sideTop:case T.sideBottom:if(l(C.x,R.x,A.x)&&l(L.x,R.x,A.x)){const y=Math.abs(A.x-R.x);y<k&&(k=y,U=g)}}}g[R+3]=U}}static calcDeltas(y,g,v){const S=g.length;for(let T=0;T<S;T+=4){const S=[],M=x.calcDelta(T,g,v,S);y.push(g[T]),y.push(g[T+1]),y.push(g[T+2]),y.push(M)}}static calcDelta(y,g,v,S){const T=g[y+3];if(-1===T)return 0;const M=S.length;return M>1&&S[M-2]===T?0:(S.push(T),x.calcDelta(T,v,g,S)+1)}static addDeltas(y,g){const v=y.length;let S=0;for(let T=0;T<v;T+=4){const g=y[T+3];g>S&&(S=g)}for(let M=0;M<v;M+=4){const v=g[y[M]],R=y[M+1],A=S-y[M+3];switch(y[M+2]){case T.sideLeft:v[R-1].x-=A,v[R].x-=A,1===R&&(v[v.length-1].x-=A),R===v.length-1&&(v[0].x-=A);break;case T.sideRight:v[R-1].x+=A,v[R].x+=A,1===R&&(v[v.length-1].x+=A),R===v.length-1&&(v[0].x+=A);break;case T.sideTop:v[R-1].y-=A,v[R].y-=A,1===R&&(v[v.length-1].y-=A),R===v.length-1&&(v[0].y-=A);break;case T.sideBottom:v[R-1].y+=A,v[R].y+=A,1===R&&(v[v.length-1].y+=A),R===v.length-1&&(v[0].y+=A)}}}}const l=(y,g,v)=>y>=g&&y<=v||y>=v&&y<=g},16906:(y,g,v)=>{v.d(g,{X_:()=>i,i1:()=>o,zx:()=>d});var S=v(48237),T=v(49049);const M=96;function i(y,g){const v=g||y.extent,S=y.width,R=(0,T.GA)(null===v||void 0===v?void 0:v.spatialReference);return v&&S?v.width/S*R*T.dy*M:0}function o(y,g){return y/((0,T.GA)(g)*T.dy*M)}function d(y,g,v){return function a(y,g){return 0===g||(0,S.Sp)(y,g)||y<g}(y,g)&&function p(y,g){return 0===g||(0,S.Sp)(y,g)||y>g}(y,v)}},28155:(y,g,v)=>{v.d(g,{$:()=>S,s:()=>T});const S=15.5,T=1024},87663:(y,g,v)=>{v.d(g,{c:()=>e,k:()=>i});var S=v(31714),T=v(48237),M=v(28155);const r=y=>"vertical"===y||"horizontal"===y||"cross"===y||"esriSFSCross"===y||"esriSFSVertical"===y||"esriSFSHorizontal"===y;function e(y,g,v){const S=g.style,M=(0,T.yR)(Math.ceil(v)),R=r(S)?8*M:16*M,A=2*M;y.width=R,y.height=R;const D=y.getContext("2d");D.strokeStyle="#FFFFFF",D.lineWidth=M,D.beginPath(),"vertical"!==S&&"cross"!==S&&"esriSFSCross"!==S&&"esriSFSVertical"!==S||(D.moveTo(R/2,-A),D.lineTo(R/2,R+A)),"horizontal"!==S&&"cross"!==S&&"esriSFSCross"!==S&&"esriSFSHorizontal"!==S||(D.moveTo(-A,R/2),D.lineTo(R+A,R/2)),"backward-diagonal"!==S&&"diagonal-cross"!==S&&"esriSFSDiagonalCross"!==S&&"esriSFSBackwardDiagonal"!==S||(D.moveTo(-A,-A),D.lineTo(R+A,R+A),D.moveTo(R-A,-A),D.lineTo(R+A,A),D.moveTo(-A,R-A),D.lineTo(A,R+A)),"forward-diagonal"!==S&&"diagonal-cross"!==S&&"esriSFSForwardDiagonal"!==S&&"esriSFSDiagonalCross"!==S||(D.moveTo(R+A,-A),D.lineTo(-A,R+A),D.moveTo(A,-A),D.lineTo(-A,A),D.moveTo(R+A,R-A),D.lineTo(R-A,R+A)),D.stroke();const C=D.getImageData(0,0,y.width,y.height),L=new Uint8Array(C.data);let k;for(let T=0;T<L.length;T+=4)k=L[T+3]/255,L[T]=L[T]*k,L[T+1]=L[T+1]*k,L[T+2]=L[T+2]*k;return[L,y.width,y.height,M]}function i(y,g){const v="Butt"===g,T="Square"===g,R=!v&&!T;y.length%2==1&&(y=[...y,...y]);const A=M.$,D=2*A;let C=0;for(const S of y)C+=S;const L=Math.round(C*A),k=new Float32Array(L*D),U=.5*A;let O=0,V=0,E=.5,q=!0;for(const S of y){for(O=V,V+=S*A;E<=V;){let y=.5;for(;y<D;){const g=(y-.5)*L+E-.5,S=R?(y-A)*(y-A):Math.abs(y-A);k[g]=q?v?Math.max(Math.max(O+U-E,S),Math.max(E-V+U,S)):S:R?Math.min((E-O)*(E-O)+S,(E-V)*(E-V)+S):T?Math.min(Math.max(E-O,S),Math.max(V-E,S)):Math.min(Math.max(E-O+U,S),Math.max(V+U-E,S)),y++}E++}q=!q}const F=k.length,z=new Uint8Array(4*F);for(let M=0;M<F;++M){const y=(R?Math.sqrt(k[M]):k[M])/A;(0,S.U)(y,z,4*M)}return[z,L,D]}},85794:(y,g,v)=>{v.d(g,{A:()=>s});var S,T=v(5144);!function(y){y[y.moveTo=1]="moveTo",y[y.lineTo=2]="lineTo",y[y.close=7]="close"}(S||(S={}));class s{constructor(y,g){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=v;const S=g.keys,T=g.values,M=y.asUnsafe();for(;M.next();)switch(M.tag()){case 1:this.id=M.getUInt64();break;case 2:{const y=M.getMessage().asUnsafe(),g=this.values;for(;!y.empty();){const v=y.getUInt32(),M=y.getUInt32();g[S[v]]=T[M]}y.release();break}case 3:this.type=M.getUInt32();break;case 4:this._pbfGeometry=M.getMessage();break;default:M.skip()}}getGeometry(y){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const g=this._pbfGeometry.asUnsafe();let v,M;this._pbfGeometry=null,y?y.reset(this.type):v=[];let R,A=S.moveTo,D=0,C=0,L=0;for(;!g.empty();){if(0===D){const y=g.getUInt32();A=7&y,D=y>>3}switch(D--,A){case S.moveTo:C+=g.getSInt32(),L+=g.getSInt32(),y?y.moveTo(C,L):v&&(M&&v.push(M),M=[],M.push(new T.bR(C,L)));break;case S.lineTo:C+=g.getSInt32(),L+=g.getSInt32(),y?y.lineTo(C,L):M&&M.push(new T.bR(C,L));break;case S.close:y?y.close():M&&!M[0].equals(C,L)&&M.push(M[0].clone());break;default:throw g.release(),new Error("Invalid path operation")}}return y?R=y.result():v&&(M&&v.push(M),R=v),g.release(),this._geometry=R,R}}},29457:(y,g,v)=>{v.d(g,{GW:()=>p,IU:()=>d,Jo:()=>R,MG:()=>M,Wh:()=>a,cP:()=>P,os:()=>L,p6:()=>h,pJ:()=>A,ru:()=>N,s3:()=>I,w4:()=>w,wV:()=>l,yM:()=>b,z0:()=>f});var S=v(78966),T=v(5144);const M=Number.POSITIVE_INFINITY,R=Math.PI,A=2*R,D=128/R,C=256/360,L=R/180,k=1/Math.LN2;function a(y,g){return(y%=g)>=0?y:y+g}function f(y){return a(y*D,256)}function l(y){return a(y*C,256)}function h(y){return Math.log(y)*k}function p(y,g,v){return y*(1-v)+g*v}const U=8,O=14,V=16;function d(y){return U+Math.max((y-O)*V,0)}function I(y,g,v){let S,T,M,R=0;for(const A of v){S=A.length;for(let v=1;v<S;++v)T=A[v-1],M=A[v],T.y>g!=M.y>g&&((M.x-T.x)*(g-T.y)-(M.y-T.y)*(y-T.x)>0?R++:R--)}return 0!==R}function N(y,g,v,T){let M,R,A,D;const C=T*T;for(const L of v){const v=L.length;if(!(v<2)){M=L[0].x,R=L[0].y;for(let T=1;T<v;++T){if(A=L[T].x,D=L[T].y,(0,S.Ng)(y,g,M,R,A,D)<C)return!0;M=A,R=D}}}return!1}function w(y,g,v,S,T,M,R){const A=Math.max(S,Math.min(g,M))-g,D=Math.max(T,Math.min(v,R))-v;return A*A+D*D<=y*y}function P(y,g){if(0===g||Number.isNaN(g))return y;const v=[],S=new T.bR(0,0),M=new T.bR(0,0),R=new T.bR(0,0);for(let A=0;A<y.length;A++){const D=y[A],C=[];for(let y=0;y<D.length;y++){const v=D[y-1],A=D[y],L=D[y+1];0===y?S.setCoords(0,0):S.assignSub(A,v).normalize().rightPerpendicular(),y===D.length-1?M.setCoords(0,0):M.assignSub(L,A).normalize().rightPerpendicular(),R.assignAdd(S,M).normalize();const k=R.x*M.x+R.y*M.y;0!==k&&R.scale(1/k),C.push(T.bR.add(A,R.scale(g)))}v.push(C)}return v}function b(y,g,v,S){const M=new T.bR(y[0],y[1]);if(M.scale(S),"viewport"===g){const y=-v*(Math.PI/180),g=Math.cos(y),S=Math.sin(y);M.rotate(g,S)}return M}},25442:(y,g,v)=>{v.d(g,{A:()=>e});class e{constructor(y){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=y.clone();const g=y.asUnsafe();for(;g.next();)switch(g.tag()){case 1:this.name=g.getString();break;case 3:this.keys.push(g.getString());break;case 4:this.values.push(g.processMessage(e._parseValue));break;case 5:this.extent=g.getUInt32();break;default:g.skip()}}getData(){return this._pbfLayer}static _parseValue(y){for(;y.next();)switch(y.tag()){case 1:return y.getString();case 2:return y.getFloat();case 3:return y.getDouble();case 4:return y.getInt64();case 5:return y.getUInt64();case 6:return y.getSInt64();case 7:return y.getBool();default:y.skip()}return null}}},20943:(y,g,v)=>{v.d(g,{A:()=>t});class t{constructor(){let y=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,g=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;this.x=y,this.y=g,this.width=v,this.height=S}get isEmpty(){return this.width<=0||this.height<=0}union(y){this.x=Math.min(this.x,y.x),this.y=Math.min(this.y,y.y),this.width=Math.max(this.width,y.width),this.height=Math.max(this.height,y.height)}}},49214:(y,g,v)=>{v.d(g,{A:()=>i});var S=v(50886),T=v(21847),M=v(231),R=v(72492),A=v(78443);const n=(y,g)=>y.key.level-g.key.level!=0?y.key.level-g.key.level:y.key.row-g.key.row!=0?y.key.row-g.key.row:y.key.col-g.key.col;class i extends M.A{constructor(y){super(),this._tileInfoView=y}renderChildren(y){this.sortChildren(n),this.setStencilReference(y),super.renderChildren(y)}createRenderParams(y){const{state:g}=y,v=super.createRenderParams(y);return v.requiredLevel=this._tileInfoView.getClosestInfoForScale(g.scale).level,v.displayLevel=this._tileInfoView.tileInfo.scaleToZoom(g.scale),v}prepareRenderPasses(y){const g=super.prepareRenderPasses(y);return g.push(y.registerRenderPass({name:"stencil",brushes:[R.A],drawPhase:T.S5.DEBUG|T.S5.MAP|T.S5.HIGHLIGHT|T.S5.LABEL,target:()=>this.getStencilTarget()})),(0,S.A)("esri-tiles-debug")&&g.push(y.registerRenderPass({name:"tileInfo",brushes:[A.A],drawPhase:T.S5.DEBUG,target:()=>this.children})),g}getStencilTarget(){return this.children}setStencilReference(y){let g=1;for(const v of this.children)v.stencilRef=g++}}},86083:(y,g,v)=>{v.d(g,{e:()=>m});var S,T=v(80671),M=v(39652),R=v(86479),A=v(4180),D=v(63390),C=v(57453),L=(v(50886),v(89412),v(76761),v(68682)),k=v(16906),U=v(5528),O=v(45104),V=v(6673);let E=S=class extends V.A{constructor(y){super(y),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new S({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,T._)([(0,C.MZ)({type:[Number,String],json:{write:!0}})],E.prototype,"left",void 0),(0,T._)([(0,C.MZ)({type:[Number,String],json:{write:!0}})],E.prototype,"right",void 0),(0,T._)([(0,C.MZ)({type:[Number,String],json:{write:!0}})],E.prototype,"top",void 0),(0,T._)([(0,C.MZ)({type:[Number,String],json:{write:!0}})],E.prototype,"bottom",void 0),E=S=(0,T._)([(0,L.$)("esri.views.layers.support.ClipRect")],E);const q=E;var F=v(90874);let z=class extends V.A{constructor(y){super(y),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,T._)([(0,C.MZ)({type:[[[Number]]],json:{write:!0}})],z.prototype,"path",void 0),z=(0,T._)([(0,L.$)("esri.views.layers.support.Path")],z);const H=z,W=M.A.ofType({key:"type",base:null,typeMap:{rect:q,path:H,geometry:F.A}}),m=y=>{let g=class extends y{constructor(){super(...arguments),this.attached=!1,this.clips=new W,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){var y,g,v,S;const T=null===(y=null===(g=this.view)||void 0===g?void 0:g.spatialReferenceLocked)||void 0===y||y;(null===(v=this.view)||void 0===v?void 0:v.spatialReference)&&T&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new A.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new U.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,D.wB)((()=>this.suspended),(y=>{this.container&&(this.container.visible=!y)}),D.pc),(0,D.wB)((()=>this.updateSuspended),(y=>{this.view&&!y&&this.updateRequested&&this.view.requestUpdate()}),D.pc),(0,D.wB)((()=>{var y,g;return null!==(y=null===(g=this.layer)||void 0===g?void 0:g.opacity)&&void 0!==y?y:1}),(y=>{this.container&&(this.container.opacity=y)}),D.pc),(0,D.wB)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(y=>{this.container&&(this.container.blendMode=y)}),D.pc),(0,D.wB)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(y=>{this.container&&(this.container.effect=y)}),D.pc),(0,D.wB)((()=>this.highlightOptions),(y=>this.container.highlightOptions=y),D.pc),(0,D.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),D.pc),(0,D.wB)((()=>{var y;return{scale:null===(y=this.view)||void 0===y?void 0:y.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}}),(y=>{let{scale:g}=y;const v=null!=g&&this.isVisibleAtScale(g);v!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",v)}),D.pc)],"constructor"),null!==(S=this.view)&&void 0!==S&&S.whenLayerView?this.view.whenLayerView(this.layer).then((y=>{y===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var y;const g=null===(y=this.view)||void 0===y?void 0:y.spatialReference;return null==g||this.supportsSpatialReference(g)}get updateSuspended(){return this.suspended}get updating(){var y;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(y=this._updatingHandles)||void 0===y||!y.updating))}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(y){const g=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!g)return!0;const{minScale:v,maxScale:S}=g;return(0,k.zx)(y,v,S)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(y){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",y),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(y))):this.updateRequested=!1}hitTest(y,g){return Promise.resolve(null)}supportsSpatialReference(y){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const y=super.getSuspendInfo(),g=!this.spatialReferenceSupported,v=this.visibleAtCurrentScale;return g&&(y.spatialReferenceNotSupported=g),v&&(y.outsideScaleRange=v),y}addAttachHandles(y){this.addHandles(y,"attach")}};return(0,T._)([(0,C.MZ)()],g.prototype,"attached",void 0),(0,T._)([(0,C.MZ)({type:W,set(y){const g=(0,R.V)(y,this._get("clips"),W);this._set("clips",g)}})],g.prototype,"clips",void 0),(0,T._)([(0,C.MZ)()],g.prototype,"container",void 0),(0,T._)([(0,C.MZ)()],g.prototype,"moving",void 0),(0,T._)([(0,C.MZ)({readOnly:!0})],g.prototype,"spatialReferenceSupported",null),(0,T._)([(0,C.MZ)({readOnly:!0})],g.prototype,"updateParameters",void 0),(0,T._)([(0,C.MZ)()],g.prototype,"updateRequested",void 0),(0,T._)([(0,C.MZ)()],g.prototype,"updateSuspended",null),(0,T._)([(0,C.MZ)()],g.prototype,"updating",null),(0,T._)([(0,C.MZ)()],g.prototype,"view",void 0),(0,T._)([(0,C.MZ)({readOnly:!0})],g.prototype,"visibleAtCurrentScale",void 0),(0,T._)([(0,C.MZ)({type:O.A})],g.prototype,"highlightOptions",void 0),g=(0,T._)([(0,L.$)("esri.views.2d.layers.LayerView2D")],g),g}},27634:(y,g,v)=>{v.r(g),v.d(g,{default:()=>Mt});var S=v(80671),T=v(66004),M=v(89412),R=v(35598),A=v(81618),D=v(57453),C=(v(50886),v(68682)),L=v(61163),k=v(57264),U=v(88965),O=v(78395),V=v(89766),E=v(4270),q=v(80563),F=v(20943);class RectangleBinPack_e{constructor(y,g){this._width=0,this._height=0,this._free=[],this._width=y,this._height=g,this._free.push(new F.A(0,0,y,g))}get width(){return this._width}get height(){return this._height}allocate(y,g){if(y>this._width||g>this._height)return new F.A;let v=null,S=-1;for(let T=0;T<this._free.length;++T){const M=this._free[T];y<=M.width&&g<=M.height&&(null===v||M.y<=v.y&&M.x<=v.x)&&(v=M,S=T)}return null===v?new F.A:(this._free.splice(S,1),v.width<v.height?(v.width>y&&this._free.push(new F.A(v.x+y,v.y,v.width-y,g)),v.height>g&&this._free.push(new F.A(v.x,v.y+g,v.width,v.height-g))):(v.width>y&&this._free.push(new F.A(v.x+y,v.y,v.width-y,v.height)),v.height>g&&this._free.push(new F.A(v.x,v.y+g,y,v.height-g))),new F.A(v.x,v.y,y,g))}release(y){for(let g=0;g<this._free.length;++g){const v=this._free[g];if(v.y===y.y&&v.height===y.height&&v.x+v.width===y.x)v.width+=y.width;else if(v.x===y.x&&v.width===y.width&&v.y+v.height===y.y)v.height+=y.height;else if(y.y===v.y&&y.height===v.height&&y.x+y.width===v.x)v.x=y.x,v.width+=y.width;else{if(y.x!==v.x||y.width!==v.width||y.y+y.height!==v.y)continue;v.y=y.y,v.height+=y.height}this._free.splice(g,1),this.release(y)}this._free.push(y)}}var z=v(60985),H=v(83663),W=v(83881);class n{constructor(y,g,v){this.width=0,this.height=0,this._dirties=[],this._glyphData=[],this._currentPage=0,this._glyphIndex={},this._textures=[],this._rangePromises=new Map,this.width=y,this.height=g,this._glyphSource=v,this._binPack=new RectangleBinPack_e(y-4,g-4),this._glyphData.push(new Uint8Array(y*g)),this._dirties.push(!0),this._textures.push(void 0)}getGlyphItems(y,g){const v=[],S=this._glyphSource,T=new Set;for(const R of g){const y=Math.floor(.00390625*R);T.add(y)}const M=[];return T.forEach((g=>{const v=y+g;if(this._rangePromises.has(v))M.push(this._rangePromises.get(v));else{const T=S.getRange(y,g).then((()=>{this._rangePromises.delete(v)}),(()=>{this._rangePromises.delete(v)}));this._rangePromises.set(v,T),M.push(T)}})),Promise.all(M).then((()=>{let T=this._glyphIndex[y];T||(T={},this._glyphIndex[y]=T);for(const M of g){const g=T[M];if(g){v[M]={sdf:!0,rect:g.rect,metrics:g.metrics,page:g.page,code:M};continue}const R=S.getGlyph(y,M);if(null===R||void 0===R||!R.metrics)continue;const A=R.metrics;let D;if(0===A.width)D=new F.A(0,0,0,0);else{const y=3,g=A.width+2*y,v=A.height+2*y;let S=g%4?4-g%4:4,T=v%4?4-v%4:4;1===S&&(S=5),1===T&&(T=5),D=this._binPack.allocate(g+S,v+T),D.isEmpty&&(this._dirties[this._currentPage]||(this._glyphData[this._currentPage]=null),this._currentPage=this._glyphData.length,this._glyphData.push(new Uint8Array(this.width*this.height)),this._dirties.push(!0),this._textures.push(void 0),this._binPack=new RectangleBinPack_e(this.width-4,this.height-4),D=this._binPack.allocate(g+S,v+T));const M=this._glyphData[this._currentPage],C=R.bitmap;let L,k;if(C)for(let R=0;R<v;R++){L=g*R,k=this.width*(D.y+R+1)+D.x;for(let y=0;y<g;y++)M[k+y+1]=C.at(L+y)}}T[M]={rect:D,metrics:A,tileIDs:null,page:this._currentPage},v[M]={sdf:!0,rect:D,metrics:A,page:this._currentPage,code:M},this._dirties[this._currentPage]=!0}return v}))}removeGlyphs(y){for(const g in this._glyphIndex){const v=this._glyphIndex[g];if(!v)continue;let S;for(const g in v)if(S=v[g],S.tileIDs.delete(y),0===S.tileIDs.size){const y=this._glyphData[S.page],T=S.rect;let M,R;for(let g=0;g<T.height;g++)for(M=this.width*(T.y+g)+T.x,R=0;R<T.width;R++)y[M+R]=0;delete v[g],this._dirties[S.page]=!0}}}bind(y,g,v){let S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!this._textures[v]){const g=new W.R;g.pixelFormat=z.Ab.ALPHA,g.wrapMode=z.pF.CLAMP_TO_EDGE,g.width=this.width,g.height=this.height,this._textures[v]=new H.g(y,g,new Uint8Array(this.width*this.height))}const T=this._textures[v];T.setSamplingMode(g),this._dirties[v]&&T.setData(this._glyphData[v]),y.bindTexture(T,S),this._dirties[v]=!1}destroy(){this.dispose()}dispose(){this._glyphData.length=0,this._binPack=null;for(const y of this._textures)y&&y.dispose();this._textures.length=0}}var G=v(53705),X=v(40954);class s{constructor(y){if(this._metrics=[],!y)return void(this._allBitmaps=null);const g=new Map;let v=0;for(;y.next();)switch(y.tag()){case 1:{const M=y.getMessage();for(;M.next();)switch(M.tag()){case 3:{const y=M.getMessage();let R,A,D,C,L,k,U;for(;y.next();)switch(y.tag()){case 1:R=y.getUInt32();break;case 2:A=y.getBytes();break;case 3:D=y.getUInt32();break;case 4:C=y.getUInt32();break;case 5:L=y.getSInt32();break;case 6:k=y.getSInt32();break;case 7:U=y.getUInt32();break;default:y.skip()}if(y.release(),R){var S,T;const y=null!==(S=null===(T=A)||void 0===T?void 0:T.length)&&void 0!==S?S:0;this._metrics[R]={width:D,height:C,left:L,top:k,advance:U,startOffset:v,length:y},g.set(R,A),v+=y}break}default:M.skip()}M.release();break}default:y.skip()}const M=new Uint8Array(v),R=this._metrics;for(const[A,D]of g){const{startOffset:y,length:g}=R[A];if(D)for(let v=0;v<g;++v)M[y+v]=D[v]}this._allBitmaps=M}getMetrics(y){return this._metrics[y]}getBitmap(y){if(!this._allBitmaps)return;const g=this._metrics[y];if(void 0===g)return;const{startOffset:v,length:S}=g;return 0!==S?new GlyphSource_n(this._allBitmaps,v,S):void 0}}class a{constructor(){this._ranges=[]}get ranges(){return this._ranges}getRange(y){return this._ranges[y]}addRange(y,g){this._ranges[y]=g}}class GlyphSource_r{constructor(y){this._glyphInfo={},this._baseURL=y}getRange(y,g){const v=this._getFontStack(y);if(v.getRange(g))return Promise.resolve();const S=256*g,T=S+255;if(this._baseURL){const M=this._baseURL.replace("{fontstack}",y).replace("{range}",S+"-"+T);return(0,G.A)(M,{responseType:"array-buffer"}).then((y=>{v.addRange(g,new s(new X.A(new Uint8Array(y.data),new DataView(y.data))))})).catch((()=>{v.addRange(g,new s)}))}return v.addRange(g,new s),Promise.resolve()}getGlyph(y,g){const v=this._getFontStack(y);if(!v)return;const S=Math.floor(g/256),T=v.getRange(S);return T?{metrics:T.getMetrics(g),bitmap:T.getBitmap(g)}:void 0}_getFontStack(y){let g=this._glyphInfo[y];return g||(g=this._glyphInfo[y]=new a),g}}class GlyphSource_n{constructor(y,g,v){this._array=y,this._start=g,this.length=v}at(y){return 0<=y&&y<this.length?this._array[this._start+y]:void 0}}var J=v(87663);class SpriteMosaic_o{constructor(y,g){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._size=[],this._mosaicsData=[],this._textures=[],this._dirties=[],this._maxItemSize=0,this._currentPage=0,this._pageWidth=0,this._pageHeight=0,this._mosaicRects={},this.pixelRatio=1,(y<=0||g<=0)&&console.error("Sprites mosaic defaultWidth and defaultHeight must be greater than zero!"),this._pageWidth=y,this._pageHeight=g,v>0&&(this._maxItemSize=v),this._binPack=new RectangleBinPack_e(y-4,g-4)}destroy(){this.dispose()}dispose(){this._binPack=null,this._mosaicsData.length=0,this._mosaicRects={};for(const y of this._textures)y&&y.dispose();this._textures.length=0}getWidth(y){return y>=this._size.length?-1:this._size[y][0]}getHeight(y){return y>=this._size.length?-1:this._size[y][1]}getPageSize(y){return y>=this._size.length?null:this._size[y]}setSpriteSource(y){if(this.dispose(),this.pixelRatio=y.devicePixelRatio,0===this._mosaicsData.length){this._binPack=new RectangleBinPack_e(this._pageWidth-4,this._pageHeight-4);const y=Math.floor(this._pageWidth),g=Math.floor(this._pageHeight),v=new Uint32Array(y*g);this._mosaicsData[0]=v,this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0)}this._sprites=y}getSpriteItem(y){var g;let v,S,T=arguments.length>1&&void 0!==arguments[1]&&arguments[1],M=this._mosaicRects[y];if(M)return M;if(!this._sprites||"loaded"!==this._sprites.loadStatus)return null;if(y&&y.startsWith("dasharray-")?([v,S]=this._rasterizeDash(y),T=!0):v=this._sprites.getSpriteInfo(y),null===(g=v)||void 0===g||!g.width||!v.height||v.width<0||v.height<0)return null;const R=v.width,A=v.height,[D,C,L]=this._allocateImage(R,A);return D.width<=0?null:(this._copy(D,v,C,L,T,S),M={type:"sprite",rect:D,width:R,height:A,sdf:v.sdf,simplePattern:!1,rasterizationScale:v.pixelRatio,page:C},this._mosaicRects[y]=M,M)}getSpriteItems(y){const g={};for(const v of y)g[v.name]=this.getSpriteItem(v.name,v.repeat);return g}getMosaicItemPosition(y,g){const v=this.getSpriteItem(y,g),S=v&&v.rect;if(!S)return null;S.width=v.width,S.height=v.height;const T=v.width,M=v.height;return{tl:[S.x+2,S.y+2],br:[S.x+2+T,S.y+2+M],page:v.page}}bind(y,g){let v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,S=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(v>=this._size.length||v>=this._mosaicsData.length)return;if(!this._textures[v]){const g=new W.R;g.wrapMode=z.pF.CLAMP_TO_EDGE,g.width=this._size[v][0],g.height=this._size[v][1],this._textures[v]=new H.g(y,g,new Uint8Array(this._mosaicsData[v].buffer))}const T=this._textures[v];T.setSamplingMode(g),this._dirties[v]&&T.setData(new Uint8Array(this._mosaicsData[v].buffer)),y.bindTexture(T,S),this._dirties[v]=!1}static _copyBits(y,g,v,S,T,M,R,A,D,C,L){let k=S*g+v,U=A*M+R;if(L){U-=M;for(let R=-1;R<=C;R++,k=((R+C)%C+S)*g+v,U+=M)for(let g=-1;g<=D;g++)T[U+g]=y[k+(g+D)%D]}else for(let O=0;O<C;O++){for(let g=0;g<D;g++)T[U+g]=y[k+g];k+=g,U+=M}}_copy(y,g,v,S,T,M){if(!this._sprites||"loaded"!==this._sprites.loadStatus||v>=this._mosaicsData.length)return;const R=new Uint32Array(M?M.buffer:this._sprites.image.buffer),A=this._mosaicsData[v];A&&R||console.error("Source or target images are uninitialized!");const D=M?g.width:this._sprites.width;SpriteMosaic_o._copyBits(R,D,g.x,g.y,A,S[0],y.x+2,y.y+2,g.width,g.height,T),this._dirties[v]=!0}_allocateImage(y,g){y+=2,g+=2;const v=Math.max(y,g);if(this._maxItemSize&&this._maxItemSize<v){const v=new F.A(0,0,y,g);return this._mosaicsData.push(new Uint32Array(y*g)),this._dirties.push(!0),this._size.push([y,g]),this._textures.push(void 0),[v,this._mosaicsData.length-1,[y,g]]}let S=y%4?4-y%4:4,T=g%4?4-g%4:4;1===S&&(S=5),1===T&&(T=5);const M=this._binPack.allocate(y+S,g+T);return M.width<=0?(this._dirties[this._currentPage]||(this._mosaicsData[this._currentPage]=null),this._currentPage=this._mosaicsData.length,this._mosaicsData.push(new Uint32Array(this._pageWidth*this._pageHeight)),this._dirties.push(!0),this._size.push([this._pageWidth,this._pageHeight]),this._textures.push(void 0),this._binPack=new RectangleBinPack_e(this._pageWidth-4,this._pageHeight-4),this._allocateImage(y,g)):[M,this._currentPage,[this._pageWidth,this._pageHeight]]}_rasterizeDash(y){const g=y.match(/\[(.*?)\]/);if(!g)return null;const v=g[1].split(",").map(Number),S=y.slice(y.lastIndexOf("-")+1),[T,M,R]=(0,J.k)(v,S);return[{x:0,y:0,width:M,height:R,sdf:!0,pixelRatio:1},new Uint8Array(T.buffer)]}}var Z=v(67685);class h{constructor(y,g,v,S){this._layer=y,this._styleRepository=g,this.devicePixelRatio=v,this._sourceDataMaxLOD=S,this._spriteMosaic=null,this._glyphMosaic=null,this._connection=null,this._spriteSourceAbortController=null,this._startOptionsInputSignal=null,this._inputSignalEventListener=null}destroy(){var y,g,v;null!==(y=this._connection)&&void 0!==y&&y.close(),this._connection=null,this._styleRepository=null,this._layer=null,null!==(g=this._spriteMosaic)&&void 0!==g&&g.destroy(),this._spriteMosaic=null,this._glyphMosaic=null,this._spriteSourceAbortController=(0,R.DC)(this._spriteSourceAbortController),this._spriteSourcePromise=null,this._inputSignalEventListener&&null!==(v=this._startOptionsInputSignal)&&void 0!==v&&v.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,this._inputSignalEventListener=null}get spriteMosaic(){return this._spriteSourcePromise.then((()=>this._spriteMosaic))}get glyphMosaic(){return this._glyphMosaic}async start(y){this._requestSprite(y);const g=this._layer.currentStyleInfo.glyphsUrl,v=new GlyphSource_r(g?(0,E.a6)(g,{...this._layer.customParameters,token:this._layer.apiKey}):null);this._glyphMosaic=new n(1024,1024,v),this._broadcastPromise=(0,q.ho)("WorkerTileHandler",{client:this,schedule:y.schedule,signal:y.signal}).then((g=>{var v;if(this._layer&&(null!==(v=this._connection)&&void 0!==v&&v.close(),this._connection=g,this._layer&&!this._connection.closed)){const v=g.broadcast("setStyle",{style:this._layer.currentStyleInfo.style,sourceDataMaxLOD:this._sourceDataMaxLOD},y);Promise.all(v).catch((y=>(0,A.jH)(y)))}}))}_requestSprite(y){var g,v;null===(g=this._spriteSourceAbortController)||void 0===g||g.abort();const S=new AbortController;this._spriteSourceAbortController=S;const T=null===y||void 0===y?void 0:y.signal;this._inputSignalEventListener&&null!==(v=this._startOptionsInputSignal)&&void 0!==v&&v.removeEventListener("abort",this._inputSignalEventListener),this._startOptionsInputSignal=null,T&&(this._inputSignalEventListener=function p(y){return()=>y.abort()}(S),T.addEventListener("abort",this._inputSignalEventListener,{once:!0}));const{signal:M}=S,R={...y,signal:M};this._spriteSourcePromise=this._layer.loadSpriteSource(this.devicePixelRatio,R),this._spriteSourcePromise.then((y=>{(0,A.QP)(M),this._spriteMosaic=new SpriteMosaic_o(1024,1024,250),this._spriteMosaic.setSpriteSource(y)}))}async updateStyle(y){return await this._broadcastPromise,this._broadcastPromise=Promise.all(this._connection.broadcast("updateStyle",y)),this._broadcastPromise}setSpriteSource(y){const g=new SpriteMosaic_o(1024,1024,250);return g.setSpriteSource(y),this._spriteMosaic=g,this._spriteSourcePromise=Promise.resolve(y),this._spriteSourceAbortController=null,g}async setStyle(y,g,v){await this._broadcastPromise,this._styleRepository=y,this._sourceDataMaxLOD=v,this._requestSprite();const S=new GlyphSource_r(this._layer.currentStyleInfo.glyphsUrl?(0,E.a6)(this._layer.currentStyleInfo.glyphsUrl,{...this._layer.customParameters,token:this._layer.apiKey}):null);return this._glyphMosaic=new n(1024,1024,S),this._broadcastPromise=Promise.all(this._connection.broadcast("setStyle",{style:g,sourceDataMaxLOD:this._sourceDataMaxLOD})),this._broadcastPromise}async fetchTileData(y,g){const v=await this._getRefKeys(y,g);return this._getSourcesData(Object.keys(this._layer.sourceNameToSource),v,g)}async fetchTilePBFs(y){const g=Object.keys(this._layer.sourceNameToSource),v={},S=await this._getRefKeys(y,v),T=[],M=[];for(let R=0;R<S.length;R++)if(null==S[R].value||null==g[R])M.push(null);else{const y=S[R].value,A=this._getTilePayload(y,g[R],v);A.then((g=>{T.push({...g,key:y})})),M.push(A)}return Promise.all(M).then((()=>T))}async parseTileData(y,g){const v=y&&y.data;if(!v)return null;const{sourceName2DataAndRefKey:S,transferList:T}=v;return 0===Object.keys(S).length?null:this._broadcastPromise.then((()=>this._connection.invoke("createTileAndParse",{key:y.key.id,sourceName2DataAndRefKey:S,styleLayerUIDs:y.styleLayerUIDs},{...g,transferList:T})))}async getSprites(y){return await this._spriteSourcePromise,this._spriteMosaic.getSpriteItems(y)}getGlyphs(y){return this._glyphMosaic.getGlyphItems(y.font,y.codePoints)}async _getTilePayload(y,g,v){const S=Z.A.pool.acquire(y.id),T=this._layer.sourceNameToSource[g],{level:M,row:R,col:D}=S;Z.A.pool.release(S);try{return{protobuff:await T.requestTile(M,R,D,v),sourceName:g}}catch(c){if((0,A.zf)(c))throw c;return{protobuff:null,sourceName:g}}}async _getRefKeys(y,g){const v=this._layer.sourceNameToSource,S=new Array;for(const T in v){const M=v[T].getRefKey(y,g);S.push(M)}return(0,A.Lx)(S)}_getSourcesData(y,g,v){const S=[];for(let T=0;T<g.length;T++)if(null==g[T].value||null==y[T])S.push(null);else{const M=g[T].value,R=this._getTilePayload(M,y[T],v);S.push(R)}return(0,A.Lx)(S).then((y=>{const v={},S=[];for(let T=0;T<y.length;T++){const M=y[T].value;if(M&&M.protobuff&&M.protobuff.byteLength>0){const y=g[T].value.id;v[M.sourceName]={refKey:y,protobuff:M.protobuff},S.push(M.protobuff)}}return{sourceName2DataAndRefKey:v,transferList:S}}))}}var Q=v(20585),K=v(82438);const TileManager_a=(y,g)=>y+1/(1<<2*g);class TileManager_h{constructor(y,g){this._tiles=new Map,this._tileCache=new Q.q(40,(y=>y.dispose())),this._viewSize=[0,0],this._visibleTiles=new Map,this.acquireTile=y.acquireTile,this.releaseTile=y.releaseTile,this.tileInfoView=y.tileInfoView,this._container=g}destroy(){for(const[y,g]of this._tiles)g.dispose();this._tiles=null,this._tileCache.clear(),this._tileCache=null}update(y){this._updateCacheSize(y);const g=this.tileInfoView,v=g.getTileCoverage(y.state,0,!0,"smallest");if(!v)return!0;const{spans:S,lodInfo:T}=v,{level:M}=T,R=this._tiles,A=new Set,D=new Set;for(const{row:L,colFrom:k,colTo:U}of S)for(let y=k;y<=U;y++){const g=Z.A.getId(M,L,T.normalizeCol(y),T.getWorldForColumn(y)),v=this._getOrAcquireTile(g);A.add(g),v.processed()?this._addToContainer(v):D.add(new Z.A(g))}for(const[L,k]of R)k.isCoverage=A.has(L);for(const L of D)this._findPlaceholdersForMissingTiles(L,A);let C=!1;for(const[L,k]of R)k.neededForCoverage=A.has(L),k.neededForCoverage||k.isHoldingForFade&&g.intersects(v,k.key)&&A.add(L),k.isFading&&(C=!0);for(const[L,k]of this._tiles)A.has(L)||this._releaseTile(L);return K.A.pool.release(v),!C}clear(){this._tiles.clear(),this._tileCache.clear(),this._visibleTiles.clear()}clearCache(){this._tileCache.clear()}getIntersectingTiles(y,g,v,S,T){const M=[0,0],R=[0,0];S.toMap(M,y-v,g+v),S.toMap(R,y+v,g-v);const A=Math.min(M[0],R[0]),D=Math.min(M[1],R[1]),C=Math.max(M[0],R[0]),L=Math.max(M[1],R[1]),k=(0,U.fA)(A,D,C,L),O=(0,U.vt)(),V=[];for(const[E,q]of this._visibleTiles)this.tileInfoView.getTileBounds(O,q.key),(0,U.HY)(k,O)&&V.push(q);if(null!=T&&T.length>0){const y=new Set(V.map((y=>y.id))),g=T.filter((g=>!y.has(g.tileKey.id))).map((y=>this._visibleTiles.get(y.tileKey.id))).filter((y=>void 0!==y));V.push(...g)}return V}_findPlaceholdersForMissingTiles(y,g){const v=[];for(const[T,M]of this._tiles)this._addPlaceholderChild(v,M,y,g);const S=v.reduce(TileManager_a,0);Math.abs(1-S)<1e-6||this._addPlaceholderParent(y.id,g)}_addPlaceholderChild(y,g,v,S){g.key.level<=v.level||!g.hasData()||function d(y,g){const v=g.level-y.level;return y.row===g.row>>v&&y.col===g.col>>v&&y.world===g.world}(v,g.key)&&(this._addToContainer(g),S.add(g.id),y.push(g.key.level-v.level))}_addPlaceholderParent(y,g){const v=this._tiles;let S=y;for(;;){if(S=c(S),!S||g.has(S))return;const y=v.get(S);if(y&&y.hasData())return this._addToContainer(y),void g.add(y.id)}}_getOrAcquireTile(y){let g=this._tiles.get(y);return g||(g=this._tileCache.pop(y),g||(g=this.acquireTile(new Z.A(y))),this._tiles.set(y,g),g)}_releaseTile(y){const g=this._tiles.get(y);this.releaseTile(g),this._removeFromContainer(g),this._tiles.delete(y),g.hasData()?this._tileCache.put(y,g,1):g.dispose()}_addToContainer(y){let g;const v=[],S=this._container;if(S.contains(y))return;const T=this._visibleTiles;for(const[M,R]of T)this._canConnectDirectly(y,R)&&v.push(R),null==g&&this._canConnectDirectly(R,y)&&(g=R);if(null!=g){for(const S of v)g.childrenTiles.delete(S),y.childrenTiles.add(S),S.parentTile=y;g.childrenTiles.add(y),y.parentTile=g}else for(const M of v)y.childrenTiles.add(M),M.parentTile=y;T.set(y.id,y),S.addChild(y)}_removeFromContainer(y){if(this._visibleTiles.delete(y.id),this._container.removeChild(y),null!=y.parentTile){y.parentTile.childrenTiles.delete(y);for(const g of y.childrenTiles)null!=y.parentTile&&y.parentTile.childrenTiles.add(g)}for(const g of y.childrenTiles)g.parentTile=y.parentTile;y.parentTile=null,y.childrenTiles.clear()}_canConnectDirectly(y,g){const v=y.key;let{level:S,row:T,col:M,world:R}=g.key;const A=this._visibleTiles;for(;S>0;){if(S--,T>>=1,M>>=1,v.level===S&&v.row===T&&v.col===M&&v.world===R)return!0;if(A.has("".concat(S,"/").concat(T,"/").concat(M,"/").concat(R)))return!1}return!1}_updateCacheSize(y){const g=y.state.size;if(g[0]===this._viewSize[0]&&g[1]===this._viewSize[1])return;const v=Math.ceil(g[0]/512)+1,S=Math.ceil(g[1]/512)+1;this._viewSize[0]=g[0],this._viewSize[1]=g[1],this._tileCache.maxSize=5*v*S}}function c(y){const[g,v,S,T]=y.split("/"),M=parseInt(g,10);return 0===M?null:"".concat(M-1,"/").concat(parseInt(v,10)>>1,"/").concat(parseInt(S,10)>>1,"/").concat(parseInt(T,10))}var j=v(68052),$=v(46427),tt=v(49905),et=v(63801),it=v(54869),st=(v(11808),v(29457));class core_t{constructor(y,g){this.sourceTile=g,this.xTile=0,this.yTile=0,this.hash=0,this.priority=1,this.featureIndex=0,this.colliders=[],this.textVertexRanges=[],this.iconVertexRanges=[],this.tile=y}}class core_s{constructor(){this.tileSymbols=[],this.parts=[{startTime:0,startOpacity:0,targetOpacity:0,show:!1},{startTime:0,startOpacity:0,targetOpacity:0,show:!1}],this.show=!1}}function util_o(y,g,v,S,T,M){const R=v-T;if(R>=0)return(g>>R)+(S-(M<<R))*(y>>R);const A=-R;return g-(M-(S<<A))*(y>>A)<<A}class util_i{constructor(y,g,v){this._rows=Math.ceil(g/v),this._columns=Math.ceil(y/v),this._cellSize=v,this.cells=new Array(this._rows);for(let S=0;S<this._rows;S++){this.cells[S]=new Array(this._columns);for(let y=0;y<this._columns;y++)this.cells[S][y]=[]}}getCell(y,g){const v=Math.min(Math.max(Math.floor(g/this._cellSize),0),this._rows-1),S=Math.min(Math.max(Math.floor(y/this._cellSize),0),this._columns-1);return this.cells[v]&&this.cells[v][S]||null}getCellSpan(y,g,v,S){return[Math.min(Math.max(Math.floor(y/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(g/this._cellSize),0),this.rows-1),Math.min(Math.max(Math.floor(v/this._cellSize),0),this.columns-1),Math.min(Math.max(Math.floor(S/this._cellSize),0),this.rows-1)]}get cellSize(){return this._cellSize}get columns(){return this._columns}get rows(){return this._rows}}function util_n(y,g,v,S,T){const M=y.layerData.get(T);if(M.type===V.NP.SYMBOL){for(const g of S){const S=g.unique;let T;if(g.selectedForRendering){const g=S.parts[0],M=g.startOpacity,R=g.targetOpacity;y.allSymbolsFadingOut=y.allSymbolsFadingOut&&0===R;const A=v?Math.floor(127*M)|R<<7:R?255:0;T=A<<24|A<<16|A<<8|A}else T=0;for(const[y,v]of g.iconVertexRanges)for(let g=y;g<y+v;g+=4)M.iconOpacity[g/4]=T;if(g.selectedForRendering){const g=S.parts[1],M=g.startOpacity,R=g.targetOpacity;y.allSymbolsFadingOut=y.allSymbolsFadingOut&&0===R;const A=v?Math.floor(127*M)|R<<7:R?255:0;T=A<<24|A<<16|A<<8|A}else T=0;for(const[y,v]of g.textVertexRanges)for(let g=y;g<y+v;g+=4)M.textOpacity[g/4]=T}M.lastOpacityUpdate=g,M.opacityChanged=!0}}function util_c(y,g,v,S){const T=y.colliders;let M,R,A,D;for(const C of T)if(y.unique.show&&y.unique.parts[C.partIndex].show&&(M=C.xScreen-S[0]+C.dxScreen,R=C.yScreen-S[1]+C.dyScreen,A=M+C.width,D=R+C.height,(0,st.w4)(v,g.x,g.y,M,R,A,D)))return!0;return!1}var rt=v(25078),nt=v(77127);class RenderBucket_h{constructor(y,g){this.layerUIDs=[],this.isDestroyed=!1,this._data=y;let v=1;const S=new Uint32Array(y);this.layerUIDs=[];const T=S[v++];for(let M=0;M<T;M++)this.layerUIDs[M]=S[v++];this.bufferDataOffset=v,g&&(this.layer=g.getStyleLayerByUID(this.layerUIDs[0]))}get isPreparedForRendering(){return null==this._data}get offset(){return this.bufferDataOffset}get data(){return this._data}destroy(){this.isDestroyed||(this.doDestroy(),this._data=null,this.isDestroyed=!0)}prepareForRendering(y){null!=this._data&&(this.doPrepareForRendering(y,this._data,this.bufferDataOffset),this._data=null)}}class f extends RenderBucket_h{constructor(y,g){super(y,g),this.type=V.NP.LINE,this.lineIndexStart=0,this.lineIndexCount=0;const v=new Uint32Array(y);let S=this.bufferDataOffset;this.lineIndexStart=v[S++],this.lineIndexCount=v[S++];const T=v[S++];if(T>0){this.patternMap=new Map;for(let y=0;y<T;y++){const y=v[S++],g=v[S++],T=v[S++];this.patternMap.set(y,[g,T])}}this.bufferDataOffset=S}get memoryUsed(){var y,g,v,S;return(null!==(y=null===(g=this.data)||void 0===g?void 0:g.byteLength)&&void 0!==y?y:0)+(null!==(v=null===(S=this.vao)||void 0===S?void 0:S.usedMemory)&&void 0!==v?v:0)}hasData(){return this.lineIndexCount>0}triangleCount(){return this.lineIndexCount/3}doDestroy(){this.vao=(0,R.WD)(this.vao)}doPrepareForRendering(y,g,v){const S=new Uint32Array(g),T=new Int32Array(S.buffer),M=S[v++],R=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,M));v+=M;const A=S[v++],D=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,A));v+=A;const C=this.layer.lineMaterial;this.vao=new nt.Z(y,C.getAttributeLocations(),C.getLayoutInfo(),{geometry:R},D)}}class l extends RenderBucket_h{constructor(y,g){super(y,g),this.type=V.NP.FILL,this.fillIndexStart=0,this.fillIndexCount=0,this.outlineIndexStart=0,this.outlineIndexCount=0;const v=new Uint32Array(y);let S=this.bufferDataOffset;this.fillIndexStart=v[S++],this.fillIndexCount=v[S++],this.outlineIndexStart=v[S++],this.outlineIndexCount=v[S++];const T=v[S++];if(T>0){this.patternMap=new Map;for(let y=0;y<T;y++){const y=v[S++],g=v[S++],T=v[S++];this.patternMap.set(y,[g,T])}}this.bufferDataOffset=S}get memoryUsed(){var y,g,v,S,T,M;return(null!==(y=null===(g=this.data)||void 0===g?void 0:g.byteLength)&&void 0!==y?y:0)+(null!==(v=null===(S=this.fillVAO)||void 0===S?void 0:S.usedMemory)&&void 0!==v?v:0)+(null!==(T=null===(M=this.outlineVAO)||void 0===M?void 0:M.usedMemory)&&void 0!==T?T:0)}hasData(){return this.fillIndexCount>0||this.outlineIndexCount>0}triangleCount(){return(this.fillIndexCount+this.outlineIndexCount)/3}doDestroy(){this.fillVAO=(0,R.WD)(this.fillVAO),this.outlineVAO=(0,R.WD)(this.outlineVAO)}doPrepareForRendering(y,g,v){const S=new Uint32Array(g),T=new Int32Array(S.buffer),M=S[v++],R=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,M));v+=M;const A=S[v++],D=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,A));v+=A;const C=S[v++],L=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,C));v+=C;const k=S[v++],U=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,k));v+=k;const O=this.layer,V=O.fillMaterial,E=O.outlineMaterial;this.fillVAO=new nt.Z(y,V.getAttributeLocations(),V.getLayoutInfo(),{geometry:R},D),this.outlineVAO=new nt.Z(y,E.getAttributeLocations(),E.getLayoutInfo(),{geometry:L},U)}}class RenderBucket_c extends RenderBucket_h{constructor(y,g,v){super(y,g),this.type=V.NP.SYMBOL,this.iconPerPageElementsMap=new Map,this.glyphPerPageElementsMap=new Map,this.symbolInstances=[],this.isIconSDF=!1,this.opacityChanged=!1,this.lastOpacityUpdate=0,this.symbols=[];const S=new Uint32Array(y),T=new Int32Array(y),M=new Float32Array(y);let R=this.bufferDataOffset;this.isIconSDF=!!S[R++];const A=S[R++],D=S[R++],C=S[R++],L=new Z.A(A,D,C,0),k=S[R++];for(let V=0;V<k;V++){const y=S[R++],g=S[R++],v=S[R++];this.iconPerPageElementsMap.set(y,[g,v])}const U=S[R++];for(let V=0;V<U;V++){const y=S[R++],g=S[R++],v=S[R++];this.glyphPerPageElementsMap.set(y,[g,v])}const O=S[R++],E=S[R++];this.iconOpacity=new Int32Array(O),this.textOpacity=new Int32Array(E),R=function util_l(y,g,v,S,T,M,R){const A=g[S++];for(let D=0;D<A;D++){const A=new core_t(M,R);A.xTile=g[S++],A.yTile=g[S++],A.hash=g[S++],A.priority=g[S++],A.featureIndex=g[S++];const D=g[S++];for(let y=0;y<D;y++){const y=g[S++],T=g[S++],M=g[S++],R=g[S++],D=!!g[S++],C=g[S++],L=v[S++],k=v[S++],U=g[S++],O=g[S++];A.colliders.push({xTile:y,yTile:T,dxPixels:M,dyPixels:R,hard:D,partIndex:C,width:U,height:O,minLod:L,maxLod:k})}const C=y[S++];for(let g=0;g<C;g++)A.textVertexRanges.push([y[S++],y[S++]]);const L=y[S++];for(let g=0;g<L;g++)A.iconVertexRanges.push([y[S++],y[S++]]);T.push(A)}return S}(S,T,M,R,this.symbols,v,L),this.bufferDataOffset=R}get memoryUsed(){var y,g,v,S,T,M;return(null!==(y=null===(g=this.data)||void 0===g?void 0:g.byteLength)&&void 0!==y?y:0)+(null!==(v=null===(S=this.iconVAO)||void 0===S?void 0:S.usedMemory)&&void 0!==v?v:0)+(null!==(T=null===(M=this.textVAO)||void 0===M?void 0:M.usedMemory)&&void 0!==T?T:0)+(0,tt.Ek)(this.iconOpacity)+(0,tt.Ek)(this.textOpacity)}hasData(){return this.iconPerPageElementsMap.size>0||this.glyphPerPageElementsMap.size>0}triangleCount(){let y=0;for(const[g,v]of this.iconPerPageElementsMap)y+=v[1];for(const[g,v]of this.glyphPerPageElementsMap)y+=v[1];return y/3}doDestroy(){this.iconVAO=(0,R.WD)(this.iconVAO),this.textVAO=(0,R.WD)(this.textVAO)}updateOpacityInfo(){if(!this.opacityChanged)return;this.opacityChanged=!1;const y=this.iconOpacity,g=this.iconVAO.vertexBuffers.opacity;y.length>0&&y.byteLength===g.usedMemory&&g.setSubData(y,0,0,y.length);const v=this.textOpacity,S=this.textVAO.vertexBuffers.opacity;v.length>0&&v.byteLength===S.usedMemory&&S.setSubData(v,0,0,v.length)}doPrepareForRendering(y,g,v){const S=new Uint32Array(g),T=new Int32Array(S.buffer),M=S[v++],R=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,M));v+=M;const A=S[v++],D=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,A));v+=A;const C=S[v++],L=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,C));v+=C;const k=S[v++],U=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,k));v+=k;const O=rt.g.createVertex(y,z._U.STATIC_DRAW,this.iconOpacity.buffer),V=rt.g.createVertex(y,z._U.STATIC_DRAW,this.textOpacity.buffer),E=this.layer,q=E.iconMaterial,F=E.textMaterial;this.iconVAO=new nt.Z(y,q.getAttributeLocations(),q.getLayoutInfo(),{geometry:R,opacity:O},D),this.textVAO=new nt.Z(y,F.getAttributeLocations(),F.getLayoutInfo(),{geometry:L,opacity:V},U)}}class u extends RenderBucket_h{constructor(y,g){super(y,g),this.type=V.NP.CIRCLE,this.circleIndexStart=0,this.circleIndexCount=0;const v=new Uint32Array(y);let S=this.bufferDataOffset;this.circleIndexStart=v[S++],this.circleIndexCount=v[S++],this.bufferDataOffset=S}get memoryUsed(){var y,g,v,S;return(null!==(y=null===(g=this.data)||void 0===g?void 0:g.byteLength)&&void 0!==y?y:0)+(null!==(v=null===(S=this.vao)||void 0===S?void 0:S.usedMemory)&&void 0!==v?v:0)}hasData(){return this.circleIndexCount>0}triangleCount(){return this.circleIndexCount/3}doDestroy(){this.vao=(0,R.WD)(this.vao)}doPrepareForRendering(y,g,v){const S=new Uint32Array(g),T=new Int32Array(S.buffer),M=S[v++],R=rt.g.createVertex(y,z._U.STATIC_DRAW,new Int32Array(T.buffer,4*v,M));v+=M;const A=S[v++],D=rt.g.createIndex(y,z._U.STATIC_DRAW,new Uint32Array(S.buffer,4*v,A));v+=A;const C=this.layer.circleMaterial;this.vao=new nt.Z(y,C.getAttributeLocations(),C.getLayoutInfo(),{geometry:R},D)}}var ot=v(66975),at=v(84624);class VectorTile_d extends at.Y{constructor(y,g,v,S,T,M,R){let A=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;super(y,g,v,S,T,M,4096,4096),this.styleRepository=R,this._memCache=A,this.type="vector-tile",this._referenced=0,this._hasSymbolBuckets=!1,this._memoryUsedByLayerData=0,this.layerData=new Map,this.status="loading",this.allSymbolsFadingOut=!1,this.lastOpacityUpdate=0,this.symbols=new Map,this.isCoverage=!1,this.neededForCoverage=!1,this.decluttered=!1,this.parentTile=null,this.childrenTiles=new Set,this.featureIndex=null,this.triangleCount=0,this._processed=!1,this._referenced=1,this.id=y.id}get hasSymbolBuckets(){return this._hasSymbolBuckets}get isFading(){return this._hasSymbolBuckets&&performance.now()-this.lastOpacityUpdate<ot.zk}get isHoldingForFade(){return this._hasSymbolBuckets&&(!this.allSymbolsFadingOut||performance.now()-this.lastOpacityUpdate<ot.zk)}get wasRequested(){return"errored"===this.status||"loaded"===this.status||"reloading"===this.status}setData(y){this.changeDataImpl(y),this.requestRender(),this.ready(),this._processed=!0}deleteLayerData(y){var g,v;let S=!1;for(const T of y){const y=this.layerData.get(T);y&&(this._memoryUsedByLayerData-=y.memoryUsed,y.type===V.NP.SYMBOL&&this.symbols.delete(T)&&(S=!0),y.destroy(),this.layerData.delete(T))}null!==(g=this._memCache)&&void 0!==g&&g.updateSize(this.key.id,this,this._memoryUsedByLayerData),S&&(null!==(v=this.featureIndex)&&void 0!==v&&v.clear(),this.emit("symbols-changed")),this.requestRender()}processed(){return this._processed}hasData(){return this.layerData.size>0}dispose(){"unloaded"!==this.status&&(this.featureIndex=null,lt.delete(this),VectorTile_d._destroyRenderBuckets(this.layerData),this.layerData.clear(),this._memoryUsedByLayerData=0,this.destroy(),this.status="unloaded")}release(){return 0==--this._referenced&&(this.dispose(),this.stage=null,!0)}retain(){++this._referenced}get referenced(){return this._referenced}get usedMemory(){return this._memoryUsedByLayerData+256}changeDataImpl(y){var g;null===(g=this.featureIndex)||void 0===g||g.clear();let v=!1;if(y){var S;const{bucketsWithData:g,emptyBuckets:T}=y,M=this._createRenderBuckets(g);if(T&&T.byteLength>0){const y=new Uint32Array(T);for(const g of y)this._deleteLayerData(g)}for(const[y,S]of M)this._deleteLayerData(y),S.type===V.NP.SYMBOL&&(this.symbols.set(y,S.symbols),v=!0),this._memoryUsedByLayerData+=S.memoryUsed,this.layerData.set(y,S);null===(S=this._memCache)||void 0===S||S.updateSize(this.key.id,this,this.usedMemory)}this._hasSymbolBuckets=!1;for(const[T,M]of this.layerData)M.type===V.NP.SYMBOL&&(this._hasSymbolBuckets=!0);v&&this.emit("symbols-changed")}attachWithContext(y){this.stage={context:y,trashDisplayObject(y){y.processDetach()},untrashDisplayObject:()=>!1}}setTransform(y){super.setTransform(y);const g=this.resolution/(y.resolution*y.pixelRatio),v=this.width/this.rangeX*g,S=this.height/this.rangeY*g,T=[0,0];y.toScreen(T,[this.x,this.y]);const M=this.transforms.tileUnitsToPixels;(0,j.D_)(M),(0,j.Tl)(M,M,T),(0,j.e$)(M,M,Math.PI*y.rotation/180),(0,j.hs)(M,M,[v,S,1])}_createTransforms(){return{displayViewScreenMat3:(0,$.vt)(),tileMat3:(0,$.vt)(),tileUnitsToPixels:(0,$.vt)()}}static _destroyRenderBuckets(y){if(!y)return;const g=new Set;for(const v of y.values())g.has(v)||(v.destroy(),g.add(v));y.clear()}_createRenderBuckets(y){const g=new Map,v=new Map;for(const S of y){const y=this._deserializeBucket(S,v);for(const v of y.layerUIDs)g.set(v,y)}return g}_deserializeBucket(y,g){let v=g.get(y);if(v)return v;switch(new Uint32Array(y)[0]){case V.NP.FILL:v=new l(y,this.styleRepository);break;case V.NP.LINE:v=new f(y,this.styleRepository);break;case V.NP.SYMBOL:v=new RenderBucket_c(y,this.styleRepository,this);break;case V.NP.CIRCLE:v=new u(y,this.styleRepository)}return g.set(y,v),v}_deleteLayerData(y){if(!this.layerData.has(y))return;const g=this.layerData.get(y);this._memoryUsedByLayerData-=g.memoryUsed,g.destroy(),this.layerData.delete(y)}}const lt=new Map;var ht=v(22179),ct=v(82428),ut=v(4250);function i(y,g,v,S,T,M){const{iconRotationAlignment:R,textRotationAlignment:A,iconTranslate:D,iconTranslateAnchor:C,textTranslate:L,textTranslateAnchor:k}=S;let U=0;for(const O of y.colliders){const[y,S]=0===O.partIndex?D:L,V=0===O.partIndex?C:k,E=O.minLod<=M&&M<=O.maxLod;U+=E?0:1,O.enabled=E,O.xScreen=O.xTile*T[0]+O.yTile*T[3]+T[6],O.yScreen=O.xTile*T[1]+O.yTile*T[4]+T[7],V===ut.Cq.MAP?(O.xScreen+=v*y-g*S,O.yScreen+=g*y+v*S):(O.xScreen+=y,O.yScreen+=S),ut.I5.VIEWPORT===(0===O.partIndex?R:A)?(O.dxScreen=O.dxPixels,O.dyScreen=O.dyPixels):(O.dxScreen=v*(O.dxPixels+O.width/2)-g*(O.dyPixels+O.height/2)-O.width/2,O.dyScreen=g*(O.dxPixels+O.width/2)+v*(O.dyPixels+O.height/2)-O.height/2)}y.colliders.length>0&&U===y.colliders.length&&(y.unique.show=!1)}class jobs_l{constructor(y,g,v,S,T,M){this._symbols=y,this._styleRepository=S,this._zoom=T,this._currentLayerCursor=0,this._currentSymbolCursor=0,this._styleProps=new Map,this._allNeededMatrices=new Map,this._gridIndex=new util_i(g,v,ot.o2),this._si=Math.sin(Math.PI*M/180),this._co=Math.cos(Math.PI*M/180);for(const R of y)for(const y of R.symbols)this._allNeededMatrices.has(y.tile)||this._allNeededMatrices.set(y.tile,(0,$.o8)(y.tile.transforms.tileUnitsToPixels))}work(y){const g=this._gridIndex;function n(y){const v=y.xScreen+y.dxScreen,S=y.yScreen+y.dyScreen,T=v+y.width,M=S+y.height,[R,A,D,C]=g.getCellSpan(v,S,T,M);for(let L=A;L<=C;L++)for(let y=R;y<=D;y++){const R=g.cells[L][y];for(const y of R){const g=y.xScreen+y.dxScreen,R=y.yScreen+y.dyScreen,A=g+y.width,D=R+y.height;if(!(T<g||v>A||M<R||S>D))return!0}}return!1}const v=performance.now();for(;this._currentLayerCursor<this._symbols.length;this._currentLayerCursor++,this._currentSymbolCursor=0){const g=this._symbols[this._currentLayerCursor],S=this._getProperties(g.styleLayerUID);for(;this._currentSymbolCursor<g.symbols.length;this._currentSymbolCursor++){if(this._currentSymbolCursor%100==99&&performance.now()-v>y)return!1;const T=g.symbols[this._currentSymbolCursor];if(!T.unique.show)continue;i(T,this._si,this._co,S,this._allNeededMatrices.get(T.tile),this._zoom);const M=T.unique;if(!M.show)continue;const{iconAllowOverlap:R,iconIgnorePlacement:A,textAllowOverlap:D,textIgnorePlacement:C}=S;for(const y of T.colliders){if(!y.enabled)continue;const g=M.parts[y.partIndex];g.show&&(!(y.partIndex?D:R)&&n(y)&&(y.hard?M.show=!1:g.show=!1))}if(M.show)for(const y of T.colliders){if(!y.enabled)continue;if(y.partIndex?C:A)continue;if(!M.parts[y.partIndex].show)continue;const g=y.xScreen+y.dxScreen,v=y.yScreen+y.dyScreen,S=g+y.width,T=v+y.height,[R,D,L,k]=this._gridIndex.getCellSpan(g,v,S,T);for(let M=D;M<=k;M++)for(let g=R;g<=L;g++)this._gridIndex.cells[M][g].push(y)}}}return!0}_getProperties(y){const g=this._styleProps.get(y);if(g)return g;const v=this._zoom,S=this._styleRepository.getStyleLayerByUID(y),T=S.getLayoutValue("symbol-placement",v)!==ut.kt.POINT;let M=S.getLayoutValue("icon-rotation-alignment",v);M===ut.I5.AUTO&&(M=T?ut.I5.MAP:ut.I5.VIEWPORT);let R=S.getLayoutValue("text-rotation-alignment",v);R===ut.I5.AUTO&&(R=T?ut.I5.MAP:ut.I5.VIEWPORT);const A=S.getPaintValue("icon-translate",v),D=S.getPaintValue("icon-translate-anchor",v),C=S.getPaintValue("text-translate",v),L=S.getPaintValue("text-translate-anchor",v),k={iconAllowOverlap:S.getLayoutValue("icon-allow-overlap",v),iconIgnorePlacement:S.getLayoutValue("icon-ignore-placement",v),textAllowOverlap:S.getLayoutValue("text-allow-overlap",v),textIgnorePlacement:S.getLayoutValue("text-ignore-placement",v),iconRotationAlignment:M,textRotationAlignment:R,iconTranslateAnchor:D,iconTranslate:A,textTranslateAnchor:L,textTranslate:C};return this._styleProps.set(y,k),k}}function t(y,g){if(y.priority-g.priority)return y.priority-g.priority;const v=y.tile.key,S=g.tile.key;return v.world-S.world?v.world-S.world:v.level-S.level?v.level-S.level:v.row-S.row?v.row-S.row:v.col-S.col?v.col-S.col:y.xTile-g.xTile?y.xTile-g.xTile:y.yTile-g.yTile}class SymbolDeclutterer_e{get running(){return this._running}constructor(y,g,v,S,T,M){this._visibleTiles=y,this._symbolRepository=g,this._createCollisionJob=v,this._assignTileSymbolsOpacity=S,this._symbolLayerSorter=T,this._isLayerVisible=M,this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}setScreenSize(y,g){this._screenWidth===y&&this._screenHeight===g||this.restart(),this._screenWidth=y,this._screenHeight=g}restart(){this._selectionJob=null,this._selectionJobCompleted=!1,this._collisionJob=null,this._collisionJobCompleted=!1,this._opacityJob=null,this._opacityJobCompleted=!1,this._running=!0}continue(y){if(this._selectionJob||(this._selectionJob=this._createSelectionJob()),!this._selectionJobCompleted){const g=performance.now();if(!this._selectionJob.work(y))return!1;if(this._selectionJobCompleted=!0,0===(y=Math.max(0,y-(performance.now()-g))))return!1}if(this._collisionJob||(this._collisionJob=this._createCollisionJob(this._selectionJob.sortedSymbols,this._screenWidth,this._screenHeight)),!this._collisionJobCompleted){const g=performance.now();if(!this._collisionJob.work(y))return!1;if(this._collisionJobCompleted=!0,0===(y=Math.max(0,y-(performance.now()-g))))return!1}if(this._opacityJob||(this._opacityJob=this._createOpacityJob()),!this._opacityJobCompleted){const g=performance.now();if(!this._opacityJob.work(y))return!1;if(this._opacityJobCompleted=!0,0===(y=Math.max(0,y-(performance.now()-g))))return!1}return this._running=!1,!0}_createSelectionJob(){const y=this._symbolRepository.uniqueSymbols;for(let R=0;R<y.length;R++){const g=y[R];for(let y=0;y<g.uniqueSymbols.length;y++){const v=g.uniqueSymbols[y];for(const y of v.tileSymbols)y.selectedForRendering=!1}}const g=[];let v=0,S=0;const T=this._isLayerVisible;const M=this._symbolLayerSorter;return{work:function r(M){let R;const A=performance.now();for(;S<y.length;S++,v=0){const D=y[S],C=D.styleLayerUID;if(!T(C)){g[S]||(g[S]={styleLayerUID:C,symbols:[]});continue}g[S]=g[S]||{styleLayerUID:C,symbols:[]};const L=g[S];for(;v<D.uniqueSymbols.length;v++){if(R=D.uniqueSymbols[v],v%100==99&&performance.now()-A>M)return!1;let y=null,g=!1,S=!1;for(const v of R.tileSymbols)if(!S||!g){const T=v.tile;(!y||T.isCoverage||T.neededForCoverage&&!g)&&(y=v,(T.neededForCoverage||T.isCoverage)&&(S=!0),T.isCoverage&&(g=!0))}if(y.selectedForRendering=!0,S){L.symbols.push(y),R.show=!0;for(const y of R.parts)y.show=!0}else R.show=!1}}for(const y of g)y.symbols.sort(t);return!0},get sortedSymbols(){return g.sort(M)}}}_createOpacityJob(){const y=this._assignTileSymbolsOpacity,g=this._visibleTiles;let v=0;function s(g,v){const S=g.symbols;for(const[y,T]of S)SymbolDeclutterer_i(T,v);y(g,v);for(const y of g.childrenTiles)s(y,v)}return{work(y){const S=performance.now();for(;v<g.length;v++){if(performance.now()-S>y)return!1;const T=g[v];null==T.parentTile&&s(T,performance.now())}return!0}}}}function SymbolDeclutterer_i(y,g){for(const v of y){const y=v.unique;for(const v of y.parts){const S=v.targetOpacity>.5?1:-1;v.startOpacity+=S*((g-v.startTime)/ot.zk),v.startOpacity=Math.min(Math.max(v.startOpacity,0),1),v.startTime=g,v.targetOpacity=y.show&&v.show?1:0}}}class SymbolRepository_n{constructor(y,g,v){this.tileCoordRange=y,this._visibleTiles=g,this._createUnique=v,this._tiles=new Map,this._uniqueSymbolsReferences=new Map}get uniqueSymbols(){return null==this._uniqueSymbolLayerArray&&(this._uniqueSymbolLayerArray=this._createUniqueSymbolLayerArray()),this._uniqueSymbolLayerArray}get uniqueSymbolsReferences(){return this._uniqueSymbolsReferences}add(y,g){this._uniqueSymbolLayerArray=null;let v=this._tiles.get(y.id);v||(v={symbols:new Map},this._tiles.set(y.id,v));const S=new Map;if(g)for(const R of g)v.symbols.has(R)&&(S.set(R,v.symbols.get(R)),v.symbols.delete(R));else for(const[R,A]of y.layerData)v.symbols.has(R)&&(S.set(R,v.symbols.get(R)),v.symbols.delete(R));this._removeSymbols(S);const T=y.symbols,M=new Map;for(const[R,A]of T){let y=A.length;if(y>=32){let g=this.tileCoordRange;do{g/=2,y/=4}while(y>8&&g>64);const S=new util_i(this.tileCoordRange,this.tileCoordRange,g);M.set(R,{flat:A,index:S}),v.symbols.set(R,{flat:A,index:S});for(const y of A)S.getCell(y.xTile,y.yTile).push(y)}else M.set(R,{flat:A}),v.symbols.set(R,{flat:A})}this._addSymbols(y.key,T)}deleteStyleLayers(y){this._uniqueSymbolLayerArray=null;for(const[g,v]of this._tiles){const S=new Map;for(const g of y)v.symbols.has(g)&&(S.set(g,v.symbols.get(g)),v.symbols.delete(g));this._removeSymbols(S),0===v.symbols.size&&this._tiles.delete(g)}}removeTile(y){this._uniqueSymbolLayerArray=null;const g=this._tiles.get(y.id);if(!g)return;const v=new Map;for(const[S,T]of y.symbols)g.symbols.has(S)&&(v.set(S,g.symbols.get(S)),g.symbols.delete(S));this._removeSymbols(v),0===g.symbols.size&&this._tiles.delete(y.id)}querySymbols(y,g,v,S){const T=[],M=this.uniqueSymbols;for(const R of M){const S=R.styleLayerUID,M=R.uniqueSymbols;for(const R of M){const M=R.tileSymbols.find((y=>y.selectedForRendering));M&&util_c(M,y,g*(window.devicePixelRatio||1),v)&&T.push({vtlSymbol:M,styleLayerUID:S,tileKey:M.tile.key})}}return T}_removeSymbols(y){for(const[g,{flat:v}]of y)for(const y of v){const v=y.unique,S=v.tileSymbols,T=S.length-1;for(let g=0;g<T;g++)if(S[g]===y){S[g]=S[T];break}if(S.length=T,0===T){const y=this._uniqueSymbolsReferences.get(g);y.delete(v),0===y.size&&this._uniqueSymbolsReferences.delete(g)}y.unique=null}}_addSymbols(y,g){if(0===g.size)return;const v=this._visibleTiles;for(const S of v)S.parentTile||S.key.world!==y.world||S.key.level===y.level&&!S.key.equals(y)||this._matchSymbols(S,y,g);for(const[S,T]of g)for(const y of T)if(null==y.unique){const g=this._createUnique();y.unique=g,g.tileSymbols.push(y);let v=this._uniqueSymbolsReferences.get(S);v||(v=new Set,this._uniqueSymbolsReferences.set(S,v)),v.add(g)}}_matchSymbols(y,g,v){if(y.key.level>g.level){const v=y.key.level-g.level;if(y.key.row>>v!==g.row||y.key.col>>v!==g.col)return}if(g.level>y.key.level){const v=g.level-y.key.level;if(g.row>>v!==y.key.row||g.col>>v!==y.key.col)return}if(g.equals(y.key)){for(const S of y.childrenTiles)this._matchSymbols(S,g,v);return}const S=new Map;for(const[T,M]of v){const v=[];for(const S of M){const T=util_o(this.tileCoordRange,S.xTile,g.level,g.col,y.key.level,y.key.col),M=util_o(this.tileCoordRange,S.yTile,g.level,g.row,y.key.level,y.key.row);T>=0&&T<this.tileCoordRange&&M>=0&&M<this.tileCoordRange&&v.push({symbol:S,xTransformed:T,yTransformed:M})}const R=[],A=y.key.level<g.level?1:1<<y.key.level-g.level,D=this._tiles.get(y.id).symbols.get(T);if(D){const y=D.flat;for(const g of v){let v,S=!1;const T=g.xTransformed,M=g.yTransformed;v=null!=D.index?D.index.getCell(T,M):y;const C=g.symbol,L=C.hash;for(const y of v)if(L===y.hash&&Math.abs(T-y.xTile)<=A&&Math.abs(M-y.yTile)<=A){const g=y.unique;C.unique=g,g.tileSymbols.push(C),S=!0;break}S||R.push(C)}}R.length>0&&S.set(T,R)}for(const T of y.childrenTiles)this._matchSymbols(T,g,S)}_createUniqueSymbolLayerArray(){const y=this._uniqueSymbolsReferences,g=new Array(y.size);let v,S=0;for(const[T,M]of y){const y=new Array(M.size);v=0;for(const g of M)y[v++]=g;g[S]={styleLayerUID:T,uniqueSymbols:y},S++}return g}}const dt=1e-6;class _{constructor(y,g){this.styleRepository=y,this._tileToHandle=new Map,this._viewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._declutterViewState={scale:0,rotation:0,center:[0,0],size:[0,0]},this._offsetFromScreenCenter=[0,0],this._completed=!1,this._fading=(0,ct.v)(!1),this._symbolRepository=new SymbolRepository_n(4096,g,(()=>new core_s)),this._symbolDeclutterer=new SymbolDeclutterer_e(g,this._symbolRepository,((y,g,v)=>this._createCollisionJob(y,g,v)),((y,g)=>{y.allSymbolsFadingOut=!0,y.lastOpacityUpdate=g,function util_r(y,g,v){for(const[S,T]of y.symbols)util_n(y,g,v,T,S)}(y,g,!0),y.decluttered=!0,y.requestRender()}),((y,g)=>this.styleRepository.getStyleLayerByUID(y.styleLayerUID).z-this.styleRepository.getStyleLayerByUID(g.styleLayerUID).z),(y=>{const g=this.styleRepository.getStyleLayerByUID(y);if(this._zoom+dt<g.minzoom||this._zoom-dt>=g.maxzoom)return!1;const v=g.getLayoutProperty("visibility");return!v||v.getValue()!==ut.bv.NONE}))}get symbolRepository(){return this._symbolRepository}_createCollisionJob(y,g,v){return this.updateDecluttererViewState(),new jobs_l(y,g,v,this.styleRepository,this._zoom,this._viewState.rotation)}get fading(){return this._fading.value}get decluttererOffset(){return this._offsetFromScreenCenter}addTile(y){y.decluttered=!1,this._tileToHandle.set(y,y.on("symbols-changed",(()=>{this._symbolRepository.add(y),this.restartDeclutter()}))),this._symbolRepository.add(y),this.restartDeclutter()}removeTile(y){const g=this._tileToHandle.get(y);g&&(this._symbolRepository.removeTile(y),this.restartDeclutter(),g.remove(),this._tileToHandle.delete(y))}update(y,g){this._zoom=y,this._viewState={scale:g.scale,rotation:g.rotation,center:[g.center[0],g.center[1]],size:[g.size[0],g.size[1]]};const v=[0,0];g.toScreen(v,g.center);const S=[0,0];return g.toScreen(S,this._declutterViewState.center),this._offsetFromScreenCenter[0]=v[0]-S[0],this._offsetFromScreenCenter[1]=v[1]-S[1],this._continueDeclutter(),this._completed}restartDeclutter(){this._completed=!1,this._symbolDeclutterer.restart(),this._notifyUnstable()}clear(){this._completed=!1,this._symbolRepository=null,this._symbolDeclutterer.restart(),this._tileToHandle.forEach((y=>y.remove())),this._tileToHandle.clear()}get stale(){return this._zoom!==this._declutterZoom||this._viewState.size[0]!==this._declutterViewState.size[0]||this._viewState.size[1]!==this._declutterViewState.size[1]||this._viewState.scale!==this._declutterViewState.scale||this._viewState.rotation!==this._declutterViewState.rotation}deleteStyleLayers(y){this._symbolRepository.deleteStyleLayers(y)}_continueDeclutter(){this._completed&&!this.stale||(this._symbolDeclutterer.running||(this.updateDecluttererViewState(),this._symbolDeclutterer.restart()),this._symbolDeclutterer.setScreenSize(this._viewState.size[0],this._viewState.size[1]),this._completed=this._symbolDeclutterer.continue(ot.av),this._completed&&this._scheduleNotifyStable())}_scheduleNotifyStable(){null!=this._stableNotificationHandle&&clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=setTimeout((()=>{this._stableNotificationHandle=null,this._fading.value=!1}),1.5*ot.zk)}_notifyUnstable(){null!=this._stableNotificationHandle&&(clearTimeout(this._stableNotificationHandle),this._stableNotificationHandle=null),this._fading.value=!0}updateDecluttererViewState(){this._declutterZoom=this._zoom,this._declutterViewState.center[0]=this._viewState.center[0],this._declutterViewState.center[1]=this._viewState.center[1],this._declutterViewState.rotation=this._viewState.rotation,this._declutterViewState.scale=this._viewState.scale,this._declutterViewState.size[0]=this._viewState.size[0],this._declutterViewState.size[1]=this._viewState.size[1],this._offsetFromScreenCenter[0]=0,this._offsetFromScreenCenter[1]=0}}var _t=v(21847);class RenderableTile_t extends at.Y{_createTransforms(){return{displayViewScreenMat3:(0,$.vt)(),tileMat3:(0,$.vt)()}}}var yt=v(49214);const pt=1e-6;function VectorTileContainer_p(y,g){if(y){const v=y.getLayoutProperty("visibility");if(!v||v.getValue()!==ut.bv.NONE&&(void 0===y.minzoom||y.minzoom<g+pt)&&(void 0===y.maxzoom||y.maxzoom>=g-pt))return!0}return!1}class VectorTileContainer_m extends yt.A{constructor(y){super(y),this._backgroundTiles=[],this._computeDisplayInfoView(y)}destroy(){var y,g;this.removeAllChildren(),null!==(y=this._spriteMosaic)&&void 0!==y&&y.dispose(),this._spriteMosaic=null,null!==(g=this._glyphMosaic)&&void 0!==g&&g.dispose(),this._glyphMosaic=null,null!=this._symbolFader&&(this._symbolFader.clear(),this._symbolFader=null),this._styleRepository=null,this._backgroundTiles=[]}get fading(){var y,g;return null!==(y=null===(g=this._symbolFader)||void 0===g?void 0:g.fading)&&void 0!==y&&y}get symbolFader(){return this._symbolFader}get symbolRepository(){var y;return null===(y=this._symbolFader)||void 0===y?void 0:y.symbolRepository}setStyleResources(y,g,v,S){this._spriteMosaic=y,this._glyphMosaic=g,this._styleRepository=v,this._tileInfoView=S,this._computeDisplayInfoView(S),null==this._symbolFader&&(this._symbolFader=new _(this._styleRepository,this.children)),this._symbolFader.styleRepository=v}setSpriteMosaic(y){var g;null!==(g=this._spriteMosaic)&&void 0!==g&&g.dispose(),this._spriteMosaic=y}deleteStyleLayers(y){null!=this._symbolFader&&this._symbolFader.deleteStyleLayers(y)}createRenderParams(y){return{...super.createRenderParams(y),renderPass:null,styleLayer:null,styleLayerUID:-1,glyphMosaic:this._glyphMosaic,spriteMosaic:this._spriteMosaic,hasClipping:!!this._clippingInfos}}doRender(y){!this.visible||y.drawPhase!==_t.S5.MAP&&y.drawPhase!==_t.S5.DEBUG||void 0===this._spriteMosaic||super.doRender(y)}addChild(y){return super.addChild(y),null!=this._symbolFader?this._symbolFader.addTile(y):y.decluttered=!0,this.requestRender(),y}removeChild(y){return null!=this._symbolFader&&this._symbolFader.removeTile(y),this.requestRender(),super.removeChild(y)}renderChildren(y){const{drawPhase:g}=y;g!==_t.S5.DEBUG?this._doRender(y):super.renderChildren(y)}removeAllChildren(){for(let y=0;y<this.children.length;y++){const g=this.children[y];null!=this._symbolFader&&this._symbolFader.removeTile(g),g.dispose()}super.removeAllChildren()}getStencilTarget(){return this.children.filter((y=>y.neededForCoverage&&y.hasData()))}restartDeclutter(){null!=this._symbolFader&&this._symbolFader.restartDeclutter()}_doRender(y){const{context:g,state:v}=y,S=this._styleRepository;if(!S)return;const T=S.layers,M=this._displayInfo.scaleToZoom(v.scale);S.backgroundBucketIds.length>0&&(y.renderPass="background",this._renderBackgroundLayers(y,S.backgroundBucketIds,M)),super.renderChildren(y),y.drawPhase===_t.S5.MAP&&this._fade(M,v);const R=this.children.filter((y=>y.visible&&y.hasData()));if(!R||0===R.length)return g.bindVAO(),g.setStencilTestEnabled(!0),void g.setBlendingEnabled(!0);for(const A of R)A.triangleCount=0;g.setStencilWriteMask(0),g.setColorMask(!0,!0,!0,!0),g.setStencilOp(z.eA.KEEP,z.eA.KEEP,z.eA.REPLACE),g.setStencilTestEnabled(!0),g.setBlendingEnabled(!1),g.setDepthTestEnabled(!0),g.setDepthWriteEnabled(!0),g.setDepthFunction(z.MT.LEQUAL),g.setClearDepth(1),g.clear(g.gl.DEPTH_BUFFER_BIT),y.renderPass="opaque";for(let A=T.length-1;A>=0;A--)this._renderStyleLayer(T[A],y,R);g.setDepthWriteEnabled(!1),g.setBlendingEnabled(!0),g.setBlendFunctionSeparate(z.dn.ONE,z.dn.ONE_MINUS_SRC_ALPHA,z.dn.ONE,z.dn.ONE_MINUS_SRC_ALPHA),y.renderPass="translucent";for(let A=0;A<T.length;A++)this._renderStyleLayer(T[A],y,R);g.bindVAO(),g.setStencilTestEnabled(!0),g.setBlendingEnabled(!0);for(const A of R)A.debugInfo.display.triangleCount=A.triangleCount}_fade(y,g){null!=this._symbolFader&&(this._symbolFader.update(y,g)||this.requestRender())}_renderStyleLayer(y,g,v){const{displayLevel:S,painter:T,renderPass:M}=g;if(void 0===y)return;const R=y.getLayoutProperty("visibility");if(R&&R.getValue()===ut.bv.NONE)return;let A;switch(y.type){case ut.Dc.BACKGROUND:return;case ut.Dc.FILL:if("opaque"!==M&&"translucent"!==g.renderPass)return;A="vtlFill";break;case ut.Dc.LINE:if("translucent"!==M)return;A="vtlLine";break;case ut.Dc.CIRCLE:if("translucent"!==M)return;A="vtlCircle";break;case ut.Dc.SYMBOL:if("translucent"!==M)return;A="vtlSymbol"}if(v=y.type===ut.Dc.SYMBOL?v.filter((y=>y.decluttered)):v.filter((y=>y.neededForCoverage)),"vtlSymbol"!==A&&(0===v.length||void 0!==y.minzoom&&y.minzoom>=S+pt||void 0!==y.maxzoom&&y.maxzoom<S-pt))return;const D=y.uid;g.styleLayerUID=D,g.styleLayer=y;for(const C of v)if(C.layerData.has(D)){T.renderObjects(g,v,A);break}}_renderBackgroundLayers(y,g,v){const{context:S,painter:T,state:M}=y,R=this._styleRepository;let A=!1;for(const U of g)if(R.getLayerById(U).type===ut.Dc.BACKGROUND&&VectorTileContainer_p(R.getLayerById(U),v)){A=!0;break}if(!A)return;const D=this._tileInfoView,C=D.getTileCoverage(y.state,0,!0,"smallest"),{spans:L,lodInfo:k}=C,{level:O}=k,V=(0,U.vt)(),E=[];if(this._renderPasses){const g=this._renderPasses[0];null!=this._clippingInfos&&(g.brushes[0].prepareState(y),g.brushes[0].drawMany(y,this._clippingInfos))}const q=this._backgroundTiles;let F,H=0;for(const{row:z,colFrom:W,colTo:G}of L)for(let y=W;y<=G;y++){if(H<q.length)F=q[H],F.key.set(O,z,k.normalizeCol(y),k.getWorldForColumn(y)),D.getTileBounds(V,F.key,!1),F.x=V[0],F.y=V[3],F.resolution=D.getTileResolution(O);else{const g=new Z.A(O,z,k.normalizeCol(y),k.getWorldForColumn(y)),v=D.getTileBounds((0,U.vt)(),g),S=D.getTileResolution(O);F=new RenderableTile_t(g,S,v[0],v[3],512,512,4096,4096),q.push(F)}F.setTransform(M),E.push(F),H++}S.setStencilWriteMask(0),S.setColorMask(!0,!0,!0,!0),S.setStencilOp(z.eA.KEEP,z.eA.KEEP,z.eA.REPLACE),S.setStencilFunction(z.MT.EQUAL,0,255),S.setStencilTestEnabled(!0);for(const U of g){const g=R.getLayerById(U);g.type===ut.Dc.BACKGROUND&&VectorTileContainer_p(g,v)&&(y.styleLayerUID=g.uid,y.styleLayer=g,T.renderObjects(y,E,"vtlBackground"))}K.A.pool.release(C)}_computeDisplayInfoView(y){let g=y.tileInfo.lods[0].scale;const v=Math.max(25,y.tileInfo.lods.length),S=[];for(let T=0;T<=v;T++)S.push(g),g/=2;this._displayInfo=ht.A.create({scales:S,size:512,spatialReference:y.spatialReference,numLODs:v})}}var ft=v(13812),gt=v(69719),mt=v(30925),xt=v(85794),vt=v(25442),wt=v(11278);const VectorTileFeatureIndex_h=(y,g)=>{const v=y.vtlSymbol.sourceTile,S=g.vtlSymbol.sourceTile;return v.level!==S.level?v.level-S.level:v.row!==S.row?v.row-S.row:v.col!==S.col?v.col-S.col:y.styleLayerUID-g.styleLayerUID};class VectorTileFeatureIndex_d{constructor(y,g,v,S,T){this.tileKey=y,this._index=null,this._styleRepository=null,this._tileHandler=null,this._tileKeyToPBF=new Map,this._tileLayerData=g,this._styleRepository=v,this._tileHandler=S,this._parentLayer=T}static create(y,g,v,S,T){return new VectorTileFeatureIndex_d(y,g,v,S,T)}clear(){var y;null!==(y=this._index)&&void 0!==y&&y.clear(),this._tileKeyToPBF.clear()}async queryAttributes(y,g,v,S,T){if(0===this._tileLayerData.size||!this._styleRepository||!this._tileHandler)return[];null===this._index&&(this._index=new mt.w(100,VectorTileFeatureIndex_m),await this._indexLayers());const M=[];return this._queryIndex(M,y,g,v,this.tileKey.level,S),T&&(null===T||void 0===T?void 0:T.length)>0&&await this._getSymbolsAttributes(M,T),M}async _indexLayers(){const y=this.tileKey,g=this._styleRepository.layers,v=await this._getTilePayload(y);for(const[S,T]of this._tileLayerData){const M=g[S],R=v.find((y=>y.sourceName===M.source));if(!R)continue;const{protobuff:A,key:D}=R;if(T.type!==V.NP.SYMBOL){const g=1<<y.level-D.level,v=y.row-D.row*g,S=y.col-D.col*g;this._indexLayer(M,A,y.level,g,v,S)}}}_indexLayer(y,g,v,S,T,M){const R=y.sourceLayer,A=y.getFeatureFilter(),D=v,C=v+1,L=(0,st.IU)(D),k=new X.A(new Uint8Array(g),new DataView(g));for(;k.next();)switch(k.tag()){case 3:{const g=k.getMessage(),U=new vt.A(g);if(g.release(),U.name!==R)continue;const O=U.getData(),V=U.extent/S,E=V*M-L,q=V*T-L,F=E+V+2*L,z=q+V+2*L,H=V/512,W=4096/V,G=V*M,X=V*T;for(;O.nextTag(2);){const g=O.getMessage(),S=new xt.A(g,U);if(g.release(),A&&!A.filter(S,v))continue;const T=S.values||{},M=T._minzoom,R=T._maxzoom;if(M&&M>=10*C||R&&R<=10*D)continue;const L=y.getFeatureInflatedBounds(S,D,U.extent,H);null==L||L[0]>F||L[1]>z||L[2]<E||L[3]<q||(L[0]=(L[0]-G)*W,L[1]=(L[1]-X)*W,L[2]=(L[2]-G)*W,L[3]=(L[3]-X)*W,this._index.insert(new wt.e4(y,S,L,W,G,X)))}break}default:k.skip()}}async _getSymbolsAttributes(y,g){if(!g||0===g.length)return y;const v=[];g.sort(VectorTileFeatureIndex_h);let S=g[0].styleLayerUID,T=0;for(let D=0;D<g.length;D++)S!==g[D].styleLayerUID&&(v.push({from:T,to:D,styleLayerUID:S,sourceTileKey:g[D].vtlSymbol.sourceTile}),T=D,S=g[D].styleLayerUID);v.push({from:T,to:g.length,styleLayerUID:S,sourceTileKey:g[g.length-1].vtlSymbol.sourceTile});const M=this._styleRepository.layers;let R,A=null;for(const D of v){const v=await this._getTilePayload(D.sourceTileKey);R=M[D.styleLayerUID],A=!!R&&v.find((y=>y.sourceName===R.source)),A&&this._addSymbolsAttributes(y,g.slice(D.from,D.to).map((y=>y.vtlSymbol)),S,A)}return y}_addSymbolsAttributes(y,g,v,S){const T=this._styleRepository.layers,M=S.key,R=this.tileKey,A=1<<R.level-M.level,D=R.row-M.row*A,C=R.col-M.col*A;this._getSymbolAttributes(S.protobuff,g,v,A,D,C).forEach((g=>{const{attributes:S,tilePoint:M}=g;y.push({layerId:T[v].id,layerIndex:v,graphic:new ft.A({attributes:S,origin:{type:"vector-tile",layerId:T[v].id,layerIndex:v,layer:this._parentLayer}}),tilePoint:M})}))}_getSymbolAttributes(y,g,v,S,T,M){const R=[],A=this._styleRepository.layers;let D=0;g.sort(((y,g)=>y.featureIndex-g.featureIndex));const C=new X.A(new Uint8Array(y),new DataView(y));for(;C.next();)switch(C.tag()){case 3:{const y=C.getMessage(),L=new vt.A(y);if(y.release(),L.name!==A[v].sourceLayer)continue;const k=L.getData(),U=L.extent/S,O=4096/U,V=U*M,E=U*T;let q=0;for(;k.nextTag(2);){const y=k.getMessage();if(q++===g[D].featureIndex){const g=new xt.A(y,L),v=g.values,S=g.getGeometry(),T=null!=S?[O*(S[0][0].x-V),O*(S[0][0].y-E)]:null;R.push({attributes:v,tilePoint:T}),D++}if(y.release(),D===g.length)return R}break}default:C.skip()}return R}_queryIndex(y,g,v,S,T,M){var R;const A=8*S*(window.devicePixelRatio||1);return null!==(R=this._index)&&void 0!==R&&R.search({minX:g-A,minY:v-A,maxX:g+A,maxY:v+A},(R=>{const{layer:A,feature:D}=R;A.isIntersectingFeature(g,v,S,D,T,M,R)&&y.push({layerId:A.id,layerIndex:A.uid,tilePoint:null,graphic:new ft.A({attributes:D.values,origin:{type:"vector-tile",layerId:R.layer.id,layerIndex:R.layer.uid,layer:this._parentLayer}})})})),y}async _getTilePayload(y){return(0,gt.tE)(this._tileKeyToPBF,y.id,(()=>this._tileHandler.fetchTilePBFs(y))).then((y=>y))}}const VectorTileFeatureIndex_m=y=>({minX:y.bounds[0],minY:y.bounds[1],maxX:y.bounds[2],maxY:y.bounds[3]});var bt=v(83299),St=v(86083);class TileInfoViewPOT_t extends et.A{constructor(){super(...arguments),this._fullCacheLodInfos=null,this._levelByScale={}}getTileParentId(y){const g=Z.A.pool.acquire(y),v=0===g.level?null:Z.A.getId(g.level-1,g.row>>1,g.col>>1,g.world);return Z.A.pool.release(g),v}getTileCoverage(y,g){let v=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],S=arguments.length>3?arguments[3]:void 0;const T=super.getTileCoverage(y,g,v,S);if(!T)return T;const M=1<<T.lodInfo.level;return T.spans=T.spans.filter((y=>y.row>=0&&y.row<M)),T}scaleToLevel(y){if(this._fullCacheLodInfos||this._initializeFullCacheLODs(this._lodInfos),this._levelByScale[y])return this._levelByScale[y];{const g=this._fullCacheLodInfos;if(y>g[0].scale)return g[0].level;let v,S;for(let T=0;T<g.length-1;T++)if(S=g[T+1],y>S.scale)return v=g[T],v.level+(v.scale-y)/(v.scale-S.scale);return g[g.length-1].level}}_initializeFullCacheLODs(y){let g;if(0===y[0].level)g=y.map((y=>({level:y.level,resolution:y.resolution,scale:y.scale})));else{const y=this.tileInfo.size[0],v=this.tileInfo.spatialReference;g=ht.A.create({size:y,spatialReference:v}).lods.map((y=>({level:y.level,resolution:y.resolution,scale:y.scale})))}for(let v=0;v<g.length;v++)this._levelByScale[g[v].scale]=g[v].level;this._fullCacheLodInfos=g}}var Tt=v(27012);let It=class extends((0,St.e)(Tt.A)){constructor(){super(...arguments),this._styleChanges=[],this._fetchQueue=null,this._parseQueue=null,this._tileHandlerPromise=null,this._isTileHandlerReady=!1}get fading(){var y,g;return null!==(y=null===(g=this._vectorTileContainer)||void 0===g?void 0:g.fading)&&void 0!==y&&y}async hitTest(y,g){var v,S,T;const M=this._tileHandlerPromise,R=null===(v=this._vectorTileContainer)||void 0===v?void 0:v.symbolFader;if(!M||!this._isTileHandlerReady||!R)return;await M;let A=null;const D=null===(S=this._vectorTileContainer)||void 0===S?void 0:S.symbolRepository;D&&(A=D.querySymbols(g,2,R.decluttererOffset,{}));const C=this.view.state,L=this._tileManager.getIntersectingTiles(g.x,g.y,2,C,A);if((!L||0===L.length)&&0===(null===(T=A)||void 0===T?void 0:T.length))return null;y=y.clone().normalize();const k=[],U=[];for(const V of L){var O;k.push(this._queryTile(U,y,2,this.view.state.rotation,V,null===(O=A)||void 0===O?void 0:O.filter((y=>y.tileKey.id===V.id))))}return await Promise.all(k),U}update(y){if(this._tileHandlerPromise&&this._isTileHandlerReady)return y.pixelRatio!==this._tileHandler.devicePixelRatio?(this._start(),void(this._tileHandler.devicePixelRatio=y.pixelRatio)):void(this._styleChanges.length>0?this._tileHandlerPromise=this._applyStyleChanges():(this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.state=y.state,this._parseQueue.state=y.state,this._tileManager.update(y)||this.requestUpdate(),this._parseQueue.resume(),this._fetchQueue.resume()))}attach(){const{style:y}=this.layer.currentStyleInfo;this._styleRepository=new bt.A(y),this._tileInfoView=new TileInfoViewPOT_t(this.layer.tileInfo,this.layer.fullExtent),this._vectorTileContainer=new VectorTileContainer_m(this._tileInfoView),this._tileHandler=new h(this.layer,this._styleRepository,window.devicePixelRatio||1,this.layer.tileInfo.lods.length-1),this.container.addChild(this._vectorTileContainer),this._start(),this.addAttachHandles([this.layer.on("paint-change",(y=>{if(y.isDataDriven)this._styleChanges.push({type:V.$q.PAINTER_CHANGED,data:y}),this.requestUpdate();else{var g,v;const S=this._styleRepository,T=S.getLayerById(y.layer);if(!T)return;const M=T.type===ut.Dc.SYMBOL;S.setPaintProperties(y.layer,y.paint),M&&null!==(g=this._vectorTileContainer)&&void 0!==g&&g.restartDeclutter(),null===(v=this._vectorTileContainer)||void 0===v||v.requestRender()}})),this.layer.on("layout-change",(y=>{const g=this._styleRepository,v=g.getLayerById(y.layer);if(!v)return;const S=(0,L.Ui)(v.layout,y.layout);if(null!=S){var T,M;if((0,L.EB)(S,"visibility")&&1===function P(y){if(null==y)return 0;switch(y.type){case"partial":return Object.keys(y.diff).length;case"complete":return Math.max(Object.keys(y.oldValue).length,Object.keys(y.newValue).length);case"collection":return Object.keys(y.added).length+Object.keys(y.changed).length+Object.keys(y.removed).length}}(S))return g.setLayoutProperties(y.layer,y.layout),v.type===ut.Dc.SYMBOL&&null!==(T=this._vectorTileContainer)&&void 0!==T&&T.restartDeclutter(),void(null===(M=this._vectorTileContainer)||void 0===M||M.requestRender());this._styleChanges.push({type:V.$q.LAYOUT_CHANGED,data:y}),this.requestUpdate()}})),this.layer.on("style-layer-visibility-change",(y=>{var g,v;const S=this._styleRepository,T=S.getLayerById(y.layer);T&&(S.setStyleLayerVisibility(y.layer,y.visibility),T.type===ut.Dc.SYMBOL&&null!==(g=this._vectorTileContainer)&&void 0!==g&&g.restartDeclutter(),null===(v=this._vectorTileContainer)||void 0===v||v.requestRender())})),this.layer.on("style-layer-change",(y=>{this._styleChanges.push({type:V.$q.LAYER_CHANGED,data:y}),this.requestUpdate()})),this.layer.on("delete-style-layer",(y=>{this._styleChanges.push({type:V.$q.LAYER_REMOVED,data:y}),this.requestUpdate()})),this.layer.on("load-style",(()=>this._loadStyle())),this.layer.on("spriteSource-change",(y=>{this._styleChanges.push({type:V.$q.SPRITES_CHANGED,data:y});const g=this._styleRepository.layers;for(const v of g)switch(v.type){case ut.Dc.SYMBOL:v.getLayoutProperty("icon-image")&&this._styleChanges.push({type:V.$q.LAYOUT_CHANGED,data:{layer:v.id,layout:v.layout}});break;case ut.Dc.LINE:v.getPaintProperty("line-pattern")&&this._styleChanges.push({type:V.$q.PAINTER_CHANGED,data:{layer:v.id,paint:v.paint,isDataDriven:v.isPainterDataDriven()}});break;case ut.Dc.FILL:v.getLayoutProperty("fill-pattern")&&this._styleChanges.push({type:V.$q.PAINTER_CHANGED,data:{layer:v.id,paint:v.paint,isDataDriven:v.isPainterDataDriven()}})}this.requestUpdate()}))])}detach(){this._stop(),this.container.removeAllChildren(),this._vectorTileContainer=(0,R.pR)(this._vectorTileContainer),this._tileHandler=(0,R.pR)(this._tileHandler)}moveStart(){this.requestUpdate()}viewChange(){this.requestUpdate()}moveEnd(){this.requestUpdate()}supportsSpatialReference(y){var g;return(0,O.aI)(null===(g=this.layer.tileInfo)||void 0===g?void 0:g.spatialReference,y)}canResume(){let y=super.canResume();const{currentStyleInfo:g}=this.layer;if(y&&null!==g&&void 0!==g&&g.layerDefinition){const v=this.view.scale,{minScale:S,maxScale:T}=g.layerDefinition;(null===g||void 0===g?void 0:g.layerDefinition)&&(S&&S<v&&(y=!1),T&&T>v&&(y=!1))}return y}isUpdating(){return this.fading}acquireTile(y){const g=this._createVectorTile(y);return this._updatingHandles.addPromise(this._fetchQueue.push(g.key).then((y=>this._parseQueue.push({key:g.key,data:y}))).then((y=>{g.once("attach",(()=>this.requestUpdate())),g.setData(y),this.requestUpdate()})).catch((y=>{(0,A.zf)(y)||M.A.getLogger(this).error(y)}))),g}releaseTile(y){const g=y.key.id;this._fetchQueue.abort(g),this._parseQueue.abort(g),this.requestUpdate()}_start(){if(this._stop(),this._tileManager=new TileManager_h({acquireTile:y=>this.acquireTile(y),releaseTile:y=>this.releaseTile(y),tileInfoView:this._tileInfoView},this._vectorTileContainer),!this.layer.currentStyleInfo)return;const y=new AbortController,g=this._tileHandler.start({signal:y.signal}).then((()=>{this._fetchQueue=new it.A({tileInfoView:this._tileInfoView,process:(y,g)=>this._getTileData(y,g),concurrency:15}),this._parseQueue=new it.A({tileInfoView:this._tileInfoView,process:(y,g)=>this._parseTileData(y,g),concurrency:8}),this.requestUpdate(),this._isTileHandlerReady=!0}));this._tileHandler.spriteMosaic.then((y=>{this._vectorTileContainer.setStyleResources(y,this._tileHandler.glyphMosaic,this._styleRepository,this._tileInfoView),this.requestUpdate()})),this._tileHandlerAbortController=y,this._tileHandlerPromise=g}_stop(){if(!this._tileHandlerAbortController||!this._vectorTileContainer)return;const y=this._tileHandlerAbortController;y&&y.abort(),this._tileHandlerPromise=null,this._isTileHandlerReady=!1,this._fetchQueue=(0,R.pR)(this._fetchQueue),this._parseQueue=(0,R.pR)(this._parseQueue),this._tileManager=(0,R.pR)(this._tileManager),this._vectorTileContainer.removeAllChildren()}async _getTileData(y,g){return this._tileHandler.fetchTileData(y,g)}async _parseTileData(y,g){return this._tileHandler.parseTileData(y,g)}async _applyStyleChanges(){this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._tileManager.clearCache();const y=this._styleChanges;try{await this._tileHandler.updateStyle(y)}catch(l){M.A.getLogger(this).error("error applying vector-tiles style update",l.message),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0}const g=this._styleRepository,v=new Set;y.forEach((y=>{if(y.type!==V.$q.LAYER_REMOVED)return;const S=y.data,T=g.getLayerById(S.layer);T&&v.add(T.uid)}));const S=new Set;y.forEach((y=>{let v;switch(y.type){case V.$q.PAINTER_CHANGED:g.setPaintProperties(y.data.layer,y.data.paint),v=y.data.layer;break;case V.$q.LAYOUT_CHANGED:g.setLayoutProperties(y.data.layer,y.data.layout),v=y.data.layer;break;case V.$q.LAYER_REMOVED:return void g.deleteStyleLayer(y.data.layer);case V.$q.LAYER_CHANGED:g.setStyleLayer(y.data.layer,y.data.index),v=y.data.layer.id;break;case V.$q.SPRITES_CHANGED:this._vectorTileContainer.setSpriteMosaic(this._tileHandler.setSpriteSource(y.data.spriteSource))}if(v){const y=g.getLayerById(v);y&&S.add(y.uid)}}));const T=this._vectorTileContainer.children;if(v.size>0){const y=Array.from(v);this._vectorTileContainer.deleteStyleLayers(y);for(const g of T)g.deleteLayerData(y)}if(this._fetchQueue.resume(),this._parseQueue.resume(),S.size>0){const y=Array.from(S),g=[];for(const v of T){const S=this._updatingHandles.addPromise(this._fetchQueue.push(v.key).then((g=>this._parseQueue.push({key:v.key,data:g,styleLayerUIDs:y}))).then((y=>v.setData(y))));g.push(S)}await Promise.all(g)}this._styleChanges=[],this._isTileHandlerReady=!0,this.requestUpdate()}async _loadStyle(){const{style:y}=this.layer.currentStyleInfo,g=(0,T.o8)(y);this._isTileHandlerReady=!1,this._fetchQueue.pause(),this._parseQueue.pause(),this._fetchQueue.clear(),this._parseQueue.clear(),this._styleRepository=new bt.A(g),this._vectorTileContainer.destroy(),this._tileManager.clear(),this._tileHandlerAbortController.abort(),this._tileHandlerAbortController=new AbortController;const{signal:v}=this._tileHandlerAbortController;try{this._tileHandlerPromise=this._tileHandler.setStyle(this._styleRepository,g,this.layer.tileInfo.lods.length-1),await this._tileHandlerPromise}catch(n){if(!(0,A.zf)(n))throw n}if(v.aborted)return this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,void this.requestUpdate();const S=await this._tileHandler.spriteMosaic,M=this._vectorTileContainer;this._tileInfoView=new TileInfoViewPOT_t(this.layer.tileInfo,this.layer.fullExtent),M.setStyleResources(S,this._tileHandler.glyphMosaic,this._styleRepository,this._tileInfoView),this._tileManager=new TileManager_h({acquireTile:y=>this.acquireTile(y),releaseTile:y=>this.releaseTile(y),tileInfoView:this._tileInfoView},this._vectorTileContainer),this._fetchQueue.resume(),this._parseQueue.resume(),this._isTileHandlerReady=!0,this.requestUpdate()}_createVectorTile(y){const g=this._tileInfoView.getTileBounds((0,U.vt)(),y),v=this._tileInfoView.getTileResolution(y.level);return new VectorTile_d(y,v,g[0],g[3],512,512,this._styleRepository)}async _queryTile(y,g,v,S,T,M){if(0===T.layerData.size)return;const R=this._ensureTileIndex(T),A=this._tileInfoView.getTileBounds((0,U.vt)(),T.key,!0),D=(g.x-A[0])/(A[2]-A[0])*4096,C=4096*(1-(g.y-A[1])/(A[3]-A[1])),L=await R.queryAttributes(D,C,v,S,M);for(const k of L)k.graphic.geometry=this._tileToMapPoint(k.tilePoint,T.transforms.tileUnitsToPixels),y.push({type:"graphic",layer:this.layer,graphic:k.graphic,mapPoint:g.clone()});y.sort(((y,g)=>g.graphic.origin.layerIndex-y.graphic.origin.layerIndex))}_tileToMapPoint(y,g){if(!y)return null;const v=y[0]*g[0]+y[1]*g[3]+g[6],S=y[0]*g[1]+y[1]*g[4]+g[7],T=this.view.state,M=[0,0];return T.toMap(M,[v,S]),new k.A({x:M[0],y:M[1],spatialReference:T.spatialReference})}_ensureTileIndex(y){let g=y.featureIndex;return g||(g=VectorTileFeatureIndex_d.create(y.key,y.layerData,this._styleRepository,this._tileHandler,this.layer),y.featureIndex=g),g}};(0,S._)([(0,D.MZ)()],It.prototype,"_isTileHandlerReady",void 0),It=(0,S._)([(0,C.$)("esri.views.2d.layers.VectorTileLayerView2D")],It);const Mt=It},27012:(y,g,v)=>{v.d(g,{A:()=>V});var S=v(80671),T=v(18763),M=v(73067),R=v(16904),A=v(89412),D=v(35598),C=v(5203),L=v(57453),k=(v(50886),v(76761),v(68682)),U=v(31059);let O=class extends((0,R.sA)((0,C.g)(M.A.EventedMixin(T.A)))){constructor(y){super(y),this._updatingHandles=new U.U,this.layer=null,this.parent=null}initialize(){this.when().catch((y=>{if("layerview:create-error"!==y.name){var g;const v=this.layer&&this.layer.id||"no id",S=(null===(g=this.layer)||void 0===g?void 0:g.title)||"no title";A.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(S,"', id: '").concat(v,"')"),y)}}))}destroy(){this._updatingHandles=(0,D.pR)(this._updatingHandles)}get fullOpacity(){var y,g,v,S;return(null!==(y=null===(g=this.layer)||void 0===g?void 0:g.opacity)&&void 0!==y?y:1)*(null!==(v=null===(S=this.parent)||void 0===S?void 0:S.fullOpacity)&&void 0!==v?v:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var y;return!this.suspended&&!0===(null===(y=this.layer)||void 0===y?void 0:y.legendEnabled)}get updating(){var y;return!((null===(y=this._updatingHandles)||void 0===y||!y.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var y;return!0===(null===(y=this.layer)||void 0===y?void 0:y.visible)}set visible(y){this._overrideIfSome("visible",y)}canResume(){var y,g,v;return this.visible&&(null===(y=this.layer)||void 0===y?void 0:y.loaded)&&!(null!==(g=this.parent)&&void 0!==g&&g.suspended)&&(null===(v=this.view)||void 0===v?void 0:v.ready)||!1}getSuspendInfo(){var y,g;const v=null!==(y=this.parent)&&void 0!==y&&y.suspended?this.parent.suspendInfo:{};return null!==(g=this.view)&&void 0!==g&&g.ready||(v.viewNotReady=!0),this.layer&&this.layer.loaded||(v.layerNotLoaded=!0),this.visible||(v.layerInvisible=!0),v}isUpdating(){return!1}};(0,S._)([(0,L.MZ)()],O.prototype,"fullOpacity",null),(0,S._)([(0,L.MZ)()],O.prototype,"layer",void 0),(0,S._)([(0,L.MZ)()],O.prototype,"parent",void 0),(0,S._)([(0,L.MZ)({readOnly:!0})],O.prototype,"suspended",null),(0,S._)([(0,L.MZ)({readOnly:!0})],O.prototype,"suspendInfo",null),(0,S._)([(0,L.MZ)({readOnly:!0})],O.prototype,"legendEnabled",null),(0,S._)([(0,L.MZ)({type:Boolean,readOnly:!0})],O.prototype,"updating",null),(0,S._)([(0,L.MZ)({readOnly:!0})],O.prototype,"updatingProgress",null),(0,S._)([(0,L.MZ)()],O.prototype,"visible",null),(0,S._)([(0,L.MZ)()],O.prototype,"view",void 0),O=(0,S._)([(0,k.$)("esri.views.layers.LayerView")],O);const V=O},6673:(y,g,v)=>{v.d(g,{A:()=>D});var S=v(80671),T=v(83375),M=v(57453),R=(v(50886),v(89412),v(76761),v(68682));let A=class extends T.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,S._)([(0,M.MZ)({readOnly:!0})],A.prototype,"version",null),A=(0,S._)([(0,R.$)("esri.views.layers.support.ClipArea")],A);const D=A},90874:(y,g,v)=>{v.d(g,{A:()=>V});var S,T=v(80671),M=(v(30174),v(57453)),R=(v(50886),v(89412),v(76761),v(68682)),A=v(66445),D=v(31670),C=v(6673),L=v(84661),k=v(48343);const U={base:A.A,key:"type",typeMap:{extent:L.A,polygon:k.A}};let O=S=class extends C.A{constructor(y){super(y),this.type="geometry",this.geometry=null}clone(){var y,g;return new S({geometry:null!==(y=null===(g=this.geometry)||void 0===g?void 0:g.clone())&&void 0!==y?y:null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,T._)([(0,M.MZ)({types:U,json:{read:D.rS,write:!0}})],O.prototype,"geometry",void 0),O=S=(0,T._)([(0,R.$)("esri.views.layers.support.Geometry")],O);const V=O}}]);
//# sourceMappingURL=7634.5e900ba7.chunk.js.map