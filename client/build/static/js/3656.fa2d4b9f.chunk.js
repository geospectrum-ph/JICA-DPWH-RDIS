"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[3656],{63656:(e,o,L)=>{L.r(o),L.d(o,{fromUrl:()=>y});var g=L(4180),P=L(4270),O=L(26128),T=L(75427),U=L(72284),C=L(74629),V=L(77247),F=L(59741);const M={FeatureLayer:!0,SceneLayer:!0};async function y(e){var o;const V=null===(o=e.properties)||void 0===o?void 0:o.customParameters,A=await async function p(e,o){let L=(0,O.qg)(e);if(null==L&&(L=await async function d(e,o){var L,g;const T=await(0,F.V)(e,{customParameters:o});let U=null,C=null;const V=T.type;if("Feature Layer"===V||"Table"===V?(U="FeatureServer",C=null!==(L=T.id)&&void 0!==L?L:null):"indexedVector"===V?U="VectorTileServer":T.hasOwnProperty("mapName")?U="MapServer":T.hasOwnProperty("bandCount")&&T.hasOwnProperty("pixelSizeX")?U="ImageServer":T.hasOwnProperty("maxRecordCount")&&T.hasOwnProperty("allowGeometryUpdates")?U="FeatureServer":T.hasOwnProperty("streamUrls")?U="StreamServer":v(T)?(U="SceneServer",C=T.id):T.hasOwnProperty("layers")&&v(null===(g=T.layers)||void 0===g?void 0:g[0])&&(U="SceneServer"),!U)return null;const M=null!=C?(0,O.iz)(e):null;return{title:null!=M&&T.name||(0,P.e7)(e),serverType:U,sublayer:C,url:{path:null!=M?M.serviceUrl:(0,P.An)(e).path}}}(e,o)),null==L)throw new g.A("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:e});const{serverType:V,sublayer:A}=L;let k;const E={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"},N="FeatureServer"===V,D="SceneServer"===V,J={parsedUrl:L,Constructor:null,layerId:(N||D)&&null!==A&&void 0!==A?A:void 0,layers:[],tables:[]};switch(V){case"MapServer":k=null!=A?"FeatureLayer":await async function b(e,o){return(await(0,F.V)(e,{customParameters:o})).tileInfo}(e,o)?"TileLayer":"MapImageLayer";break;case"ImageServer":{var j;const L=await(0,F.V)(e,{customParameters:o}),{tileInfo:g,cacheType:P}=L;k=g?"LERC"!==(null===g||void 0===g||null===(j=g.format)||void 0===j?void 0:j.toUpperCase())||P&&"elevation"!==P.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer";break}case"SceneServer":{const e=await(0,F.V)(L.url.path,{customParameters:o});if(k="SceneLayer",e){const o=null===e||void 0===e?void 0:e.layers;if("Voxel"===(null===e||void 0===e?void 0:e.layerType))k="VoxelLayer";else if(null!==o&&void 0!==o&&o.length){var x;const e=null===(x=o[0])||void 0===x?void 0:x.layerType;null!=e&&null!=C.XX[e]&&(k=C.XX[e])}}break}case"3DTilesServer":throw new g.A("arcgis-layers:unsupported","fromUrl() not supported for 3DTiles layers");case"FeatureServer":if(k="FeatureLayer",null!=A){const L=await(0,F.V)(e,{customParameters:o});J.sourceJSON=L,"Oriented Imagery Layer"===L.type&&(k="OrientedImageryLayer")}break;default:k=E[V]}if(M[k]&&null==A){var q;const L=await async function S(e,o,L){var g,P;let O,C,V=!1;switch(o){case"FeatureServer":{const o=await(0,U.Q)(e,{customParameters:L});V=!!o.layersJSON,O=o.layersJSON||o.serviceJSON;break}case"SceneServer":{const o=await async function w(e,o){var L;const g=await(0,F.V)(e,{customParameters:o}),P=null===(L=g.layers)||void 0===L?void 0:L[0];if(!P)return{serviceInfo:g};try{const{serverUrl:L}=await(0,T.L)(e),P=await(0,F.V)(L,{customParameters:o}).catch((()=>null));return P&&(g.tables=P.tables),{serviceInfo:g,tableServerUrl:L}}catch{return{serviceInfo:g}}}(e,L);O=o.serviceInfo,C=o.tableServerUrl;break}default:O=await(0,F.V)(e,{customParameters:L})}const M=null===(g=O)||void 0===g?void 0:g.layers,A=null===(P=O)||void 0===P?void 0:P.tables;return{layers:(null===M||void 0===M?void 0:M.map((e=>({id:e.id}))).reverse())||[],tables:(null===A||void 0===A?void 0:A.map((e=>({serverUrl:C,id:e.id}))).reverse())||[],layerInfos:V?M:[],tableInfos:V?A:[]}}(e,V,o);if(N&&(J.sublayerInfos=L.layerInfos,J.tableInfos=L.tableInfos),1!==L.layers.length+L.tables.length)J.layers=L.layers,J.tables=L.tables,N&&(null===(q=L.layerInfos)||void 0===q?void 0:q.length)&&(J.sublayerConstructorProvider=await async function I(e){const o=[],L=[];if(e.forEach((e=>{const{type:g}=e;"Oriented Imagery Layer"===g?(o.push(g),L.push(h("OrientedImageryLayer"))):(o.push(g),L.push(h("FeatureLayer")))})),!L.length)return;const g=await Promise.all(L),P=new Map;return o.forEach(((e,o)=>{P.set(e,g[o])})),e=>P.get(e.type)}(L.layerInfos));else if(N||D){var G,_,K,Q,R,X;const e=null!==(G=null===(_=L.layerInfos)||void 0===_?void 0:_[0])&&void 0!==G?G:null===(K=L.tableInfos)||void 0===K?void 0:K[0];J.layerId=null!==(Q=null===(R=L.layers[0])||void 0===R?void 0:R.id)&&void 0!==Q?Q:null===(X=L.tables[0])||void 0===X?void 0:X.id,J.sourceJSON=e,N&&"Oriented Imagery Layer"===(null===e||void 0===e?void 0:e.type)&&(k="OrientedImageryLayer")}}return J.Constructor=await h(k),J}(e.url,V),k={...e.properties,url:e.url};if(A.layers.length+A.tables.length===0)return null!=A.layerId&&(k.layerId=A.layerId),null!=A.sourceJSON&&(k.sourceJSON=A.sourceJSON),new A.Constructor(k);const E=new(0,(await L.e(8908).then(L.bind(L,48908))).default)({title:A.parsedUrl.title});return await async function m(e,o,L){function t(e,o,g,P){const O={...L,layerId:o,sublayerTitleMode:"service-name"};return null!=e&&(O.url=e),null!=g&&(O.sourceJSON=g),P(O)}const g=o.sublayerConstructorProvider;for(const{id:O,serverUrl:T}of o.layers){var P;const L=f(o.sublayerInfos,O),U=null!==(P=L&&(null===g||void 0===g?void 0:g(L)))&&void 0!==P?P:o.Constructor,C=t(T,O,L,(e=>new U(e)));e.add(C)}if(o.tables.length){const L=await h("FeatureLayer");o.tables.forEach((g=>{let{id:P,serverUrl:O}=g;const T=t(O,P,f(o.tableInfos,P),(e=>new L(e)));e.tables.add(T)}))}}(E,A,k),E}function f(e,o){return e?e.find((e=>e.id===o)):null}function v(e){return null!=e&&e.hasOwnProperty("store")&&e.hasOwnProperty("id")&&"number"==typeof e.id}async function h(e){return(0,V.S[e])()}},75427:(e,o,L)=>{L.d(o,{L:()=>s});var g=L(50075),P=L(53705),O=L(4180),T=L(81618),U=L(26128),C=L(91710),V=L(35799);async function s(e,o){var L,F;const M=(0,U.qg)(e);if(!M)throw new O.A("invalid-url","Invalid scene service url");const A={...o,sceneServerUrl:M.url.path,layerId:null!==(L=M.sublayer)&&void 0!==L?L:void 0};if(null!==(F=A.sceneLayerItem)&&void 0!==F||(A.sceneLayerItem=await async function l(e){const o=(await c(e)).serviceItemId;if(!o)return null;const L=new V.default({id:o,apiKey:e.apiKey}),O=await async function u(e){const o=null===g.id||void 0===g.id?void 0:g.id.findServerInfo(e.sceneServerUrl);if(null!==o&&void 0!==o&&o.owningSystemUrl)return o.owningSystemUrl;const L=e.sceneServerUrl.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const o=(await(0,P.A)(L,{query:{f:"json"},responseType:"json",signal:e.signal})).data.owningSystemUrl;if(o)return o}catch(k){(0,T.QP)(k)}return null}(e);null!=O&&(L.portal=new C.A({url:O}));try{return L.load({signal:e.signal})}catch(E){return(0,T.QP)(E),null}}(A)),null==A.sceneLayerItem)return f(A.sceneServerUrl.replace("/SceneServer","/FeatureServer"),A);const k=await async function y(e){let{sceneLayerItem:o,signal:L}=e;if(!o)return null;try{const e=(await o.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:L})).find((e=>"Feature Service"===e.type))||null;if(!e)return null;const g=new V.default({portal:e.portal,id:e.id});return await g.load(),g}catch(g){return(0,T.QP)(g),null}}(A);if(null===k||void 0===k||!k.url)throw new O.A("related-service-not-found","Could not find feature service through portal item relationship");A.featureServiceItem=k;const E=await f(k.url,A);return E.portalItem=k,E}async function c(e){if(e.rootDocument)return e.rootDocument;const o={query:{f:"json",...e.customParameters,token:e.apiKey},responseType:"json",signal:e.signal};try{const L=await(0,P.A)(e.sceneServerUrl,o);e.rootDocument=L.data}catch{e.rootDocument={}}return e.rootDocument}async function f(e,o){var L,g,T;const C=(0,U.qg)(e);if(!C)throw new O.A("invalid-feature-service-url","Invalid feature service url");const V=C.url.path,F=o.layerId;if(null==F)return{serverUrl:V};const M=c(o),A=o.featureServiceItem?await o.featureServiceItem.fetchData("json"):null,k=null===(L=(null===A||void 0===A||null===(g=A.layers)||void 0===g?void 0:g[0])||(null===A||void 0===A||null===(T=A.tables)||void 0===T?void 0:T[0]))||void 0===L?void 0:L.customParameters,y=e=>{const L={query:{f:"json",...k},responseType:"json",authMode:e,signal:o.signal};return(0,P.A)(V,L)},E=y("anonymous").catch((()=>y("no-prompt"))),[N,D]=await Promise.all([E,M]),J=null===D||void 0===D?void 0:D.layers,j=N.data&&N.data.layers;if(!Array.isArray(j))throw new Error("expected layers array");if(Array.isArray(J)){for(let P=0;P<Math.min(J.length,j.length);P++)if(J[P].id===F)return{serverUrl:V,layerId:j[P].id}}else if(null!=F&&F<j.length)return{serverUrl:V,layerId:j[F].id};throw new Error("could not find matching associated sublayer")}},72284:(e,o,L)=>{L.d(o,{Q:()=>t});var g=L(59741);async function t(e,o){var L;const{loadContext:P,...O}=o||{},T=P?await P.fetchServiceMetadata(e,O):await(0,g.V)(e,O);c(T),n(T);const U={serviceJSON:T};if((null!==(L=T.currentVersion)&&void 0!==L?L:0)<10.5)return U;const C="".concat(e,"/layers"),V=P?await P.fetchServiceMetadata(C,O):await(0,g.V)(C,O);return c(V),n(V),U.layersJSON={layers:V.layers,tables:V.tables},U}function a(e){return"Feature Layer"===e.type||"Oriented Imagery Layer"===e.type}function r(e){return"Table"===e.type}function n(e){var o,L;e.layers=null===(o=e.layers)||void 0===o?void 0:o.filter(a),e.tables=null===(L=e.tables)||void 0===L?void 0:L.filter(r)}function s(e){e.type||(e.type="Feature Layer")}function i(e){e.type||(e.type="Table")}function c(e){var o,L;null!==(o=e.layers)&&void 0!==o&&o.forEach(s),null===(L=e.tables)||void 0===L||L.forEach(i)}},77247:(e,o,L)=>{L.d(o,{S:()=>g});const g={BingMapsLayer:async()=>(await L.e(4502).then(L.bind(L,34502))).default,BuildingSceneLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(9370),L.e(8910),L.e(1138),L.e(854),L.e(2015),L.e(8769),L.e(5209)]).then(L.bind(L,3005))).default,CatalogLayer:async()=>(await Promise.all([L.e(2050),L.e(4714),L.e(5658),L.e(6523),L.e(4963),L.e(6542),L.e(7373)]).then(L.bind(L,58059))).default,CSVLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(9370),L.e(8600)]).then(L.bind(L,34239))).default,DimensionLayer:async()=>(await L.e(363).then(L.bind(L,90363))).default,ElevationLayer:async()=>(await L.e(7156).then(L.bind(L,77156))).default,FeatureLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(9370),L.e(1230)]).then(L.bind(L,9370))).default,GeoJSONLayer:async()=>(await Promise.resolve().then(L.bind(L,23147))).default,GeoRSSLayer:async()=>(await L.e(6735).then(L.bind(L,6735))).default,GroupLayer:async()=>(await L.e(8908).then(L.bind(L,48908))).default,ImageryLayer:async()=>(await Promise.all([L.e(4714),L.e(398),L.e(47),L.e(7758),L.e(1241),L.e(1752)]).then(L.bind(L,19901))).default,ImageryTileLayer:async()=>(await Promise.all([L.e(398),L.e(3804),L.e(47),L.e(7758),L.e(1226),L.e(1241),L.e(3293)]).then(L.bind(L,73293))).default,IntegratedMeshLayer:async()=>(await Promise.all([L.e(854),L.e(9879)]).then(L.bind(L,99879))).default,KMLLayer:async()=>(await L.e(7917).then(L.bind(L,97917))).default,LineOfSightLayer:async()=>(await L.e(5216).then(L.bind(L,95216))).default,LinkChartLayer:async()=>(await Promise.all([L.e(2050),L.e(5004),L.e(2541),L.e(6523),L.e(2214),L.e(9422),L.e(7522)]).then(L.bind(L,49898))).default,MapImageLayer:async()=>(await Promise.all([L.e(2050),L.e(4714),L.e(4963),L.e(2035),L.e(6607)]).then(L.bind(L,66607))).default,MapNotesLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(9370),L.e(2112)]).then(L.bind(L,77143))).default,MediaLayer:async()=>(await L.e(2662).then(L.bind(L,22662))).default,OGCFeatureLayer:async()=>(await Promise.all([L.e(2050),L.e(5543),L.e(1028)]).then(L.bind(L,91028))).default,OpenStreetMapLayer:async()=>(await L.e(1131).then(L.bind(L,61131))).default,OrientedImageryLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(9370),L.e(4885)]).then(L.bind(L,1570))).default,PointCloudLayer:async()=>(await Promise.all([L.e(854),L.e(8289)]).then(L.bind(L,58289))).default,RouteLayer:async()=>(await Promise.all([L.e(727),L.e(2088)]).then(L.bind(L,62088))).default,SceneLayer:async()=>(await Promise.all([L.e(9278),L.e(8910),L.e(1138),L.e(854),L.e(148),L.e(2015),L.e(5017),L.e(2664),L.e(8769),L.e(2620)]).then(L.bind(L,82620))).default,StreamLayer:async()=>(await L.e(7619).then(L.bind(L,17619))).default,SubtypeGroupLayer:async()=>(await Promise.all([L.e(5658),L.e(6572),L.e(7036)]).then(L.bind(L,34009))).default,TileLayer:async()=>(await Promise.all([L.e(2050),L.e(4714),L.e(4963),L.e(2035),L.e(590)]).then(L.bind(L,30590))).default,IntegratedMesh3DTilesLayer:async()=>(await L.e(5534).then(L.bind(L,45534))).default,UnknownLayer:async()=>(await L.e(7240).then(L.bind(L,17240))).default,UnsupportedLayer:async()=>(await L.e(9683).then(L.bind(L,69683))).default,VectorTileLayer:async()=>(await Promise.all([L.e(6313),L.e(3299),L.e(358)]).then(L.bind(L,11018))).default,VoxelLayer:async()=>(await Promise.all([L.e(854),L.e(439)]).then(L.bind(L,30439))).default,WFSLayer:async()=>(await Promise.all([L.e(4860),L.e(2777)]).then(L.bind(L,32123))).default,WMSLayer:async()=>(await L.e(5471).then(L.bind(L,95471))).default,WMTSLayer:async()=>(await L.e(402).then(L.bind(L,90402))).default,WebTileLayer:async()=>(await L.e(6464).then(L.bind(L,56464))).default}},59741:(e,o,L)=>{L.d(o,{V:()=>t});var g=L(53705);async function t(e,o){const{data:L}=await(0,g.A)(e,{responseType:"json",query:{f:"json",...null===o||void 0===o?void 0:o.customParameters,token:null===o||void 0===o?void 0:o.apiKey}});return L}}}]);
//# sourceMappingURL=3656.fa2d4b9f.chunk.js.map