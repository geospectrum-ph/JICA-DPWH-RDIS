"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[5652],{31714:(i,x,V)=>{V.d(x,{T:()=>r,U:()=>o});var D=V(48237);function o(i,x){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const U=(0,D.qE)(i,0,F);for(let D=0;D<4;D++)x[V+D]=Math.floor(256*l(U*R[D]))}function r(i){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,V=0;for(let D=0;D<4;D++)V+=i[x+D]*U[D];return V}const R=[1,256,65536,16777216],U=[1/256,1/65536,1/16777216,1/4294967296],F=r(new Uint8ClampedArray([255,255,255,255]));function l(i){return i-Math.floor(i)}},83810:(i,x,V)=>{V.d(x,{Jy:()=>S,Ox:()=>g,Qm:()=>j,Sp:()=>b,_4:()=>d});var D=V(61272),R=V(50075),U=V(21365),F=V(53705),L=V(66004),q=V(4270),X=V(98664),Q=V(21374),Y=V(12439),H=V(53440),J=V(94309);const Z={esriGeometryPoint:"points",esriGeometryPolyline:"polylines",esriGeometryPolygon:"polygons"};function d(i){var x;const V=i.folders||[],D=V.slice(),R=new Map,U=new Map,F=new Map,q=new Map,X=new Map,Q={esriGeometryPoint:U,esriGeometryPolyline:F,esriGeometryPolygon:q};((null===(x=i.featureCollection)||void 0===x?void 0:x.layers)||[]).forEach((i=>{const x=(0,L.o8)(i);x.featureSet.features=[];const V=i.featureSet.geometryType;R.set(V,x);const D=i.layerDefinition.objectIdField;"esriGeometryPoint"===V?h(U,D,i.featureSet.features):"esriGeometryPolyline"===V?h(F,D,i.featureSet.features):"esriGeometryPolygon"===V&&h(q,D,i.featureSet.features)})),i.groundOverlays&&i.groundOverlays.forEach((i=>{X.set(i.id,i)})),V.forEach((x=>{x.networkLinkIds.forEach((V=>{const R=function P(i,x,V){const D=function G(i,x){let V;return x.some((x=>x.id===i&&(V=x,!0))),V}(i,V);return D&&(D.parentFolderId=x,D.networkLink=D),D}(V,x.id,i.networkLinks);R&&D.push(R)}))})),D.forEach((i=>{if(i.featureInfos){i.points=(0,L.o8)(R.get("esriGeometryPoint")),i.polylines=(0,L.o8)(R.get("esriGeometryPolyline")),i.polygons=(0,L.o8)(R.get("esriGeometryPolygon")),i.mapImages=[];for(const V of i.featureInfos)switch(V.type){case"esriGeometryPoint":case"esriGeometryPolyline":case"esriGeometryPolygon":{var x;const D=Q[V.type].get(V.id);D&&(null===(x=i[Z[V.type]])||void 0===x||x.featureSet.features.push(D));break}case"GroundOverlay":{const x=X.get(V.id);x&&i.mapImages.push(x);break}}i.fullExtent=j([i])}}));const Y=j(D);return{folders:V,sublayers:D,extent:Y}}function g(i,x,V,U){const L=null===R.id||void 0===R.id?void 0:R.id.findCredential(i);i=(0,q.a6)(i,{token:null===L||void 0===L?void 0:L.token});const X=D.A.kmlServiceUrl;return(0,F.A)(X,{query:{url:i,model:"simple",folders:"",refresh:0!==V||void 0,outSR:JSON.stringify(x)},responseType:"json",signal:U})}function S(i,x){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const R=[],U={},F=x.sublayers,L=new Set(x.folders.map((i=>i.id)));return F.forEach((x=>{const F=new i;if(V?F.read(x,V):F.read(x),D.length&&L.has(F.id)&&(F.visible=D.includes(F.id)),U[x.id]=F,null!=x.parentFolderId&&-1!==x.parentFolderId){var q;const i=U[x.parentFolderId];i.sublayers||(i.sublayers=[]),null===(q=i.sublayers)||void 0===q||q.unshift(F)}else R.unshift(F)})),R}function h(i,x,V){V.forEach((V=>{i.set(V.attributes[x],V)}))}async function b(i){const x=J.A.fromJSON(i.featureSet).features,V=i.layerDefinition,D=(0,H.r)(V.drawingInfo.renderer),R=U.A.fromJSON(i.popupInfo),F=[];for(const U of x){const i=await D.getSymbolAsync(U);U.symbol=i,U.popupTemplate=R,U.visible=!0,F.push(U)}return F}function j(i){const x=(0,Q.vt)(Q.qv),V=(0,Q.vt)(Q.qv);for(const F of i){var D,R,U;if(null!==(D=F.polygons)&&void 0!==D&&null!==(D=D.featureSet)&&void 0!==D&&D.features)for(const i of F.polygons.featureSet.features)(0,Y.LJ)(x,i.geometry),(0,Q.RF)(V,x);if(null!==(R=F.polylines)&&void 0!==R&&null!==(R=R.featureSet)&&void 0!==R&&R.features)for(const i of F.polylines.featureSet.features)(0,Y.LJ)(x,i.geometry),(0,Q.RF)(V,x);if(null!==(U=F.points)&&void 0!==U&&null!==(U=U.featureSet)&&void 0!==U&&U.features)for(const i of F.points.featureSet.features)(0,Y.LJ)(x,i.geometry),(0,Q.RF)(V,x);if(F.mapImages)for(const i of F.mapImages)(0,Y.LJ)(x,i.extent),(0,Q.RF)(V,x)}return(0,Q.aI)(V,Q.qv)?void 0:{xmin:V[0],ymin:V[1],zmin:V[2],xmax:V[3],ymax:V[4],zmax:V[5],spatialReference:X.A.WGS84}}},94101:(i,x,V)=>{V.d(x,{l:()=>a});var D=V(82262),R=V(21847),U=V(231);class a extends U.A{constructor(){super(...arguments),this._hasCrossfade=!1}get requiresDedicatedFBO(){return super.requiresDedicatedFBO||this._hasCrossfade}beforeRender(i){super.beforeRender(i),this._manageFade()}prepareRenderPasses(i){const x=i.registerRenderPass({name:"bitmap",brushes:[D.d.bitmap],target:()=>this.children,drawPhase:R.S5.MAP});return[...super.prepareRenderPasses(i),x]}_manageFade(){this.children.reduce(((i,x)=>i+(x.inFadeTransition?1:0)),0)>=2?(this.children.forEach((i=>i.blendFunction="additive")),this._hasCrossfade=!0):(this.children.forEach((i=>i.blendFunction="standard")),this._hasCrossfade=!1)}}},57774:(i,x,V)=>{V.r(x),V.d(x,{default:()=>ve});var D=V(80671),R=V(50075),U=V(39652),F=V(35598),L=V(63390),q=V(4270),X=V(57453),Q=(V(50886),V(89412),V(76761),V(68682)),Y=V(84661),H=V(54208),J=V(98664),Z=V(83810),K=V(95530),$=V(52015),ee=V(82804),te=V(94101),ie=V(86083),ne=V(44426),se=V(41096),re=V(27012),ae=V(53705),oe=V(57264),le=V(13804),ue=V(3623),he=V(19070),ce=V(99647),de=V(60985),pe=V(50707),_e=V(95493),fe=V(47579),ge=V(83663),me=V(83881);class w{constructor(i){if(this._ownsRctx=!1,i)this._ownsRctx=!1,this._rctx=i;else{if(w._instance)return w._instanceRefCount++,w._instance;w._instanceRefCount=1,w._instance=this,this._ownsRctx=!0;const i=document.createElement("canvas"),x=(0,ce.q)(i);x.getExtension("OES_texture_float"),this._rctx=new fe.e(x,{})}const x=(0,he.p)("raster/reproject","raster/reproject",new Map([["a_position",0]]),{applyProjection:!0,bilinear:!1,bicubic:!1});this._program=this._rctx.programCache.acquire(x.shaders.vertexShader,x.shaders.fragmentShader,x.attributes),this._rctx.useProgram(this._program),this._program.setUniform1f("u_opacity",1),this._program.setUniform1i("u_image",0),this._program.setUniform1i("u_flipY",0),this._program.setUniform1i("u_transformGrid",1),this._quad=new ue.A(this._rctx,[0,0,1,0,0,1,1,1])}reprojectTexture(i,x){let V=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const D=(0,H.project)(i.extent,x),R=new oe.A({x:(i.extent.xmax-i.extent.xmin)/i.texture.descriptor.width,y:(i.extent.ymax-i.extent.ymin)/i.texture.descriptor.height,spatialReference:i.extent.spatialReference}),{x:U,y:F}=(0,le.Wo)(R,x,i.extent);let L=(U+F)/2;const q=Math.round((D.xmax-D.xmin)/L),X=Math.round((D.ymax-D.ymin)/L);L=(D.width/q+D.height/X)/2;const Q=new oe.A({x:L,y:L,spatialReference:D.spatialReference}),Y=(0,le.l0)({projectedExtent:D,srcBufferExtent:i.extent,pixelSize:Q,hasWrapAround:!0,spacing:[16,16]}),J=(0,_e.kc)(this._rctx,Y),Z=new me.R(q,X);Z.wrapMode=de.pF.CLAMP_TO_EDGE;const K=new pe.H(this._rctx,Z);this._rctx.bindFramebuffer(K),this._rctx.setViewport(0,0,q,X),this._rctx.useProgram(this._program),this._rctx.bindTexture(i.texture,0),this._rctx.bindTexture(J,1),this._quad.bind();const{width:$=0,height:ee=0}=i.texture.descriptor;if(this._program.setUniform2f("u_srcImageSize",$,ee),this._program.setUniform2fv("u_transformSpacing",Y.spacing),this._program.setUniform2fv("u_transformGridSize",Y.size),this._program.setUniform2f("u_targetImageSize",q,X),this._quad.draw(),this._quad.unbind(),this._rctx.useProgram(null),this._rctx.bindFramebuffer(null),J.dispose(),V){const{width:i,height:x}=K,V=new ImageData(null!==i&&void 0!==i?i:0,null!==x&&void 0!==x?x:0);K.readPixels(0,0,null!==i&&void 0!==i?i:0,null!==x&&void 0!==x?x:0,de.Ab.RGBA,de.ld.UNSIGNED_BYTE,V.data);const R=K.detachColorTexture(de.Nm.COLOR_ATTACHMENT0);return K.dispose(),{texture:R,extent:D,imageData:V}}const te=K.detachColorTexture(de.Nm.COLOR_ATTACHMENT0);return K.dispose(),{texture:te,extent:D}}reprojectBitmapData(i,x){const V=(0,ee.LG)(i.bitmapData)?(0,ee.yr)(i.bitmapData):i.bitmapData,D=new me.R;D.wrapMode=de.pF.CLAMP_TO_EDGE,D.width=i.bitmapData.width,D.height=i.bitmapData.height;const R=new ge.g(this._rctx,D,V),U=this.reprojectTexture({texture:R,extent:i.extent},x,!0);U.texture.dispose();const F=document.createElement("canvas"),L=U.imageData;return F.width=L.width,F.height=L.height,F.getContext("2d").putImageData(L,0,0),{bitmapData:F,extent:U.extent}}async loadAndReprojectBitmapData(i,x,V){const D=(await(0,ae.A)(i,{responseType:"image"})).data,R=document.createElement("canvas");R.width=D.width,R.height=D.height;const U=R.getContext("2d");U.drawImage(D,0,0);const F=U.getImageData(0,0,R.width,R.height);if(x.spatialReference.equals(V))return{bitmapData:F,extent:x};const L=this.reprojectBitmapData({bitmapData:F,extent:x},V);return{bitmapData:L.bitmapData,extent:L.extent}}destroy(){this._ownsRctx?(w._instanceRefCount--,0===w._instanceRefCount&&(this._quad.dispose(),this._program.dispose(),this._rctx.dispose(),w._instance=null)):(this._quad.dispose(),this._program.dispose())}}w._instanceRefCount=0;class C{constructor(){this.allSublayers=new Map,this.allPoints=[],this.allPolylines=[],this.allPolygons=[],this.allMapImages=[]}}let ye=class extends((0,ie.e)(re.A)){constructor(){super(...arguments),this._bitmapIndex=new Map,this._mapImageContainer=new te.l,this._kmlVisualData=new C,this._fetchController=null,this.allVisiblePoints=new $.Y,this.allVisiblePolylines=new $.Y,this.allVisiblePolygons=new $.Y,this.allVisibleMapImages=new U.A}async hitTest(i,x){var V,D,R;const U=this.layer;return[null===(V=this._pointsView)||void 0===V?void 0:V.hitTest(i),null===(D=this._polylinesView)||void 0===D?void 0:D.hitTest(i),null===(R=this._polygonsView)||void 0===R?void 0:R.hitTest(i)].flat().filter(Boolean).map((x=>(x.layer=U,x.sourceLayer=U,{type:"graphic",graphic:x,layer:U,mapPoint:i})))}update(i){this._polygonsView&&this._polygonsView.processUpdate(i),this._polylinesView&&this._polylinesView.processUpdate(i),this._pointsView&&this._pointsView.processUpdate(i)}attach(){this._fetchController=new AbortController,this.container.addChild(this._mapImageContainer),this._polygonsView=new se.A({view:this.view,graphics:this.allVisiblePolygons,requestUpdateCallback:()=>this.requestUpdate(),container:new ne.A(this.view.featuresTilingScheme)}),this.container.addChild(this._polygonsView.container),this._polylinesView=new se.A({view:this.view,graphics:this.allVisiblePolylines,requestUpdateCallback:()=>this.requestUpdate(),container:new ne.A(this.view.featuresTilingScheme)}),this.container.addChild(this._polylinesView.container),this._pointsView=new se.A({view:this.view,graphics:this.allVisiblePoints,requestUpdateCallback:()=>this.requestUpdate(),container:new ne.A(this.view.featuresTilingScheme)}),this.container.addChild(this._pointsView.container),this.addAttachHandles([this.allVisibleMapImages.on("change",(i=>{i.added.forEach((i=>this._addMapImage(i))),i.removed.forEach((i=>this._removeMapImage(i)))})),(0,L.wB)((()=>this.layer.visibleSublayers),(i=>{for(const[x,V]of this._kmlVisualData.allSublayers)V.visibility=0;for(const x of i){const i=this._kmlVisualData.allSublayers.get(x.id);i&&(i.visibility=1)}this._refreshCollections()}))]),this._updatingHandles.addPromise(this._fetchService(this._fetchController.signal)),this._imageReprojector=new w}detach(){this._fetchController=(0,F.DC)(this._fetchController),this._mapImageContainer.removeAllChildren(),this.container.removeAllChildren(),this._bitmapIndex.clear(),this._polygonsView=(0,F.pR)(this._polygonsView),this._polylinesView=(0,F.pR)(this._polylinesView),this._pointsView=(0,F.pR)(this._pointsView),this._imageReprojector=(0,F.pR)(this._imageReprojector)}moveStart(){}viewChange(){this._polygonsView.viewChange(),this._polylinesView.viewChange(),this._pointsView.viewChange()}moveEnd(){}isUpdating(){return this._pointsView.updating||this._polygonsView.updating||this._polylinesView.updating}_addMapImage(i){var x,V;((null===(x=this.view.spatialReference)||void 0===x?void 0:x.isWGS84)||(null===(V=this.view.spatialReference)||void 0===V?void 0:V.isWebMercator))&&this._imageReprojector.loadAndReprojectBitmapData(i.href,Y.A.fromJSON(i.extent),this.view.spatialReference).then((x=>{const V=new ee.mb(x.bitmapData);V.x=x.extent.xmin,V.y=x.extent.ymax,V.resolution=x.extent.width/x.bitmapData.width,V.rotation=i.rotation,this._mapImageContainer.addChild(V),this._bitmapIndex.set(i,V)}))}async _getViewDependentUrl(i,x){const{viewFormat:V,viewBoundScale:D,httpQuery:U}=i;if(null!=V){if(null==x)throw new Error("Loading this network link requires a view state.");let F;if(await(0,H.load)(),null!=D&&1!==D){const i=new Y.A(x.extent);i.expand(D),F=i}else F=x.extent;F=(0,H.project)(F,J.A.WGS84);const L=(0,H.project)(F,J.A.WebMercator),X=F.xmin,Q=F.xmax,Z=F.ymin,$=F.ymax,ee=x.size[0]*x.pixelRatio,te=x.size[1]*x.pixelRatio,ie=Math.max(L.width,L.height),ne={"[bboxWest]":X.toString(),"[bboxEast]":Q.toString(),"[bboxSouth]":Z.toString(),"[bboxNorth]":$.toString(),"[lookatLon]":F.center.x.toString(),"[lookatLat]":F.center.y.toString(),"[lookatRange]":ie.toString(),"[lookatTilt]":"0","[lookatHeading]":x.rotation.toString(),"[lookatTerrainLon]":F.center.x.toString(),"[lookatTerrainLat]":F.center.y.toString(),"[lookatTerrainAlt]":"0","[cameraLon]":F.center.x.toString(),"[cameraLat]":F.center.y.toString(),"[cameraAlt]":ie.toString(),"[horizFov]":"60","[vertFov]":"60","[horizPixels]":ee.toString(),"[vertPixels]":te.toString(),"[terrainEnabled]":"0","[clientVersion]":R.rE,"[kmlVersion]":"2.2","[clientName]":"ArcGIS API for JavaScript","[language]":"en-US"},S=i=>{for(const x in i){let V;for(V in ne)i[x]=i[x].replace(V,ne[V])}},se=(0,q.zf)(V);S(se);let re={};null!=U&&(re=(0,q.zf)(U),S(re));const ae=(0,K.Dl)(i.href);return ae.query={...ae.query,...se,...re},"".concat(ae.path,"?").concat((0,q.x0)(se))}return i.href}async _fetchService(i){const x=new C;await this._loadVisualData(this.layer.url,x,i),this._kmlVisualData=x,this._refreshCollections()}_refreshCollections(){this.allVisiblePoints.removeAll(),this.allVisiblePolylines.removeAll(),this.allVisiblePolygons.removeAll(),this.allVisibleMapImages.removeAll(),this.allVisiblePoints.addMany(this._kmlVisualData.allPoints.filter((i=>this._isSublayerVisible(i.sublayerId))).map((i=>{let{item:x}=i;return x}))),this.allVisiblePolylines.addMany(this._kmlVisualData.allPolylines.filter((i=>this._isSublayerVisible(i.sublayerId))).map((i=>{let{item:x}=i;return x}))),this.allVisiblePolygons.addMany(this._kmlVisualData.allPolygons.filter((i=>this._isSublayerVisible(i.sublayerId))).map((i=>{let{item:x}=i;return x}))),this.allVisibleMapImages.addMany(this._kmlVisualData.allMapImages.filter((i=>this._isSublayerVisible(i.sublayerId))).map((i=>{let{item:x}=i;return x})))}_isSublayerVisible(i){const x=this._kmlVisualData.allSublayers.get(i);return!(null===x||void 0===x||!x.visibility)&&(-1===x.parentFolderId||this._isSublayerVisible(x.parentFolderId))}_loadVisualData(i,x,V){return this._fetchParsedKML(i,V).then((async i=>{for(const D of i.sublayers){x.allSublayers.set(D.id,D);const i=D.points?await(0,Z.Sp)(D.points):[],R=D.polylines?await(0,Z.Sp)(D.polylines):[],U=D.polygons?await(0,Z.Sp)(D.polygons):[],F=D.mapImages||[];if(x.allPoints.push(...i.map((i=>({item:i,sublayerId:D.id})))),x.allPolylines.push(...R.map((i=>({item:i,sublayerId:D.id})))),x.allPolygons.push(...U.map((i=>({item:i,sublayerId:D.id})))),x.allMapImages.push(...F.map((i=>({item:i,sublayerId:D.id})))),D.networkLink){const i=await this._getViewDependentUrl(D.networkLink,this.view.state);await this._loadVisualData(i,x,V)}}}))}_fetchParsedKML(i,x){return(0,Z.Ox)(i,this.layer.spatialReference,this.layer.refreshInterval,x).then((i=>(0,Z._4)(i.data)))}_removeMapImage(i){const x=this._bitmapIndex.get(i);x&&(this._mapImageContainer.removeChild(x),this._bitmapIndex.delete(i))}};(0,D._)([(0,X.MZ)()],ye.prototype,"_pointsView",void 0),(0,D._)([(0,X.MZ)()],ye.prototype,"_polylinesView",void 0),(0,D._)([(0,X.MZ)()],ye.prototype,"_polygonsView",void 0),(0,D._)([(0,X.MZ)()],ye.prototype,"updating",void 0),ye=(0,D._)([(0,Q.$)("esri.views.2d.layers.KMLLayerView2D")],ye);const ve=ye},96767:(i,x,V)=>{V.d(x,{H:()=>o,Y:()=>D});const D=class t{};function o(i){let x="";for(let V=0;V<(arguments.length<=1?0:arguments.length-1);V++)x+=i[V]+(V+1<1||arguments.length<=V+1?void 0:arguments[V+1]);return x+=i[i.length-1],x}!function(i){i.int=function n(i){return Math.round(i).toString()},i.float=function o(i){return i.toPrecision(8)}}(o||(o={}))},55082:(i,x,V)=>{V.d(x,{AJ:()=>q,K_:()=>l,SE:()=>Q,V0:()=>F,XO:()=>E,aB:()=>a,ez:()=>A,xt:()=>X});var D=V(62301),R=V(60985),U=V(43474);const F=(0,U.p3)(R.dn.SRC_ALPHA,R.dn.ONE,R.dn.ONE_MINUS_SRC_ALPHA,R.dn.ONE_MINUS_SRC_ALPHA),L=(0,U.ox)(R.dn.ONE,R.dn.ONE),q=(0,U.ox)(R.dn.ZERO,R.dn.ONE_MINUS_SRC_ALPHA);function A(i){return i===D.y.FrontFace?null:i===D.y.Alpha?q:L}function E(i){return i===D.y.FrontFace?U.kn:null}const X=5e5,Q={factor:-1,units:-2};function a(i){return i?Q:null}function l(i){let x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R.MT.LESS;return i===D.y.NONE||i===D.y.FrontFace?x:R.MT.LEQUAL}},62301:(i,x,V)=>{var D;V.d(x,{y:()=>D}),function(i){i[i.Color=0]="Color",i[i.Alpha=1]="Alpha",i[i.FrontFace=2]="FrontFace",i[i.NONE=3]="NONE",i[i.COUNT=4]="COUNT"}(D||(D={}))},42954:(i,x,V)=>{var D,R,U,F,L,q,X,Q,Y;V.d(x,{Am:()=>F,ID:()=>Q,JS:()=>Y,Mg:()=>q,dd:()=>L,it:()=>R,s2:()=>D,sf:()=>X}),function(i){i[i.None=0]="None",i[i.Front=1]="Front",i[i.Back=2]="Back",i[i.COUNT=3]="COUNT"}(D||(D={})),function(i){i[i.Less=0]="Less",i[i.Lequal=1]="Lequal",i[i.COUNT=2]="COUNT"}(R||(R={})),function(i){i[i.BACKGROUND=0]="BACKGROUND",i[i.UPDATE=1]="UPDATE"}(U||(U={})),function(i){i[i.NOT_LOADED=0]="NOT_LOADED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED"}(F||(F={})),function(i){i[i.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",i[i.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(L||(L={})),function(i){i[i.Highlight=0]="Highlight",i[i.MaskOccludee=1]="MaskOccludee",i[i.COUNT=2]="COUNT"}(q||(q={})),function(i){i[i.Blend=0]="Blend",i[i.Opaque=1]="Opaque",i[i.Mask=2]="Mask",i[i.MaskBlend=3]="MaskBlend",i[i.COUNT=4]="COUNT"}(X||(X={})),function(i){i[i.OFF=0]="OFF",i[i.ON=1]="ON"}(Q||(Q={})),function(i){i.DDS_ENCODING="image/vnd-ms.dds",i.KTX2_ENCODING="image/ktx2",i.BASIS_ENCODING="image/x.basis"}(Y||(Y={}))},17288:(i,x,V)=>{V.d(x,{_:()=>t});var D=V(35598);class t{constructor(){this._result=!1}dispose(){this._program=(0,D.WD)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}},61995:(i,x,V)=>{V.d(x,{_R:()=>t});class e{constructor(i,x,V,D,R,U,F,L,q){this.createQuery=i,this.deleteQuery=x,this.resultAvailable=V,this.getResult=D,this.disjoint=R,this.beginTimeElapsed=U,this.endTimeElapsed=F,this.createTimestamp=L,this.timestampBits=q}}let D=!1;function t(i,x){if(x.disjointTimerQuery)return null;let V=i.getExtension("EXT_disjoint_timer_query_webgl2");return V?new e((()=>i.createQuery()),(x=>{i.deleteQuery(x),D=!1}),(x=>i.getQueryParameter(x,i.QUERY_RESULT_AVAILABLE)),(x=>i.getQueryParameter(x,i.QUERY_RESULT)),(()=>i.getParameter(V.GPU_DISJOINT_EXT)),(x=>{D||(D=!0,i.beginQuery(V.TIME_ELAPSED_EXT,x))}),(()=>{i.endQuery(V.TIME_ELAPSED_EXT),D=!1}),(i=>V.queryCounterEXT(i,V.TIMESTAMP_EXT)),(()=>i.getQuery(V.TIMESTAMP_EXT,V.QUERY_COUNTER_BITS_EXT))):(V=i.getExtension("EXT_disjoint_timer_query"),V?new e((()=>V.createQueryEXT()),(i=>{V.deleteQueryEXT(i),D=!1}),(i=>V.getQueryObjectEXT(i,V.QUERY_RESULT_AVAILABLE_EXT)),(i=>V.getQueryObjectEXT(i,V.QUERY_RESULT_EXT)),(()=>i.getParameter(V.GPU_DISJOINT_EXT)),(i=>{D||(D=!0,V.beginQueryEXT(V.TIME_ELAPSED_EXT,i))}),(()=>{V.endQueryEXT(V.TIME_ELAPSED_EXT),D=!1}),(i=>V.queryCounterEXT(i,V.TIMESTAMP_EXT)),(()=>V.getQueryEXT(V.TIMESTAMP_EXT,V.QUERY_COUNTER_BITS_EXT))):null)}},95493:(i,x,V)=>{V.d(x,{EO:()=>h,OI:()=>A,Pp:()=>_,Qg:()=>g,VC:()=>p,b4:()=>f,hB:()=>O,hE:()=>m,kc:()=>c,xV:()=>l,z:()=>T});var D=V(52273),R=V(60985),U=V(83663),F=V(83881);function f(i,x){var V;let D=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"nearest";const L=!(arguments.length>3&&void 0!==arguments[3]&&arguments[3]&&"u8"===x.pixelType),q=L?R.ld.FLOAT:R.ld.UNSIGNED_BYTE,X=null==x.pixels||0===x.pixels.length?null:L?x.getAsRGBAFloat():x.getAsRGBA(),Q=null===(V=i.capabilities.textureFloat)||void 0===V?void 0:V.textureFloatLinear,Y=new F.R;return Y.width=x.width,Y.height=x.height,Y.internalFormat=L?R.H0.RGBA32F:R.Ab.RGBA,Y.samplingMode=!Q||"bilinear"!==D&&"cubic"!==D?R.Cj.NEAREST:R.Cj.LINEAR,Y.dataType=q,Y.wrapMode=R.pF.CLAMP_TO_EDGE,new U.g(i,Y,X)}function c(i,x){const{spacing:V,offsets:D,coefficients:L,size:[q,X]}=x,Q=V[0]>1,Y=new F.R;Y.width=Q?4*q:q,Y.height=X,Y.internalFormat=R.H0.RGBA32F,Y.dataType=R.ld.FLOAT,Y.samplingMode=R.Cj.NEAREST,Y.wrapMode=R.pF.CLAMP_TO_EDGE;const H=new Float32Array(Q?q*X*16:2*D.length);if(Q&&null!=L)for(let R=0,U=0;R<L.length;R++)H[U++]=L[R],R%3==2&&(H[U++]=1);else for(let R=0;R<X;R++)for(let i=0;i<q;i++){const x=4*(R*q+i),V=2*(i*X+R);H[x]=D[V],H[x+1]=D[V+1],H[x+3]=-1===D[V]?0:1}return new U.g(i,Y,H)}function m(i,x){const V=new F.R;return V.internalFormat=R.Ab.RGBA,V.width=x.length/4,V.height=1,V.samplingMode=R.Cj.NEAREST,V.wrapMode=R.pF.CLAMP_TO_EDGE,new U.g(i,V,x)}function l(i,x,V){return{u_flipY:!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u_applyTransform:!!i,u_opacity:arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,u_transformSpacing:i?i.spacing:D.uY,u_transformGridSize:i?i.size:D.uY,u_targetImageSize:x,u_srcImageSize:V}}function _(i,x){return{u_colormapOffset:x||0,u_colormapMaxIndex:i?i.length/4-1:0}}function g(i,x){return{u_scale:i,u_offset:x}}function p(i){return{u_bandCount:i.bandCount,u_minOutput:i.outMin,u_maxOutput:i.outMax,u_minCutOff:i.minCutOff,u_maxCutOff:i.maxCutOff,u_factor:i.factor,u_useGamma:i.useGamma,u_gamma:i.gamma,u_gammaCorrection:i.gammaCorrection}}function A(i){return{u_hillshadeType:i.hillshadeType,u_sinZcosAs:i.sinZcosAs,u_sinZsinAs:i.sinZsinAs,u_cosZs:i.cosZs,u_weights:i.weights,u_factor:i.factor,u_minValue:i.minValue,u_maxValue:i.maxValue}}function T(i,x){const V=i.gl,D=x.glName,R=new Map;if(null==D)return R;const U=V.getProgramParameter(D,V.ACTIVE_UNIFORMS);let F;for(let L=0;L<U;L++)F=V.getActiveUniform(D,L),F&&R.set(F.name,{location:V.getUniformLocation(D,F.name),info:F});return R}function h(i,x,V){Object.keys(V).forEach((D=>{const U=x.get(D)||x.get(D+"[0]");U&&function E(i,x,V,D){if(null===D||null==V)return!1;const{info:U}=D;switch(U.type){case R.xV.FLOAT:U.size>1?i.setUniform1fv(x,V):i.setUniform1f(x,V);break;case R.xV.FLOAT_VEC2:i.setUniform2fv(x,V);break;case R.xV.FLOAT_VEC3:i.setUniform3fv(x,V);break;case R.xV.FLOAT_VEC4:i.setUniform4fv(x,V);break;case R.xV.FLOAT_MAT3:i.setUniformMatrix3fv(x,V);break;case R.xV.FLOAT_MAT4:i.setUniformMatrix4fv(x,V);break;case R.xV.INT:U.size>1?i.setUniform1iv(x,V):i.setUniform1i(x,V);break;case R.xV.BOOL:i.setUniform1i(x,V?1:0);break;case R.xV.INT_VEC2:case R.xV.BOOL_VEC2:i.setUniform2iv(x,V);break;case R.xV.INT_VEC3:case R.xV.BOOL_VEC3:i.setUniform3iv(x,V);break;case R.xV.INT_VEC4:case R.xV.BOOL_VEC4:i.setUniform4iv(x,V);break;default:return!1}return!0}(i,D,V[D],U)}))}function O(i,x,V,D){V.length===D.length&&(D.some((i=>null==i))||V.some((i=>null==i))||V.forEach(((V,R)=>{x.setUniform1i(V,R),i.bindTexture(D[R],R)})))}},43474:(i,x,V)=>{V.d(x,{Ey:()=>S,Ms:()=>G,Xt:()=>h,hG:()=>F,kn:()=>L,ox:()=>s,p3:()=>l,wE:()=>q});var D=V(42954),R=V(60985);function s(i,x){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:R.Tb.ADD,D=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:i,srcAlpha:i,dstRgb:x,dstAlpha:x,opRgb:V,opAlpha:V,color:{r:D[0],g:D[1],b:D[2],a:D[3]}}}function l(i,x,V,D){let U=arguments.length>4&&void 0!==arguments[4]?arguments[4]:R.Tb.ADD,F=arguments.length>5&&void 0!==arguments[5]?arguments[5]:R.Tb.ADD,L=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:i,srcAlpha:x,dstRgb:V,dstAlpha:D,opRgb:U,opAlpha:F,color:{r:L[0],g:L[1],b:L[2],a:L[3]}}}const U={face:R.Y7.BACK,mode:R.Ac.CCW},F={face:R.Y7.FRONT,mode:R.Ac.CCW},h=i=>i===D.s2.Back?U:i===D.s2.Front?F:null,L={zNear:0,zFar:1},q={r:!0,g:!0,b:!0,a:!0};function c(i){return X.intern(i)}function d(i){return Q.intern(i)}function u(i){return Y.intern(i)}function f(i){return H.intern(i)}function p(i){return J.intern(i)}function g(i){return Z.intern(i)}function v(i){return K.intern(i)}function I(i){return $.intern(i)}function W(i){return ee.intern(i)}function S(i){return te.intern(i)}class b{constructor(i,x){this._makeKey=i,this._makeRef=x,this._interns=new Map}intern(i){var x;if(!i)return null;const V=this._makeKey(i),D=this._interns;return D.has(V)||D.set(V,this._makeRef(i)),null!==(x=D.get(V))&&void 0!==x?x:null}}function T(i){return"["+i.join(",")+"]"}const X=new b(B,(i=>({__tag:"Blending",...i})));function B(i){return i?T([i.srcRgb,i.srcAlpha,i.dstRgb,i.dstAlpha,i.opRgb,i.opAlpha,i.color.r,i.color.g,i.color.b,i.color.a]):null}const Q=new b(y,(i=>({__tag:"Culling",...i})));function y(i){return i?T([i.face,i.mode]):null}const Y=new b(C,(i=>({__tag:"PolygonOffset",...i})));function C(i){return i?T([i.factor,i.units]):null}const H=new b(A,(i=>({__tag:"DepthTest",...i})));function A(i){return i?T([i.func]):null}const J=new b(k,(i=>({__tag:"StencilTest",...i})));function k(i){return i?T([i.function.func,i.function.ref,i.function.mask,i.operation.fail,i.operation.zFail,i.operation.zPass]):null}const Z=new b(z,(i=>({__tag:"DepthWrite",...i})));function z(i){return i?T([i.zNear,i.zFar]):null}const K=new b(j,(i=>({__tag:"ColorWrite",...i})));function j(i){return i?T([i.r,i.g,i.b,i.a]):null}const $=new b(N,(i=>({__tag:"StencilWrite",...i})));function N(i){return i?T([i.mask]):null}const ee=new b(M,(i=>({__tag:"DrawBuffers",...i})));function M(i){return i?T(i.buffers):null}const te=new b((function E(i){return i?T([B(i.blending),y(i.culling),C(i.polygonOffset),A(i.depthTest),k(i.stencilTest),z(i.depthWrite),j(i.colorWrite),N(i.stencilWrite),M(i.drawBuffers)]):null}),(i=>({blending:c(i.blending),culling:d(i.culling),polygonOffset:u(i.polygonOffset),depthTest:f(i.depthTest),stencilTest:p(i.stencilTest),depthWrite:g(i.depthWrite),colorWrite:v(i.colorWrite),stencilWrite:I(i.stencilWrite),drawBuffers:W(i.drawBuffers)})));class G{constructor(i){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=i}setPipeline(i){(this._pipelineInvalid||i!==this._pipeline)&&(this._setBlending(i.blending),this._setCulling(i.culling),this._setPolygonOffset(i.polygonOffset),this._setDepthTest(i.depthTest),this._setStencilTest(i.stencilTest),this._setDepthWrite(i.depthWrite),this._setColorWrite(i.colorWrite),this._setStencilWrite(i.stencilWrite),this._setDrawBuffers(i.drawBuffers),this._pipeline=i),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(i){this._blending=this._setSubState(i,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(i){this._culling=this._setSubState(i,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(i){this._polygonOffset=this._setSubState(i,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(i){this._depthTest=this._setSubState(i,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(i){this._stencilTest=this._setSubState(i,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(i){this._depthWrite=this._setSubState(i,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(i){this._colorWrite=this._setSubState(i,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(i){this._stencilWrite=this._setSubState(i,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(i){this._drawBuffers=this._setSubState(i,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(i,x,V,D){return(V||i!==x)&&(D(i),this._pipelineInvalid=!0),i}}},46081:(i,x,V)=>{V.d(x,{H:()=>f});var D=V(40449),R=V(25078),U=V(60985),F=V(50707),L=V(83663),q=V(83881),X=V(77127),Q=V(17288);class f extends Q._{constructor(i){super(),this._rctx=i;this._program=i.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(i){const x=this._rctx;if(!x.gl)return i.dispose(),!0;const V=new q.R(1);V.wrapMode=U.pF.CLAMP_TO_EDGE,V.samplingMode=U.Cj.NEAREST;const Q=new F.H(x,V),H=R.g.createVertex(x,U._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),J=new X.Z(x,new Map([["a_pos",0]]),D.VS,{geometry:H}),Z=new q.R;Z.samplingMode=U.Cj.LINEAR,Z.wrapMode=U.pF.CLAMP_TO_EDGE;const K=new L.g(x,Z,Y);x.useProgram(i),x.bindTexture(K,0),i.setUniform1i("u_texture",0);const $=x.getBoundFramebufferObject(),{x:ee,y:te,width:ie,height:ne}=x.getViewport();x.bindFramebuffer(Q),x.setViewport(0,0,1,1),x.setClearColor(0,0,0,0),x.setBlendingEnabled(!1),x.clearSafe(U.hn.COLOR_BUFFER_BIT),x.bindVAO(J),x.drawArrays(U.WR.TRIANGLE_STRIP,0,4);const se=new Uint8Array(4);return Q.readPixels(0,0,1,1,U.Ab.RGBA,U.ld.UNSIGNED_BYTE,se),J.dispose(),Q.dispose(),K.dispose(),x.setViewport(ee,te,ie,ne),x.bindFramebuffer($),255!==se[0]}}const Y=new Image;Y.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",Y.width=5,Y.height=5,Y.decode()}}]);
//# sourceMappingURL=5652.02630b5c.chunk.js.map