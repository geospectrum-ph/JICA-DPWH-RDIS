"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[4963],{84963:(e,o,_)=>{_.d(o,{A:()=>k});var b=_(80671),v=_(18763),O=_(4180),P=_(50886),C=_(81618),D=_(4270),R=_(57453),q=(_(89412),_(76761),_(68682)),A=_(35999),N=_(25230),G=_(95530),V=_(87849),I=(_(30174),_(83947)),J=_(49096),j=_(84661);var T=_(73336),M=_(35761),Z=_(2569),z=_(94309);let B=class extends v.A{constructor(e){super(e),this.dynamicDataSource=null,this.fieldsIndex=null,this.gdbVersion=null,this.infoFor3D=null,this.pbfSupported=!1,this.queryAttachmentsSupported=!1,this.sourceSpatialReference=null,this.url=null}get parsedUrl(){return(0,D.An)(this.url)}async execute(e,o){const _=await this.executeJSON(e,o);return this.featureSetFromJSON(e,_,o)}async executeJSON(e,o){var _;const b=this._normalizeQuery(e),v=null!=(null===(_=e.outStatistics)||void 0===_?void 0:_[0]),O=(0,P.A)("featurelayer-pbf-statistics"),C=!v||O;let D;if(this.pbfSupported&&C)try{D=await(0,Z.S)(this.url,b,o)}catch(R){if("query:parsing-pbf"!==R.name)throw R;this.pbfSupported=!1}return this.pbfSupported&&C||(D=await(0,M.e)(this.url,b,o)),this._normalizeFields(D.fields),D}async featureSetFromJSON(e,o,b){if(!this._queryIs3DObjectFormat(e)||null==this.infoFor3D||!o.features)return z.A.fromJSON(o);const{meshFeatureSetFromJSON:v}=await(0,C.qr)(Promise.all([_.e(9278),_.e(8910),_.e(148),_.e(5017),_.e(2664),_.e(3933)]).then(_.bind(_,56372)),b);return v(e,this.infoFor3D,o)}executeForCount(e,o){return(0,V.I)(this.url,this._normalizeQuery(e),o)}executeForExtent(e,o){return async function n(e,o,_){const b=(0,G.Dl)(e),v=await(0,I.Jf)(b,J.A.from(o),{..._}),O=v.data.extent;return!O||isNaN(O.xmin)||isNaN(O.ymin)||isNaN(O.xmax)||isNaN(O.ymax)?{count:v.data.count,extent:null}:{count:v.data.count,extent:j.A.fromJSON(O)}}(this.url,this._normalizeQuery(e),o)}executeForIds(e,o){return(0,T.V)(this.url,this._normalizeQuery(e),o)}async executeRelationshipQuery(e,o){const[{default:b},{executeRelationshipQuery:v}]=await(0,C.qr)(Promise.all([Promise.resolve().then(_.bind(_,86745)),_.e(5646).then(_.bind(_,55646))]),o);return e=b.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),v(this.url,e,o)}async executeRelationshipQueryForCount(e,o){const[{default:b},{executeRelationshipQueryForCount:v}]=await(0,C.qr)(Promise.all([Promise.resolve().then(_.bind(_,86745)),_.e(5646).then(_.bind(_,55646))]),o);return e=b.from(e),(this.gdbVersion||this.dynamicDataSource)&&((e=e.clone()).gdbVersion=e.gdbVersion||this.gdbVersion,e.dynamicDataSource=e.dynamicDataSource||this.dynamicDataSource),v(this.url,e,o)}async executeAttachmentQuery(e,o){const{executeAttachmentQuery:b,fetchAttachments:v,processAttachmentQueryResult:O}=await(0,C.qr)(_.e(793).then(_.bind(_,70793)),o),P=(0,G.Dl)(this.url);return O(P,await(this.queryAttachmentsSupported?b(P,e,o):v(P,e,o)))}async executeTopFeaturesQuery(e,o){const{executeTopFeaturesQuery:b}=await(0,C.qr)(_.e(6927).then(_.bind(_,36927)),o);return b(this.parsedUrl,e,this.sourceSpatialReference,o)}async executeForTopIds(e,o){const{executeForTopIds:b}=await(0,C.qr)(_.e(2295).then(_.bind(_,12295)),o);return b(this.parsedUrl,e,o)}async executeForTopExtents(e,o){const{executeForTopExtents:b}=await(0,C.qr)(_.e(2576).then(_.bind(_,12576)),o);return b(this.parsedUrl,e,o)}async executeForTopCount(e,o){const{executeForTopCount:b}=await(0,C.qr)(_.e(974).then(_.bind(_,60974)),o);return b(this.parsedUrl,e,o)}_normalizeQuery(e){let o=J.A.from(e);o.sourceSpatialReference=o.sourceSpatialReference||this.sourceSpatialReference,(this.gdbVersion||this.dynamicDataSource)&&(o=o===e?o.clone():o,o.gdbVersion=e.gdbVersion||this.gdbVersion,o.dynamicDataSource=e.dynamicDataSource?N.L.from(e.dynamicDataSource):this.dynamicDataSource);const{infoFor3D:_}=this;if(null!=_&&this._queryIs3DObjectFormat(e)){var b,v;o=o===e?o.clone():o,o.formatOf3DObjects=null;const{supportedFormats:P,queryFormats:C}=_,D=null!==(b=(0,A.R_)("model/gltf-binary",P))&&void 0!==b?b:(0,A.E1)("glb",P),R=null!==(v=(0,A.R_)("model/gltf+json",P))&&void 0!==v?v:(0,A.E1)("gltf",P);for(const e of C){if(e===D){o.formatOf3DObjects=e;break}e!==R||o.formatOf3DObjects||(o.formatOf3DObjects=e)}if(!o.formatOf3DObjects)throw new O.A("query:unsupported-3d-query-formats","Could not find any supported 3D object query format. Only supported formats are 3D_glb and 3D_gltf");if(null==o.outFields||!o.outFields.includes("*")){o=o===e?o.clone():o,null==o.outFields&&(o.outFields=[]);const{originX:b,originY:v,originZ:O,translationX:P,translationY:C,translationZ:D,scaleX:R,scaleY:q,scaleZ:A,rotationX:N,rotationY:G,rotationZ:V,rotationDeg:I}=_.transformFieldRoles;o.outFields.push(b,v,O,P,C,D,R,q,A,N,G,V,I)}}return o}_normalizeFields(e){if(null!=this.fieldsIndex&&null!=e)for(const o of e){const e=this.fieldsIndex.get(o.name);e&&Object.assign(o,e.toJSON())}}_queryIs3DObjectFormat(e){return null!=this.infoFor3D&&!0===e.returnGeometry&&"xyFootprint"!==e.multipatchOption&&!e.outStatistics}};(0,b._)([(0,R.MZ)({type:N.L})],B.prototype,"dynamicDataSource",void 0),(0,b._)([(0,R.MZ)()],B.prototype,"fieldsIndex",void 0),(0,b._)([(0,R.MZ)()],B.prototype,"gdbVersion",void 0),(0,b._)([(0,R.MZ)()],B.prototype,"infoFor3D",void 0),(0,b._)([(0,R.MZ)({readOnly:!0})],B.prototype,"parsedUrl",null),(0,b._)([(0,R.MZ)()],B.prototype,"pbfSupported",void 0),(0,b._)([(0,R.MZ)()],B.prototype,"queryAttachmentsSupported",void 0),(0,b._)([(0,R.MZ)()],B.prototype,"sourceSpatialReference",void 0),(0,b._)([(0,R.MZ)({type:String})],B.prototype,"url",void 0),B=(0,b._)([(0,q.$)("esri.tasks.QueryTask")],B);const k=B},35999:(e,o,_)=>{_.d(o,{E1:()=>i,Fm:()=>s,JZ:()=>F,R_:()=>u,fu:()=>t,oF:()=>r,rq:()=>c});const b=[["binary","application/octet-stream","bin",""]];function t(e,o){var _;return null!=d(o.name,null!==(_=null===e||void 0===e?void 0:e.supportedFormats)&&void 0!==_?_:[])}function r(e,o){var _;if(!e)return!1;const b=c(o,null!==(_=e.supportedFormats)&&void 0!==_?_:[]);return null!=b&&e.editFormats.includes(b)}function u(e,o){return m(function p(e,o){const _=e.toLowerCase();return a(o).find((e=>l(e)===_))}(e,o))}function i(e,o){return m(d(e,o))}function s(e,o){return l(function f(e,o){return a(o).find((o=>m(o)===e))}(e,o))}function c(e,o){var _;return null!==(_=i(e.name,o))&&void 0!==_?_:u(e.type,o)}function a(e){return[...b,...e]}function d(e,o){const _=e.toLowerCase();return a(o).find((e=>w(e).some((e=>_.endsWith(e)))))}function m(e){return null===e||void 0===e?void 0:e[0]}function l(e){return null===e||void 0===e?void 0:e[1].toLowerCase()}function w(e){var o;return null!==(o=null===e||void 0===e?void 0:e[2].split(",").map((e=>e.toLowerCase())))&&void 0!==o?o:[]}function F(e){var o;return null===(o=e.tables)||void 0===o?void 0:o.find((e=>"assetMaps"===e.role))}},19766:(e,o,_)=>{function t(e){const o={};for(const _ in e){if("declaredClass"===_)continue;const b=e[_];if(null!=b&&"function"!=typeof b)if(Array.isArray(b)){o[_]=[];for(let e=0;e<b.length;e++)o[_][e]=t(b[e])}else"object"==typeof b?b.toJSON&&(o[_]=JSON.stringify(b)):o[_]=b}return o}_.d(o,{z:()=>t})},87849:(e,o,_)=>{_.d(o,{I:()=>n});var b=_(95530),v=_(83947),O=_(49096);async function n(e,o,_){const P=(0,b.Dl)(e);return(0,v.gW)(P,O.A.from(o),{..._}).then((e=>e.data.count))}},73336:(e,o,_)=>{_.d(o,{V:()=>s});var b=_(95530),v=_(83947),O=_(49096);async function s(e,o,_){const P=(0,b.Dl)(e);return(0,v.Pk)(P,O.A.from(o),{..._}).then((e=>e.data.objectIds))}},35761:(e,o,_)=>{_.d(o,{e:()=>a,s:()=>s});var b=_(95530),v=_(83947),O=_(94309),P=_(49096);async function s(e,o,_){const b=await a(e,o,_);return O.A.fromJSON(b)}async function a(e,o,_){const O=(0,b.Dl)(e),C={..._},D=P.A.from(o),{data:R}=await(0,v.eW)(O,D,D.sourceSpatialReference,C);return R}},2569:(e,o,_)=>{_.d(o,{S:()=>executeQueryPBF_n});var b=_(95530),v=_(35598),O=_(8641),P=_(32050);function pbfJSONFeatureSet_o(e,o){return o}function i(e,o,_,b){switch(_){case 0:return u(e,o+b,0);case 1:return"lowerLeft"===e.originPosition?u(e,o+b,1):function l(e,o,_){let{translate:b,scale:v}=e;return b[_]-o*v[_]}(e,o+b,1)}}function n(e,o,_,b){return 2===_?u(e,o,2):i(e,o,_,b)}function pbfJSONFeatureSet_a(e,o,_,b){return 2===_?0===o?0:u(e,o,3):i(e,o,_,b)}function h(e,o,_,b){return 3===_?0===o?0:u(e,o,3):n(e,o,_,b)}function u(e,o,_){let{translate:b,scale:v}=e;return b[_]+o*v[_]}class d{constructor(e){this._options=e,this.geometryTypes=["esriGeometryPoint","esriGeometryMultipoint","esriGeometryPolyline","esriGeometryPolygon"],this._previousCoordinate=[0,0],this._transform=null,this._applyTransform=pbfJSONFeatureSet_o,this._lengths=[],this._currentLengthIndex=0,this._toAddInCurrentPath=0,this._vertexDimension=0,this._mValueOffset=null,this._coordinateBuffer=null,this._coordinateBufferPtr=0,this._attributesConstructor=class{}}createFeatureResult(){return{fields:[],features:[]}}finishFeatureResult(e){if(this._options.applyTransform&&(e.transform=null),this._attributesConstructor=class{},this._coordinateBuffer=null,this._lengths.length=0,!e.hasZ)return;const o=(0,O.N)(e.geometryType,this._options.sourceSpatialReference,e.spatialReference);if(null!=o)for(const _ of e.features)o(_.geometry)}createSpatialReference(){return{}}addField(e,o){const _=e.fields;(0,v.Lw)(_),_.push(o);const b=_.map((e=>e.name));this._attributesConstructor=function(){for(const e of b)this[e]=null}}addFeature(e,o){e.features.push(o)}prepareFeatures(e){switch(this._transform=e.transform,this._options.applyTransform&&e.transform&&(this._applyTransform=this._deriveApplyTransform(e)),this._mValueOffset=null,this._vertexDimension=2,e.hasZ&&this._vertexDimension++,e.hasM&&(this._mValueOffset=this._vertexDimension,this._vertexDimension++),e.geometryType){case"esriGeometryPoint":this.addCoordinate=(e,o,_)=>this.addCoordinatePoint(e,o,_),this.createGeometry=e=>this.createPointGeometry(e);break;case"esriGeometryPolygon":this.addCoordinate=(e,o,_)=>this._addCoordinatePolygon(e,o,_),this.createGeometry=e=>this._createPolygonGeometry(e);break;case"esriGeometryPolyline":this.addCoordinate=(e,o,_)=>this._addCoordinatePolyline(e,o,_),this.createGeometry=e=>this._createPolylineGeometry(e);break;case"esriGeometryMultipoint":this.addCoordinate=(e,o,_)=>this._addCoordinateMultipoint(e,o,_),this.createGeometry=e=>this._createMultipointGeometry(e)}}createFeature(){return this._lengths.length=0,this._currentLengthIndex=0,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0,this._coordinateBuffer=null,this._coordinateBufferPtr=0,{attributes:new this._attributesConstructor}}allocateCoordinates(){}addLength(e,o,_){0===this._lengths.length&&(this._toAddInCurrentPath=o),this._lengths.push(o)}addQueryGeometry(e,o){const{queryGeometry:_,queryGeometryType:b}=o,v=(0,P.Ch)(_.clone(),_,!1,!1,this._transform),O=(0,P.zv)(v,b,!1,!1);e.queryGeometryType=b,e.queryGeometry={...O}}createPointGeometry(e){const o={x:0,y:0,spatialReference:e.spatialReference};return e.hasZ&&(o.z=0),e.hasM&&(o.m=0),o}addCoordinatePoint(e,o,_){const b=this._transform;switch(o=this._applyTransform(b,o,_,0),_){case 0:e.x=o;break;case 1:e.y=o;break;case 2:"z"in e?e.z=o:e.m=o;break;case 3:e.m=o}}_transformPathLikeValue(e,o){let _=0;o<=1&&(_=this._previousCoordinate[o],this._previousCoordinate[o]+=e);const b=this._transform;return null===this._mValueOffset||0!==e||o%this._mValueOffset?this._applyTransform(b,e,o,_):0}_addCoordinatePolyline(e,o,_){this._dehydratedAddPointsCoordinate(e.paths,o,_)}_addCoordinatePolygon(e,o,_){this._dehydratedAddPointsCoordinate(e.rings,o,_)}_addCoordinateMultipoint(e,o,_){0===_&&e.points.push([]);const b=this._transformPathLikeValue(o,_);e.points[e.points.length-1].push(b)}_createPolygonGeometry(e){return{rings:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createPolylineGeometry(e){return{paths:[[]],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_createMultipointGeometry(e){return{points:[],spatialReference:e.spatialReference,hasZ:!!e.hasZ,hasM:!!e.hasM}}_dehydratedAddPointsCoordinate(e,o,_){0===_&&0==this._toAddInCurrentPath--&&(e.push([]),this._toAddInCurrentPath=this._lengths[++this._currentLengthIndex]-1,this._previousCoordinate[0]=0,this._previousCoordinate[1]=0);const b=this._transformPathLikeValue(o,_),v=e[e.length-1];0===_&&(this._coordinateBufferPtr=0,this._coordinateBuffer=new Array(this._vertexDimension),v.push(this._coordinateBuffer)),this._coordinateBuffer[this._coordinateBufferPtr++]=b}_deriveApplyTransform(e){const{hasZ:o,hasM:_}=e;return o&&_?h:o?n:_?pbfJSONFeatureSet_a:i}}var C=_(83947),D=(_(94309),_(49096));async function executeQueryPBF_n(e,o,_){const v=(0,b.Dl)(e),O={..._},P=D.A.from(o),R=!P.quantizationParameters,{data:q}=await(0,C.IJ)(v,P,new d({sourceSpatialReference:P.sourceSpatialReference,applyTransform:R}),O);return q}},83947:(e,o,_)=>{_.d(o,{GB:()=>E,IJ:()=>f,Jf:()=>x,Pk:()=>p,eW:()=>c,gW:()=>S,kS:()=>d});var b=_(53705),v=_(4270),O=_(31670),P=_(30172),C=_(78395),D=_(19766),R=_(84714),q=_(34127);const A="Layer does not support extent calculation.";function y(e,o){var _;const b=e.geometry,v=e.toJSON();delete v.compactGeometryEnabled,delete v.defaultSpatialReferenceEnabled;const P=v;let D,R,q;if(null!=b&&(R=b.spatialReference,q=(0,C.YX)(R),P.geometryType=(0,O.$B)(b),P.geometry=function m(e,o){if(o&&"extent"===e.type)return"".concat(e.xmin,",").concat(e.ymin,",").concat(e.xmax,",").concat(e.ymax);if(o&&"point"===e.type)return"".concat(e.x,",").concat(e.y);const _=e.toJSON();return delete _.spatialReference,JSON.stringify(_)}(b,e.compactGeometryEnabled),P.inSR=q),v.groupByFieldsForStatistics&&(P.groupByFieldsForStatistics=v.groupByFieldsForStatistics.join(",")),v.objectIds&&(P.objectIds=v.objectIds.join(",")),v.orderByFields&&(P.orderByFields=v.orderByFields.join(",")),!v.outFields||!v.returnDistinctValues&&(null!==o&&void 0!==o&&o.returnCountOnly||null!==o&&void 0!==o&&o.returnExtentOnly||null!==o&&void 0!==o&&o.returnIdsOnly)?delete P.outFields:v.outFields.includes("*")?P.outFields="*":P.outFields=v.outFields.join(","),v.outSR?(P.outSR=(0,C.YX)(v.outSR),D=e.outSpatialReference):b&&(v.returnGeometry||v.returnCentroid)&&(P.outSR=P.inSR,D=R),v.returnGeometry&&delete v.returnGeometry,v.outStatistics&&(P.outStatistics=JSON.stringify(v.outStatistics)),v.fullText&&(P.fullText=JSON.stringify(v.fullText)),v.pixelSize&&(P.pixelSize=JSON.stringify(v.pixelSize)),v.quantizationParameters&&(e.defaultSpatialReferenceEnabled&&null!=R&&null!=(null===(_=e.quantizationParameters)||void 0===_?void 0:_.extent)&&R.equals(e.quantizationParameters.extent.spatialReference)&&delete v.quantizationParameters.extent.spatialReference,P.quantizationParameters=JSON.stringify(v.quantizationParameters)),v.parameterValues&&(P.parameterValues=JSON.stringify(v.parameterValues)),v.rangeValues&&(P.rangeValues=JSON.stringify(v.rangeValues)),v.dynamicDataSource&&(P.layer=JSON.stringify({source:v.dynamicDataSource}),delete v.dynamicDataSource),v.timeExtent){const e=v.timeExtent,{start:o,end:_}=e;null==o&&null==_||(P.time=o===_?o:"".concat(null!==o&&void 0!==o?o:"null",",").concat(null!==_&&void 0!==_?_:"null")),delete v.timeExtent}return e.defaultSpatialReferenceEnabled&&null!=R&&null!=D&&R.equals(D)&&(P.defaultSR=P.inSR,delete P.inSR,delete P.outSR),P}async function c(e,o,_,b){const v=null!=o.timeExtent&&o.timeExtent.isEmpty?{data:{features:[]}}:await E(e,o,"json",b);return(0,q.q)(o,_,v.data),v}async function f(e,o,_,b){if(null!=o.timeExtent&&o.timeExtent.isEmpty)return{data:_.createFeatureResult()};const v=await d(e,o,b),O=v;return O.data=(0,R.m)(v.data,_),O}function d(e,o,_){return E(e,o,"pbf",_)}function p(e,o,_){return null!=o.timeExtent&&o.timeExtent.isEmpty?Promise.resolve({data:{objectIds:[]}}):E(e,o,"json",_,{returnIdsOnly:!0})}function S(e,o,_){return null!=o.timeExtent&&o.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):E(e,o,"json",_,{returnIdsOnly:!0,returnCountOnly:!0})}async function x(e,o,_){if(null!=o.timeExtent&&o.timeExtent.isEmpty)return{data:{count:0,extent:null}};const b=await E(e,o,"json",_,{returnExtentOnly:!0,returnCountOnly:!0}),v=b.data;if(v.hasOwnProperty("extent"))return b;if(v.features)throw new Error(A);if(v.hasOwnProperty("count"))throw new Error(A);return b}async function E(e,o,_){let O=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},C=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const R="string"==typeof e?(0,v.An)(e):e,q=o.geometry?[o.geometry]:[],A=await(0,P.el)(q,null,{signal:O.signal}),N=null===A||void 0===A?void 0:A[0];null!=N&&((o=o.clone()).geometry=N);const G=(0,D.z)({...R.query,f:_,...C,...y(o,C)});return(0,b.A)((0,v.fj)(R.path,function g(e,o){return null!=e.formatOf3DObjects&&!(o.returnCountOnly||o.returnExtentOnly||o.returnIdsOnly)}(o,C)?"query3d":"query"),{...O,responseType:"pbf"===_?"array-buffer":"json",query:{...G,...O.query}})}}}]);
//# sourceMappingURL=4963.7f0e2ff4.chunk.js.map