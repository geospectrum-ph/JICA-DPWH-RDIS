"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[7084],{47084:(e,l,n)=>{n.d(l,{getRampStops:()=>k});var i=n(22123),t=n(21343),o=n(14449),s=n(29304),a=n(80047),r=n(46415),u=(n(70218),n(79936)),c=n(65844),f=n(40943);const d=30,m=12,y=[255,255,255],p=[200,200,200],h=[128,128,128],b=20,w=5;async function k(e,l,n,i,t,s,u){var c,f;const d=l.legendOptions,m=null===d||void 0===d?void 0:d.customValues,y=u||await U(e,n),p=l.stops,h=!!y,b=!!m,w=null!=l.minSize&&null!=l.maxSize,g=p&&p.length>1,_=!!l.target;if(!h||!b&&!(w||g&&!_))return;const A=(0,a.$d)(y);let R=!1,$=null,F=null;$=A&&!g?(0,o.LI)([l.minDataValue,l.maxDataValue]):null!==m&&void 0!==m?m:await D(l,y,i,null===t||void 0===t?void 0:t.type);const H=null===e||void 0===e?void 0:e.authoringInfo,O="univariate-color-size"===(null===H||void 0===H?void 0:H.type),Z=O&&"above-and-below"===(null===H||void 0===H?void 0:H.univariateTheme);if(!$&&g&&($=p.map((e=>e.value)),R=p.some((e=>!!e.label)),"flow"===e.type&&($=(0,o.LI)($)),R&&(F=p.map((e=>e.label)))),A&&null!=$&&(null===(c=$)||void 0===c?void 0:c.length)>2&&!Z&&($=[$[0],$[$.length-1]]),!$)return null;O&&5!==(null===(f=$)||void 0===f?void 0:f.length)&&($=E({minSize:$[0],maxSize:$[$.length-1]}));const G=A?x(e,$):null,J=(0,a.k_)(y),K=R?null:function V(e,l){const n=e.length-1;return e.map(((e,i)=>(0,r.Dd)(e,i,n,l)))}($,s);return(await Promise.all($.map((async(n,o)=>{const s=A?G[o]:await B(l,y,n,i,null===t||void 0===t?void 0:t.type);return{value:n,symbol:P(Z&&"class-breaks"===e.type?L(e,o):y,s),label:R?F[o]:K[o],size:s,outlineSize:J}})))).reverse()}function x(e,l){const n=null===e||void 0===e?void 0:e.authoringInfo,i="univariate-color-size"===(null===n||void 0===n?void 0:n.type);let t=[m,d];if(i){const e=l[0],n=l[l.length-1],i=m,o=d;t=l.map((l=>i+(l-e)/(n-e)*(o-i)))}return i&&"below"===(null===n||void 0===n?void 0:n.univariateTheme)&&t.reverse(),t}function L(e,l){const n=e.classBreakInfos,i=n.length,t=i<2||!(l>=2)?n[0].symbol.clone():n[i-1].symbol.clone();return e.visualVariables.some((e=>"color"===e.type))&&(t.type.includes("3d")?I(t):M(t)),t}async function U(e,l){var n;if("flow"===e.type)return(0,r.Zo)(e,l);if("pie-chart"===e.type)return new c.A({color:null,outline:null!==(n=e.outline)&&void 0!==n&&n.width?e.outline:new f.A});let i=null,o=null;if("simple"===e.type)i=e.symbol;else if("class-breaks"===e.type){const l=e.classBreakInfos;i=l&&l[0]&&l[0].symbol,o=l.length>1}else if("unique-value"===e.type){var s;const l=e.uniqueValueInfos;i=null===l||void 0===l||null===(s=l[0])||void 0===s?void 0:s.symbol,o=null!=l&&l.length>1}return!i||function C(e){if(e)return(0,t.wk)(e)?!!e.symbolLayers&&e.symbolLayers.some((e=>e&&"fill"===e.type)):e.type.includes("fill");return!1}(i)?null:(i=i.clone(),(l||o)&&(i.type.includes("3d")?I(i):M(i)),i)}function I(e){"line-3d"===e.type?e.symbolLayers.forEach((e=>{e.material={color:h}})):e.symbolLayers.forEach((e=>{var l;"icon"!==e.type||null!==(l=e.resource)&&void 0!==l&&l.href?e.material={color:p}:(e.material={color:y},e.outline={color:h,size:1.5})}))}function M(e){const l=(0,u.g4)();if("cim"===e.type)(0,s.Fe)(e,new i.A(p));else if(e.type.includes("line"))e.color=h;else if(e.color=l?h:y,"simple-marker"===e.type)if(e.outline){var n;"#ffffff"===(null===(n=e.outline)||void 0===n||null===(n=n.color)||void 0===n?void 0:n.toHex())&&(e.outline.color=h)}else e.outline={color:h,width:1.5}}async function D(e,l,i,t){const s=(await Promise.resolve().then(n.bind(n,56428))).getSizeRangeAtScale(e,i,t),a=s&&E(s);if(!s||!a)return;let r=a.map((l=>function T(e,l,n){const i=n.minSize,t=n.maxSize,o=l.minDataValue,s=l.maxDataValue;let a;a=e<=i?o:e>=t?s:(e-i)/(t-i)*(s-o)+o;return a}(l,e,s)));r=(0,o.LI)(r);for(let n=1;n<r.length-1;n++){const o=await q(e,l,r[n],r[n-1],i,t);o&&(r[n]=o[0],a[n]=o[1])}return r}function E(e){const l=e.minSize,n=e.maxSize,i=w,t=(n-l)/(i-1),o=[];for(let s=0;s<i;s++)o.push(l+t*s);return o}async function q(e,l,n,i,t,s){const a=await B(e,l,n,t,s),r=await B(e,l,i,t,s),u=(0,o.lc)(n),c=u.fractional,f=b;let d=u.integer,m=null,y=null;n>0&&n<1&&(m=10**c,d=(0,o.lc)(n*=m).integer);for(let p=d-1;p>=0;p--){const i=10**p;let u=Math.floor(n/i)*i,c=Math.ceil(n/i)*i;null!=m&&(u/=m,c/=m);let d=(u+c)/2;[,d]=(0,o.LI)([u,d,c],{indexes:[1]});const h=await B(e,l,u,t,s),b=await B(e,l,c,t,s),w=await B(e,l,d,t,s),g=(0,o.u5)(a,h,r,null),_=(0,o.u5)(a,b,r,null),A=(0,o.u5)(a,w,r,null);let R=g.previous<=f,$=_.previous<=f;if(R&&$&&(g.previous<=_.previous?(R=!0,$=!1):($=!0,R=!1)),R?y=[u,h]:$?y=[c,b]:A.previous<=f&&(y=[d,w]),y)break}return y}async function B(e,l,i,t,o){const{getSize:s}=await Promise.resolve().then(n.bind(n,56428));return s(e,i,{scale:t,view:o,shape:"simple-marker"===l.type?l.style:null})}function P(e,l){const n=e.clone();if((0,t.wk)(n))(0,a.$d)(n)||n.symbolLayers.forEach((e=>{"fill"!==e.type&&(e.size=l)}));else if(function S(e){return"esri.symbols.SimpleMarkerSymbol"===e.declaredClass}(n))n.size=l;else if(function v(e){return"esri.symbols.PictureMarkerSymbol"===e.declaredClass}(n)){const e=n.width,i=n.height;n.height=l,n.width=l*(e/i)}else!function z(e){return"esri.symbols.SimpleLineSymbol"===e.declaredClass}(n)?function j(e){return"esri.symbols.TextSymbol"===e.declaredClass}(n)&&n.font&&(n.font.size=l):n.width=l;return n}}}]);
//# sourceMappingURL=7084.f88f4961.chunk.js.map