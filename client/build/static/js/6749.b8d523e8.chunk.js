"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[6749],{13600:(i,_,m)=>{m.d(_,{A:()=>t});class t{constructor(i){this.size=0,this._start=0,this.maxSize=i,this._buffer=new Array(i)}get entries(){return this._buffer}enqueue(i){if(this.size===this.maxSize){const _=this._buffer[this._start];return this._buffer[this._start]=i,this._start=(this._start+1)%this.maxSize,_}return this._buffer[(this._start+this.size++)%this.maxSize]=i,null}dequeue(){if(0===this.size)return null;const i=this._buffer[this._start];return this._buffer[this._start]=null,this.size--,this._start=(this._start+1)%this.maxSize,i}peek(){return 0===this.size?null:this._buffer[this._start]}find(i){if(0===this.size)return null;for(const _ of this._buffer)if(null!=_&&i(_))return _;return null}clear(i){let _=this.dequeue();for(;null!=_;)i&&i(_),_=this.dequeue()}}},31714:(i,_,m)=>{m.d(_,{T:()=>r,U:()=>o});var w=m(48237);function o(i,_){let m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const D=(0,w.qE)(i,0,L);for(let w=0;w<4;w++)_[m+w]=Math.floor(256*l(D*x[w]))}function r(i){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=0;for(let w=0;w<4;w++)m+=i[_+w]*D[w];return m}const x=[1,256,65536,16777216],D=[1/256,1/65536,1/16777216,1/4294967296],L=r(new Uint8ClampedArray([255,255,255,255]));function l(i){return i-Math.floor(i)}},40954:(i,_,m)=>{m.d(_,{A:()=>n});var w,x,D=m(50886),L=m(83157);(x=w||(w={}))[x.varint=0]="varint",x[x.fixed64=1]="fixed64",x[x.delimited=2]="delimited",x[x.fixed32=5]="fixed32",x[x.unknown=99]="unknown";const R=4294967296,O=new TextDecoder("utf-8"),F=(0,D.A)("safari")||(0,D.A)("ios")?6:(0,D.A)("ff")?12:32;class n{constructor(i,_){let m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,x=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i?i.byteLength:0;this._tag=0,this._dataType=w.unknown,this._init(i,_,m,x)}_init(i,_,m,w){this._data=i,this._dataView=_,this._pos=m,this._end=w}asUnsafe(){return this}clone(){return new n(this._data,this._dataView,this._pos,this._end)}pos(){return this._pos}move(i){this._pos=i}nextTag(i){for(;;){if(this._pos===this._end)return!1;const _=this._decodeVarint();if(this._tag=_>>3,this._dataType=7&_,!i||i===this._tag)break;this.skip()}return!0}next(){if(this._pos===this._end)return!1;const i=this._decodeVarint();return this._tag=i>>3,this._dataType=7&i,!0}empty(){return this._pos>=this._end}tag(){return this._tag}getInt32(){return this._decodeVarint()}getInt64(){return this._decodeVarint()}getUInt32(){let i=4294967295;if(i=(127&this._data[this._pos])>>>0,this._data[this._pos++]<128)return i;if(i=(i|(127&this._data[this._pos])<<7)>>>0,this._data[this._pos++]<128)return i;if(i=(i|(127&this._data[this._pos])<<14)>>>0,this._data[this._pos++]<128)return i;if(i=(i|(127&this._data[this._pos])<<21)>>>0,this._data[this._pos++]<128)return i;if(i=(i|(15&this._data[this._pos])<<28)>>>0,this._data[this._pos++]<128)return i;throw new Error("Varint overflow")}getUInt64(){return this._decodeVarint()}getSInt32(){const i=this.getUInt32();return i>>>1^-(1&i)|0}getSInt64(){return this._decodeSVarint()}getBool(){const i=0!==this._data[this._pos];return this._skip(1),i}getEnum(){return this._decodeVarint()}getFixed64(){const i=this._dataView,_=this._pos,m=i.getUint32(_,!0)+i.getUint32(_+4,!0)*R;return this._skip(8),m}getSFixed64(){const i=this._dataView,_=this._pos,m=i.getUint32(_,!0)+i.getInt32(_+4,!0)*R;return this._skip(8),m}getDouble(){const i=this._dataView.getFloat64(this._pos,!0);return this._skip(8),i}getFixed32(){const i=this._dataView.getUint32(this._pos,!0);return this._skip(4),i}getSFixed32(){const i=this._dataView.getInt32(this._pos,!0);return this._skip(4),i}getFloat(){const i=this._dataView.getFloat32(this._pos,!0);return this._skip(4),i}getString(){const i=this._getLength(),_=this._pos,m=this._toString(this._data,_,_+i);return this._skip(i),m}getBytes(){const i=this._getLength(),_=this._pos,m=this._toBytes(this._data,_,_+i);return this._skip(i),m}getLength(){return this._getLengthUnsafe()}processMessageWithArgs(i,_,m,w){const x=this.getMessage(),D=i(x,_,m,w);return x.release(),D}processMessage(i){const _=this.getMessage(),m=i(_);return _.release(),m}getMessage(){const i=this._getLength(),_=n.pool.acquire();return _._init(this._data,this._dataView,this._pos,this._pos+i),this._skip(i),_}release(){n.pool.release(this)}dataType(){return this._dataType}skip(){switch(this._dataType){case w.varint:this._decodeVarint();break;case w.fixed64:this._skip(8);break;case w.delimited:this._skip(this._getLength());break;case w.fixed32:this._skip(4);break;default:throw new Error("Invalid data type!")}}skipLen(i){this._skip(i)}_skip(i){if(this._pos+i>this._end)throw new Error("Attempt to skip past the end of buffer!");this._pos+=i}_decodeVarint(){const i=this._data;let _=this._pos,m=0,w=0;if(this._end-_>=10)do{if(w=i[_++],m|=127&w,0==(128&w))break;if(w=i[_++],m|=(127&w)<<7,0==(128&w))break;if(w=i[_++],m|=(127&w)<<14,0==(128&w))break;if(w=i[_++],m|=(127&w)<<21,0==(128&w))break;if(w=i[_++],m+=268435456*(127&w),0==(128&w))break;if(w=i[_++],m+=34359738368*(127&w),0==(128&w))break;if(w=i[_++],m+=4398046511104*(127&w),0==(128&w))break;if(w=i[_++],m+=562949953421312*(127&w),0==(128&w))break;if(w=i[_++],m+=72057594037927940*(127&w),0==(128&w))break;if(w=i[_++],m+=0x8000000000000000*(127&w),0==(128&w))break;throw new Error("Varint too long!")}while(0);else{let x=1;for(;_!==this._end&&(w=i[_],0!=(128&w));)++_,m+=(127&w)*x,x*=128;if(_===this._end)throw new Error("Varint overrun!");++_,m+=w*x}return this._pos=_,m}_decodeSVarint(){const i=this._data;let _,m=0,w=0;const x=1&i[this._pos];if(w=i[this._pos++],m|=127&w,0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m|=(127&w)<<7,0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m|=(127&w)<<14,0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m|=(127&w)<<21,0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m+=268435456*(127&w),0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m+=34359738368*(127&w),0==(128&w))return x?-(m+1)/2:m/2;if(w=i[this._pos++],m+=4398046511104*(127&w),0==(128&w))return x?-(m+1)/2:m/2;if(_=BigInt(m),w=i[this._pos++],_+=0x2000000000000n*BigInt(127&w),0==(128&w))return Number(x?-(_+1n)/2n:_/2n);if(w=i[this._pos++],_+=0x100000000000000n*BigInt(127&w),0==(128&w))return Number(x?-(_+1n)/2n:_/2n);if(w=i[this._pos++],_+=0x8000000000000000n*BigInt(127&w),0==(128&w))return Number(x?-(_+1n)/2n:_/2n);throw new Error("Varint too long!")}_getLength(){if(this._dataType!==w.delimited)throw new Error("Not a delimited data type!");return this._decodeVarint()}_getLengthUnsafe(){return this.getUInt32()}_toString(i,_,m){if((m=Math.min(this._end,m))-_>F){const w=i.subarray(_,m);return O.decode(w)}let w="",x="";for(let D=_;D<m;++D){const _=i[D];128&_?x+="%"+_.toString(16):(w+=decodeURIComponent(x)+String.fromCharCode(_),x="")}return x.length&&(w+=decodeURIComponent(x)),w}_toBytes(i,_,m){return m=Math.min(this._end,m),new Uint8Array(i.buffer,_,m-_)}}n.pool=new L.A(n,void 0,(i=>{i._data=null,i._dataView=null}))},4253:(i,_,m)=>{m.d(_,{C:()=>Z});var w=m(80671),x=m(18763),D=(m(4180),m(50886)),L=(m(89412),m(57453)),R=(m(76761),m(68682)),O=m(80271),F=m(48237),V=m(92748);class CollisionGrid_l{constructor(i,_,m){this._debugMap=new Map,this._width=i*m,this._height=_*m,this._pixelRatio=m;const w=Math.ceil(this._width/1),x=Math.ceil(this._height/1);this._cols=w,this._rows=x,this._cells=V.y.create(w*x)}insertMetrics(i){this._markMetrics(i)}hasCollision(i){let _=0;for(const{computedX:m,computedY:w,width:x,height:D}of i.bounds){const i=(x+O.C2)*this._pixelRatio,L=(D+O.C2)*this._pixelRatio;switch(this._collide(m,w,i,L)){case 2:return 2;case 1:_++}}return _===i.bounds.length?1:0}getCellId(i,_){return i+_*this._cols}has(i){return this._cells.has(i)}hasRange(i,_){return this._cells.hasRange(i,_)}set(i){this._cells.set(i)}setRange(i,_){this._cells.setRange(i,_)}_collide(i,_,m,w){const x=i-m/2,D=_-w/2,L=x+m,R=D+w;if(L<0||R<0||x>this._width||D>this._height)return 1;const O=(0,F.qE)(Math.floor(x/1),0,this._cols),V=(0,F.qE)(Math.floor(D/1),0,this._rows),P=(0,F.qE)(Math.ceil(L/1),0,this._cols),U=(0,F.qE)(Math.ceil(R/1),0,this._rows);for(let F=V;F<=U;F++)for(let i=O;i<=P;i++){const _=this.getCellId(i,F);if(this.has(_))return 2}return 0}_mark(i,_,m,w,x){const D=i-m/2,L=_-w/2,R=D+m,O=L+w,V=(0,F.qE)(Math.floor(D/1),0,this._cols),P=(0,F.qE)(Math.floor(L/1),0,this._rows),U=(0,F.qE)(Math.ceil(R/1),0,this._cols),Z=(0,F.qE)(Math.ceil(O/1),0,this._rows);for(let F=P;F<=Z;F++)for(let i=V;i<=U;i++){const _=this.getCellId(i,F);this._debugMap.set(_,x),this.set(_)}return!1}_markMetrics(i){for(const{computedX:_,computedY:m,width:w,height:x}of i.bounds){const D=(w+O.C2)*this._pixelRatio,L=(x+O.C2)*this._pixelRatio;this._mark(_,m,D,L,i.entityTexel)}}}const P=254,U=255;function a(i,_){const m=i.children.slice();m.sort(((i,_)=>i.tileAge-_.tileAge)),m.forEach((i=>{null!=i.labelMetrics&&i.isReady&&_(i,i.labelMetrics)}))}function f(i,_){return(!i.minScale||i.minScale>=_)&&(!i.maxScale||i.maxScale<=_)}class d{run(i,_,m,w){const x=[];for(let D=i.length-1;D>=0;D--){var L;const _=i[D];(null===(L=_.labelingCollisionInfos)||void 0===L?void 0:L.length)&&x.push(..._.labelingCollisionInfos)}(0,D.A)("esri-2d-update-debug")&&x.length&&console.debug("CollisionEngine.run"),this._transformMetrics(x),this._runCollision(x,_,m,w);for(const D of x)D.container.requestRender()}_runCollision(i,_,m,w){const[x,D]=_.state.size,L=new CollisionGrid_l(x,D,_.pixelRatio);for(const{container:R,deconflictionEnabled:O,visible:F}of i){const i=R.attributeView;O?F?(this._prepare(R),this._collideVisible(L,R,m,w),this._collideInvisible(L,R)):a(R,((_,m)=>{for(const w of m)i.setLabelMinZoom(w.entityTexel,U)})):a(R,((_,w)=>{for(const x of w)f(x,m)?(i.setLabelMinZoom(x.entityTexel,0),F&&L.insertMetrics(x)):i.setLabelMinZoom(x.entityTexel,P)}))}}_isFiltered(i,_,m){const w=_.getFilterFlags(i),x=!m.hasFilter||!!(w&O.LY),D=null==m.featureEffect||m.featureEffect.excludedLabelsVisible||!!(w&O.g0);return!(x&&D)}_prepare(i){const _=i.attributeView,m=new Set;a(i,((w,x)=>{for(const D of x){const w=D.entityTexel;m.has(w)||(m.add(w),this._isFiltered(w,_,i.layerView)?_.setLabelMinZoom(w,P):0!==_.getLabelMinZoom(w)?_.setLabelMinZoom(w,U):_.setLabelMinZoom(w,0))}}))}_collideVisible(i,_,m,w){const x=_.attributeView,D=new Set;a(_,((_,L)=>{for(let R=0;R<L.length;R++){const O=L[R].entityTexel;if(D.has(O))continue;if(_.key.level!==w){x.setLabelMinZoom(O,P),D.add(O);continue}if(!f(L[R],m)){x.setLabelMinZoom(O,P),D.add(O);continue}if(0!==x.getLabelMinZoom(O)){D.add(O);continue}let F=!1,V=!0;const U=R;let Z=R;for(;Z<L.length;Z++){const _=L[Z];if(_.entityTexel!==O)break;if(!F)switch(i.hasCollision(_)){case 1:break;case 2:F=!0,V=!1;break;case 0:V=!1}}if(!F)for(let _=U;_<Z;_++)i.insertMetrics(L[_]);R=Z-1,V||(D.add(O),x.setLabelMinZoom(O,F?P:0))}}))}_collideInvisible(i,_){const m=_.attributeView,w=new Set;a(_,((_,x)=>{for(let D=0;D<x.length;D++){const _=x[D].entityTexel;if(w.has(_))continue;if(m.getLabelMinZoom(_)!==U){w.add(_);continue}let L=!1,R=!0;const O=D;let F=D;for(;F<x.length;F++){const m=x[F];if(m.entityTexel!==_)break;if(!L)switch(i.hasCollision(m)){case 1:break;case 2:L=!0,R=!1;break;case 0:R=!1}}if(!L)for(let m=O;m<F;m++)i.insertMetrics(x[m]);D=F-1,R||(w.add(_),m.setLabelMinZoom(_,L?U:0))}}))}_transformMetrics(i){for(const{container:_,geometryType:m,vvEvaluators:w}of i)a(_,((i,x)=>{const D=_.attributeView,L=i.transforms.labelMat2d;L[4]=Math.round(L[4]),L[5]=Math.round(L[5]);const R="polyline"===m;for(const _ of x){var O,F;const{entityTexel:i,anchorX:m,anchorY:x}=_;let V=null!==(O=null===(F=_.referenceBounds)||void 0===F?void 0:F.size)&&void 0!==O?O:0;const P=w[0];if(null!=P){const _=P(D.getVVSize(i));V=isNaN(_)||null==_||_===1/0?V:_}const U=_.directionX*(V/2),Z=_.directionY*(V/2);for(const w of _.bounds){let i=m,_=x;if(R){let m=i+w.x+U,x=_+w.y+Z;m=L[0]*m+L[2]*x+L[4],x=L[1]*m+L[3]*x+L[5],w.computedX=Math.floor(m),w.computedY=Math.floor(x)}else{i=L[0]*m+L[2]*x+L[4],_=L[1]*m+L[3]*x+L[5];const D=i+w.x+U,R=_+w.y+Z;w.computedX=D,w.computedY=R}}}}))}}let Z=class extends x.A{constructor(i){super(i),this._lastUpdate=0,this.collisionEngine=new d,this.lastUpdateId=-1,this.updateRequested=!1,this.view=null}get updating(){return(0,D.A)("esri-2d-log-updating")&&console.log("Updating LabelManager ".concat(this.updateRequested,":\n-> updateRequested: ").concat(this.updateRequested)),this.updateRequested}update(i){const _=performance.now();_-this._lastUpdate>=32?(this._lastUpdate=_,this.doUpdate(i)):this.requestUpdate()}viewChange(){this.requestUpdate()}requestUpdate(){var i;this.updateRequested||(this.updateRequested=!0,null===(i=this.view)||void 0===i||i.requestUpdate())}processUpdate(i){this.updateRequested&&(this.updateRequested=!1,this.update(i))}doUpdate(i){const _=this.view;if(_)try{const m=i.state.scale,w=_.featuresTilingScheme.getClosestInfoForScale(m).level;this.collisionEngine.run(_.allLayerViews.items,i,m,w)}catch(P){}}};(0,w._)([(0,L.MZ)()],Z.prototype,"updateRequested",void 0),(0,w._)([(0,L.MZ)()],Z.prototype,"updating",null),(0,w._)([(0,L.MZ)()],Z.prototype,"view",void 0),Z=(0,w._)([(0,R.$)("esri.views.2d.LabelManager")],Z)},89766:(i,_,m)=>{var w,x,D;m.d(_,{$q:()=>D,NP:()=>w,kh:()=>x}),function(i){i[i.FILL=1]="FILL",i[i.LINE=2]="LINE",i[i.SYMBOL=3]="SYMBOL",i[i.CIRCLE=4]="CIRCLE"}(w||(w={})),function(i){i[i.BACKGROUND=0]="BACKGROUND",i[i.FILL=1]="FILL",i[i.OUTLINE=2]="OUTLINE",i[i.LINE=3]="LINE",i[i.ICON=4]="ICON",i[i.CIRCLE=5]="CIRCLE",i[i.TEXT=6]="TEXT",i[i.TILEINFO=7]="TILEINFO"}(x||(x={})),function(i){i[i.PAINTER_CHANGED=0]="PAINTER_CHANGED",i[i.LAYOUT_CHANGED=1]="LAYOUT_CHANGED",i[i.LAYER_CHANGED=2]="LAYER_CHANGED",i[i.LAYER_REMOVED=3]="LAYER_REMOVED",i[i.SPRITES_CHANGED=4]="SPRITES_CHANGED"}(D||(D={}))},80148:(i,_,m)=>{m.d(_,{U:()=>n});var w=m(13600),x=m(73067),D=m(50886),L=m(61995);const R=(0,D.A)("esri-2d-profiler");class n{constructor(i,_){var m=this;if(this._events=new x.A,this._entries=new Map,this._timings=new w.A(10),this._currentContainer=null,this._currentPass=null,this._currentBrush=null,this._currentSummary=null,!R)return;this._ext=(0,L._R)(i.gl,{}),this._debugOutput=_;const D=i.gl;if(!this.enableCommandLogging)return;let O;for(O in D)if("function"==typeof D[O]){const i=D[O],_=O.includes("draw");D[O]=function(){for(var w=arguments.length,x=new Array(w),L=0;L<w;L++)x[L]=arguments[L];return m._events.emit("command",{container:m._currentContainer,pass:m._currentPass,brush:m._currentBrush,method:O,args:x,isDrawCommand:_}),m._currentSummary&&(m._currentSummary.commands++,_&&m._currentSummary.drawCommands++),i.apply(D,x)}}}get enableCommandLogging(){return!("object"==typeof R&&R.disableCommands)}recordContainerStart(i){R&&(this._currentContainer=i)}recordContainerEnd(){R&&(this._currentContainer=null)}recordPassStart(i){R&&(this._currentPass=i,this._initSummary())}recordPassEnd(){R&&(this._currentPass=null,this._emitSummary())}recordBrushStart(i){R&&(this._currentBrush=i)}recordBrushEnd(){R&&(this._currentBrush=null)}recordStart(i){if(R&&null!=this._ext){if(this._entries.has(i)){const _=this._entries.get(i),m=this._ext.resultAvailable(_.query),w=this._ext.disjoint();if(m&&!w){const m=this._ext.getResult(_.query)/1e6;let w=0;if(null!=this._timings.enqueue(m)){const i=this._timings.entries,_=i.length;let m=0;for(const w of i)m+=w;w=m/_}const x=m.toFixed(2),D=w?w.toFixed(2):"--";this.enableCommandLogging?(console.groupCollapsed("Frame report for ".concat(i,", ").concat(x," ms (").concat(D," last 10 avg)\n").concat(_.commandsLen," Commands (").concat(_.drawCommands," draw)")),console.log("RenderPass breakdown: "),console.table(_.summaries),console.log("Commands: ",_.commands),console.groupEnd()):console.log("Frame report for ".concat(i,", ").concat(x," ms (").concat(D," last 10 avg)")),this._debugOutput.innerHTML="".concat(x," (").concat(D,")")}for(const i of _.handles)i.remove();this._ext.deleteQuery(_.query),this._entries.delete(i)}const _={name:i,query:this._ext.createQuery(),commands:[],commandsLen:0,drawCommands:0,summaries:[],handles:[]};this.enableCommandLogging&&(_.handles.push(this._events.on("command",(i=>{_.commandsLen++,_.commands.push(i),i.isDrawCommand&&_.drawCommands++}))),_.handles.push(this._events.on("summary",(i=>{_.summaries.push(i)})))),this._ext.beginTimeElapsed(_.query),this._entries.set(i,_)}}recordEnd(i){R&&null!=this._ext&&this._entries.has(i)&&this._ext.endTimeElapsed()}_initSummary(){this.enableCommandLogging&&(this._currentSummary={container:this._currentContainer,pass:this._currentPass,drawCommands:0,commands:0})}_emitSummary(){this.enableCommandLogging&&this._currentSummary&&this._events.emit("summary",this._currentSummary)}}},22677:(i,_,m)=>{m.d(_,{J:()=>x});var w=m(85402);const x={shaders:{vertexShader:(0,w.Q)("bitBlit/bitBlit.vert"),fragmentShader:(0,w.Q)("bitBlit/bitBlit.frag")},attributes:new Map([["a_pos",0],["a_tex",1]])}},73025:(i,_,m)=>{m.d(_,{G:()=>D,Z:()=>x});var w=m(85402);const x={shaders:{vertexShader:(0,w.Q)("highlight/textured.vert"),fragmentShader:(0,w.Q)("highlight/highlight.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])},D={shaders:{vertexShader:(0,w.Q)("highlight/textured.vert"),fragmentShader:(0,w.Q)("highlight/blur.frag")},attributes:new Map([["a_position",0],["a_texcoord",1]])}},43401:(i,_,m)=>{m.d(_,{h:()=>t,j:()=>D});var w=m(85402),x=m(16285);const D={shaders:{vertexShader:(0,w.Q)("magnifier/magnifier.vert"),fragmentShader:(0,w.Q)("magnifier/magnifier.frag")},attributes:new Map([["a_pos",0]])};function t(i){return(0,x.r)(i,D)}},71245:(i,_,m)=>{m.d(_,{P:()=>x});var w=m(85402);const x={shaders:{vertexShader:(0,w.Q)("stencil/stencil.vert"),fragmentShader:(0,w.Q)("stencil/stencil.frag")},attributes:new Map([["a_pos",0]])}},37588:(i,_,m)=>{m.d(_,{A:()=>pt});var w=m(80671),x=m(48183),D=m(18763),L=m(35598),R=m(57453),O=(m(50886),m(89412),m(76761),m(68682)),F=m(57264),V=m(33344),P=m(62555),U=m(23589);const Z="esri-zoom-box",q={container:"".concat(Z,"__container"),overlay:"".concat(Z,"__overlay"),background:"".concat(Z,"__overlay-background"),box:"".concat(Z,"__outline")},Q="Shift",X="Ctrl";let Y=class extends D.A{constructor(i){super(i),this._container=null,this._overlay=null,this._backgroundShape=null,this._boxShape=null,this._box={x:0,y:0,width:0,height:0},this._rafId=null,this._redraw=this._redraw.bind(this)}destroy(){this.view=null}set view(i){this.removeAllHandles(),this._destroyOverlay(),this._set("view",i),i&&this.addHandles([i.on("drag",[Q],(i=>this._handleDrag(i,1)),U.o.INTERNAL),i.on("drag",[Q,X],(i=>this._handleDrag(i,-1)),U.o.INTERNAL)])}_start(){this._createContainer(),this._createOverlay(),this.navigation.begin()}_update(i,_,m,w){this._box.x=i,this._box.y=_,this._box.width=m,this._box.height=w,this._rafId||(this._rafId=requestAnimationFrame(this._redraw))}_end(i,_,m,w,x){const D=this.view,L=D.toMap((0,P.tc)(i+.5*m,_+.5*w));let R=Math.max(m/D.width,w/D.height);-1===x&&(R=1/R),this._destroyOverlay(),this.navigation.end(),D.goTo({center:L,scale:D.scale*R})}_updateBox(i,_,m,w){const x=this._boxShape;x.setAttributeNS(null,"x",""+i),x.setAttributeNS(null,"y",""+_),x.setAttributeNS(null,"width",""+m),x.setAttributeNS(null,"height",""+w),x.setAttributeNS(null,"class",q.box)}_updateBackground(i,_,m,w){this._backgroundShape.setAttributeNS(null,"d",this._toSVGPath(i,_,m,w,this.view.width,this.view.height))}_createContainer(){const i=document.createElement("div");i.className=q.container,this.view.root.appendChild(i),this._container=i}_createOverlay(){const i=this.view.width,_=this.view.height,m=document.createElementNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M 0 0 L "+i+" 0 L "+i+" "+_+" L 0 "+_+" Z"),m.setAttributeNS(null,"class",q.background);const w=document.createElementNS("http://www.w3.org/2000/svg","rect"),x=document.createElementNS("http://www.w3.org/2000/svg","svg");x.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),x.setAttributeNS(null,"class",q.overlay),x.appendChild(m),x.appendChild(w),this._container.appendChild(x),this._backgroundShape=m,this._boxShape=w,this._overlay=x}_destroyOverlay(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container),this._container=this._backgroundShape=this._boxShape=this._overlay=null}_toSVGPath(i,_,m,w,x,D){const L=i+m,R=_+w;return"M 0 0 L "+x+" 0 L "+x+" "+D+" L 0 "+D+" ZM "+i+" "+_+" L "+i+" "+R+" L "+L+" "+R+" L "+L+" "+_+" Z"}_handleDrag(i,_){const m=i.x,w=i.y,x=i.origin.x,D=i.origin.y;let L,R,O,F;switch(m>x?(L=x,O=m-x):(L=m,O=x-m),w>D?(R=D,F=w-D):(R=w,F=D-w),i.action){case"start":this._start();break;case"update":this._update(L,R,O,F);break;case"end":this._end(L,R,O,F,_)}i.stopPropagation()}_redraw(){if(!this._rafId)return;if(this._rafId=null,!this._overlay)return;const{x:i,y:_,width:m,height:w}=this._box;this._updateBox(i,_,m,w),this._updateBackground(i,_,m,w),this._rafId=requestAnimationFrame(this._redraw)}};(0,w._)([(0,R.MZ)()],Y.prototype,"navigation",void 0),(0,w._)([(0,R.MZ)()],Y.prototype,"view",null),Y=(0,w._)([(0,O.$)("esri.views.2d.navigation.ZoomBox")],Y);const H=Y;m(30174);var K=m(63390),$=m(54880),J=m(83800);class FilteredFiniteDifference_t{constructor(i){this._gain=i,this.lastValue=void 0,this.filteredDelta=void 0}update(i){if(this.hasLastValue()){const _=this.computeDelta(i);this._updateDelta(_)}this.lastValue=i}reset(){this.lastValue=void 0,this.filteredDelta=void 0}hasLastValue(){return void 0!==this.lastValue}hasFilteredDelta(){return void 0!==this.filteredDelta}computeDelta(i){return void 0===this.lastValue?NaN:i-this.lastValue}_updateDelta(i){void 0!==this.filteredDelta?this.filteredDelta=(1-this._gain)*this.filteredDelta+this._gain*i:this.filteredDelta=i}}class Momentum_t{constructor(i,_,m){this._initialVelocity=i,this._stopVelocity=_,this._friction=m,this._duration=Math.abs(Math.log(Math.abs(this._initialVelocity)/this._stopVelocity)/Math.log(1-this._friction))}get duration(){return this._duration}isFinished(i){return i>this.duration}get friction(){return this._friction}value(i){return this.valueFromInitialVelocity(this._initialVelocity,i)}valueDelta(i,_){const m=this.value(i);return this.value(i+_)-m}valueFromInitialVelocity(i,_){_=Math.min(_,this.duration);const m=1-this.friction;return i*(m**_-1)/Math.log(m)}}class PanPlanarMomentumEstimator_l extends Momentum_t{constructor(i,_,m,w,x){super(i,_,m),this._sceneVelocity=w,this.direction=x}value(i){return super.valueFromInitialVelocity(this._sceneVelocity,i)}}class PanPlanarMomentumEstimator_c{constructor(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.84;this._minimumInitialVelocity=i,this._stopVelocity=_,this._friction=m,this.enabled=!0,this._time=new FilteredFiniteDifference_t(.6),this._screen=[new FilteredFiniteDifference_t(.4),new FilteredFiniteDifference_t(.4)],this._scene=[new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6),new FilteredFiniteDifference_t(.6)],this._tmpDirection=(0,J.vt)()}add(i,_,m){if(this.enabled){if(this._time.hasLastValue()&&this._time.computeDelta(m)<.015)return;this._screen[0].update(i[0]),this._screen[1].update(i[1]),this._scene[0].update(_[0]),this._scene[1].update(_[1]),this._scene[2].update(_[2]),this._time.update(m)}}reset(){this._screen[0].reset(),this._screen[1].reset(),this._scene[0].reset(),this._scene[1].reset(),this._scene[2].reset(),this._time.reset()}evaluateMomentum(){if(!this.enabled||!this._screen[0].hasFilteredDelta()||!this._time.hasFilteredDelta())return null;const i=this._screen[0].filteredDelta,_=this._screen[1].filteredDelta,m=null==i||null==_?0:Math.sqrt(i*i+_*_),w=this._time.filteredDelta,x=null==w||null==m?0:m/w;return Math.abs(x)<this._minimumInitialVelocity?null:this.createMomentum(x,this._stopVelocity,this._friction)}createMomentum(i,_,m){var w,x,D;(0,$.s)(this._tmpDirection,null!==(w=this._scene[0].filteredDelta)&&void 0!==w?w:0,null!==(x=this._scene[1].filteredDelta)&&void 0!==x?x:0,null!==(D=this._scene[2].filteredDelta)&&void 0!==D?D:0);const L=(0,$.l)(this._tmpDirection);L>0&&(0,$.h)(this._tmpDirection,this._tmpDirection,1/L);const R=this._time.filteredDelta;return new PanPlanarMomentumEstimator_l(i,_,m,null==R?0:L/R,this._tmpDirection)}}let tt=class extends D.A{constructor(i){super(i),this.animationTime=0,this.momentumEstimator=new PanPlanarMomentumEstimator_c(500,6,.92),this.momentum=null,this.tmpMomentum=(0,J.vt)(),this.momentumFinished=!1,this.viewpoint=new x.A({targetGeometry:new F.A,scale:0,rotation:0}),this._previousDrag=null,(0,K.z7)((()=>this.momentumFinished),(()=>this.navigation.stop()))}begin(i,_){this.navigation.begin(),this.momentumEstimator.reset(),this.addToEstimator(_),this._previousDrag=_}update(i,_){this.addToEstimator(_);let m=_.center.x,w=_.center.y;const x=this._previousDrag;m=x?x.center.x-m:-m,w=x?w-x.center.y:w,i.viewpoint=(0,V.aA)(this.viewpoint,i.viewpoint,[m||0,w||0]),this._previousDrag=_}end(i,_){this.addToEstimator(_);const m=i.navigation.momentumEnabled;this.momentum=m?this.momentumEstimator.evaluateMomentum():null,this.animationTime=0,this.momentum&&this.onAnimationUpdate(i),this._previousDrag=null,this.navigation.end()}addToEstimator(i){const _=i.center.x,m=i.center.y,w=(0,P.gs)(-_,m),x=(0,J.fA)(-_,m,0);this.momentumEstimator.add(w,x,.001*i.timestamp)}onAnimationUpdate(i){var _;null===(_=this.navigation.animationManager)||void 0===_||_.animateContinous(i.viewpoint,((_,m)=>{const{momentum:w,animationTime:x,tmpMomentum:D}=this,L=.001*m;if(!(this.momentumFinished=!w||w.isFinished(x))){const m=w.valueDelta(x,L);(0,$.h)(D,w.direction,m),(0,V.aA)(_,_,D),i.constraints.constrainByGeometry(_)}this.animationTime+=L}))}stopMomentumNavigation(){this.momentum&&(this.momentumEstimator.reset(),this.momentum=null,this.navigation.stop())}};(0,w._)([(0,R.MZ)()],tt.prototype,"momentumFinished",void 0),(0,w._)([(0,R.MZ)()],tt.prototype,"viewpoint",void 0),(0,w._)([(0,R.MZ)()],tt.prototype,"navigation",void 0),tt=(0,w._)([(0,O.$)("esri.views.2d.navigation.actions.Pan")],tt);const et=tt;var it=m(37131),st=m(52273),nt=m(48237);class MomentumEstimator_s{constructor(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2.5,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12;this._minimumInitialVelocity=i,this._stopVelocity=_,this._friction=m,this._maxVelocity=w,this.enabled=!0,this.value=new FilteredFiniteDifference_t(.8),this.time=new FilteredFiniteDifference_t(.3)}add(i,_){if(this.enabled&&null!=_){if(this.time.hasLastValue()){if(this.time.computeDelta(_)<.01)return;if(this.value.hasFilteredDelta()){const _=this.value.computeDelta(i);this.value.filteredDelta*_<0&&this.value.reset()}}this.time.update(_),this.value.update(i)}}reset(){this.value.reset(),this.time.reset()}evaluateMomentum(){if(!this.enabled||!this.value.hasFilteredDelta()||!this.time.hasFilteredDelta())return null;let i=this.value.filteredDelta/this.time.filteredDelta;return i=(0,nt.qE)(i,-this._maxVelocity,this._maxVelocity),Math.abs(i)<this._minimumInitialVelocity?null:this.createMomentum(i,this._stopVelocity,this._friction)}createMomentum(i,_,m){return new Momentum_t(i,_,m)}}class RotationMomentumEstimator_a extends MomentumEstimator_s{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:3,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,arguments.length>3&&void 0!==arguments[3]?arguments[3]:12)}add(i,_){const m=this.value.lastValue;if(null!=m){let _=i-m;for(;_>Math.PI;)_-=2*Math.PI;for(;_<-Math.PI;)_+=2*Math.PI;i=m+_}super.add(i,_)}}class r extends Momentum_t{constructor(i,_,m){super(i,_,m)}value(i){const _=super.value(i);return Math.exp(_)}valueDelta(i,_){const m=super.value(i),w=super.value(i+_)-m;return Math.exp(w)}}class s extends MomentumEstimator_s{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:2.5,arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,arguments.length>2&&void 0!==arguments[2]?arguments[2]:.95,arguments.length>3&&void 0!==arguments[3]?arguments[3]:12)}add(i,_){super.add(Math.log(i),_)}createMomentum(i,_,m){return new r(i,_,m)}}let ot=class extends D.A{constructor(i){super(i),this._animationTime=0,this._momentumFinished=!1,this._previousAngle=0,this._previousRadius=0,this._previousCenter=null,this._rotationMomentumEstimator=new RotationMomentumEstimator_a(.6,.15,.95),this._rotationDirection=1,this._startAngle=0,this._startRadius=0,this._updateTimestamp=null,this._zoomDirection=1,this._zoomMomentumEstimator=new s,this._zoomOnly=null,this.zoomMomentum=null,this.rotateMomentum=null,this.viewpoint=new x.A({targetGeometry:new F.A,scale:0,rotation:0}),this.addHandles((0,K.z7)((()=>this._momentumFinished),(()=>this.navigation.stop())))}begin(i,_){this.navigation.begin(),this._rotationMomentumEstimator.reset(),this._zoomMomentumEstimator.reset(),this._zoomOnly=null,this._previousAngle=this._startAngle=_.angle,this._previousRadius=this._startRadius=_.radius,this._previousCenter=_.center,this._updateTimestamp=null,i.constraints.rotationEnabled&&this.addToRotateEstimator(0,_.timestamp),this.addToZoomEstimator(_,1)}update(i,_){null===this._updateTimestamp&&(this._updateTimestamp=_.timestamp);const m=_.angle,w=_.radius,x=_.center,D=Math.abs(180*(m-this._startAngle)/Math.PI),L=Math.abs(w-this._startRadius),R=this._startRadius/w;if(this._previousRadius&&this._previousCenter){const O=w/this._previousRadius;let F=180*(m-this._previousAngle)/Math.PI;this._rotationDirection=F>=0?1:-1,this._zoomDirection=O>=1?1:-1,i.constraints.rotationEnabled?(null===this._zoomOnly&&_.timestamp-this._updateTimestamp>200&&(this._zoomOnly=L-D>0),null===this._zoomOnly||this._zoomOnly?F=0:this.addToRotateEstimator(m-this._startAngle,_.timestamp)):F=0,this.addToZoomEstimator(_,R),this.navigation.setViewpoint([x.x,x.y],1/O,F,[this._previousCenter.x-x.x,x.y-this._previousCenter.y])}this._previousAngle=m,this._previousRadius=w,this._previousCenter=x}end(i){this.rotateMomentum=this._rotationMomentumEstimator.evaluateMomentum(),this.zoomMomentum=this._zoomMomentumEstimator.evaluateMomentum(),this._animationTime=0,(this.rotateMomentum||this.zoomMomentum)&&this.onAnimationUpdate(i),this.navigation.end()}addToRotateEstimator(i,_){this._rotationMomentumEstimator.add(i,.001*_)}addToZoomEstimator(i,_){this._zoomMomentumEstimator.add(_,.001*i.timestamp)}canZoomIn(i){const _=i.scale,m=i.constraints.effectiveMaxScale;return 0===m||_>m}canZoomOut(i){const _=i.scale,m=i.constraints.effectiveMinScale;return 0===m||_<m}onAnimationUpdate(i){var _;null===(_=this.navigation.animationManager)||void 0===_||_.animateContinous(i.viewpoint,((_,m)=>{const w=!this.canZoomIn(i)&&this._zoomDirection>1||!this.canZoomOut(i)&&this._zoomDirection<1,x=!this.rotateMomentum||this.rotateMomentum.isFinished(this._animationTime),D=w||!this.zoomMomentum||this.zoomMomentum.isFinished(this._animationTime),L=.001*m;if(this._momentumFinished=x&&D,!this._momentumFinished){const m=this.rotateMomentum?Math.abs(this.rotateMomentum.valueDelta(this._animationTime,L))*this._rotationDirection*180/Math.PI:0;let w=this.zoomMomentum?Math.abs(this.zoomMomentum.valueDelta(this._animationTime,L)):1;const x=(0,st.vt)(),D=(0,st.vt)();if(this._previousCenter){(0,it.hZ)(x,this._previousCenter.x,this._previousCenter.y),(0,V.b8)(D,i.size,i.padding),(0,it.WQ)(x,x,D);const{constraints:L,scale:R}=i,O=R*w;w<1&&!L.canZoomInTo(O)?(w=R/L.effectiveMaxScale,this.zoomMomentum=null,this.rotateMomentum=null):w>1&&!L.canZoomOutTo(O)&&(w=R/L.effectiveMinScale,this.zoomMomentum=null,this.rotateMomentum=null),(0,V.WK)(_,i.viewpoint,w,m,x,i.size),i.constraints.constrainByGeometry(_)}}this._animationTime+=L}))}stopMomentumNavigation(){(this.rotateMomentum||this.zoomMomentum)&&(this.rotateMomentum&&(this._rotationMomentumEstimator.reset(),this.rotateMomentum=null),this.zoomMomentum&&(this._zoomMomentumEstimator.reset(),this.zoomMomentum=null),this.navigation.stop())}};(0,w._)([(0,R.MZ)()],ot.prototype,"_momentumFinished",void 0),(0,w._)([(0,R.MZ)()],ot.prototype,"viewpoint",void 0),(0,w._)([(0,R.MZ)()],ot.prototype,"navigation",void 0),ot=(0,w._)([(0,O.$)("esri.views.2d.navigation.actions.Pinch")],ot);const at=ot,rt=(0,st.vt)(),ht=(0,st.vt)();let lt=class extends D.A{constructor(i){super(i),this._previousCenter=(0,st.vt)(),this.viewpoint=new x.A({targetGeometry:new F.A,scale:0,rotation:0})}begin(i,_){this.navigation.begin(),(0,it.hZ)(this._previousCenter,_.center.x,_.center.y)}update(i,_){const{state:{size:m,padding:w}}=i;(0,it.hZ)(rt,_.center.x,_.center.y),(0,V.iB)(ht,m,w),i.viewpoint=(0,V.tj)(this.viewpoint,i.state.paddedViewState.viewpoint,(0,V.s5)(ht,this._previousCenter,rt)),(0,it.C)(this._previousCenter,rt)}end(){this.navigation.end()}};(0,w._)([(0,R.MZ)()],lt.prototype,"viewpoint",void 0),(0,w._)([(0,R.MZ)()],lt.prototype,"navigation",void 0),lt=(0,w._)([(0,O.$)("esri.views.2d.actions.Rotate")],lt);const ut=lt,ct=10,dt=new x.A({targetGeometry:new F.A}),_t=[0,0];let mt=class extends D.A{constructor(i){super(i),this._endTimer=null,this._lastEventTimestamp=null,this.animationManager=null,this.interacting=!1}initialize(){this.pan=new et({navigation:this}),this.rotate=new ut({navigation:this}),this.pinch=new at({navigation:this}),this.zoomBox=new H({view:this.view,navigation:this})}destroy(){this.pan=(0,L.pR)(this.pan),this.rotate=(0,L.pR)(this.rotate),this.pinch=(0,L.pR)(this.pinch),this.zoomBox=(0,L.pR)(this.zoomBox),this.animationManager=null}begin(){this.stop(),this._set("interacting",!0)}end(){this._lastEventTimestamp=performance.now(),this._startTimer(250)}async zoom(i){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getDefaultAnchor();if(this.begin(),this.view.constraints.snapToZoom&&this.view.constraints.effectiveLODs)return i<1?this.zoomIn(_):this.zoomOut(_);this.setViewpoint(_,i,0,[0,0])}async zoomIn(i){const _=this.view,m=_.constraints.snapToNextScale(_.scale);return this._zoomToScale(m,i)}async zoomOut(i){const _=this.view,m=_.constraints.snapToPreviousScale(_.scale);return this._zoomToScale(m,i)}setViewpoint(i,_,m,w){this.begin(),this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,i,_,m,w),this.end()}setViewpointImmediate(i){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._getDefaultAnchor();this.view.stateManager.state.viewpoint=this._scaleRotateTranslateViewpoint(this.view.viewpoint,w,i,_,m)}continousRotateClockwise(){var i;const _=this.view.viewpoint;null===(i=this.animationManager)||void 0===i||i.animateContinous(_,(i=>{(0,V.tj)(i,i,-1)}))}continousRotateCounterclockwise(){var i;const _=this.view.viewpoint;null===(i=this.animationManager)||void 0===i||i.animateContinous(_,(i=>{(0,V.tj)(i,i,1)}))}resetRotation(){this.view.constraints.rotationEnabled&&(this.view.rotation=0)}continousPanLeft(){this._continuousPan([-10,0])}continousPanRight(){this._continuousPan([ct,0])}continousPanUp(){this._continuousPan([0,ct])}continousPanDown(){this._continuousPan([0,-10])}continuousPanVector(i){let{x:_,y:m}=i;this._continuousPan([_*ct,m*ct])}stop(){var i;this.pan.stopMomentumNavigation(),null!==(i=this.animationManager)&&void 0!==i&&i.stop(),this.end(),null!==this._endTimer&&(clearTimeout(this._endTimer),this._endTimer=null,this._set("interacting",!1))}_continuousPan(i){var _;const m=this.view.viewpoint;null===(_=this.animationManager)||void 0===_||_.animateContinous(m,(_=>{(0,V.aA)(_,_,i),this.view.constraints.constrainByGeometry(_)}))}_startTimer(i){return null!==this._endTimer||(this._endTimer=setTimeout((()=>{var i;this._endTimer=null;const _=performance.now()-(null!==(i=this._lastEventTimestamp)&&void 0!==i?i:0);_<250?this._endTimer=this._startTimer(_):this._set("interacting",!1)}),i)),this._endTimer}_getDefaultAnchor(){const{size:i,padding:{left:_,right:m,top:w,bottom:x}}=this.view;return _t[0]=.5*(i[0]-m+_),_t[1]=.5*(i[1]-x+w),_t}async _zoomToScale(i){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getDefaultAnchor();const{view:m}=this,{constraints:w,scale:x,viewpoint:D,size:L,padding:R}=m,O=w.canZoomInTo(i),F=w.canZoomOutTo(i);if(!(i<x&&!O||i>x&&!F))return(0,V.qV)(dt,D,i/x,0,_,L,R),w.constrainByGeometry(dt),m.goTo(dt,{animate:!0,pickClosestTarget:!1})}_scaleRotateTranslateViewpoint(i,_,m,w,x){const{view:D}=this,{size:L,padding:R,constraints:O,scale:F,viewpoint:P}=D,U=F*m,Z=O.canZoomInTo(U),q=O.canZoomOutTo(U);return(m<1&&!Z||m>1&&!q)&&(m=1),(0,V.aA)(P,P,x),(0,V.qV)(i,P,m,w,_,L,R),O.constrainByGeometry(i)}};(0,w._)([(0,R.MZ)()],mt.prototype,"animationManager",void 0),(0,w._)([(0,R.MZ)({type:Boolean,readOnly:!0})],mt.prototype,"interacting",void 0),(0,w._)([(0,R.MZ)()],mt.prototype,"pan",void 0),(0,w._)([(0,R.MZ)()],mt.prototype,"pinch",void 0),(0,w._)([(0,R.MZ)()],mt.prototype,"rotate",void 0),(0,w._)([(0,R.MZ)()],mt.prototype,"view",void 0),(0,w._)([(0,R.MZ)()],mt.prototype,"zoomBox",void 0),mt=(0,w._)([(0,O.$)("esri.views.2d.navigation.MapViewNavigation")],mt);const pt=mt},96767:(i,_,m)=>{m.d(_,{H:()=>o,Y:()=>w});const w=class t{};function o(i){let _="";for(let m=0;m<(arguments.length<=1?0:arguments.length-1);m++)_+=i[m]+(m+1<1||arguments.length<=m+1?void 0:arguments[m+1]);return _+=i[i.length-1],_}!function(i){i.int=function n(i){return Math.round(i).toString()},i.float=function o(i){return i.toPrecision(8)}}(o||(o={}))},55082:(i,_,m)=>{m.d(_,{AJ:()=>O,K_:()=>l,SE:()=>V,V0:()=>L,XO:()=>E,aB:()=>a,ez:()=>A,xt:()=>F});var w=m(62301),x=m(60985),D=m(43474);const L=(0,D.p3)(x.dn.SRC_ALPHA,x.dn.ONE,x.dn.ONE_MINUS_SRC_ALPHA,x.dn.ONE_MINUS_SRC_ALPHA),R=(0,D.ox)(x.dn.ONE,x.dn.ONE),O=(0,D.ox)(x.dn.ZERO,x.dn.ONE_MINUS_SRC_ALPHA);function A(i){return i===w.y.FrontFace?null:i===w.y.Alpha?O:R}function E(i){return i===w.y.FrontFace?D.kn:null}const F=5e5,V={factor:-1,units:-2};function a(i){return i?V:null}function l(i){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.MT.LESS;return i===w.y.NONE||i===w.y.FrontFace?_:x.MT.LEQUAL}},62301:(i,_,m)=>{var w;m.d(_,{y:()=>w}),function(i){i[i.Color=0]="Color",i[i.Alpha=1]="Alpha",i[i.FrontFace=2]="FrontFace",i[i.NONE=3]="NONE",i[i.COUNT=4]="COUNT"}(w||(w={}))},42954:(i,_,m)=>{var w,x,D,L,R,O,F,V,P;m.d(_,{Am:()=>L,ID:()=>V,JS:()=>P,Mg:()=>O,dd:()=>R,it:()=>x,s2:()=>w,sf:()=>F}),function(i){i[i.None=0]="None",i[i.Front=1]="Front",i[i.Back=2]="Back",i[i.COUNT=3]="COUNT"}(w||(w={})),function(i){i[i.Less=0]="Less",i[i.Lequal=1]="Lequal",i[i.COUNT=2]="COUNT"}(x||(x={})),function(i){i[i.BACKGROUND=0]="BACKGROUND",i[i.UPDATE=1]="UPDATE"}(D||(D={})),function(i){i[i.NOT_LOADED=0]="NOT_LOADED",i[i.LOADING=1]="LOADING",i[i.LOADED=2]="LOADED"}(L||(L={})),function(i){i[i.IntegratedMeshMaskExcluded=1]="IntegratedMeshMaskExcluded",i[i.OutlineVisualElementMask=2]="OutlineVisualElementMask"}(R||(R={})),function(i){i[i.Highlight=0]="Highlight",i[i.MaskOccludee=1]="MaskOccludee",i[i.COUNT=2]="COUNT"}(O||(O={})),function(i){i[i.Blend=0]="Blend",i[i.Opaque=1]="Opaque",i[i.Mask=2]="Mask",i[i.MaskBlend=3]="MaskBlend",i[i.COUNT=4]="COUNT"}(F||(F={})),function(i){i[i.OFF=0]="OFF",i[i.ON=1]="ON"}(V||(V={})),function(i){i.DDS_ENCODING="image/vnd-ms.dds",i.KTX2_ENCODING="image/ktx2",i.BASIS_ENCODING="image/x.basis"}(P||(P={}))},17288:(i,_,m)=>{m.d(_,{_:()=>t});var w=m(35598);class t{constructor(){this._result=!1}dispose(){this._program=(0,w.WD)(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}},61995:(i,_,m)=>{m.d(_,{_R:()=>t});class e{constructor(i,_,m,w,x,D,L,R,O){this.createQuery=i,this.deleteQuery=_,this.resultAvailable=m,this.getResult=w,this.disjoint=x,this.beginTimeElapsed=D,this.endTimeElapsed=L,this.createTimestamp=R,this.timestampBits=O}}let w=!1;function t(i,_){if(_.disjointTimerQuery)return null;let m=i.getExtension("EXT_disjoint_timer_query_webgl2");return m?new e((()=>i.createQuery()),(_=>{i.deleteQuery(_),w=!1}),(_=>i.getQueryParameter(_,i.QUERY_RESULT_AVAILABLE)),(_=>i.getQueryParameter(_,i.QUERY_RESULT)),(()=>i.getParameter(m.GPU_DISJOINT_EXT)),(_=>{w||(w=!0,i.beginQuery(m.TIME_ELAPSED_EXT,_))}),(()=>{i.endQuery(m.TIME_ELAPSED_EXT),w=!1}),(i=>m.queryCounterEXT(i,m.TIMESTAMP_EXT)),(()=>i.getQuery(m.TIMESTAMP_EXT,m.QUERY_COUNTER_BITS_EXT))):(m=i.getExtension("EXT_disjoint_timer_query"),m?new e((()=>m.createQueryEXT()),(i=>{m.deleteQueryEXT(i),w=!1}),(i=>m.getQueryObjectEXT(i,m.QUERY_RESULT_AVAILABLE_EXT)),(i=>m.getQueryObjectEXT(i,m.QUERY_RESULT_EXT)),(()=>i.getParameter(m.GPU_DISJOINT_EXT)),(i=>{w||(w=!0,m.beginQueryEXT(m.TIME_ELAPSED_EXT,i))}),(()=>{m.endQueryEXT(m.TIME_ELAPSED_EXT),w=!1}),(i=>m.queryCounterEXT(i,m.TIMESTAMP_EXT)),(()=>m.getQueryEXT(m.TIMESTAMP_EXT,m.QUERY_COUNTER_BITS_EXT))):null)}},43474:(i,_,m)=>{m.d(_,{Ey:()=>S,Ms:()=>G,Xt:()=>h,hG:()=>L,kn:()=>R,ox:()=>s,p3:()=>l,wE:()=>O});var w=m(42954),x=m(60985);function s(i,_){let m=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.Tb.ADD,w=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[0,0,0,0];return{srcRgb:i,srcAlpha:i,dstRgb:_,dstAlpha:_,opRgb:m,opAlpha:m,color:{r:w[0],g:w[1],b:w[2],a:w[3]}}}function l(i,_,m,w){let D=arguments.length>4&&void 0!==arguments[4]?arguments[4]:x.Tb.ADD,L=arguments.length>5&&void 0!==arguments[5]?arguments[5]:x.Tb.ADD,R=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[0,0,0,0];return{srcRgb:i,srcAlpha:_,dstRgb:m,dstAlpha:w,opRgb:D,opAlpha:L,color:{r:R[0],g:R[1],b:R[2],a:R[3]}}}const D={face:x.Y7.BACK,mode:x.Ac.CCW},L={face:x.Y7.FRONT,mode:x.Ac.CCW},h=i=>i===w.s2.Back?D:i===w.s2.Front?L:null,R={zNear:0,zFar:1},O={r:!0,g:!0,b:!0,a:!0};function c(i){return F.intern(i)}function d(i){return V.intern(i)}function u(i){return P.intern(i)}function f(i){return U.intern(i)}function p(i){return Z.intern(i)}function g(i){return q.intern(i)}function v(i){return Q.intern(i)}function I(i){return X.intern(i)}function W(i){return Y.intern(i)}function S(i){return H.intern(i)}class b{constructor(i,_){this._makeKey=i,this._makeRef=_,this._interns=new Map}intern(i){var _;if(!i)return null;const m=this._makeKey(i),w=this._interns;return w.has(m)||w.set(m,this._makeRef(i)),null!==(_=w.get(m))&&void 0!==_?_:null}}function T(i){return"["+i.join(",")+"]"}const F=new b(B,(i=>({__tag:"Blending",...i})));function B(i){return i?T([i.srcRgb,i.srcAlpha,i.dstRgb,i.dstAlpha,i.opRgb,i.opAlpha,i.color.r,i.color.g,i.color.b,i.color.a]):null}const V=new b(y,(i=>({__tag:"Culling",...i})));function y(i){return i?T([i.face,i.mode]):null}const P=new b(C,(i=>({__tag:"PolygonOffset",...i})));function C(i){return i?T([i.factor,i.units]):null}const U=new b(A,(i=>({__tag:"DepthTest",...i})));function A(i){return i?T([i.func]):null}const Z=new b(k,(i=>({__tag:"StencilTest",...i})));function k(i){return i?T([i.function.func,i.function.ref,i.function.mask,i.operation.fail,i.operation.zFail,i.operation.zPass]):null}const q=new b(z,(i=>({__tag:"DepthWrite",...i})));function z(i){return i?T([i.zNear,i.zFar]):null}const Q=new b(j,(i=>({__tag:"ColorWrite",...i})));function j(i){return i?T([i.r,i.g,i.b,i.a]):null}const X=new b(N,(i=>({__tag:"StencilWrite",...i})));function N(i){return i?T([i.mask]):null}const Y=new b(M,(i=>({__tag:"DrawBuffers",...i})));function M(i){return i?T(i.buffers):null}const H=new b((function E(i){return i?T([B(i.blending),y(i.culling),C(i.polygonOffset),A(i.depthTest),k(i.stencilTest),z(i.depthWrite),j(i.colorWrite),N(i.stencilWrite),M(i.drawBuffers)]):null}),(i=>({blending:c(i.blending),culling:d(i.culling),polygonOffset:u(i.polygonOffset),depthTest:f(i.depthTest),stencilTest:p(i.stencilTest),depthWrite:g(i.depthWrite),colorWrite:v(i.colorWrite),stencilWrite:I(i.stencilWrite),drawBuffers:W(i.drawBuffers)})));class G{constructor(i){this._pipelineInvalid=!0,this._blendingInvalid=!0,this._cullingInvalid=!0,this._polygonOffsetInvalid=!0,this._depthTestInvalid=!0,this._stencilTestInvalid=!0,this._depthWriteInvalid=!0,this._colorWriteInvalid=!0,this._stencilWriteInvalid=!0,this._drawBuffersInvalid=!0,this._stateSetters=i}setPipeline(i){(this._pipelineInvalid||i!==this._pipeline)&&(this._setBlending(i.blending),this._setCulling(i.culling),this._setPolygonOffset(i.polygonOffset),this._setDepthTest(i.depthTest),this._setStencilTest(i.stencilTest),this._setDepthWrite(i.depthWrite),this._setColorWrite(i.colorWrite),this._setStencilWrite(i.stencilWrite),this._setDrawBuffers(i.drawBuffers),this._pipeline=i),this._pipelineInvalid=!1}invalidateBlending(){this._blendingInvalid=!0,this._pipelineInvalid=!0}invalidateCulling(){this._cullingInvalid=!0,this._pipelineInvalid=!0}invalidatePolygonOffset(){this._polygonOffsetInvalid=!0,this._pipelineInvalid=!0}invalidateDepthTest(){this._depthTestInvalid=!0,this._pipelineInvalid=!0}invalidateStencilTest(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDepthWrite(){this._depthWriteInvalid=!0,this._pipelineInvalid=!0}invalidateColorWrite(){this._colorWriteInvalid=!0,this._pipelineInvalid=!0}invalidateStencilWrite(){this._stencilTestInvalid=!0,this._pipelineInvalid=!0}invalidateDrawBuffers(){this._drawBuffersInvalid=!0,this._pipelineInvalid=!0}_setBlending(i){this._blending=this._setSubState(i,this._blending,this._blendingInvalid,this._stateSetters.setBlending),this._blendingInvalid=!1}_setCulling(i){this._culling=this._setSubState(i,this._culling,this._cullingInvalid,this._stateSetters.setCulling),this._cullingInvalid=!1}_setPolygonOffset(i){this._polygonOffset=this._setSubState(i,this._polygonOffset,this._polygonOffsetInvalid,this._stateSetters.setPolygonOffset),this._polygonOffsetInvalid=!1}_setDepthTest(i){this._depthTest=this._setSubState(i,this._depthTest,this._depthTestInvalid,this._stateSetters.setDepthTest),this._depthTestInvalid=!1}_setStencilTest(i){this._stencilTest=this._setSubState(i,this._stencilTest,this._stencilTestInvalid,this._stateSetters.setStencilTest),this._stencilTestInvalid=!1}_setDepthWrite(i){this._depthWrite=this._setSubState(i,this._depthWrite,this._depthWriteInvalid,this._stateSetters.setDepthWrite),this._depthWriteInvalid=!1}_setColorWrite(i){this._colorWrite=this._setSubState(i,this._colorWrite,this._colorWriteInvalid,this._stateSetters.setColorWrite),this._colorWriteInvalid=!1}_setStencilWrite(i){this._stencilWrite=this._setSubState(i,this._stencilWrite,this._stencilWriteInvalid,this._stateSetters.setStencilWrite),this._stencilTestInvalid=!1}_setDrawBuffers(i){this._drawBuffers=this._setSubState(i,this._drawBuffers,this._drawBuffersInvalid,this._stateSetters.setDrawBuffers),this._drawBuffersInvalid=!1}_setSubState(i,_,m,w){return(m||i!==_)&&(w(i),this._pipelineInvalid=!0),i}}},46081:(i,_,m)=>{m.d(_,{H:()=>f});var w=m(40449),x=m(25078),D=m(60985),L=m(50707),R=m(83663),O=m(83881),F=m(77127),V=m(17288);class f extends V._{constructor(i){super(),this._rctx=i;this._program=i.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(i){const _=this._rctx;if(!_.gl)return i.dispose(),!0;const m=new O.R(1);m.wrapMode=D.pF.CLAMP_TO_EDGE,m.samplingMode=D.Cj.NEAREST;const V=new L.H(_,m),U=x.g.createVertex(_,D._U.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),Z=new F.Z(_,new Map([["a_pos",0]]),w.VS,{geometry:U}),q=new O.R;q.samplingMode=D.Cj.LINEAR,q.wrapMode=D.pF.CLAMP_TO_EDGE;const Q=new R.g(_,q,P);_.useProgram(i),_.bindTexture(Q,0),i.setUniform1i("u_texture",0);const X=_.getBoundFramebufferObject(),{x:Y,y:H,width:K,height:$}=_.getViewport();_.bindFramebuffer(V),_.setViewport(0,0,1,1),_.setClearColor(0,0,0,0),_.setBlendingEnabled(!1),_.clearSafe(D.hn.COLOR_BUFFER_BIT),_.bindVAO(Z),_.drawArrays(D.WR.TRIANGLE_STRIP,0,4);const J=new Uint8Array(4);return V.readPixels(0,0,1,1,D.Ab.RGBA,D.ld.UNSIGNED_BYTE,J),Z.dispose(),V.dispose(),Q.dispose(),_.setViewport(Y,H,K,$),_.bindFramebuffer(X),255!==J[0]}}const P=new Image;P.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",P.width=5,P.height=5,P.decode()}}]);
//# sourceMappingURL=6749.b8d523e8.chunk.js.map