"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[5534],{45534:(e,t,n)=>{n.r(t),n.d(t,{default:()=>P});var a=n(80671),p=n(53705),f=n(4180),c=n(89412),d=n(48237),h=n(13132),m=n(81618),v=n(57453),g=(n(50886),n(76761),n(68682)),_=n(54880),A=n(83800),M=n(78535),b=n(84661),w=n(98664),E=n(33876),S=n(78658),z=n(98878),K=n(47478),L=n(21642),R=n(1921),D=n(32465),N=n(38362),T=n(32277),j=n(89722);let k=class extends((0,K.b)((0,R.q)((0,D.A)((0,N.j)((0,h.P)((0,L.d)((0,z.p)(S.A)))))))){constructor(e){super(e),this.operationalLayerType="IntegratedMesh3DTilesLayer",this.spatialReference=new w.A({wkid:4326,vcsWkid:115700}),this.fullExtent=new b.A(-180,-90,180,90,this.spatialReference),this.url=null,this.type="integrated-mesh-3dtiles",this.path=null,this.minScale=0,this.maxScale=0}set elevationInfo(e){this._set("elevationInfo",e),this._validateElevationInfo()}_verifyArray(e,t){if(!Array.isArray(e)||e.length<t)return!1;for(const n of e)if("number"!=typeof n)return!1;return!0}_initFullExtent(e){var t,n;const a=null===(t=e.root)||void 0===t?void 0:t.boundingVolume;if(!a)return;if(a.box){const e=null===a||void 0===a?void 0:a.box;if(e[3]>7972671&&e[7]>7972671&&e[11]>7945940)return}const p=null===(n=e.root)||void 0===n?void 0:n.transform,f=(0,A.vt)();if(a.region&&this._verifyArray(a.region,6)){const e=a.region,t=(0,d.KJ)(e[0]),n=(0,d.KJ)(e[1]),p=e[4],f=(0,d.KJ)(e[2]),c=(0,d.KJ)(e[3]),h=e[5];this.fullExtent=new b.A({xmin:t,ymin:n,zmin:p,xmax:f,ymax:c,zmax:h,spatialReference:this.spatialReference})}else if(a.sphere&&this._verifyArray(a.sphere,4)){const e=a.sphere,t=(0,A.fA)(e[0],e[1],e[2]),n=e[3]/Math.sqrt(3),c=(0,A.vt)();(0,_.f)(c,t,(0,A.fA)(-n,-n,-n));const d=(0,A.vt)();if((0,_.g)(d,t,(0,A.fA)(n,n,n)),p&&this._verifyArray(p,16)){const e=p;(0,_.e)(f,c,e),(0,_.c)(c,f),(0,_.e)(f,d,e),(0,_.c)(d,f)}(0,E.projectBuffer)(c,M.Ro,0,c,w.A.WGS84,0,1),(0,E.projectBuffer)(d,M.Ro,0,d,w.A.WGS84,0,1);const h=(0,A.vt)(),m=(0,A.vt)();(0,_.y)(h,c,d),(0,_.C)(m,c,d),this.fullExtent=new b.A({xmin:h[0],ymin:h[1],zmin:h[2],xmax:m[0],ymax:m[1],zmax:m[2],spatialReference:this.spatialReference})}else if(a.box&&this._verifyArray(a.box,12)){const e=a.box,t=(0,A.fA)(e[0],e[1],e[2]),n=(0,A.fA)(e[3],e[4],e[5]),f=(0,A.fA)(e[6],e[7],e[8]),c=(0,A.fA)(e[9],e[10],e[11]),d=[];for(let a=0;a<8;++a)d.push((0,A.vt)());if((0,_.g)(d[0],t,n),(0,_.g)(d[0],d[0],f),(0,_.g)(d[0],d[0],c),(0,_.z)(d[1],t,n),(0,_.g)(d[1],d[1],f),(0,_.g)(d[1],d[1],c),(0,_.g)(d[2],t,n),(0,_.z)(d[2],d[2],f),(0,_.g)(d[2],d[2],c),(0,_.z)(d[3],t,n),(0,_.z)(d[3],d[3],f),(0,_.g)(d[3],d[3],c),(0,_.g)(d[4],t,n),(0,_.g)(d[4],d[4],f),(0,_.z)(d[4],d[4],c),(0,_.z)(d[5],t,n),(0,_.g)(d[5],d[5],f),(0,_.z)(d[5],d[5],c),(0,_.g)(d[6],t,n),(0,_.z)(d[6],d[6],f),(0,_.z)(d[6],d[6],c),(0,_.z)(d[7],t,n),(0,_.z)(d[7],d[7],f),(0,_.z)(d[7],d[7],c),p&&this._verifyArray(p,16)){const e=p;for(let t=0;t<8;++t)(0,_.e)(d[t],d[t],e)}const h=(0,A.fA)(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE),m=(0,A.fA)(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);for(let a=0;a<8;++a)(0,E.projectBuffer)(d[a],M.Ro,0,d[a],w.A.WGS84,0,1),(0,_.y)(m,m,d[a]),(0,_.C)(h,h,d[a]);this.fullExtent=new b.A({xmin:m[0],ymin:m[1],zmin:m[2],xmax:h[0],ymax:h[1],zmax:h[2],spatialReference:this.spatialReference})}}async load(e){return this.addResolvingPromise(this._doLoad(e)),this}async _doLoad(e){const t=null!=e?e.signal:null;try{await this.loadFromPortal({supportedTypes:["3DTiles Service"],validateItem:e=>{var t;if(null!==(t=e.typeKeywords)&&void 0!==t&&t.includes("IntegratedMesh"))return!0;throw new f.A("portal:invalid-layer-item-type","Invalid layer item, expected '${expectedType}' ",{expectedType:"3DTiles Service containing IntegratedMesh"})}},e)}catch(n){(0,m.QP)(n)}if(this.url){const e=(0,p.A)(this.url,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:t}).then((e=>{this._initFullExtent(e.data)}),(e=>{(0,m.QP)(e)}));await e}}async fetchAttributionData(){return this.load().then((()=>({})))}_validateElevationInfo(){const e=this.elevationInfo,t="Integrated mesh 3d tiles layers";(0,j.XF)(c.A.getLogger(this),(0,j.B)(t,"absolute-height",e)),(0,j.XF)(c.A.getLogger(this),(0,j.tW)(t,e))}};(0,a._)([(0,v.MZ)({type:["IntegratedMesh3DTilesLayer"]})],k.prototype,"operationalLayerType",void 0),(0,a._)([(0,v.MZ)({type:w.A})],k.prototype,"spatialReference",void 0),(0,a._)([(0,v.MZ)({type:b.A})],k.prototype,"fullExtent",void 0),(0,a._)([(0,v.MZ)(T.Yj)],k.prototype,"elevationInfo",null),(0,a._)([(0,v.MZ)({type:["show","hide"]})],k.prototype,"listMode",void 0),(0,a._)([(0,v.MZ)(T.OZ)],k.prototype,"url",void 0),(0,a._)([(0,v.MZ)({readOnly:!0})],k.prototype,"type",void 0),(0,a._)([(0,v.MZ)({type:String,json:{origins:{"web-scene":{read:!0,write:!0},"portal-item":{read:!0,write:!0}},read:!1}})],k.prototype,"path",void 0),(0,a._)([(0,v.MZ)({type:Number,json:{origins:{"web-scene":{name:"layerDefinition.minScale",write:()=>{},read:()=>{}},"portal-item":{name:"layerDefinition.minScale",write:()=>{},read:()=>{}}}}})],k.prototype,"minScale",void 0),(0,a._)([(0,v.MZ)({type:Number,json:{origins:{"web-scene":{name:"layerDefinition.maxScale",write:()=>{},read:()=>{}},"portal-item":{name:"layerDefinition.maxScale",write:()=>{},read:()=>{}}}}})],k.prototype,"maxScale",void 0),k=(0,a._)([(0,g.$)("esri.layers.IntegratedMesh3DTilesLayer")],k);const P=k},98878:(e,t,n)=>{n.d(t,{p:()=>i});var a=n(80671),p=n(57453),f=(n(50886),n(89412),n(76761),n(68682));const i=e=>{let t=class extends e{get apiKey(){var e;return this._isOverridden("apiKey")?this._get("apiKey"):function s(e){return"portalItem"in e}(this)?null===(e=this.portalItem)||void 0===e?void 0:e.apiKey:null}set apiKey(e){null!=e?this._override("apiKey",e):(this._clearOverride("apiKey"),this.clear("apiKey","user"))}};return(0,a._)([(0,p.MZ)({type:String})],t.prototype,"apiKey",null),t=(0,a._)([(0,f.$)("esri.layers.mixins.APIKeyMixin")],t),t}},47478:(e,t,n)=>{n.d(t,{b:()=>l});var a=n(80671),p=n(89412),f=n(57453),c=(n(50886),n(76761),n(68682)),d=n(26128);const l=e=>{let t=class extends e{get title(){if(this._get("title")&&"defaults"!==this.originOf("title"))return this._get("title");if(this.url){const e=(0,d.qg)(this.url);if(null!=e&&e.title)return e.title}return this._get("title")||""}set title(e){this._set("title",e)}set url(e){this._set("url",(0,d.Jf)(e,p.A.getLogger(this)))}};return(0,a._)([(0,f.MZ)()],t.prototype,"title",null),(0,a._)([(0,f.MZ)({type:String})],t.prototype,"url",null),t=(0,a._)([(0,c.$)("esri.layers.mixins.ArcGISService")],t),t}},89722:(e,t,n)=>{n.d(t,{$7:()=>y,B:()=>x,XF:()=>I,tW:()=>Z,w7:()=>i,ze:()=>l});n(49049),n(2001);function o(e){return e?a:p}function i(e,t){return function r(e,t){return null!==t&&void 0!==t&&t.mode?t.mode:o(e).mode}(null!=e&&e.hasZ,t)}function l(e,t){return function u(e,t){return null!=t?t:o(e)}(null!=e&&!!e.hasZ,t)}function x(e,t,n){return n&&n.mode!==t?"".concat(e," only support ").concat(t," elevation mode"):null}function y(e,t,n){return(null===n||void 0===n?void 0:n.mode)===t?"".concat(e," do not support ").concat(t," elevation mode"):null}function Z(e,t){return null!=(null===t||void 0===t?void 0:t.featureExpressionInfo)&&"0"!==t.featureExpressionInfo.expression?"".concat(e," do not support featureExpressionInfo"):null}function I(e,t){t&&e.warn(".elevationInfo=",t)}const a={mode:"absolute-height",offset:0},p={mode:"on-the-ground",offset:null}}}]);
//# sourceMappingURL=5534.eba24f30.chunk.js.map