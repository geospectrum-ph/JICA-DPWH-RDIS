"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[6542,2381],{98504:(w,_,J)=>{J.d(_,{a:()=>r,b:()=>n,c:()=>f,d:()=>e,e:()=>a,f:()=>o,n:()=>s,s:()=>u,t:()=>i});J(50886);var C=J(52618);function e(w,_,J){r(w.typedBuffer,_.typedBuffer,J,w.typedBufferStride,_.typedBufferStride)}function r(w,_,J){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C;if(w.length/C!==Math.ceil(_.length/P))return w;const Q=w.length/C,Z=J[0],H=J[1],K=J[2],X=J[4],Y=J[5],ee=J[6],te=J[8],ae=J[9],re=J[10],ne=J[12],se=J[13],ie=J[14];let oe=0,le=0;for(let ue=0;ue<Q;ue++){const J=_[oe],Q=_[oe+1],ue=_[oe+2];w[le]=Z*J+X*Q+te*ue+ne,w[le+1]=H*J+Y*Q+ae*ue+se,w[le+2]=K*J+ee*Q+re*ue+ie,oe+=P,le+=C}return w}function f(w,_,J){n(w.typedBuffer,_.typedBuffer,J,w.typedBufferStride,_.typedBufferStride)}function n(w,_,J){let P=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,Q=arguments.length>4&&void 0!==arguments[4]?arguments[4]:P;if(w.length/P!==Math.ceil(_.length/Q))return void(0,C.j)().error("source and destination buffers need to have the same number of elements");const Z=w.length/P,H=J[0],K=J[1],X=J[2],Y=J[3],ee=J[4],te=J[5],ae=J[6],re=J[7],ne=J[8];let se=0,ie=0;for(let C=0;C<Z;C++){const J=_[se],C=_[se+1],Z=_[se+2];w[ie]=H*J+Y*C+ae*Z,w[ie+1]=K*J+ee*C+re*Z,w[ie+2]=X*J+te*C+ne*Z,se+=Q,ie+=P}}function o(w,_,J){u(w.typedBuffer,_,J,w.typedBufferStride)}function u(w,_,J){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3;const P=Math.min(w.length/C,_.count),Q=_.typedBuffer,Z=_.typedBufferStride;let H=0,K=0;for(let X=0;X<P;X++)w[K]=J*Q[H],w[K+1]=J*Q[H+1],w[K+2]=J*Q[H+2],H+=Z,K+=C}function i(w,_,J){let C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:3,P=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C;const Q=w.length/C;if(Q!==Math.ceil(_.length/P))return w;let Z=0,H=0;for(let K=0;K<Q;K++)w[H]=_[Z]+J[0],w[H+1]=_[Z+1]+J[1],w[H+2]=_[Z+2]+J[2],Z+=P,H+=C;return w}function a(w,_){s(w.typedBuffer,_.typedBuffer,w.typedBufferStride,_.typedBufferStride)}function s(w,_){let J=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:J;const P=Math.min(w.length/J,_.length/C);let Q=0,Z=0;for(let H=0;H<P;H++){const P=_[Q],H=_[Q+1],K=_[Q+2],X=P*P+H*H+K*K;if(X>0){const _=1/Math.sqrt(X);w[Z]=_*P,w[Z+1]=_*H,w[Z+2]=_*K}Q+=C,Z+=J}}Object.freeze(Object.defineProperty({__proto__:null,normalize:s,normalizeView:a,scale:u,scaleView:o,shiftRight:function d(w,_,J){const C=Math.min(w.count,_.count),P=w.typedBuffer,Q=w.typedBufferStride,Z=_.typedBuffer,H=_.typedBufferStride;let K=0,X=0;for(let Y=0;Y<C;Y++)P[X]=Z[K]>>J,P[X+1]=Z[K+1]>>J,P[X+2]=Z[K+2]>>J,K+=H,X+=Q},transformMat3:n,transformMat3View:f,transformMat4:r,transformMat4View:e,translate:i},Symbol.toStringTag,{value:"Module"}))},75478:(w,_,J)=>{J.d(_,{A:()=>Y});var C=J(80671),P=J(88706),Q=J(83375),Z=J(57453),H=(J(50886),J(89412),J(76761),J(99825)),K=J(68682);let X=class extends((0,P.O)(Q.oY)){constructor(w){super(w),this.type="georeferenced",this.origin=null}};(0,C._)([(0,H.e)({georeferenced:"georeferenced"},{readOnly:!0})],X.prototype,"type",void 0),(0,C._)([(0,Z.MZ)({type:[Number],nonNullable:!1,json:{write:!0}})],X.prototype,"origin",void 0),X=(0,C._)([(0,K.$)("esri.geometry.support.MeshGeoreferencedVertexSpace")],X);const Y=X},49837:(w,_,J)=>{J.d(_,{A:()=>ee});var C=J(80671),P=J(88706),Q=J(83375),Z=J(57453),H=(J(50886),J(89412),J(76761),J(99825)),K=J(68682),X=J(83800);let Y=class extends((0,P.O)(Q.oY)){constructor(w){super(w),this.type="local",this.origin=(0,X.vt)()}};(0,C._)([(0,H.e)({local:"local"},{readOnly:!0})],Y.prototype,"type",void 0),(0,C._)([(0,Z.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],Y.prototype,"origin",void 0),Y=(0,C._)([(0,K.$)("esri.geometry.support.MeshLocalVertexSpace")],Y);const ee=Y},52618:(w,_,J)=>{J.d(_,{j:()=>e});var C=J(89412);const e=()=>C.A.getLogger("esri.views.3d.support.buffer.math")},81581:(w,_,J)=>{J.d(_,{Bq:()=>o,Qp:()=>i,WN:()=>A,dK:()=>v,eN:()=>h,fH:()=>N,in:()=>y,yr:()=>u});var C=J(53705),P=J(16842),Q=J(81618),Z=J(35999);class i{constructor(w,_,J){this.assetName=w,this.assetMimeType=_,this.parts=J}equals(w){return this===w||this.assetName===w.assetName&&this.assetMimeType===w.assetMimeType&&(0,P.aI)(this.parts,w.parts,((w,_)=>w.equals(_)))}isOnService(w){return this.parts.every((_=>_.isOnService(w)))}makeHash(){let w="";for(const _ of this.parts)w+=_.partHash;return w}async toBlob(w){const{parts:_}=this;if(1===_.length)return _[0].toBlob(w);const J=await Promise.all(_.map((_=>_.toBlob(w))));return(0,Q.Te)(w),new Blob(J)}}class o{constructor(w,_){this.partUrl=w,this.partHash=_}equals(w){return this===w||this.partUrl===w.partUrl&&this.partHash===w.partHash}isOnService(w){return this.partUrl.startsWith("".concat(w.path,"/assets/"))}async toBlob(w){const{data:_}=await(0,C.A)(this.partUrl,{responseType:"blob"});return(0,Q.Te)(w),_}}function u(w){return function p(w){if(!w)return!1;if(Array.isArray(w))return w.some(m);return m(w)}(null===w||void 0===w?void 0:w.source)}function c(w){return!!Array.isArray(w)&&w.every((w=>w instanceof i))}const H=/^(model\/gltf\+json)|(model\/gltf-binary)$/,K=/\.(gltf|glb)/i;function m(w){if(w instanceof File){const{type:_,name:J}=w;return H.test(_)||K.test(J)}return H.test(w.assetMimeType)||K.test(w.assetName)}function h(w,_){if(!w)return!1;const{source:J}=w;return function g(w,_){if(Array.isArray(w)){const J=w;return J.length>0&&J.every((w=>b(w,_)))}return b(w,_)}(J,_)}function y(w,_){if(w===_)return!0;const{source:J}=w,{source:C}=_;if(J===C)return!0;if(c(J)&&c(C)){if(J.length!==C.length)return!1;const t=(w,_)=>w.assetName<_.assetName?-1:w.assetName>_.assetName?1:0,w=[...J].sort(t),_=[...C].sort(t);for(let J=0;J<w.length;++J)if(!w[J].equals(_[J]))return!1;return!0}return!1}function b(w,_){return w instanceof i&&w.isOnService(_)}function N(w,_){var J;return w instanceof File?(0,Z.rq)(w,_):null!==(J=(0,Z.R_)(w.assetMimeType,_))&&void 0!==J?J:(0,Z.E1)(w.assetName,_)}function A(w){return Array.isArray(w)?w:[w]}function v(w){return!!w.original}},17061:(w,_,J)=>{J.d(_,{CK:()=>p,Hq:()=>g,MW:()=>u,TE:()=>f,Uj:()=>l,by:()=>h,kp:()=>a});var C=J(63537),P=J(89412),Q=J(57264),Z=J(75478),H=J(49837),K=J(98504);function c(){return P.A.getLogger("esri.geometry.Mesh")}function a(w){var _;const{vertexSpace:J}=w;if(null!=J.origin)return w.clone();const{anchor:C}=w,P=C.clone(),Q=new Z.A({origin:[P.x,P.y,P.z]}),H=w.cloneWithVertexSpace(Q),{position:X}=H.vertexAttributes;return H.vertexAttributes.position=(0,K.t)(new Float64Array(X.length),X,[-P.x,-P.y,-(null!==(_=P.z)&&void 0!==_?_:0)]),H.vertexAttributesChanged(),H}function g(w){return null!=w.origin}function p(w){return g(w.vertexSpace)}function u(w,_){if(!g(w))return null;const[J,C,P]=w.origin;return new Q.A({x:J,y:C,z:P,spatialReference:_})}function f(w,_){const{x:J,y:P,z:Q,spatialReference:K}=w,X=[J,P,null!==Q&&void 0!==Q?Q:0];if(void 0!==(null===_||void 0===_?void 0:_.geographic)){if((0,C.io)(c(),"option: geographic",{replacement:"use vertexSpace option instead",version:"4.29",warnOnce:!0}),null===_||void 0===_||!_.vertexSpace)return null!==_&&void 0!==_&&_.geographic?new H.A({origin:X}):new Z.A({origin:X});c().warn("Deprecated geographic flag ignored since vertexSpace option is provided.")}if(null===_||void 0===_||!_.vertexSpace)return K.isGeographic||K.isWebMercator?new H.A({origin:X}):new Z.A({origin:X});switch(_.vertexSpace){case"local":return new H.A({origin:X});case"georeferenced":return new Z.A({origin:X});case"georeferenced-absolute":return new Z.A}}function l(w){return w.isGeographic||w.isWebMercator?"local":"georeferenced"}function h(w,_){return"local"===w?new H.A({origin:_}):new Z.A({origin:_})}},64762:(w,_,J)=>{J.d(_,{applyEdits:()=>E,r3:()=>v,uploadAssets:()=>W,zp:()=>$});var C=J(13812),P=J(39652),Q=J(4180),Z=J(66004),H=J(89412),K=J(81618),X=J(4270),Y=J(51523),ee=J(30172),te=J(78395),ae=J(19459),re=J(57022),ne=J(35999),se=J(74629);function F(w){return null!=(null===w||void 0===w?void 0:w.applyEdits)}function A(w){return"object"==typeof w&&null!=w&&"objectId"in w&&!!w.objectId}function v(w){return w.every(A)}function I(w){return"object"==typeof w&&null!=w&&"globalId"in w&&!!w.globalId}function $(w){return w.every(I)}async function E(w,_,J){var C;let X,ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const te="gdbVersion"in w?w.gdbVersion:null,re=null!==(C=ee.gdbVersion)&&void 0!==C?C:te;if((0,ae.Mk)(w)&&w.url)X=(0,ae.Zk)(w.url,w.layerId,re,"original-and-current-features"===ee.returnServiceEditsOption);else{X=(0,K.Tw)(),X.promise.then((_=>{(_.addedFeatures.length||_.updatedFeatures.length||_.deletedFeatures.length||_.addedAttachments.length||_.updatedAttachments.length||_.deletedAttachments.length)&&w.emit("edits",_)}));const _={result:X.promise};w.emit("apply-edits",_)}try{var ie;const{results:C,edits:K}=await async function S(w,_,J,C){var Z,K,X,ee,te,ae;if(await w.load(),!F(_))throw new Q.A("".concat(w.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:w});if(!(0,se.tk)(w))throw new Q.A("".concat(w.type,"-layer:editing-disabled"),"Editing is disabled for layer",{layer:w});const{edits:re,options:ie}=await async function R(w,_,J){const C=(0,se.BR)(w),Z=_&&(_.addFeatures||_.updateFeatures||_.deleteFeatures),K=_&&(_.addAttachments||_.updateAttachments||_.deleteAttachments),X=null!=w.infoFor3D;if(function M(w,_,J,C,P,Z){if(!w||!C&&!P)throw new Q.A("".concat(Z,":missing-parameters"),"'addFeatures', 'updateFeatures', 'deleteFeatures', 'addAttachments', 'updateAttachments' or 'deleteAttachments' parameter is required");if(!_.editing.supportsGlobalId&&null!==J&&void 0!==J&&J.globalIdUsed)throw new Q.A("".concat(Z,":invalid-parameter"),"This layer does not support 'globalIdUsed' parameter. See: 'capabilities.editing.supportsGlobalId'");if(!_.editing.supportsGlobalId&&P)throw new Q.A("".concat(Z,":invalid-parameter"),"'addAttachments', 'updateAttachments' and 'deleteAttachments' are applicable only if the layer supports global ids. See: 'capabilities.editing.supportsGlobalId'");if((null===J||void 0===J||!J.globalIdUsed)&&P)throw new Q.A("".concat(Z,":invalid-parameter"),"When 'addAttachments', 'updateAttachments' or 'deleteAttachments' is specified, globalIdUsed should be set to true")}(_,C,J,!!Z,!!K,"".concat(w.type,"-layer")),!C.data.isVersioned&&null!==J&&void 0!==J&&J.gdbVersion)throw new Q.A("".concat(w.type,"-layer:invalid-parameter"),"'gdbVersion' is applicable only if the layer supports versioned data. See: 'capabilities.data.isVersioned'");if(!C.editing.supportsRollbackOnFailure&&null!==J&&void 0!==J&&J.rollbackOnFailureEnabled)throw new Q.A("".concat(w.type,"-layer:invalid-parameter"),"This layer does not support 'rollbackOnFailureEnabled' parameter. See: 'capabilities.editing.supportsRollbackOnFailure'");const ee={...J};if(null!=ee.rollbackOnFailureEnabled||C.editing.supportsRollbackOnFailure||(ee.rollbackOnFailureEnabled=!0),ee.rollbackOnFailureEnabled||"original-and-current-features"!==ee.returnServiceEditsOption||(!1===ee.rollbackOnFailureEnabled&&H.A.getLogger("esri.layers.graphics.editingSupport").warn("".concat(w.type,"-layer:invalid-parameter"),"'original-and-current-features' is valid for 'returnServiceEditsOption' only when 'rollBackOnFailure' is true, but 'rollBackOnFailure' was set to false. 'rollBackOnFailure' has been overwritten and set to true."),ee.rollbackOnFailureEnabled=!0),!C.editing.supportsReturnServiceEditsInSourceSpatialReference&&ee.returnServiceEditsInSourceSR)throw new Q.A("".concat(w.type,"-layer:invalid-parameter"),"This layer does not support 'returnServiceEditsInSourceSR' parameter. See: 'capabilities.editing.supportsReturnServiceEditsInSourceSpatialReference'");if(ee.returnServiceEditsInSourceSR&&"original-and-current-features"!==ee.returnServiceEditsOption)throw new Q.A("".concat(w.type,"-layer:invalid-parameter"),"'returnServiceEditsInSourceSR' is valid only when 'returnServiceEditsOption' is set to 'original-and-current-features'");const te=function V(w,_,J){var C,Z,H;const K=function G(w){var _,J;return{addFeatures:Array.from(null!==(_=null===w||void 0===w?void 0:w.addFeatures)&&void 0!==_?_:[]),updateFeatures:Array.from(null!==(J=null===w||void 0===w?void 0:w.updateFeatures)&&void 0!==J?J:[]),deleteFeatures:w&&P.A.isCollection(w.deleteFeatures)?w.deleteFeatures.toArray():w.deleteFeatures||[],addAttachments:w.addAttachments||[],updateAttachments:w.updateAttachments||[],deleteAttachments:w.deleteAttachments||[]}}(w);if(null!==(C=K.addFeatures)&&void 0!==C&&C.length&&!_.operations.supportsAdd)throw new Q.A("".concat(J,":unsupported-operation"),"Layer does not support adding features.");if(null!==(Z=K.updateFeatures)&&void 0!==Z&&Z.length&&!_.operations.supportsUpdate)throw new Q.A("".concat(J,":unsupported-operation"),"Layer does not support updating features.");if(null!==(H=K.deleteFeatures)&&void 0!==H&&H.length&&!_.operations.supportsDelete)throw new Q.A("".concat(J,":unsupported-operation"),"Layer does not support deleting features.");return K.addFeatures=K.addFeatures.map(x),K.updateFeatures=K.updateFeatures.map(x),K.addAssetFeatures=[],K}(_,C,"".concat(w.type,"-layer")),ae=(null===J||void 0===J?void 0:J.globalIdUsed)||X,re=w.fields.filter((w=>"big-integer"===w.type||"oid"===w.type&&(w.length||0)>=8));if(ae){const{globalIdField:_}=w;if(null==_)throw new Q.A("".concat(w.type,"-layer:invalid-parameter"),"Layer does not specify a global id field.");te.addFeatures.forEach((w=>function T(w,_){const{attributes:J}=w;null==J[_]&&(J[_]=(0,Y.yS)())}(w,_)))}return te.addFeatures.forEach((_=>function U(w,_,J,C){j(w,_,J,C),O(w,_)}(_,w,ae,re))),te.updateFeatures.forEach((_=>function L(w,_,J,C){j(w,_,J,C),O(w,_);const P=(0,se.BR)(_);if("geometry"in w&&null!=w.geometry&&(null===P||void 0===P||!P.editing.supportsGeometryUpdate))throw new Q.A("".concat(_.type,"-layer:unsupported-operation"),"Layer does not support geometry updates.")}(_,w,ae,re))),te.deleteFeatures.forEach((_=>function k(w,_,J,C){j(w,_,J,C)}(_,w,ae,re))),te.addAttachments.forEach((_=>B(_,w))),te.updateAttachments.forEach((_=>B(_,w))),X&&await async function z(w,_){var J,C;if(null==_.infoFor3D)return;const{infoFor3D:P}=_,Z=null!==(J=(0,ne.R_)("model/gltf-binary",P.supportedFormats))&&void 0!==J?J:(0,ne.E1)("glb",P.supportedFormats);if(!Z||!P.editFormats.includes(Z))throw new Q.A("".concat(_.type,"-layer:binary-gltf-asset-not-supported"),"3DObjectFeatureLayer requires binary glTF (.glb) support for updating mesh geometry.");null!==(C=w.addAssetFeatures)&&void 0!==C||(w.addAssetFeatures=[]);const{addAssetFeatures:H}=w;for(const Q of null!==(K=w.addFeatures)&&void 0!==K?K:[]){var K;q(Q)&&H.push(Q)}for(const Q of null!==(X=w.updateFeatures)&&void 0!==X?X:[]){var X;q(Q)&&H.push(Q)}}(te,w),{edits:await D(te),options:ee}}(w,J,C);return null!==(Z=re.addFeatures)&&void 0!==Z&&Z.length||null!==(K=re.updateFeatures)&&void 0!==K&&K.length||null!==(X=re.deleteFeatures)&&void 0!==X&&X.length||null!==(ee=re.addAttachments)&&void 0!==ee&&ee.length||null!==(te=re.updateAttachments)&&void 0!==te&&te.length||null!==(ae=re.deleteAttachments)&&void 0!==ae&&ae.length?{edits:re,results:await _.applyEdits(re,ie)}:{edits:re,results:{addFeatureResults:[],updateFeatureResults:[],deleteFeatureResults:[],addAttachmentResults:[],updateAttachmentResults:[],deleteAttachmentResults:[]}}}(w,_,J,ee),l=w=>w.filter((w=>!w.error)).map(Z.o8),te={edits:K,addedFeatures:l(C.addFeatureResults),updatedFeatures:l(C.updateFeatureResults),deletedFeatures:l(C.deleteFeatureResults),addedAttachments:l(C.addAttachmentResults),updatedAttachments:l(C.updateAttachmentResults),deletedAttachments:l(C.deleteAttachmentResults),exceededTransferLimit:!1,historicMoment:C.editMoment?new Date(C.editMoment):null,globalIdToObjectId:ee.globalIdToObjectId};return null!==(ie=C.editedFeatureResults)&&void 0!==ie&&ie.length&&(te.editedFeatures=C.editedFeatureResults),X.resolve(te),C}catch(oe){throw X.reject(oe),oe}}function j(w,_,J,C){if(J){if("attributes"in w&&!w.attributes[_.globalIdField])throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Feature should have '".concat(_.globalIdField,"' when 'globalIdUsed' is true"));if(!("attributes"in w)&&!w.globalId)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"`'globalId' of the feature should be passed when 'globalIdUsed' is true")}if(C.length&&"attributes"in w)for(const H of C){const J=w.attributes[H.name];if(void 0!==J&&!(0,re.OG)(H,J))throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Big-integer field '".concat(H.name,"' of the feature must be less than ").concat(Number.MAX_SAFE_INTEGER),{feature:w})}if("geometry"in w&&null!=w.geometry){var P,Z;if(w.geometry.hasZ&&!1===(null===(P=_.capabilities)||void 0===P?void 0:P.data.supportsZ))throw new Q.A("".concat(_.type,"-layer:z-unsupported"),"Layer does not support z values while feature has z values.");if(w.geometry.hasM&&!1===(null===(Z=_.capabilities)||void 0===Z?void 0:Z.data.supportsM))throw new Q.A("".concat(_.type,"-layer:m-unsupported"),"Layer does not support m values while feature has m values.")}}function O(w,_){var J;if("geometry"in w&&"mesh"===(null===(J=w.geometry)||void 0===J?void 0:J.type)&&null!=_.infoFor3D&&null!=_.spatialReference){const{geometry:J}=w,{spatialReference:C,vertexSpace:P}=J,Z=_.spatialReference,H="local"===P.type,K=(0,te.EA)(Z),X=(0,te.aI)(Z,C),Y=X||(0,te.oT)(Z)&&((0,te.oT)(C)||(0,te.K8)(C));if(!(H&&K&&Y||!H&&!K&&X))throw new Q.A("".concat(_.type,"-layer:mesh-unsupported"),"Uploading a mesh with a ".concat(P.type," vertex space and a spatial reference wkid:").concat(C.wkid," to a layer with a spatial reference wkid:").concat(Z.wkid," is not supported."))}}function B(w,_){var J;const{feature:C,attachment:P}=w;if(!C||"attributes"in C&&!C.attributes[_.globalIdField])throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Attachment should have reference to a feature with 'globalId'");if(!("attributes"in C)&&!C.globalId)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Attachment should have reference to 'globalId' of the parent feature");if(!P.globalId)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Attachment should have 'globalId'");if(!P.data&&!P.uploadId)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Attachment should have 'data' or 'uploadId'");if(!(P.data instanceof File&&P.data.name)&&!P.name)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"'name' is required when attachment is specified as Base64 encoded string using 'data'");if((null===(J=_.capabilities)||void 0===J||!J.editing.supportsUploadWithItemId)&&P.uploadId)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"This layer does not support 'uploadId' parameter. See: 'capabilities.editing.supportsUploadWithItemId'");if("string"==typeof P.data){const w=(0,X.r$)(P.data);if(w&&!w.isBase64)throw new Q.A("".concat(_.type,"-layer:invalid-parameter"),"Attachment 'data' should be a Blob, File or Base64 encoded string")}}async function D(w){var _,J;const C=null!==(_=w.addFeatures)&&void 0!==_?_:[],P=null!==(J=w.updateFeatures)&&void 0!==J?J:[],Q=C.concat(P).map((w=>w.geometry)),Z=await(0,ee.el)(Q),H=C.length,K=P.length;return Z.slice(0,H).forEach(((w,_)=>C[_].geometry=w)),Z.slice(H,H+K).forEach(((w,_)=>P[_].geometry=w)),w}function x(w){const _=new C.A;return w.attributes||(w.attributes={}),_.geometry=w.geometry,_.attributes=w.attributes,_}function q(w){var _;return"mesh"===(null===w||void 0===w||null===(_=w.geometry)||void 0===_?void 0:_.type)}function W(w,_,J,C){if(!F(_))throw new Q.A("".concat(w.type,"-layer:no-editing-support"),"Layer source does not support applyEdits capability",{layer:w});if(!_.uploadAssets)throw new Q.A("".concat(w.type,"-layer:no-asset-upload-support"),"Layer source does not support uploadAssets capability",{layer:w});return _.uploadAssets(J,C)}},86542:(w,_,J)=>{J.r(_),J.d(_,{default:()=>Te});var C=J(80671),P=(J(30174),J(50075)),Q=J(53705),Z=J(94631),H=J(16842),K=J(4180),X=J(50886),Y=J(40530),ee=J(3616),te=J(89412),ae=J(2395),re=J(81618),ne=J(4270),se=J(51523),ie=J(57453),oe=J(68682),le=J(84661),ue=J(17061),de=J(81581),ce=J(13812),pe=J(49049),he=J(54208),ye=J(31670),fe=J(78395),ge=J(64762);async function applyEditsUtils_p(w,_,J){const{geometry:C}=_,P={..._.attributes};if(null!=J&&"mesh"===(null===C||void 0===C?void 0:C.type)){var Q;const{transformFieldRoles:_}=J,{origin:Z,spatialReference:H,transform:K,vertexSpace:X}=C,Y="local"===X.type,ee=w.spatialReference,te=ee.isGeographic,ae=(0,fe.aI)(ee,H),re=ae||(0,fe.oT)(ee)&&((0,fe.oT)(H)||(0,fe.K8)(H));if(!(Y&&te&&re||!Y&&!te&&ae))return null;const ne=(0,he.projectWithoutEngine)(Z,H,ee);if(null==ne)return null;if(P[_.originX]=ne.x,P[_.originY]=ne.y,P[_.originZ]=null!==(Q=ne.z)&&void 0!==Q?Q:0,null!=K){const{translation:w,scale:J,rotation:C}=K,Q=Y?1:(0,pe.KX)(H)/(0,pe.KX)(ee);P[_.translationX]=w[0]*Q,P[_.translationY]=w[2]*Q,P[_.translationZ]=-w[1]*Q,P[_.scaleX]=J[0],P[_.scaleY]=J[2],P[_.scaleZ]=J[1],P[_.rotationX]=C[0],P[_.rotationY]=C[2],P[_.rotationZ]=-C[1],P[_.rotationDeg]=C[3]}return{attributes:P}}return null==C?{attributes:P}:"mesh"===C.type||"extent"===C.type?null:{geometry:C.toJSON(),attributes:P}}async function applyEditsUtils_m(w,_){var J,C,P;const Q=await Promise.all((null!==(J=_.addAttachments)&&void 0!==J?J:[]).map((_=>f(w,_)))),Z=await Promise.all((null!==(C=_.updateAttachments)&&void 0!==C?C:[]).map((_=>f(w,_)))),H=null!==(P=_.deleteAttachments)&&void 0!==P?P:[];return Q.length||Z.length||H.length?{adds:Q,updates:Z,deletes:[...H]}:null}async function f(w,_){var J;const{feature:C,attachment:P}=_,{globalId:Q,name:Z,contentType:H,data:K,uploadId:X}=P,Y={globalId:Q};if(C&&("attributes"in C?Y.parentGlobalId=null===(J=C.attributes)||void 0===J?void 0:J[w.globalIdField]:C.globalId&&(Y.parentGlobalId=C.globalId)),X)Y.uploadId=X;else if(K){const w=await(0,ne._0)(K);w&&(Y.contentType=w.mediaType,Y.data=w.data),K instanceof File&&(Y.name=K.name)}return Z&&(Y.name=Z),H&&(Y.contentType=H),Y}function R(w){const _=!0===w.success?null:w.error||{code:void 0,description:void 0};return{objectId:w.objectId,globalId:w.globalId,error:_?new K.A("feature-layer-source:edit-failure",_.description,{code:_.code}):null}}function y(w,_){return new ce.A({attributes:w.attributes,geometry:(0,ye.rS)({...w.geometry,spatialReference:_})})}function I(w,_){var J,C,P;return{adds:(null===w||void 0===w||null===(J=w.adds)||void 0===J?void 0:J.map((w=>y(w,_))))||[],updates:(null===w||void 0===w||null===(C=w.updates)||void 0===C?void 0:C.map((w=>({original:y(w[0],_),current:y(w[1],_)}))))||[],deletes:(null===w||void 0===w||null===(P=w.deletes)||void 0===P?void 0:P.map((w=>y(w,_))))||[],spatialReference:_}}var ve=J(39584),me=J(84963),Ae=J(26128),be=J(48303),we=J(35999),Fe=J(35761),Se=J(19706),Re=J(49096),Ie=J(14010),Ee=J(98664);const Oe=new Y.J({originalAndCurrentFeatures:"original-and-current-features",none:"none"}),qe=new Set(["Feature Layer","Oriented Imagery Layer","Table","Catalog Layer"]),_e=new Y.J({Started:"published",Publishing:"publishing",Stopped:"unavailable"});let xe=class extends ee.A{constructor(){super(...arguments),this.type="feature-layer",this.refresh=(0,re.sg)((async()=>{var w,_;await this.load();const J=null===(w=this.sourceJSON.editingInfo)||void 0===w?void 0:w.lastEditDate;if(null==J)return{dataChanged:!0,updates:{}};try{await this._fetchService(null)}catch{return{dataChanged:!0,updates:{}}}const C=J!==(null===(_=this.sourceJSON.editingInfo)||void 0===_?void 0:_.lastEditDate);return{dataChanged:C,updates:C?{editingInfo:this.sourceJSON.editingInfo,extent:this.sourceJSON.extent}:null}})),this._ongoingAssetUploads=new Map}load(w){const _=this.layer.sourceJSON,J=this._fetchService(_,{...w}).then((()=>this.layer.setUserPrivileges(this.sourceJSON.serviceItemId,w))).then((()=>this._ensureLatestMetadata(w)));return this.addResolvingPromise(J),Promise.resolve(this)}get queryTask(){var w,_;const{capabilities:J,parsedUrl:C,dynamicDataSource:P,infoFor3D:Q,gdbVersion:Z,spatialReference:H,fieldsIndex:K}=this.layer,Y=(0,X.A)("featurelayer-pbf")&&(null===J||void 0===J?void 0:J.query.supportsFormatPBF)&&null==Q,ee=null!==(w=null===J||void 0===J||null===(_=J.operations)||void 0===_?void 0:_.supportsQueryAttachments)&&void 0!==w&&w;return new me.A({url:C.path,pbfSupported:Y,fieldsIndex:K,infoFor3D:Q,dynamicDataSource:P,gdbVersion:Z,sourceSpatialReference:H,queryAttachmentsSupported:ee})}async addAttachment(w,_){await this.load();const{layer:J}=this;await(0,be.VA)(J,"editing");const C=w.attributes[J.objectIdField],P=J.parsedUrl.path+"/"+C+"/addAttachment",Z=this._getLayerRequestOptions(),H=this._getFormDataForAttachment(_,Z.query);try{return R((await(0,Q.A)(P,{body:H})).data.addAttachmentResult)}catch(K){throw this._createAttachmentErrorResult(C,K)}}async updateAttachment(w,_,J){await this.load();const{layer:C}=this;await(0,be.VA)(C,"editing");const P=w.attributes[C.objectIdField],Z=C.parsedUrl.path+"/"+P+"/updateAttachment",H=this._getLayerRequestOptions({query:{attachmentId:_}}),K=this._getFormDataForAttachment(J,H.query);try{return R((await(0,Q.A)(Z,{body:K})).data.updateAttachmentResult)}catch(X){throw this._createAttachmentErrorResult(P,X)}}async applyEdits(w,_){var J,C,Z,X,Y,ee,te;await this.load();const{layer:ae}=this;await(0,be.VA)(ae,"editing");const re=ae.infoFor3D,ne=null!=re,se=ne||null!==(J=null===_||void 0===_?void 0:_.globalIdUsed)&&void 0!==J&&J,ie=ne?await this._uploadMeshesAndGetAssetMapEditsJSON(w):null,oe=null!==(C=null===(Z=w.addFeatures)||void 0===Z?void 0:Z.map((w=>applyEditsUtils_p(this.layer,w,re))))&&void 0!==C?C:[],le=(await Promise.all(oe)).filter(H.Ru),ue=null!==(X=null===(Y=w.updateFeatures)||void 0===Y?void 0:Y.map((w=>applyEditsUtils_p(this.layer,w,re))))&&void 0!==X?X:[],de=(await Promise.all(ue)).filter(H.Ru),ce=function applyEditsUtils_g(w,_,J){if(!_||0===_.length)return[];if(J&&(0,ge.zp)(_))return _.map((w=>w.globalId));if((0,ge.r3)(_))return _.map((w=>w.objectId));const C=J?w.globalIdField:w.objectIdField;return C?_.map((w=>w.getAttribute(C))):[]}(this.layer,w.deleteFeatures,se);(0,Se.u)(le,de,ae.spatialReference);const pe=await applyEditsUtils_m(this.layer,w),he=ae.capabilities.editing.supportsAsyncApplyEdits&&ne,ye=(null===_||void 0===_?void 0:_.gdbVersion)||ae.gdbVersion,fe={gdbVersion:ye,rollbackOnFailure:null===_||void 0===_?void 0:_.rollbackOnFailureEnabled,useGlobalIds:se,returnEditMoment:null===_||void 0===_?void 0:_.returnEditMoment,usePreviousEditMoment:null===_||void 0===_?void 0:_.usePreviousEditMoment,async:he};await(0,Ie.ZJ)(this.layer.url,ye,!0);const ve=(0,Ie.w5)(this.layer.url,ye||null);if(await(0,Ie.We)(ae.url,ye,ae.historicMoment))throw new K.A("feature-layer-source:historic-version","Editing a historic version is not allowed");null!==_&&void 0!==_&&_.returnServiceEditsOption?(fe.edits=JSON.stringify([{id:ae.layerId,adds:le,updates:de,deletes:ce,attachments:pe,assetMaps:ie}]),fe.returnServiceEditsOption=Oe.toJSON(null===_||void 0===_?void 0:_.returnServiceEditsOption),fe.returnServiceEditsInSourceSR=null===_||void 0===_?void 0:_.returnServiceEditsInSourceSR):(fe.adds=le.length?JSON.stringify(le):null,fe.updates=de.length?JSON.stringify(de):null,fe.deletes=ce.length?se?JSON.stringify(ce):ce.join(","):null,fe.attachments=pe&&JSON.stringify(pe),fe.assetMaps=null!=ie?JSON.stringify(ie):void 0);const me=this._getLayerRequestOptions({method:"post",query:fe});ve&&(me.authMode="immediate",me.query.returnEditMoment=!0,me.query.sessionId=Ie.TA);const Ae=null!==_&&void 0!==_&&_.returnServiceEditsOption?ae.url:ae.parsedUrl.path;let we;try{we=he?await this._asyncApplyEdits(Ae+"/applyEdits",me):await(0,Q.A)(Ae+"/applyEdits",me)}catch(Fe){if(!function applyEditsUtils_h(w){const _=w.details.raw,J=+_.code,C=+_.extendedCode;return 500===J&&(-2147217144===C||-2147467261===C)}(Fe))throw Fe;me.authMode="immediate",we=he?await this._asyncApplyEdits(Ae+"/applyEdits",me):await(0,Q.A)(Ae+"/applyEdits",me)}if((null===(ee=ae.capabilities.operations)||void 0===ee||!ee.supportsEditing)&&null!==(te=ae.effectiveCapabilities)&&void 0!==te&&null!==(te=te.operations)&&void 0!==te&&te.supportsEditing){const w=null===P.id||void 0===P.id?void 0:P.id.findCredential(ae.url);await(null===w||void 0===w?void 0:w.refreshToken())}return this._createEditsResult(we)}async deleteAttachments(w,_){await this.load();const{layer:J}=this;await(0,be.VA)(J,"editing");const C=w.attributes[J.objectIdField],P=J.parsedUrl.path+"/"+C+"/deleteAttachments";try{return(await(0,Q.A)(P,this._getLayerRequestOptions({query:{attachmentIds:_.join(",")},method:"post"}))).data.deleteAttachmentResults.map(R)}catch(Z){throw this._createAttachmentErrorResult(C,Z)}}fetchRecomputedExtents(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const _=w.signal;return this.load({signal:_}).then((async()=>{const _=this._getLayerRequestOptions({...w,query:{returnUpdates:!0}}),{layerId:J,url:C}=this.layer,{data:P}=await(0,Q.A)("".concat(C,"/").concat(J),_),{id:H,extent:K,fullExtent:X,timeExtent:Y}=P,ee=K||X;return{id:H,fullExtent:ee&&le.A.fromJSON(ee),timeExtent:Y&&Z.A.fromJSON({start:Y[0],end:Y[1]})}}))}async queryAttachments(w){let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};await this.load();const J=this._getLayerRequestOptions(_);return this.queryTask.executeAttachmentQuery(w,J)}async queryFeatures(w,_){var J;await this.load();const C=await this.queryTask.execute(w,{..._,query:this._createRequestQueryOptions(_)});return null!==(J=w.outStatistics)&&void 0!==J&&J.length&&C.features.length&&C.features.forEach((_=>{var J;const C=_.attributes;null===(J=w.outStatistics)||void 0===J||J.forEach((w=>{let{outStatisticFieldName:_}=w;if(_){const w=_.toLowerCase();w&&w in C&&_!==w&&(C[_]=C[w],delete C[w])}}))})),C}async queryFeaturesJSON(w,_){return await this.load(),this.queryTask.executeJSON(w,{..._,query:this._createRequestQueryOptions(_)})}async queryObjectIds(w,_){return await this.load(),this.queryTask.executeForIds(w,{..._,query:this._createRequestQueryOptions(_)})}async queryFeatureCount(w,_){return await this.load(),this.queryTask.executeForCount(w,{..._,query:this._createRequestQueryOptions(_)})}async queryExtent(w,_){return await this.load(),this.queryTask.executeForExtent(w,{..._,query:this._createRequestQueryOptions(_)})}async queryRelatedFeatures(w,_){return await this.load(),this.queryTask.executeRelationshipQuery(w,{..._,query:this._createRequestQueryOptions(_)})}async queryRelatedFeaturesCount(w,_){return await this.load(),this.queryTask.executeRelationshipQueryForCount(w,{..._,query:this._createRequestQueryOptions(_)})}async queryTopFeatures(w,_){return await this.load(),this.queryTask.executeTopFeaturesQuery(w,{..._,query:this._createRequestQueryOptions(_)})}async queryTopObjectIds(w,_){return await this.load(),this.queryTask.executeForTopIds(w,{..._,query:this._createRequestQueryOptions(_)})}async queryTopExtents(w,_){return await this.load(),this.queryTask.executeForTopExtents(w,{..._,query:this._createRequestQueryOptions(_)})}async queryTopCount(w,_){return await this.load(),this.queryTask.executeForTopCount(w,{..._,query:this._createRequestQueryOptions(_)})}async fetchPublishingStatus(){if(!(0,Ae.Wo)(this.layer.url))return"unavailable";const w=(0,ne.fj)(this.layer.url,"status"),_=await(0,Q.A)(w,{query:{f:"json"}});return _e.fromJSON(_.data.status)}async uploadAssets(w,_){const{uploadAssets:C}=await J.e(1348).then(J.bind(J,51348));return C(w,{layer:this.layer,ongoingUploads:this._ongoingAssetUploads},_)}async _asyncApplyEdits(w,_){const J=(await(0,Q.A)(w,_)).data.statusUrl;for(;;){const w=(await(0,Q.A)(J,{query:{f:"json"},responseType:"json"})).data;switch(w.status){case"Completed":return(0,Q.A)(w.resultUrl,{query:{f:"json"},responseType:"json"});case"CompletedWithErrors":throw new K.A("async-applyEdits-failed","asynchronous applyEdits call failed.");case"Failed ImportChanges":case"InProgress":case"Pending":case"ExportAttachments":case"ExportChanges":case"ExportingData":case"ExportingSnapshot":case"ImportAttachments":case"ProvisioningReplica":case"UnRegisteringReplica":break;default:throw new K.A("async-applyEdits-failed","asynchronous applyEdits call failed (undefined response status)")}await(0,re.Pl)(Me)}}_createRequestQueryOptions(w){const _={...this.layer.customParameters,token:this.layer.apiKey,...null===w||void 0===w?void 0:w.query};return this.layer.datesInUnknownTimezone&&(_.timeReferenceUnknownClient=!0),_}async _fetchService(w,_){if(!w){const J={};(0,X.A)("featurelayer-advanced-symbols")&&(J.returnAdvancedSymbols=!0),(null===_||void 0===_?void 0:_.cacheBust)&&(J._ts=Date.now());const{data:C}=await(0,Q.A)(this.layer.parsedUrl.path,this._getLayerRequestOptions({query:J,signal:null===_||void 0===_?void 0:_.signal}));w=C}this.sourceJSON=await this._patchServiceJSON(w,null===_||void 0===_?void 0:_.signal);const J=w.type;if(!qe.has(J))throw new K.A("feature-layer-source:unsupported-type",'Source type "'.concat(J,'" is not supported'))}async _patchServiceJSON(w,_){var J;if("Table"!==w.type&&w.geometryType&&(null===w||void 0===w||null===(J=w.drawingInfo)||void 0===J||!J.renderer)&&!w.defaultSymbol){const _=(0,ve.F0)(w.geometryType).renderer;(0,ae.sM)("drawingInfo.renderer",_,w)}if("esriGeometryMultiPatch"===w.geometryType&&w.infoFor3D&&(w.geometryType="mesh"),null==w.extent)try{const{data:J}=await(0,Q.A)(this.layer.url,this._getLayerRequestOptions({signal:_}));J.spatialReference&&(w.extent={xmin:0,ymin:0,xmax:0,ymax:0,spatialReference:J.spatialReference})}catch(C){(0,re.QP)(C)}return w}async _ensureLatestMetadata(w){if(this.layer.userHasUpdateItemPrivileges&&this.sourceJSON.cacheMaxAge>0)return this._fetchService(null,{...w,cacheBust:!0})}async _uploadMeshesAndGetAssetMapEditsJSON(w){const{addAssetFeatures:_}=w;if(null===_||void 0===_||!_.length)return null;const J=await this._filterRedundantAssetMaps(_);if(null===_||void 0===_||!_.length)return null;const C=new Array,P=new Map;for(const Q of J){const{geometry:w}=Q,{vertexSpace:_}=w;if((0,ue.Hq)(_))C.push(w);else{const _=(0,ue.kp)(w);P.set(_,w),Q.geometry=_,C.push(_)}}await this.uploadAssets(C);for(const[Q,Z]of P)Z.addExternalSources(Q.metadata.externalSources.items);return{adds:this._getAssetMapEditsJSON(J),updates:[],deletes:[]}}_getAssetMapEditsJSON(w){const _=new Array,J=this.layer.globalIdField,C=this.layer.parsedUrl;for(const Q of w){var P;const w=Q.geometry,{metadata:Z}=w,H=Z.getExternalSourcesOnService(C),K=Q.getAttribute(J);if(0===H.length){te.A.getLogger(this).error("Skipping feature ".concat(K,". The mesh it is associated with has not been uploaded to the service and cannot be mapped to it."));continue}const{source:X}=null!==(P=H.find(de.dK))&&void 0!==P?P:H[0];for(const J of X)1===J.parts.length?_.push({globalId:(0,se.yS)(),parentGlobalId:K,assetName:J.assetName,assetHash:J.parts[0].partHash,flags:[]}):te.A.getLogger(this).error("Skipping asset ".concat(J.assetName,". It does not have exactly one part, so we cannot map it to a feature."))}return _}_createEditsResult(w){const _=w.data,{layerId:J}=this.layer,C=[];let P=null;if(Array.isArray(_))for(const X of _){var Q,Z,H;C.push({id:X.id,editedFeatures:X.editedFeatures}),X.id===J&&(P={addResults:null!==(Q=X.addResults)&&void 0!==Q?Q:[],updateResults:null!==(Z=X.updateResults)&&void 0!==Z?Z:[],deleteResults:null!==(H=X.deleteResults)&&void 0!==H?H:[],attachments:X.attachments,editMoment:X.editMoment})}else P=_;const K=function b(w){var _,J,C,P,Q,Z;const H=null===w||void 0===w?void 0:w.assetMaps;if(H){for(const w of H.addResults)w.success||te.A.getLogger("esri.layers.graphics.sources.support.sourceUtils").error("Failed to map asset to feature with globalId ".concat(w.globalId,"."));for(const w of H.updateResults)w.success||te.A.getLogger("esri.layers.graphics.sources.support.sourceUtils").error("Failed to map asset to feature with globalId ".concat(w.globalId,"."))}const K=null===w||void 0===w?void 0:w.attachments,X={addFeatureResults:null!==(_=null===w||void 0===w||null===(J=w.addResults)||void 0===J?void 0:J.map(R))&&void 0!==_?_:[],updateFeatureResults:null!==(C=null===w||void 0===w||null===(P=w.updateResults)||void 0===P?void 0:P.map(R))&&void 0!==C?C:[],deleteFeatureResults:null!==(Q=null===w||void 0===w||null===(Z=w.deleteResults)||void 0===Z?void 0:Z.map(R))&&void 0!==Q?Q:[],addAttachmentResults:null!==K&&void 0!==K&&K.addResults?K.addResults.map(R):[],updateAttachmentResults:null!==K&&void 0!==K&&K.updateResults?K.updateResults.map(R):[],deleteAttachmentResults:null!==K&&void 0!==K&&K.deleteResults?K.deleteResults.map(R):[]};return null!==w&&void 0!==w&&w.editMoment&&(X.editMoment=w.editMoment),X}(P);if(C.length>0){K.editedFeatureResults=[];for(const w of C){const{editedFeatures:_}=w,J=null!==_&&void 0!==_&&_.spatialReference?new Ee.A(_.spatialReference):null;K.editedFeatureResults.push({layerId:w.id,editedFeatures:I(_,J)})}}return K}_createAttachmentErrorResult(w,_){var J;const C=(null===(J=_.details.messages)||void 0===J?void 0:J[0])||_.message,P=_.details.httpStatus||_.details.messageCode;return{objectId:w,globalId:null,error:new K.A("feature-layer-source:attachment-failure",C,{code:P})}}_getFormDataForAttachment(w,_){const J=w instanceof FormData?w:w&&w.elements?new FormData(w):null;if(J)for(const C in _){const w=_[C];null!=w&&(J.set?J.set(C,w):J.append(C,w))}return J}_getLayerRequestOptions(){let w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{parsedUrl:_,gdbVersion:J,dynamicDataSource:C}=this.layer;return{...w,query:{gdbVersion:J,layer:C?JSON.stringify({source:C}):void 0,..._.query,f:"json",...this._createRequestQueryOptions(w)},responseType:"json"}}async _filterRedundantAssetMaps(w){const{layer:_}=this,{globalIdField:J,infoFor3D:C,parsedUrl:P}=_;if(null==C||null==J)return w;const Q=(0,we.JZ)(C);if(null==Q)return w;const Z=(0,ne.fj)(P.path,"../".concat(Q.id)),K=new Array,X=new Array;for(const H of w)H.geometry.metadata.getExternalSourcesOnService(P).length>0?X.push(H):K.push(H);const Y=X.map((w=>w.getAttribute(J))).filter(H.Ru);if(0===Y.length)return w;const{assetMapFieldRoles:{parentGlobalId:ee,assetHash:te}}=C,ae=new Re.A;ae.where="".concat(ee," IN (").concat(Y.map((w=>"'".concat(w,"'"))),")"),ae.outFields=[te,ee],ae.returnGeometry=!1;const re=await(0,Fe.s)(Z,ae),{features:se}=re;return 0===se.length?w:[...K,...X.filter((w=>{const _=w.getAttribute(J);if(!_)return!0;const{metadata:C}=w.geometry,Q=se.filter((w=>w.getAttribute(ee)===_));if(0===Q.length)return!0;const Z=Q.map((w=>w.getAttribute(te)));return C.getExternalSourcesOnService(P).flatMap((w=>{let{source:_}=w;return _.flatMap((w=>w.parts.map((w=>w.partHash))))})).some((w=>Z.every((_=>w!==_))))}))]}};(0,C._)([(0,ie.MZ)()],xe.prototype,"type",void 0),(0,C._)([(0,ie.MZ)({constructOnly:!0})],xe.prototype,"layer",void 0),(0,C._)([(0,ie.MZ)({readOnly:!0})],xe.prototype,"queryTask",null),xe=(0,C._)([(0,oe.$)("esri.layers.graphics.sources.FeatureLayerSource")],xe);const Me=1e3,Te=xe}}]);
//# sourceMappingURL=6542.450a91cf.chunk.js.map