"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[5209],{3005:(s,v,g)=>{g.r(v),g.d(v,{default:()=>ht});var f=g(80671),_=g(39652),b=g(76779),S=g(4180),w=g(66004),M=g(15461),j=g(89412),A=g(13132),Z=g(81618),F=g(4270),O=g(57453),x=(g(50886),g(59299)),U=g(68682),T=g(98664),I=g(78658),L=g(13812),R=g(21365),E=(g(1804),g(26374),g(2725),g(66178),g(52902),g(55088),g(27150),g(16534),g(53440),g(80830)),Q=g(53705),B=g(40530),P=g(3616),q=g(5203),D=(g(76761),g(99825)),k=g(84661),N=g(9370),z=g(16904),V=g(6493),$=g(32277);let K=class extends((0,z.sA)(A.L)){constructor(s){super(s),this.title="",this.id=-1,this.modelName=null,this.isEmpty=null,this.legendEnabled=!0,this.visible=!0,this.opacity=1}readTitle(s,v){return"string"==typeof v.alias?v.alias:"string"==typeof v.name?v.name:""}readIdOnlyOnce(s){return-1!==this.id?this.id:"number"==typeof s?s:-1}};(0,f._)([(0,O.MZ)({type:String,json:{origins:{"web-scene":{write:!0},"portal-item":{write:!0}}}})],K.prototype,"title",void 0),(0,f._)([(0,x.w)("service","title",["alias","name"])],K.prototype,"readTitle",null),(0,f._)([(0,O.MZ)()],K.prototype,"layer",void 0),(0,f._)([(0,O.MZ)({type:V.jz,readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],K.prototype,"id",void 0),(0,f._)([(0,x.w)("service","id")],K.prototype,"readIdOnlyOnce",null),(0,f._)([(0,O.MZ)((0,$.Qo)(String))],K.prototype,"modelName",void 0),(0,f._)([(0,O.MZ)((0,$.Qo)(Boolean))],K.prototype,"isEmpty",void 0),(0,f._)([(0,O.MZ)({type:Boolean,nonNullable:!0})],K.prototype,"legendEnabled",void 0),(0,f._)([(0,O.MZ)({type:Boolean,json:{name:"visibility",write:!0}})],K.prototype,"visible",void 0),(0,f._)([(0,O.MZ)({type:Number,json:{write:!0}})],K.prototype,"opacity",void 0),K=(0,f._)([(0,U.$)("esri.layers.buildingSublayers.BuildingSublayer")],K);const H=K;var W=g(45771),G=g(33789),Y=g(19894),J=g(8084),X=g(57022),ee=g(37652),te=g(17539),se=g(49096),re=g(7445),oe=g(99533),ie=g(72015),ne=g(54217);const ae=(0,Y.p)();let le=class extends((0,W.M)(P.A.LoadableMixin((0,q.g)(H)))){constructor(s){super(s),this.type="building-component",this.nodePages=null,this.materialDefinitions=[],this.textureSetDefinitions=[],this.geometryDefinitions=[],this.indexInfo=null,this.serviceUpdateTimeStamp=null,this.store=null,this.attributeStorageInfo=[],this.fields=[],this.associatedLayer=null,this.outFields=null,this.listMode="show",this.renderer=null,this.definitionExpression=null,this.popupEnabled=!0,this.popupTemplate=null,this.layerType="3d-object"}get parsedUrl(){var s,v;return this.layer?{path:"".concat(null===(s=this.layer.parsedUrl)||void 0===s?void 0:s.path,"/sublayers/").concat(this.id),query:null===(v=this.layer.parsedUrl)||void 0===v?void 0:v.query}:{path:""}}get fieldsIndex(){return new J.A(this.fields)}readAssociatedLayer(s,v){const g=this.layer.associatedFeatureServiceItem,f=v.associatedLayerID;return null!=g&&"number"==typeof f?new N.default({portalItem:g,customParameters:this.customParameters,layerId:f}):null}get objectIdField(){if(null!=this.fields)for(const s of this.fields)if("oid"===s.type)return s.name;return null}get displayField(){return null!=this.associatedLayer?this.associatedLayer.displayField:void 0}get apiKey(){return this.layer.apiKey}get customParameters(){return this.layer.customParameters}get fullExtent(){return this.layer.fullExtent}get spatialReference(){return this.layer.spatialReference}get version(){return this.layer.version}get elevationInfo(){return this.layer.elevationInfo}get minScale(){return this.layer.minScale}get maxScale(){return this.layer.maxScale}get effectiveScaleRange(){return this.layer.effectiveScaleRange}get defaultPopupTemplate(){return this.createPopupTemplate()}load(s){const v=null!=s?s.signal:null,g=this._fetchService(v).then((()=>{this.indexInfo=(0,ee.F)(this.parsedUrl.path,this.rootNode,this.nodePages,this.customParameters,this.apiKey,j.A.getLogger(this),v)}));return this.addResolvingPromise(g),Promise.resolve(this)}createPopupTemplate(s){return(0,re.tn)(this,s)}async _fetchService(s){const v=(await(0,Q.A)(this.parsedUrl.path,{query:{f:"json",...this.customParameters,token:this.apiKey},responseType:"json",signal:s})).data;this.read(v,{origin:"service",url:this.parsedUrl})}getField(s){return this.fieldsIndex.get(s)}getFieldDomain(s,v){var g,f,_;const b=null===(g=this.getFeatureType(null===v||void 0===v?void 0:v.feature))||void 0===g||null===(g=g.domains)||void 0===g?void 0:g[s];return b&&"inherited"!==b.type?b:null!==(f=null===(_=this.getField(s))||void 0===_?void 0:_.domain)&&void 0!==f?f:null}getFeatureType(s){return s&&null!=this.associatedLayer?this.associatedLayer.getFeatureType(s):null}get types(){var s;return null!=this.associatedLayer&&null!==(s=this.associatedLayer.types)&&void 0!==s?s:[]}get typeIdField(){return null!=this.associatedLayer?this.associatedLayer.typeIdField:null}get geometryType(){return"3d-object"===this.layerType?"mesh":"point"}get profile(){return"3d-object"===this.layerType?"mesh-pyramids":"points"}get capabilities(){const s=null!=this.associatedLayer&&this.associatedLayer.capabilities?this.associatedLayer.capabilities:G.P,{query:v,data:{supportsZ:g,supportsM:f,isVersioned:_}}=s;return{query:v,data:{supportsZ:g,supportsM:f,isVersioned:_}}}createQuery(){const s=new se.A;return"mesh"!==this.geometryType&&(s.returnGeometry=!0,s.returnZ=!0),s.where=this.definitionExpression||"1=1",s.sqlFormat="standard",s}queryExtent(s,v){return this._getAssociatedLayerForQuery().then((g=>g.queryExtent(s||this.createQuery(),v)))}queryFeatureCount(s,v){return this._getAssociatedLayerForQuery().then((g=>g.queryFeatureCount(s||this.createQuery(),v)))}queryFeatures(s,v){return this._getAssociatedLayerForQuery().then((g=>g.queryFeatures(s||this.createQuery(),v))).then((s=>{if(null!==s&&void 0!==s&&s.features)for(const v of s.features)v.layer=this.layer,v.sourceLayer=this;return s}))}queryObjectIds(s,v){return this._getAssociatedLayerForQuery().then((g=>g.queryObjectIds(s||this.createQuery(),v)))}async queryCachedAttributes(s,v){const g=(0,X.hL)(this.fieldsIndex,await(0,ne.TO)(this,(0,ne.D8)(this)));return(0,ie.s1)(this.parsedUrl.path,this.attributeStorageInfo,s,v,g,this.apiKey,this.customParameters)}async queryCachedFeature(s,v){const g=await this.queryCachedAttributes(s,[v]);if(!g||0===g.length)throw new S.A("scenelayer:feature-not-in-cached-data","Feature not found in cached data");const f=new L.A;return f.attributes=g[0],f.layer=this,f.sourceLayer=this,f}getFieldUsageInfo(s){return this.fieldsIndex.has(s)?{supportsLabelingInfo:!1,supportsRenderer:!1,supportsPopupTemplate:!1,supportsLayerQuery:!1}:{supportsLabelingInfo:!1,supportsRenderer:!0,supportsPopupTemplate:!0,supportsLayerQuery:null!=this.associatedLayer}}_getAssociatedLayerForQuery(){const s=this.associatedLayer;return null!=s&&s.loaded?Promise.resolve(s):this._loadAssociatedLayerForQuery()}async _loadAssociatedLayerForQuery(){if(await this.load(),null==this.associatedLayer)throw new S.A("buildingscenelayer:query-not-available","BuildingSceneLayer component layer queries are not available without an associated feature layer",{layer:this});try{await this.associatedLayer.load()}catch(Ze){throw new S.A("buildingscenelayer:query-not-available","BuildingSceneLayer associated feature layer could not be loaded",{layer:this,error:Ze})}return this.associatedLayer}};(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"parsedUrl",null),(0,f._)([(0,O.MZ)({type:te.W4,readOnly:!0})],le.prototype,"nodePages",void 0),(0,f._)([(0,O.MZ)({type:[te.uV],readOnly:!0})],le.prototype,"materialDefinitions",void 0),(0,f._)([(0,O.MZ)({type:[te.Ot],readOnly:!0})],le.prototype,"textureSetDefinitions",void 0),(0,f._)([(0,O.MZ)({type:[te.L0],readOnly:!0})],le.prototype,"geometryDefinitions",void 0),(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"serviceUpdateTimeStamp",void 0),(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"store",void 0),(0,f._)([(0,O.MZ)({type:String,readOnly:!0,json:{read:{source:"store.rootNode"}}})],le.prototype,"rootNode",void 0),(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"attributeStorageInfo",void 0),(0,f._)([(0,O.MZ)(ae.fields)],le.prototype,"fields",void 0),(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"fieldsIndex",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:N.default})],le.prototype,"associatedLayer",void 0),(0,f._)([(0,x.w)("service","associatedLayer",["associatedLayerID"])],le.prototype,"readAssociatedLayer",null),(0,f._)([(0,O.MZ)(ae.outFields)],le.prototype,"outFields",void 0),(0,f._)([(0,O.MZ)({type:String,readOnly:!0})],le.prototype,"objectIdField",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:String,json:{read:!1}})],le.prototype,"displayField",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:String})],le.prototype,"apiKey",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:String})],le.prototype,"customParameters",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:k.A})],le.prototype,"fullExtent",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:T.A})],le.prototype,"spatialReference",null),(0,f._)([(0,O.MZ)({readOnly:!0})],le.prototype,"version",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:oe.A})],le.prototype,"elevationInfo",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:Number})],le.prototype,"minScale",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:Number})],le.prototype,"maxScale",null),(0,f._)([(0,O.MZ)({readOnly:!0,type:Number})],le.prototype,"effectiveScaleRange",null),(0,f._)([(0,O.MZ)({type:["hide","show"],json:{write:!0}})],le.prototype,"listMode",void 0),(0,f._)([(0,O.MZ)({types:E.X,json:{origins:{service:{read:{source:"drawingInfo.renderer"}}},name:"layerDefinition.drawingInfo.renderer",write:!0},value:null})],le.prototype,"renderer",void 0),(0,f._)([(0,O.MZ)({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],le.prototype,"definitionExpression",void 0),(0,f._)([(0,O.MZ)($.M6)],le.prototype,"popupEnabled",void 0),(0,f._)([(0,O.MZ)({type:R.A,json:{read:{source:"popupInfo"},write:{target:"popupInfo"}}})],le.prototype,"popupTemplate",void 0),(0,f._)([(0,O.MZ)({readOnly:!0,type:String,json:{origins:{service:{read:{source:"store.normalReferenceFrame"}}},read:!1}})],le.prototype,"normalReferenceFrame",void 0),(0,f._)([(0,O.MZ)({readOnly:!0,json:{read:!1}})],le.prototype,"defaultPopupTemplate",null),(0,f._)([(0,O.MZ)()],le.prototype,"types",null),(0,f._)([(0,O.MZ)()],le.prototype,"typeIdField",null),(0,f._)([(0,O.MZ)({json:{write:!1}}),(0,D.e)(new B.J({"3DObject":"3d-object",Point:"point"}))],le.prototype,"layerType",void 0),(0,f._)([(0,O.MZ)()],le.prototype,"geometryType",null),(0,f._)([(0,O.MZ)()],le.prototype,"profile",null),(0,f._)([(0,O.MZ)({readOnly:!0,json:{read:!1}})],le.prototype,"capabilities",null),le=(0,f._)([(0,U.$)("esri.layers.buildingSublayers.BuildingComponentSublayer")],le);const pe=le;var ue,de=g(4282);const ye={type:_.A,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:p}}},read:!1}};function p(s,v,g){if(s&&Array.isArray(s))return new _.A(s.map((s=>{const v=function y(s){return"group"===s.layerType?ce:pe}(s);if(v){const f=new v;return f.read(s,g),f}return null!==g&&void 0!==g&&g.messages&&s&&g.messages.push(new de.A("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(s.type||"unknown")+"' are not supported",{definition:s,context:g})),null})))}let ce=ue=class extends H{constructor(s){super(s),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,M.L)(this,(s=>ue.forEachSublayer(this.sublayers,(v=>{"building-group"!==v.type&&s(v)}))))}};var he;(0,f._)([(0,O.MZ)({type:["hide","show","hide-children"],json:{write:!0}})],ce.prototype,"listMode",void 0),(0,f._)([(0,O.MZ)(ye)],ce.prototype,"sublayers",void 0),ce=ue=(0,f._)([(0,U.$)("esri.layers.buildingSublayers.BuildingGroupSublayer")],ce),(he=ce||(ce={})).sublayersProperty=ye,he.readSublayers=p,he.forEachSublayer=function e(s,v){s.forEach((s=>{v(s),"building-group"===s.type&&e(s.sublayers,v)}))};const ve=ce;var ge=g(98878),fe=g(47478),me=g(21642),_e=g(1921),be=g(32465),Se=g(38362),we=g(96712),Me=g(75427),je=g(83375),Ae=g(51523);let Ze=class extends je.oY{constructor(){super(...arguments),this.type=null}};(0,f._)([(0,O.MZ)({type:String,readOnly:!0,json:{write:!0}})],Ze.prototype,"type",void 0),Ze=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterAuthoringInfo")],Ze);const Fe=Ze;var Oe;let xe=Oe=class extends je.oY{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new Oe({filterType:this.filterType,filterValues:(0,w.o8)(this.filterValues)})}};(0,f._)([(0,O.MZ)({type:String,json:{write:!0}})],xe.prototype,"filterType",void 0),(0,f._)([(0,O.MZ)({type:[String],json:{write:!0}})],xe.prototype,"filterValues",void 0),xe=Oe=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterAuthoringInfoType")],xe);const Ue=xe;var Te;const Ie=_.A.ofType(Ue);let Le=Te=class extends je.oY{clone(){return new Te({filterTypes:(0,w.o8)(this.filterTypes)})}};(0,f._)([(0,O.MZ)({type:Ie,json:{write:!0}})],Le.prototype,"filterTypes",void 0),Le=Te=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],Le);const Ce=Le;var Re;const Ee=_.A.ofType(Ce);let Qe=Re=class extends Fe{constructor(){super(...arguments),this.type="checkbox"}clone(){return new Re({filterBlocks:(0,w.o8)(this.filterBlocks)})}};(0,f._)([(0,O.MZ)({type:["checkbox"]})],Qe.prototype,"type",void 0),(0,f._)([(0,O.MZ)({type:Ee,json:{write:!0}})],Qe.prototype,"filterBlocks",void 0),Qe=Re=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],Qe);const Be=Qe;let Pe=class extends je.oY{};(0,f._)([(0,O.MZ)({readOnly:!0,json:{read:!1}})],Pe.prototype,"type",void 0),Pe=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterMode")],Pe);const qe=Pe;var De;let ke=De=class extends qe{constructor(){super(...arguments),this.type="solid"}clone(){return new De}};(0,f._)([(0,O.MZ)({type:["solid"],readOnly:!0,json:{write:!0}})],ke.prototype,"type",void 0),ke=De=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterModeSolid")],ke);const Ne=ke;var ze,Ve=g(44177);let $e=ze=class extends qe{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new ze({edges:(0,w.o8)(this.edges)})}};(0,f._)([(0,D.e)({wireFrame:"wire-frame"})],$e.prototype,"type",void 0),(0,f._)([(0,O.MZ)(Ve.J)],$e.prototype,"edges",void 0),$e=ze=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterModeWireFrame")],$e);const Ke=$e;var He;let We=He=class extends qe{constructor(){super(...arguments),this.type="x-ray"}clone(){return new He}};(0,f._)([(0,O.MZ)({type:["x-ray"],readOnly:!0,json:{write:!0}})],We.prototype,"type",void 0),We=He=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterModeXRay")],We);const Ge=We;var Ye;const Je={nonNullable:!0,types:{key:"type",base:qe,typeMap:{solid:Ne,"wire-frame":Ke,"x-ray":Ge}},json:{read:s=>{switch(null===s||void 0===s?void 0:s.type){case"solid":return Ne.fromJSON(s);case"wireFrame":return Ke.fromJSON(s);case"x-ray":return Ge.fromJSON(s);default:return}},write:{enabled:!0,isRequired:!0}}};let Xe=Ye=class extends je.oY{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new Ne,this.title=""}clone(){return new Ye({filterExpression:this.filterExpression,filterMode:(0,w.o8)(this.filterMode),title:this.title})}};(0,f._)([(0,O.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Xe.prototype,"filterExpression",void 0),(0,f._)([(0,O.MZ)(Je)],Xe.prototype,"filterMode",void 0),(0,f._)([(0,O.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],Xe.prototype,"title",void 0),Xe=Ye=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilterBlock")],Xe);const et=Xe;var tt;const st=_.A.ofType(et);let rt=tt=class extends je.oY{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=(0,Ae.lk)(),this.name=null}clone(){return new tt({description:this.description,filterBlocks:(0,w.o8)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,w.o8)(this.filterAuthoringInfo)})}};(0,f._)([(0,O.MZ)({type:String,json:{write:!0}})],rt.prototype,"description",void 0),(0,f._)([(0,O.MZ)({type:st,json:{write:{enabled:!0,isRequired:!0}}})],rt.prototype,"filterBlocks",void 0),(0,f._)([(0,O.MZ)({types:{key:"type",base:Fe,typeMap:{checkbox:Be}},json:{read:s=>"checkbox"===(null===s||void 0===s?void 0:s.type)?Be.fromJSON(s):null,write:!0}})],rt.prototype,"filterAuthoringInfo",void 0),(0,f._)([(0,O.MZ)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],rt.prototype,"id",void 0),(0,f._)([(0,O.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],rt.prototype,"name",void 0),rt=tt=(0,f._)([(0,U.$)("esri.layers.support.BuildingFilter")],rt);const ot=rt;let it=class extends je.oY{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};(0,f._)([(0,O.MZ)({type:String})],it.prototype,"fieldName",void 0),(0,f._)([(0,O.MZ)({type:String})],it.prototype,"modelName",void 0),(0,f._)([(0,O.MZ)({type:String})],it.prototype,"label",void 0),(0,f._)([(0,O.MZ)({type:Number})],it.prototype,"min",void 0),(0,f._)([(0,O.MZ)({type:Number})],it.prototype,"max",void 0),(0,f._)([(0,O.MZ)({json:{read:s=>Array.isArray(s)&&(s.every((s=>"string"==typeof s))||s.every((s=>"number"==typeof s)))?s.slice():null}})],it.prototype,"mostFrequentValues",void 0),(0,f._)([(0,O.MZ)({type:[Number]})],it.prototype,"subLayerIds",void 0),it=(0,f._)([(0,U.$)("esri.layers.support.BuildingFieldStatistics")],it);let nt=class extends(P.A.LoadableMixin((0,q.g)(je.oY))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(j.A.getLogger(this).error("building summary statistics are not loaded"),null)}load(s){const v=null!=s?s.signal:null;return this.addResolvingPromise(this._fetchService(v)),Promise.resolve(this)}async _fetchService(s){const v=(await(0,Q.A)(this.url,{query:{f:"json"},responseType:"json",signal:s})).data;this.read(v,{origin:"service"})}};(0,f._)([(0,O.MZ)({constructOnly:!0,type:String})],nt.prototype,"url",void 0),(0,f._)([(0,O.MZ)({readOnly:!0,type:[it],json:{read:{source:"summary"}}})],nt.prototype,"fields",null),nt=(0,f._)([(0,U.$)("esri.layers.support.BuildingSummaryStatistics")],nt);const at=nt;var lt,pt=g(89722);const ut=_.A.ofType(ot),dt=(0,w.o8)(ve.sublayersProperty),yt=null===(lt=dt.json)||void 0===lt?void 0:lt.origins;yt&&(yt["web-scene"]={type:[pe],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},yt["portal-item"]={type:[pe],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}});let ct=class extends((0,we.w6)((0,fe.b)((0,_e.q)((0,be.A)((0,Se.j)((0,A.P)((0,me.d)((0,ge.p)(I.A))))))))){constructor(s){super(s),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new b.A({getCollections:()=>[this.sublayers],getChildrenFunction:s=>"building-group"===s.type?s.sublayers:null}),this.sublayers=null,this._sublayerOverrides=null,this.filters=new ut,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.legendEnabled=!0,this.type="building-scene"}normalizeCtorArgs(s){return"string"==typeof s?{url:s}:null!==s&&void 0!==s?s:{}}destroy(){this.allSublayers.destroy()}readSublayers(s,v,g){const f=ve.readSublayers(s,v,g);return ve.forEachSublayer(f,(s=>s.layer=this)),this._sublayerOverrides&&(this.applySublayerOverrides(f,this._sublayerOverrides),this._sublayerOverrides=null),f}applySublayerOverrides(s,v){let{overrides:g,context:f}=v;ve.forEachSublayer(s,(s=>s.read(g.get(s.id),f)))}readSublayerOverrides(s,v){const g=new Map;for(const _ of s){var f;null!=_&&"object"==typeof _&&"number"==typeof _.id?g.set(_.id,_):null===(f=v.messages)||void 0===f||f.push(new S.A("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:_}))}return{overrides:g,context:v}}writeSublayerOverrides(s,v,g){const f=[];ve.forEachSublayer(this.sublayers,(s=>{const v=s.write({},g);Object.keys(v).length>1&&f.push(v)})),f.length>0&&(v.sublayers=f)}writeUnappliedOverrides(s,v){v.sublayers=[],s.overrides.forEach((s=>{v.sublayers.push((0,w.o8)(s))}))}write(s,v){return s=super.write(s,v),!v||"web-scene"!==v.origin&&"portal-item"!==v.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,s,v):this._sublayerOverrides&&this.writeUnappliedOverrides(this._sublayerOverrides,s)),s}read(s,v){if(super.read(s,v),v&&("web-scene"===v.origin||"portal-item"===v.origin)&&null!=s&&Array.isArray(s.sublayers)){const g=this.readSublayerOverrides(s.sublayers,v);this.sublayers?this.applySublayerOverrides(this.sublayers,g):this._sublayerOverrides=g}}readSummaryStatistics(s,v){if("string"==typeof v.statisticsHRef){var g;const s=(0,F.fj)(null===(g=this.parsedUrl)||void 0===g?void 0:g.path,v.statisticsHRef);return new at({url:s})}return null}set elevationInfo(s){this._set("elevationInfo",s),this._validateElevationInfo()}load(s){const v=null!=s?s.signal:null,g=this.loadFromPortal({supportedTypes:["Scene Service"]},s).catch(Z.QP).then((()=>this._fetchService(v))).then((()=>this._fetchAssociatedFeatureService(v)));return this.addResolvingPromise(g),Promise.resolve(this)}loadAll(){return(0,M.g)(this,(s=>{ve.forEachSublayer(this.sublayers,(v=>{"building-group"!==v.type&&s(v)})),this.summaryStatistics&&s(this.summaryStatistics)}))}async saveAs(s,v){return this._debouncedSaveOperations(we.Xh.SAVE_AS,{...v,getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"},s)}async save(){const s={getTypeKeywords:()=>this._getTypeKeywords(),portalItemLayerType:"building-scene"};return this._debouncedSaveOperations(we.Xh.SAVE,s)}validateLayer(s){if(!s.layerType||"Building"!==s.layerType)throw new S.A("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:s.layerType})}_getTypeKeywords(){return["Building"]}async _fetchAssociatedFeatureService(s){try{const{portalItem:v}=await(0,Me.L)("".concat(this.url,"/layers/").concat(this.layerId),{sceneLayerItem:this.portalItem,customParameters:this.customParameters,apiKey:this.apiKey,signal:s});this.associatedFeatureServiceItem=v}catch(he){j.A.getLogger(this).warn("Associated feature service item could not be loaded",he)}}_validateElevationInfo(){const s=this.elevationInfo,v="Building scene layers";(0,pt.XF)(j.A.getLogger(this),(0,pt.B)(v,"absolute-height",s)),(0,pt.XF)(j.A.getLogger(this),(0,pt.tW)(v,s))}};(0,f._)([(0,O.MZ)({type:["BuildingSceneLayer"]})],ct.prototype,"operationalLayerType",void 0),(0,f._)([(0,O.MZ)({readOnly:!0})],ct.prototype,"allSublayers",void 0),(0,f._)([(0,O.MZ)(dt)],ct.prototype,"sublayers",void 0),(0,f._)([(0,x.w)("service","sublayers")],ct.prototype,"readSublayers",null),(0,f._)([(0,O.MZ)({type:ut,nonNullable:!0,json:{write:!0}})],ct.prototype,"filters",void 0),(0,f._)([(0,O.MZ)({type:String,json:{write:!0}})],ct.prototype,"activeFilterId",void 0),(0,f._)([(0,O.MZ)({readOnly:!0,type:at})],ct.prototype,"summaryStatistics",void 0),(0,f._)([(0,x.w)("summaryStatistics",["statisticsHRef"])],ct.prototype,"readSummaryStatistics",null),(0,f._)([(0,O.MZ)({type:[String],json:{read:!1}})],ct.prototype,"outFields",void 0),(0,f._)([(0,O.MZ)($.Fm)],ct.prototype,"fullExtent",void 0),(0,f._)([(0,O.MZ)($.fV)],ct.prototype,"legendEnabled",void 0),(0,f._)([(0,O.MZ)({type:["show","hide","hide-children"]})],ct.prototype,"listMode",void 0),(0,f._)([(0,O.MZ)((0,$.Qo)(T.A))],ct.prototype,"spatialReference",void 0),(0,f._)([(0,O.MZ)($.Yj)],ct.prototype,"elevationInfo",null),(0,f._)([(0,O.MZ)({json:{read:!1},readOnly:!0})],ct.prototype,"type",void 0),(0,f._)([(0,O.MZ)()],ct.prototype,"associatedFeatureServiceItem",void 0),ct=(0,f._)([(0,U.$)("esri.layers.BuildingSceneLayer")],ct);const ht=ct},9989:(s,v,g)=>{g.d(v,{A:()=>O});var f=g(80671),_=g(88706),b=g(83375),S=g(57453),w=(g(50886),g(89412),g(76761),g(59299)),M=g(68682),j=g(51715),A=g(78091),Z=g(10171);let F=class extends((0,_.O)(b.oY)){constructor(s){super(s),this.id=null,this.name=null,this.domains=null,this.templates=null}readDomains(s){const v={};for(const g of Object.keys(s))v[g]=(0,A.rS)(s[g]);return v}writeDomains(s,v){const g={};for(const _ of Object.keys(s)){var f;s[_]&&(g[_]=null===(f=s[_])||void 0===f?void 0:f.toJSON())}v.domains=g}};(0,f._)([(0,S.MZ)({json:{write:!0}})],F.prototype,"id",void 0),(0,f._)([(0,S.MZ)({json:{write:!0}})],F.prototype,"name",void 0),(0,f._)([(0,S.MZ)({json:{write:!0}})],F.prototype,"domains",void 0),(0,f._)([(0,w.w)("domains")],F.prototype,"readDomains",null),(0,f._)([(0,j.K)("domains")],F.prototype,"writeDomains",null),(0,f._)([(0,S.MZ)({type:[Z.A],json:{write:!0}})],F.prototype,"templates",void 0),F=(0,f._)([(0,M.$)("esri.layers.support.FeatureType")],F);const O=F},26487:(s,v,g)=>{g.d(v,{S:()=>a});var f=g(50886),_=g(26128);function jsonUtils_n(s,v,g){return!!t(s,v,g)}function r(s,v,g){return t(s,v,g)}function t(s,v,g){return s&&s.hasOwnProperty(v)?s[v]:g}const b={name:"supportsName",size:"supportsSize",contentType:"supportsContentType",keywords:"supportsKeywords",exifInfo:"supportsExifInfo"};function o(s){var v;const g=null===s||void 0===s||null===(v=s.supportedSpatialAggregationStatistics)||void 0===v?void 0:v.map((s=>s.toLowerCase()));return{envelope:!(null===g||void 0===g||!g.includes("envelopeaggregate")),centroid:!(null===g||void 0===g||!g.includes("centroidaggregate")),convexHull:!(null===g||void 0===g||!g.includes("convexhullaggregate"))}}function u(s,v){var g;const f=null===s||void 0===s||null===(g=s.supportedOperationsWithCacheHint)||void 0===g?void 0:g.map((s=>s.toLowerCase()));return!(null===f||void 0===f||!f.includes(v.toLowerCase()))}function a(s,v){return{analytics:n(s),attachment:i(s),data:c(s),metadata:d(s),operations:l(s.capabilities,s,v),query:y(s,v),queryRelated:m(s),queryTopFeatures:C(s),editing:h(s)}}function n(s){return{supportsCacheHint:u(s.advancedQueryCapabilities,"queryAnalytics")}}function i(s){const v=s.attachmentProperties,g={supportsName:!1,supportsSize:!1,supportsContentType:!1,supportsKeywords:!1,supportsExifInfo:!1,supportsCacheHint:u(s.advancedQueryCapabilities,"queryAttachments"),supportsResize:jsonUtils_n(s,"supportsAttachmentsResizing",!1)};return v&&Array.isArray(v)&&v.forEach((s=>{const v=b[s.name];v&&(g[v]=!!s.isEnabled)})),g}function c(s){return{isVersioned:jsonUtils_n(s,"isDataVersioned",!1),supportsAttachment:jsonUtils_n(s,"hasAttachments",!1),supportsM:jsonUtils_n(s,"hasM",!1),supportsZ:jsonUtils_n(s,"hasZ",!1)}}function d(s){return{supportsAdvancedFieldProperties:jsonUtils_n(s,"supportsFieldDescriptionProperty",!1)}}function l(s,v,g){const f=s?s.toLowerCase().split(",").map((s=>s.trim())):[],b=g?(0,_.qg)(g):null,S=f.includes(null!=b&&"MapServer"===b.serverType?"data":"query"),w=f.includes("editing")&&!v.datesInUnknownTimezone;let M=w&&f.includes("create"),j=w&&f.includes("delete"),A=w&&f.includes("update");const Z=f.includes("changetracking"),F=v.advancedQueryCapabilities;return w&&!(M||j||A)&&(M=j=A=!0),{supportsCalculate:jsonUtils_n(v,"supportsCalculate",!1),supportsTruncate:jsonUtils_n(v,"supportsTruncate",!1),supportsValidateSql:jsonUtils_n(v,"supportsValidateSql",!1),supportsAdd:M,supportsDelete:j,supportsEditing:w,supportsChangeTracking:Z,supportsQuery:S,supportsQueryAnalytics:jsonUtils_n(F,"supportsQueryAnalytic",!1),supportsQueryAttachments:jsonUtils_n(F,"supportsQueryAttachments",!1),supportsQueryTopFeatures:jsonUtils_n(F,"supportsTopFeaturesQuery",!1),supportsResizeAttachments:jsonUtils_n(v,"supportsAttachmentsResizing",!1),supportsSync:f.includes("sync"),supportsUpdate:A,supportsExceedsLimitStatistics:jsonUtils_n(v,"supportsExceedsLimitStatistics",!1),supportsAsyncConvert3D:jsonUtils_n(v,"supportsAsyncConvert3D",!1)}}function y(s,v){var g;const b=s.advancedQueryCapabilities,S=s.ownershipBasedAccessControlForFeatures,w=s.archivingInfo,M=s.currentVersion,j=!(null===v||void 0===v?void 0:v.includes("MapServer"))||M>=(0,f.A)("mapserver-pbf-version-support"),A=(0,_.Wo)(v),Z=new Set((null!==(g=s.supportedQueryFormats)&&void 0!==g?g:"").split(",").map((s=>s.toLowerCase().trim())));return{supportsStatistics:jsonUtils_n(b,"supportsStatistics",s.supportsStatistics),supportsPercentileStatistics:jsonUtils_n(b,"supportsPercentileStatistics",!1),supportsSpatialAggregationStatistics:jsonUtils_n(b,"supportsSpatialAggregationStatistics",!1),supportedSpatialAggregationStatistics:o(b),supportsCentroid:jsonUtils_n(b,"supportsReturningGeometryCentroid",!1),supportsDistance:jsonUtils_n(b,"supportsQueryWithDistance",!1),supportsDistinct:jsonUtils_n(b,"supportsDistinct",s.supportsAdvancedQueries),supportsExtent:jsonUtils_n(b,"supportsReturningQueryExtent",!1),supportsGeometryProperties:jsonUtils_n(b,"supportsReturningGeometryProperties",!1),supportsHavingClause:jsonUtils_n(b,"supportsHavingClause",!1),supportsOrderBy:jsonUtils_n(b,"supportsOrderBy",s.supportsAdvancedQueries),supportsPagination:jsonUtils_n(b,"supportsPagination",!1),supportsQuantization:jsonUtils_n(s,"supportsCoordinatesQuantization",!1),supportsQuantizationEditMode:jsonUtils_n(s,"supportsQuantizationEditMode",!1),supportsQueryGeometry:jsonUtils_n(s,"supportsReturningQueryGeometry",!1),supportsResultType:jsonUtils_n(b,"supportsQueryWithResultType",!1),supportsMaxRecordCountFactor:jsonUtils_n(b,"supportsMaxRecordCountFactor",!1),supportsSqlExpression:jsonUtils_n(b,"supportsSqlExpression",!1),supportsStandardizedQueriesOnly:jsonUtils_n(s,"useStandardizedQueries",!1),supportsTopFeaturesQuery:jsonUtils_n(b,"supportsTopFeaturesQuery",!1),supportsQueryByAnonymous:jsonUtils_n(S,"allowAnonymousToQuery",!0),supportsQueryByOthers:jsonUtils_n(S,"allowOthersToQuery",!0),supportsHistoricMoment:jsonUtils_n(w,"supportsQueryWithHistoricMoment",!1),supportsFormatPBF:j&&Z.has("pbf"),supportsDisjointSpatialRelationship:jsonUtils_n(b,"supportsDisjointSpatialRel",!1),supportsCacheHint:jsonUtils_n(b,"supportsQueryWithCacheHint",!1)||u(b,"query"),supportsDefaultSpatialReference:jsonUtils_n(b,"supportsDefaultSR",!1),supportsCompactGeometry:A,supportsFullTextSearch:jsonUtils_n(b,"supportsFullTextSearch",!1),maxRecordCountFactor:r(s,"maxRecordCountFactor",void 0),maxRecordCount:r(s,"maxRecordCount",void 0),standardMaxRecordCount:r(s,"standardMaxRecordCount",void 0),tileMaxRecordCount:r(s,"tileMaxRecordCount",void 0)}}function m(s){const v=s.advancedQueryCapabilities,g=jsonUtils_n(v,"supportsAdvancedQueryRelated",!1);return{supportsPagination:jsonUtils_n(v,"supportsQueryRelatedPagination",!1),supportsCount:g,supportsOrderBy:g,supportsCacheHint:u(v,"queryRelated")}}function C(s){return{supportsCacheHint:u(s.advancedQueryCapabilities,"queryTopFilter")}}function h(s){const v=s.ownershipBasedAccessControlForFeatures,g=s?s.advancedEditingCapabilities:void 0;return{supportsGeometryUpdate:jsonUtils_n(s,"allowGeometryUpdates",!0),supportsGlobalId:jsonUtils_n(s,"supportsApplyEditsWithGlobalIds",!1),supportsReturnServiceEditsInSourceSpatialReference:jsonUtils_n(s,"supportsReturnServiceEditsInSourceSR",!1),supportsRollbackOnFailure:jsonUtils_n(s,"supportsRollbackOnFailureParameter",!1),supportsUpdateWithoutM:jsonUtils_n(s,"allowUpdateWithoutMValues",!1),supportsUploadWithItemId:jsonUtils_n(s,"supportsAttachmentsByUploadId",!1),supportsDeleteByAnonymous:jsonUtils_n(v,"allowAnonymousToDelete",!0),supportsDeleteByOthers:jsonUtils_n(v,"allowOthersToDelete",!0),supportsUpdateByAnonymous:jsonUtils_n(v,"allowAnonymousToUpdate",!0),supportsUpdateByOthers:jsonUtils_n(v,"allowOthersToUpdate",!0),supportsAsyncApplyEdits:jsonUtils_n(g,"supportsAsyncApplyEdits",!1),zDefault:r(s,"zDefault",void 0)}}},34127:(s,v,g)=>{g.d(v,{q:()=>t});var f=g(8641);function t(s,v,g){if(null===g||void 0===g||!g.features||!g.hasZ)return;const _=(0,f.N)(g.geometryType,v,s.outSpatialReference);if(null!=_)for(const f of g.features)_(f.geometry)}}}]);
//# sourceMappingURL=5209.18186aa9.chunk.js.map