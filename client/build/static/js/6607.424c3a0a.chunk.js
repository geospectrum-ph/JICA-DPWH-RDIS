"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[6607],{16906:(r,s,u)=>{u.d(s,{X_:()=>i,i1:()=>o,zx:()=>d});var y=u(48237),c=u(49049);const f=96;function i(r,s){const u=s||r.extent,y=r.width,h=(0,c.GA)(null===u||void 0===u?void 0:u.spatialReference);return u&&y?u.width/y*h*c.dy*f:0}function o(r,s){return r/((0,c.GA)(s)*c.dy*f)}function d(r,s,u){return function a(r,s){return 0===s||(0,y.Sp)(r,s)||r<s}(r,s)&&function p(r,s){return 0===s||(0,y.Sp)(r,s)||r>s}(r,u)}},66607:(r,s,u)=>{u.r(s),u.d(s,{default:()=>K});var y=u(80671),c=u(53705),f=u(94631),h=u(4180),m=u(15461),v=u(13132),g=u(81618),b=u(57453),S=u(6493),_=(u(76761),u(50886),u(59299)),x=u(68682),M=u(51715),w=u(57532),I=u(84661),Z=u(16906),E=u(78395),L=u(78658),O=u(98878),P=u(80048),D=u(47478),T=u(53200),A=u(21642),F=u(1921),N=u(32465),R=u(68777),j=u(38362),J=u(66795),k=u(26905),U=u(32277),V=u(14324),q=u(3420),C=u(92792),z=u(60003),G=u(13918),B=u(52994);let H=class extends((0,T.d)((0,k.e)((0,j.j)((0,J.I)((0,P.V)((0,D.b)((0,F.q)((0,N.A)((0,v.P)((0,R.J)((0,O.p)((0,A.d)(L.A))))))))))))){constructor(){super(...arguments),this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeZone=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(r,s){return"string"==typeof r?{url:r,...s}:r}load(r){const s=null!=r?r.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},r).catch(g.QP).then((()=>this._fetchService(s)))),Promise.resolve(this)}readImageFormat(r,s){const u=s.supportedImageFormatTypes;return u&&u.includes("PNG32")?"png32":"png24"}writeSublayers(r,s,u,y){var c,f;if(!this.loaded||!r)return;const h=r.slice().reverse().flatten((r=>{let{sublayers:s}=r;return s&&s.toArray().reverse()})).toArray();let m=!1;if(null!==(c=this.capabilities)&&void 0!==c&&c.operations.supportsExportMap&&null!==(f=this.capabilities)&&void 0!==f&&null!==(f=f.exportMap)&&void 0!==f&&f.supportsDynamicLayers){const r=(0,w.aB)(y.origin);if(r===w.Gr.PORTAL_ITEM){const r=this.createSublayersForOrigin("service").sublayers;m=(0,z.Zx)(h,r,w.Gr.SERVICE)}else if(r>w.Gr.PORTAL_ITEM){const r=this.createSublayersForOrigin("portal-item");m=(0,z.Zx)(h,r.sublayers,(0,w.aB)(r.origin))}}const v=[],g={writeSublayerStructure:m,...y};let b=m;h.forEach((r=>{const s=r.write({},g);v.push(s),b=b||"user"===r.originOf("visible")})),v.some((r=>Object.keys(r).length>1))&&(s.layers=v),b&&(s.visibleLayers=h.filter((r=>r.visible)).map((r=>r.id)))}createExportImageParameters(r,s,u,y){var c;const f=(null===y||void 0===y?void 0:y.pixelRatio)||1;r&&this.version>=10&&(r=r.clone().shiftCentralMeridian());const h=new V.g({layer:this,floors:null===y||void 0===y?void 0:y.floors,scale:(0,Z.X_)({extent:r,width:s})*f}),m=h.toJSON();h.destroy();const v=null===y||void 0===y||!y.rotation||this.version<10.3?{}:{rotation:-y.rotation},g=null===(c=r)||void 0===c?void 0:c.spatialReference,b=(0,E.YX)(g);m.dpi*=f;const S={};if(null!==y&&void 0!==y&&y.timeExtent){const{start:r,end:s}=y.timeExtent.toJSON();S.time=r&&s&&r===s?""+r:"".concat(null!==r&&void 0!==r?r:"null",",").concat(null!==s&&void 0!==s?s:"null")}else this.timeInfo&&!this.timeInfo.hasLiveData&&(S.time="null,null");return{bbox:r&&r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:b,imageSR:b,size:s+","+u,...m,...v,...S}}async fetchImage(r,s,u,y){const{data:c}=await this._fetchImage("image",r,s,u,y);return c}async fetchImageBitmap(r,s,u,y){const{data:c,url:f}=await this._fetchImage("blob",r,s,u,y);return(0,q.m)(c,f,null===y||void 0===y?void 0:y.signal)}async fetchRecomputedExtents(){const r={...arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},query:{returnUpdates:!0,f:"json",...this.customParameters,token:this.apiKey}},{data:s}=await(0,c.A)(this.url,r),{extent:u,fullExtent:y,timeExtent:h}=s,m=u||y;return{fullExtent:m&&I.A.fromJSON(m),timeExtent:h&&f.A.fromJSON({start:h[0],end:h[1]})}}loadAll(){return(0,m.g)(this,(r=>{r(this.allSublayers)}))}serviceSupportsSpatialReference(r){return(0,G.D)(this,r)}async _fetchImage(r,s,u,y,f){var m,v,b;const S={responseType:r,signal:null!==(m=null===f||void 0===f?void 0:f.signal)&&void 0!==m?m:null,query:{...this.parsedUrl.query,...this.createExportImageParameters(s,u,y,f),f:"image",...this.refreshParameters,...this.customParameters,token:this.apiKey}},_=this.parsedUrl.path+"/export";if(null!=(null===(v=S.query)||void 0===v?void 0:v.dynamicLayers)&&(null===(b=this.capabilities)||void 0===b||null===(b=b.exportMap)||void 0===b||!b.supportsDynamicLayers))throw new h.A("mapimagelayer:dynamiclayer-not-supported","service ".concat(this.url," doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source."),{query:S.query});try{const{data:r}=await(0,c.A)(_,S);return{data:r,url:_}}catch(x){if((0,g.zf)(x))throw x;throw new h.A("mapimagelayer:image-fetch-error","Unable to load image: ".concat(_),{error:x})}}async _fetchService(r){if(this.sourceJSON)return void this.read(this.sourceJSON,{origin:"service",url:this.parsedUrl});const{data:s,ssl:u}=await(0,c.A)(this.parsedUrl.path,{query:{f:"json",...this.parsedUrl.query,...this.customParameters,token:this.apiKey},signal:r});u&&(this.url=this.url.replace(/^http:/i,"https:")),this.sourceJSON=s,this.read(s,{origin:"service",url:this.parsedUrl})}};(0,y._)([(0,b.MZ)((0,B.P6)("dateFieldsTimeReference"))],H.prototype,"dateFieldsTimeZone",void 0),(0,y._)([(0,b.MZ)({type:Boolean})],H.prototype,"datesInUnknownTimezone",void 0),(0,y._)([(0,b.MZ)()],H.prototype,"dpi",void 0),(0,y._)([(0,b.MZ)()],H.prototype,"gdbVersion",void 0),(0,y._)([(0,b.MZ)()],H.prototype,"imageFormat",void 0),(0,y._)([(0,_.w)("imageFormat",["supportedImageFormatTypes"])],H.prototype,"readImageFormat",null),(0,y._)([(0,b.MZ)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],H.prototype,"imageMaxHeight",void 0),(0,y._)([(0,b.MZ)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],H.prototype,"imageMaxWidth",void 0),(0,y._)([(0,b.MZ)()],H.prototype,"imageTransparency",void 0),(0,y._)([(0,b.MZ)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],H.prototype,"isReference",void 0),(0,y._)([(0,b.MZ)({json:{read:!1,write:!1}})],H.prototype,"labelsVisible",void 0),(0,y._)([(0,b.MZ)({type:["ArcGISMapServiceLayer"]})],H.prototype,"operationalLayerType",void 0),(0,y._)([(0,b.MZ)({json:{read:!1,write:!1}})],H.prototype,"popupEnabled",void 0),(0,y._)([(0,b.MZ)((0,B.P6)("preferredTimeReference"))],H.prototype,"preferredTimeZone",void 0),(0,y._)([(0,b.MZ)()],H.prototype,"sourceJSON",void 0),(0,y._)([(0,b.MZ)({json:{write:{ignoreOrigin:!0}}})],H.prototype,"sublayers",void 0),(0,y._)([(0,M.K)("sublayers",{layers:{type:[C.A]},visibleLayers:{type:[S.jz]}})],H.prototype,"writeSublayers",null),(0,y._)([(0,b.MZ)({type:["show","hide","hide-children"]})],H.prototype,"listMode",void 0),(0,y._)([(0,b.MZ)({json:{read:!1},readOnly:!0,value:"map-image"})],H.prototype,"type",void 0),(0,y._)([(0,b.MZ)(U.OZ)],H.prototype,"url",void 0),H=(0,y._)([(0,x.$)("esri.layers.MapImageLayer")],H);const K=H},14324:(r,s,u)=>{u.d(s,{g:()=>x});var y=u(80671),c=u(18763),f=u(25986),h=u(57453),m=(u(50886),u(89412),u(76761),u(68682)),v=u(16906),g=u(32277),b=u(84058),S=u(60003);const _={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let x=class extends c.A{constructor(r){super(r),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const r=this.visibleSublayers.map((r=>{const s=(0,b.f)(this.floors,r);return r.toExportImageJSON(s)}));return r.length?JSON.stringify(r):null}get hasDynamicLayers(){return this.layer&&(0,S.Sk)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(r){this._get("layer")!==r&&(this._set("layer",r),this.removeHandles("layer"),r&&this.addHandles([r.allSublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),r.on("sublayer-update",(r=>this.notifyChange(_[r.propertyName])))],"layer"))}get layers(){const r=this.visibleSublayers;return r?r.length?"show:"+r.map((r=>r.id)).join(","):"show:-1":null}get layerDefs(){var r;const s=!(null===(r=this.floors)||void 0===r||!r.length),u=this.visibleSublayers.filter((r=>null!=r.definitionExpression||s&&null!=r.floorInfo));return u.length?JSON.stringify(u.reduce(((r,s)=>{const u=(0,b.f)(this.floors,s),y=(0,f.m)(u,s.definitionExpression);return null!=y&&(r[s.id]=y),r}),{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const r=this.layer;return r&&(r.commitProperty("dpi"),r.commitProperty("imageFormat"),r.commitProperty("imageTransparency"),r.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const r=[];if(!this.layer)return r;const s=this.layer.sublayers,u=this.scale,t=s=>{s.visible&&(0===u||(0,v.zx)(u,s.minScale,s.maxScale))&&(s.sublayers?s.sublayers.forEach(t):r.unshift(s))};s&&s.forEach(t);const y=this._get("visibleSublayers");return!y||y.length!==r.length||y.some(((s,u)=>r[u]!==s))?r:y}toJSON(){const r=this.layer;let s={dpi:r.dpi,format:r.imageFormat,transparent:r.imageTransparency,gdbVersion:r.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?s.dynamicLayers=this.dynamicLayers:s={...s,layers:this.layers,layerDefs:this.layerDefs},s}};(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"dynamicLayers",null),(0,y._)([(0,h.MZ)()],x.prototype,"floors",void 0),(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"hasDynamicLayers",null),(0,y._)([(0,h.MZ)()],x.prototype,"layer",null),(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"layers",null),(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"layerDefs",null),(0,y._)([(0,h.MZ)({type:Number})],x.prototype,"scale",void 0),(0,y._)([(0,h.MZ)(g.ui)],x.prototype,"timeExtent",void 0),(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"version",null),(0,y._)([(0,h.MZ)({readOnly:!0})],x.prototype,"visibleSublayers",null),x=(0,y._)([(0,m.$)("esri.layers.mixins.ExportImageParameters")],x)},84058:(r,s,u)=>{function o(r){var s;const u=r.layer;return"floorInfo"in u&&null!==(s=u.floorInfo)&&void 0!==s&&s.floorField&&"floors"in r.view?l(r.view.floors,u.floorInfo.floorField):null}function n(r,s){var u;return"floorInfo"in s&&null!==(u=s.floorInfo)&&void 0!==u&&u.floorField?l(r,s.floorInfo.floorField):null}function l(r,s){if(null===r||void 0===r||!r.length)return null;const u=r.filter((r=>""!==r)).map((r=>"'".concat(r,"'")));return u.push("''"),"".concat(s," IN (").concat(u.join(","),") OR ").concat(s," IS NULL")}u.d(s,{E:()=>o,f:()=>n})},13918:(r,s,u)=>{u.d(s,{D:()=>e});var y=u(26128);const c=[];function e(r,s){var u;if((0,y.Wo)(null!==(u=r.url)&&void 0!==u?u:""))return!0;const{wkid:f}=s;for(const y of c){var h;if((null!==(h=r.version)&&void 0!==h?h:0)>=y[0])return!0;if("function"==typeof y[1]&&(y[1]=y[1]()),y[1].has(f))return!1}return!0}c.push([10.91,()=>{const r=new Set([9709,9716,9741,9761,9766]);for(let s=9712;s<=9713;s++)r.add(s);for(let s=9748;s<=9749;s++)r.add(s);for(let s=20904;s<=20932;s++)r.add(s);for(let s=21004;s<=21032;s++)r.add(s);for(let s=21207;s<=21264;s++)r.add(s);for(let s=21307;s<=21364;s++)r.add(s);for(let s=23301;s<=23333;s++)r.add(s);for(let s=102759;s<=102760;s++)r.add(s);for(let s=102934;s<=102955;s++)r.add(s);return r}]),c.push([10.9,()=>{const r=new Set([9300,9354,9364,9367,9373,9377,9387,9456,9473,9498,9678,9680,29874,103599,103872,104028]);for(let s=9356;s<=9360;s++)r.add(s);for(let s=9404;s<=9407;s++)r.add(s);for(let s=9476;s<=9482;s++)r.add(s);for(let s=9487;s<=9494;s++)r.add(s);for(let s=9697;s<=9699;s++)r.add(s);return r}]),c.push([10.81,()=>{const r=new Set([9265,9333,103598,103699]);for(let s=9248;s<=9254;s++)r.add(s);for(let s=9271;s<=9273;s++)r.add(s);for(let s=9284;s<=9285;s++)r.add(s);for(let s=21453;s<=21463;s++)r.add(s);return r}]),c.push([10.8,()=>{const r=new Set([8088,8395,8428,8433,8531,8687,8692,8694,8699,8900,9003,9006,9009,9012,9017,9191]);for(let s=8035;s<=8036;s++)r.add(s);for(let s=8455;s<=8456;s++)r.add(s);for(let s=8518;s<=8529;s++)r.add(s);for(let s=8533;s<=8536;s++)r.add(s);for(let s=8538;s<=8540;s++)r.add(s);for(let s=8677;s<=8679;s++)r.add(s);for(let s=8902;s<=8903;s++)r.add(s);for(let s=8907;s<=8910;s++)r.add(s);for(let s=8949;s<=8951;s++)r.add(s);for(let s=8972;s<=8987;s++)r.add(s);for(let s=9039;s<=9040;s++)r.add(s);for(let s=9068;s<=9069;s++)r.add(s);for(let s=9140;s<=9141;s++)r.add(s);for(let s=9148;s<=9150;s++)r.add(s);for(let s=9153;s<=9159;s++)r.add(s);for(let s=9205;s<=9218;s++)r.add(s);for(let s=9221;s<=9222;s++)r.add(s);for(let s=54098;s<=54101;s++)r.add(s);return r}]),c.push([10.71,()=>{const r=new Set([6316]);for(let s=8351;s<=8353;s++)r.add(s);for(let s=9294;s<=9297;s++)r.add(s);for(let s=22619;s<=22621;s++)r.add(s);for(let s=103586;s<=103594;s++)r.add(s);return r}]),c.push([10.7,()=>{const r=new Set([8387,8391,8427,8545,8682,8685,8818,31370,104022,104024,104975]);for(let s=8065;s<=8068;s++)r.add(s);for(let s=8082;s<=8083;s++)r.add(s);for(let s=8379;s<=8385;s++)r.add(s);for(let s=8836;s<=8840;s++)r.add(s);for(let s=8857;s<=8860;s++)r.add(s);for(let s=53035;s<=53037;s++)r.add(s);for(let s=54090;s<=54091;s++)r.add(s);for(let s=102498;s<=102499;s++)r.add(s);return r}]),c.push([10.61,()=>new Set([102497])]),c.push([10.6,()=>{const r=new Set([7803,7805,7887,8086,8232,8237,8240,8246,8249,8252,8255,9019,9391]);for(let s=7755;s<=7787;s++)r.add(s);for(let s=7791;s<=7795;s++)r.add(s);for(let s=7799;s<=7801;s++)r.add(s);for(let s=7825;s<=7831;s++)r.add(s);for(let s=7877;s<=7878;s++)r.add(s);for(let s=7882;s<=7883;s++)r.add(s);for(let s=7991;s<=7992;s++)r.add(s);for(let s=8042;s<=8043;s++)r.add(s);for(let s=8058;s<=8059;s++)r.add(s);for(let s=8311;s<=8348;s++)r.add(s);for(let s=9060;s<=9067;s++)r.add(s);for(let s=102562;s<=102568;s++)r.add(s);for(let s=102799;s<=102900;s++)r.add(s);return r}])}}]);
//# sourceMappingURL=6607.424c3a0a.chunk.js.map