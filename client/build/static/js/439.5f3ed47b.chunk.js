"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[439],{73602:(o,i,s)=>{s.d(i,{P:()=>j});var l=s(4180),a=s(52482),u=s(37531),c=s(4270),d=s(51523),h=s(76402),m=s(57532),f=s(57453),M=s(28330),V=s(85173);function j(o){var i;const s=null!==(i=null===o||void 0===o?void 0:o.origins)&&void 0!==i?i:[void 0];return(i,l)=>{const a=function U(o,i,s){var l;if("resource"===(null===o||void 0===o?void 0:o.type))return function w(o,i,s){const l=(0,h.z4)(i,s);return{type:String,read:(o,i,s)=>{const a=(0,V.r)(o,i,s);return l.type===String?a:"function"==typeof l.type?new l.type({url:a}):void 0},write:{writer(i,a,d,h){if(null===h||void 0===h||!h.resources)return"string"==typeof i?void(a[d]=(0,V.t)(i,h)):void(a[d]=i.write({},h));const f=function x(o){return null==o?null:"string"==typeof o?o:o.url}(i),Z=(0,V.t)(f,{...h,verifyItemRelativeUrls:null!==h&&void 0!==h&&h.verifyItemRelativeUrls?{writtenUrls:h.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},V.M.NO),q=l.type!==String&&(!(0,u.H)(this)||(null===h||void 0===h?void 0:h.origin)&&this.originIdOf(s)>(0,m.aB)(h.origin)),F={object:this,propertyName:s,value:i,targetUrl:Z,dest:a,targetPropertyName:d,context:h,params:o};null!==h&&void 0!==h&&h.portalItem&&Z&&!(0,c.oP)(Z)?q&&null!==o&&void 0!==o&&o.contentAddressed?I(F):q?function N(o){var i;const{context:s,targetUrl:l,params:a,value:u,dest:d,targetPropertyName:h}=o;if(!s.portalItem)return;const m=s.portalItem.resourceFromPath(l),f=S(u,l,s),V=(0,M.n)(f),Z=(0,c.Zo)(m.path),q=null!==(i=null===a||void 0===a?void 0:a.compress)&&void 0!==i&&i;V===Z?(s.resources&&b({...o,resource:m,content:f,compress:q,updates:s.resources.toUpdate}),d[h]=l):I(o)}(F):function P(o){let{context:i,targetUrl:s,dest:l,targetPropertyName:a}=o;i.portalItem&&i.resources&&(i.resources.toKeep.push({resource:i.portalItem.resourceFromPath(s),compress:!1}),l[a]=s)}(F):null!==h&&void 0!==h&&h.portalItem&&(null==Z||null!=(0,V.i)(Z)||(0,c.w8)(Z)||q)?I(F):a[d]=Z}}}}(o,i,s);switch(null!==(l=null===o||void 0===o?void 0:o.type)&&void 0!==l?l:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:o,write:i}=V.b;return{read:o,write:i}}}}(o,i,l);for(const o of s){const s=(0,f.rM)(i,o,l);for(const o in a)s[o]=a[o]}}}function I(o){var i,s,u,h;const{targetUrl:m,params:f,value:Z,context:q,dest:F,targetPropertyName:B}=o;if(!q.portalItem)return;const C=(0,V.p)(m),Y=S(Z,m,q);if(null!==f&&void 0!==f&&f.contentAddressed&&"json"!==Y.type)return void(null===(i=q.messages)||void 0===i||i.push(new l.A("persistable:contentAddressingUnsupported",'Property "'.concat(B,'" is trying to serializing a resource with content of type ').concat(Y.type," with content addressing. Content addressing is only supported for json resources."),{content:Y})));const $=null!==f&&void 0!==f&&f.contentAddressed&&"json"===Y.type?(0,a.d)(Y.jsonString):null!==(s=null===C||void 0===C?void 0:C.filename)&&void 0!==s?s:(0,d.lk)(),G=(0,c.fj)(null!==(u=null===f||void 0===f?void 0:f.prefix)&&void 0!==u?u:null===C||void 0===C?void 0:C.prefix,$),J="".concat(G,".").concat((0,M.n)(Y));if(null!==f&&void 0!==f&&f.contentAddressed&&q.resources&&"json"===Y.type){var W;const o=null!==(W=q.resources.toKeep.find((o=>{let{resource:i}=o;return i.path===J})))&&void 0!==W?W:q.resources.toAdd.find((o=>{let{resource:i}=o;return i.path===J}));if(o)return void(F[B]=o.resource.itemRelativeUrl)}const K=q.portalItem.resourceFromPath(J);(0,c.w8)(m)&&q.resources&&q.resources.pendingOperations.push((0,c.tk)(m).then((o=>{K.path="".concat(G,".").concat((0,M.n)({type:"blob",blob:o})),F[B]=K.itemRelativeUrl})).catch((()=>{})));const X=null!==(h=null===f||void 0===f?void 0:f.compress)&&void 0!==h&&h;q.resources&&b({...o,resource:K,content:Y,compress:X,updates:q.resources.toAdd}),F[B]=K.itemRelativeUrl}function b(o){let{object:i,propertyName:s,updates:l,resource:a,content:u,compress:c}=o;l.push({resource:a,content:u,compress:c,finish:o=>{!function O(o,i,s){"string"==typeof o[i]?o[i]=s.url:o[i].url=s.url}(i,s,o)}})}function S(o,i,s){return"string"==typeof o?{type:"url",url:i}:{type:"json",jsonString:JSON.stringify(o.toJSON(s))}}},66912:(o,i,s)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function t(o,i,s,l,a,u,c,d,h){return[o,i,s,l,a,u,c,d,h]}s.d(i,{fA:()=>t,vt:()=>e,zK:()=>l});const l=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l,clone:function r(o){return[o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8]]},create:e,createView:function n(o,i){return new Float64Array(o,i,9)},fromValues:t},Symbol.toStringTag,{value:"Module"}))},77912:(o,i,s)=>{function e(){return[0,0,0,1]}function r(o){return[o[0],o[1],o[2],o[3]]}s.d(i,{o8:()=>r,vt:()=>e,zK:()=>l});const l=[0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:l,clone:r,create:e,createView:function n(o,i){return new Float64Array(o,i,4)},fromValues:function t(o,i,s,l){return[o,i,s,l]}},Symbol.toStringTag,{value:"Module"}))},46064:(o,i,s)=>{s.d(i,{A6:()=>T,Xd:()=>v,Xr:()=>O,hZ:()=>f,lw:()=>x,t2:()=>J,x8:()=>b});var l=s(66912),a=s(77912),u=s(83800),c=s(43438),d=s(54880),h=s(14223);function b(o,i,s){s*=.5;const l=Math.sin(s);return o[0]=l*i[0],o[1]=l*i[1],o[2]=l*i[2],o[3]=Math.cos(s),o}function v(o,i){const s=2*Math.acos(i[3]),l=Math.sin(s/2);return l>(0,c.FD)()?(o[0]=i[0]/l,o[1]=i[1]/l,o[2]=i[2]/l):(o[0]=1,o[1]=0,o[2]=0),s}function x(o,i,s){const l=i[0],a=i[1],u=i[2],c=i[3],d=s[0],h=s[1],m=s[2],f=s[3];return o[0]=l*f+c*d+a*m-u*h,o[1]=a*f+c*h+u*d-l*m,o[2]=u*f+c*m+l*h-a*d,o[3]=c*f-l*d-a*h-u*m,o}function z(o,i,s,l){const a=i[0],u=i[1],d=i[2],h=i[3];let m,f,M,V,Z,q=s[0],F=s[1],B=s[2],C=s[3];return f=a*q+u*F+d*B+h*C,f<0&&(f=-f,q=-q,F=-F,B=-B,C=-C),1-f>(0,c.FD)()?(m=Math.acos(f),M=Math.sin(m),V=Math.sin((1-l)*m)/M,Z=Math.sin(l*m)/M):(V=1-l,Z=l),o[0]=V*a+Z*q,o[1]=V*u+Z*F,o[2]=V*d+Z*B,o[3]=V*h+Z*C,o}function O(o,i){return o[0]=-i[0],o[1]=-i[1],o[2]=-i[2],o[3]=i[3],o}function S(o,i){const s=i[0]+i[4]+i[8];let l;if(s>0)l=Math.sqrt(s+1),o[3]=.5*l,l=.5/l,o[0]=(i[5]-i[7])*l,o[1]=(i[6]-i[2])*l,o[2]=(i[1]-i[3])*l;else{let s=0;i[4]>i[0]&&(s=1),i[8]>i[3*s+s]&&(s=2);const a=(s+1)%3,u=(s+2)%3;l=Math.sqrt(i[3*s+s]-i[3*a+a]-i[3*u+u]+1),o[s]=.5*l,l=.5/l,o[3]=(i[3*a+u]-i[3*u+a])*l,o[a]=(i[3*a+s]+i[3*s+a])*l,o[u]=(i[3*u+s]+i[3*s+u])*l}return o}function T(o,i,s,l){const a=.5*Math.PI/180;i*=a,s*=a,l*=a;const u=Math.sin(i),c=Math.cos(i),d=Math.sin(s),h=Math.cos(s),m=Math.sin(l),f=Math.cos(l);return o[0]=u*h*f-c*d*m,o[1]=c*d*f+u*h*m,o[2]=c*h*m-u*d*f,o[3]=c*h*f+u*d*m,o}const m=h.c,f=h.s,M=h.g,V=x,Z=h.d,q=h.h,F=h.l,B=h.i,C=B,Y=h.j,$=Y,G=h.n,J=h.a,W=h.e;const K=(0,u.vt)(),X=(0,u.fA)(1,0,0),H=(0,u.fA)(0,1,0);const Q=(0,a.vt)(),ee=(0,a.vt)();const te=(0,l.vt)();Object.freeze(Object.defineProperty({__proto__:null,add:M,calculateW:function k(o,i){const s=i[0],l=i[1],a=i[2];return o[0]=s,o[1]=l,o[2]=a,o[3]=Math.sqrt(Math.abs(1-s*s-l*l-a*a)),o},conjugate:O,copy:m,dot:q,equals:W,exactEquals:J,fromEuler:T,fromMat3:S,getAxisAngle:v,identity:function I(o){return o[0]=0,o[1]=0,o[2]=0,o[3]=1,o},invert:function L(o,i){const s=i[0],l=i[1],a=i[2],u=i[3],c=s*s+l*l+a*a+u*u,d=c?1/c:0;return o[0]=-s*d,o[1]=-l*d,o[2]=-a*d,o[3]=u*d,o},len:C,length:B,lerp:F,mul:V,multiply:x,normalize:G,random:function E(o){const i=c.Ov,s=i(),l=i(),a=i(),u=Math.sqrt(1-s),d=Math.sqrt(s);return o[0]=u*Math.sin(2*Math.PI*l),o[1]=u*Math.cos(2*Math.PI*l),o[2]=d*Math.sin(2*Math.PI*a),o[3]=d*Math.cos(2*Math.PI*a),o},rotateX:function y(o,i,s){s*=.5;const l=i[0],a=i[1],u=i[2],c=i[3],d=Math.sin(s),h=Math.cos(s);return o[0]=l*h+c*d,o[1]=a*h+u*d,o[2]=u*h-a*d,o[3]=c*h-l*d,o},rotateY:function A(o,i,s){s*=.5;const l=i[0],a=i[1],u=i[2],c=i[3],d=Math.sin(s),h=Math.cos(s);return o[0]=l*h-u*d,o[1]=a*h+c*d,o[2]=u*h+l*d,o[3]=c*h-a*d,o},rotateZ:function _(o,i,s){s*=.5;const l=i[0],a=i[1],u=i[2],c=i[3],d=Math.sin(s),h=Math.cos(s);return o[0]=l*h+a*d,o[1]=a*h-l*d,o[2]=u*h+c*d,o[3]=c*h-u*d,o},rotationTo:function R(o,i,s){const l=(0,d.k)(i,s);return l<-.999999?((0,d.b)(K,X,i),(0,d.D)(K)<1e-6&&(0,d.b)(K,H,i),(0,d.n)(K,K),b(o,K,Math.PI),o):l>.999999?(o[0]=0,o[1]=0,o[2]=0,o[3]=1,o):((0,d.b)(K,i,s),o[0]=K[0],o[1]=K[1],o[2]=K[2],o[3]=1+l,G(o,o))},scale:Z,set:f,setAxes:function ot(o,i,s,l){const a=te;return a[0]=s[0],a[3]=s[1],a[6]=s[2],a[1]=l[0],a[4]=l[1],a[7]=l[2],a[2]=-i[0],a[5]=-i[1],a[8]=-i[2],G(o,S(o,a))},setAxisAngle:b,slerp:z,sqlerp:function tt(o,i,s,l,a,u){return z(Q,i,a,u),z(ee,s,l,u),z(o,Q,ee,2*u*(1-u)),o},sqrLen:$,squaredLength:Y,str:function D(o){return"quat("+o[0]+", "+o[1]+", "+o[2]+", "+o[3]+")"}},Symbol.toStringTag,{value:"Module"}))},30439:(o,i,s)=>{s.r(i),s.d(i,{default:()=>ft});var l=s(80671),a=s(21365),u=s(39652),c=s(4180),d=s(89412),h=s(13132),m=s(81618),f=s(57453),M=s(6493),V=(s(76761),s(50886),s(59299)),Z=s(68682),q=s(54880),F=s(83800),B=s(84661),C=s(78658),Y=s(98878),$=s(47478),G=s(21642),J=s(1921),W=s(32465),K=s(38362),X=s(96712),H=s(26128),Q=s(32277),ee=s(67871),te=s(88706),oe=s(78726),ie=s(83375),re=s(73602),ne=s(46064),se=s(77912),le=s(43438);const ae=(0,F.vt)(),ue=(0,se.vt)(),pe=(0,se.vt)(),ce=(0,se.vt)(),de=(0,F.fA)(0,0,1),ye=(0,F.fA)(0,1,0),he=(0,F.fA)(1,0,0);function b(o){(0,q.c)(ae,o),(0,q.n)(ae,ae);const i=Math.atan2(ae[1],ae[0]),s=(0,ne.x8)((0,se.vt)(),de,-i);(0,q.u)(ae,ae,s);const l=-1*Math.atan2(ae[2],ae[0]);return[(0,le.ct)(i)+270,(0,le.ct)(l)+90]}function g(o,i){return(0,ne.x8)(pe,de,(0,le.DF)(o-270)),(0,ne.x8)(ce,ye,(0,le.DF)(i-90)),(0,ne.lw)(ue,pe,ce),(0,q.c)(ae,he),(0,q.u)(ae,ae,ue),(0,q.n)(ae,ae),[ae[0],ae[1],ae[2]]}var ve=s(91779);let me=class extends((0,te.O)(ie.oY)){constructor(o){super(o),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(o),0,!0)}set orientation(o){const i=g(o,this.tilt);this._set("normal",i),this._set("orientation",o)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(i),0,!0)}set tilt(o){const i=g(this.orientation,o);this._set("normal",i),this._set("tilt",o)}};(0,l._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],me.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],me.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,ve.w)((o=>oe.ie.normalize((0,M.GB)(o),0,!0)))],me.prototype,"orientation",null),(0,l._)([(0,f.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,ve.w)((o=>oe.ie.normalize((0,M.GB)(o),0,!0)))],me.prototype,"tilt",null),(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],me.prototype,"normal",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],me.prototype,"point",void 0),me=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelSlice")],me);const ge=me;var fe=s(85173);let be=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.enabled=!0,this.href=null,this.id=null,this.label="",this.normal=null,this.point=null,this.sizeInPixel=null,this.slices=null,this.timeId=0,this.variableId=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(o),0,!0)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(i),0,!0)}};(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!0,write:!0}})],be.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:String,json:{origins:{service:{read:fe.r}},write:{enabled:!0,isRequired:!0}}}),(0,re.P)({origins:["web-scene"],type:"resource",prefix:"sections",compress:!0})],be.prototype,"href",void 0),(0,l._)([(0,f.MZ)({type:M.jz,json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"id",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],be.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],be.prototype,"orientation",null),(0,l._)([(0,f.MZ)({type:Number,clonable:!1,readOnly:!0,range:{min:0,max:360}})],be.prototype,"tilt",null),(0,l._)([(0,f.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"normal",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"point",void 0),(0,l._)([(0,f.MZ)({type:[M.jz],json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"sizeInPixel",void 0),(0,l._)([(0,f.MZ)({type:[ge],json:{write:!0}})],be.prototype,"slices",void 0),(0,l._)([(0,f.MZ)({type:M.jz,json:{default:0,write:!0}})],be.prototype,"timeId",void 0),(0,l._)([(0,f.MZ)({type:M.jz,json:{write:{enabled:!0,isRequired:!0}}})],be.prototype,"variableId",void 0),be=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelSection")],be);const Se=be;let xe=class extends ie.oY{constructor(){super(...arguments),this.diffuseFactor=.5,this.specularFactor=.5}};(0,l._)([(0,f.MZ)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],xe.prototype,"diffuseFactor",void 0),(0,l._)([(0,f.MZ)({type:Number,range:{min:0,max:1},json:{default:.5,write:!0}})],xe.prototype,"specularFactor",void 0),xe=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelSimpleShading")],xe);const Me=xe;let _e=class extends ie.oY{constructor(){super(...arguments),this.continuity=null,this.hasNoData=!1,this.noData=0,this.offset=0,this.scale=1,this.type=null}};(0,l._)([(0,f.MZ)({type:["discrete","continuous"],json:{write:!0}})],_e.prototype,"continuity",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],_e.prototype,"hasNoData",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],_e.prototype,"noData",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],_e.prototype,"offset",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],_e.prototype,"scale",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],_e.prototype,"type",void 0),_e=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelFormat")],_e);const we=_e;let je=class extends ie.oY{constructor(){super(...arguments),this.id=null,this.description="",this.name=null,this.originalFormat=null,this.renderingFormat=null,this.unit="",this.volumeId=0,this.type=null}};(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],je.prototype,"id",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],je.prototype,"description",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],je.prototype,"name",void 0),(0,l._)([(0,f.MZ)({type:we,json:{write:!0}})],je.prototype,"originalFormat",void 0),(0,l._)([(0,f.MZ)({type:we,json:{write:{enabled:!0,isRequired:!0}}})],je.prototype,"renderingFormat",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],je.prototype,"unit",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],je.prototype,"volumeId",void 0),(0,l._)([(0,f.MZ)({type:["stc-hot-spot-results","stc-cluster-outlier-results","stc-estimated-bin","generic-nearest-interpolated"],json:{write:!0}})],je.prototype,"type",void 0),je=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelVariable")],je);const Ve=je;var Ae=s(66004),Ze=s(22123);let ze=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.color=Ze.A.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label="",this.colorLocked=!1}};(0,l._)([(0,f.MZ)({type:Ze.A,json:{type:[M.jz],write:{enabled:!0,isRequired:!0}}})],ze.prototype,"color",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],ze.prototype,"value",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!0,write:!0}})],ze.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],ze.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!1,write:!0}})],ze.prototype,"colorLocked",void 0),ze=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelIsosurface")],ze);const Ie=ze;var Re=s(86479),Ne=s(48237);let Te=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.color=null,this.position=0}};(0,l._)([(0,f.MZ)({type:Ze.A,json:{type:[M.jz],write:{enabled:!0,isRequired:!0}}})],Te.prototype,"color",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],Te.prototype,"position",void 0),Te=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelColorStop")],Te);const qe=Te;let De=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.opacity=1,this.position=0}};(0,l._)([(0,f.MZ)({type:Number,json:{name:"alpha",write:{enabled:!0,isRequired:!0}}})],De.prototype,"opacity",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],De.prototype,"position",void 0),De=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelOpacityStop")],De);const Pe=De;let Fe=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.enabled=!1,this.range=null}};(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!1,write:!0}})],Fe.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],Fe.prototype,"range",void 0),Fe=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelRangeFilter")],Fe);const Le=Fe;var Oe,Be;(Be=Oe||(Oe={}))[Be.Color=1]="Color",Be[Be.Alpha=2]="Alpha",Be[Be.Both=3]="Both";let Ee=class extends((0,te.O)(ie.oY)){constructor(o){super(o),this.interpolation=null,this.stretchRange=null,this.rangeFilter=null,this._colorMapSize=256,this.colorStops=new(u.A.ofType(qe)),this.opacityStops=new(u.A.ofType(Pe))}set colorStops(o){this._set("colorStops",(0,Re.V)(o,this._get("colorStops"),u.A.ofType(qe)))}set opacityStops(o){this._set("opacityStops",(0,Re.V)(o,this._get("opacityStops"),u.A.ofType(Pe)))}getPreviousNext(o,i,s){let l=o;for(;--l>0&&i[l].type!==s&&i[l].type!==Oe.Both;);let a=o;const u=i.length;for(;++a<u&&i[a].type!==s&&i[a].type!==Oe.Both;);return[l,a]}get rasterizedTransferFunction(){const o=[];if(this.colorStops.length<2)return o;const i=[],s=[];for(const u of this.colorStops){if(!u.color)return o;s.push({color:{r:u.color.r,g:u.color.g,b:u.color.b,a:Math.round(255*(1-u.color.a))},position:u.position,type:Oe.Color})}if(0===this.opacityStops.length)for(const u of s)i.push({color:u.color,position:u.position});else{for(const i of this.opacityStops){const o=(0,Ne.qE)(i.position,0,1),l=Math.round(255*(0,Ne.qE)(1-i.opacity,0,1));let a=!1;for(const i of s)if(i.type===Oe.Color&&Math.abs(i.position-o)<1e-5){i.color.a=l,i.type=Oe.Both,a=!0;break}a||s.push({color:{r:0,g:0,b:0,a:l},position:i.position,type:Oe.Alpha})}s.sort(((o,i)=>o.position<i.position?-1:1));const o=s.length;for(let i=0;i<o;++i){const l=s[i];if(l.type!==Oe.Both)if(l.type===Oe.Color){const[a,u]=this.getPreviousNext(i,s,Oe.Alpha);if(-1!==a&&u!==o){const o=(l.position-s[a].position)/(s[u].position-s[a].position);l.color.a=Math.round((0,Ne.Cc)(s[a].color.a,s[u].color.a,o))}else l.color.a=-1!==a?s[a].color.a:s[u].color.a}else{const[a,u]=this.getPreviousNext(i,s,Oe.Color);if(-1!==a&&u!==o){const o=(l.position-s[a].position)/(s[u].position-s[a].position),i=s[a].color,c=s[u].color;Ue.forEach((s=>{l.color[s]=Math.round((0,Ne.Cc)(i[s],c[s],o))}))}else-1!==a?Ue.forEach((o=>{l.color[o]=s[a].color[o]})):Ue.forEach((o=>{l.color[o]=s[u].color[o]}))}}for(const l of s)i.push({color:l.color,position:l.position})}i[0].position=0,i[i.length-1].position=1;let l=0,a=1;for(let u=0;u<this._colorMapSize;++u){const s=u/this._colorMapSize;for(;s>i[a].position;)l=a++;const c=(s-i[l].position)/(i[a].position-i[l].position),d=i[l].color,h=i[a].color,m=new Ze.A;Ue.forEach((o=>{m[o]=Math.round((0,Ne.Cc)(d[o],h[o],c))})),m.a=(0,Ne.qE)(1-(0,Ne.Cc)(d.a,h.a,c)/255,0,1),o.push(m)}return o}getColorForContinuousDataValue(o,i){const s=this.rasterizedTransferFunction;if(this.colorStops.length<2||!Array.isArray(this.stretchRange)||this.stretchRange.length<2||s.length<256)return null;let l=this.stretchRange[0],a=this.stretchRange[1];if(l>a){const o=l;l=a,a=o}o=(0,Ne.qE)(o,l,a);const u=s[Math.round((o-l)/(a-l)*(this._colorMapSize-1))].clone();return i||(u.a=1),u}};(0,l._)([(0,f.MZ)({type:["linear","nearest"],json:{write:!0}})],Ee.prototype,"interpolation",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],Ee.prototype,"stretchRange",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(qe),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.colorStops&&this.colorStops.length>0}}}}})],Ee.prototype,"colorStops",null),(0,l._)([(0,f.MZ)({type:u.A.ofType(Pe),json:{read:{source:"alphaStops"},write:{enabled:!0,target:"alphaStops",overridePolicy(){return{enabled:!!this.opacityStops&&this.opacityStops.length>0}}}}})],Ee.prototype,"opacityStops",null),(0,l._)([(0,f.MZ)({type:Le,json:{write:!0}})],Ee.prototype,"rangeFilter",void 0),(0,l._)([(0,f.MZ)({type:[Ze.A],clonable:!1,json:{read:!1}})],Ee.prototype,"rasterizedTransferFunction",null),Ee=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelTransferFunctionStyle")],Ee);const Ce=Ee,Ue=["r","g","b"];let Ye=class extends((0,te.O)(ie.oY)){constructor(){super(...arguments),this.color=Ze.A.fromArray([0,0,0,0]),this.value=0,this.enabled=!0,this.label=""}};(0,l._)([(0,f.MZ)({type:Ze.A,json:{type:[M.jz],write:{enabled:!0,isRequired:!0}}})],Ye.prototype,"color",void 0),(0,l._)([(0,f.MZ)({type:M.jz,json:{write:{enabled:!0,isRequired:!0}}})],Ye.prototype,"value",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!0,write:!0}})],Ye.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],Ye.prototype,"label",void 0),Ye=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelUniqueValue")],Ye);const ke=Ye;var $e;let Ge=$e=class extends ie.oY{constructor(o){super(o),this.variableId=0,this.label="",this.transferFunction=null,this.uniqueValues=null,this.isosurfaces=null,this.uniqueValues=new(u.A.ofType(ke)),this.isosurfaces=new(u.A.ofType(Ie))}clone(){return new $e({variableId:this.variableId,label:this.label,transferFunction:(0,Ae.o8)(this.transferFunction),uniqueValues:(0,Ae.o8)(this.uniqueValues),isosurfaces:(0,Ae.o8)(this.isosurfaces)})}};(0,l._)([(0,f.MZ)({type:M.jz,json:{write:{enabled:!0,isRequired:!0}}})],Ge.prototype,"variableId",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],Ge.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:Ce,json:{write:{enabled:!0,overridePolicy(){return{enabled:!this.uniqueValues||this.uniqueValues.length<1}}}}})],Ge.prototype,"transferFunction",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(ke),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.uniqueValues&&this.uniqueValues.length>0}}}}})],Ge.prototype,"uniqueValues",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(Ie),json:{write:{enabled:!0,overridePolicy(){const o=!this.uniqueValues||this.uniqueValues.length<1,i=!!this.isosurfaces&&this.isosurfaces.length>0;return{enabled:o&&i}}}}})],Ge.prototype,"isosurfaces",void 0),Ge=$e=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelVariableStyle")],Ge);const Je=Ge;var We=s(57264),Ke=s(98664),Xe=s(78395);let He=class extends ie.oY{constructor(){super(...arguments),this.values=null}};(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],He.prototype,"values",void 0),He=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelIrregularSpacing")],He);const Qe=He;let et=class extends ie.oY{constructor(){super(...arguments),this.scale=1,this.offset=0}};(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],et.prototype,"scale",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],et.prototype,"offset",void 0),et=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelRegularSpacing")],et);const it=et;let rt=class extends ie.oY{constructor(){super(...arguments),this.irregularSpacing=null,this.isPositiveUp=!0,this.isWrappedDateLine=!1,this.label=null,this.name=null,this.quantity=null,this.regularSpacing=null,this.size=0,this.unit=null}get isRegular(){return(null==this.irregularSpacing||void 0===this.irregularSpacing)&&null!==this.regularSpacing}getRange(){var o;return this.isRegular?[this.regularSpacing.offset,this.regularSpacing.offset+this.regularSpacing.scale*(this.size-1)]:Array.isArray(null===(o=this.irregularSpacing)||void 0===o?void 0:o.values)&&this.irregularSpacing.values.length>1?[this.irregularSpacing.values[0],this.irregularSpacing.values[this.irregularSpacing.values.length-1]]:[0,0]}};(0,l._)([(0,f.MZ)({type:Qe,json:{write:!0}})],rt.prototype,"irregularSpacing",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],rt.prototype,"isPositiveUp",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],rt.prototype,"isWrappedDateLine",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],rt.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],rt.prototype,"name",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],rt.prototype,"quantity",void 0),(0,l._)([(0,f.MZ)({type:it,json:{write:!0}})],rt.prototype,"regularSpacing",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:!0}})],rt.prototype,"size",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],rt.prototype,"unit",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{read:!1}})],rt.prototype,"isRegular",null),rt=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelDimension")],rt);const nt=rt;let st=class extends ie.oY{constructor(o){super(o),this.id=0,this.dimensions=null,this.spatialReference=Ke.A.WGS84}get zDimension(){if(!this.dimensions)return-1;if(!Array.isArray(this.dimensions))return-1;if(4!==this.dimensions.length)return-1;for(let o=2;o<4;++o)if(this.dimensions[o].size>0)return o;return-1}get isValid(){return!!this.dimensions&&!!Array.isArray(this.dimensions)&&4===this.dimensions.length&&!(this.dimensions[0].size<1||this.dimensions[1].size<1)&&!(-1===this.zDimension||this.dimensions[this.zDimension].size<1)}get originInLayerSpace3D(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const o=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),s=this.dimensions[2],l=s.isRegular?s.getRange():[0,s.size];return[o[0],i[0],l[0]]}get voxelSizeInLayerSpaceSigned(){if(!this.isValid||"xyt"===this.volumeType)return[0,0,0];const o=this.dimensions[0].getRange(),i=this.dimensions[1].getRange(),s=this.dimensions[2],l=s.isRegular?s.getRange():[0,s.size],a=[this.sizeInVoxels[0],this.sizeInVoxels[1],this.sizeInVoxels[2]];for(let u=0;u<3;++u)a[u]<2?a[u]=1:a[u]-=1;return s.isRegular&&!s.isPositiveUp&&(a[2]*=-1),[(o[1]-o[0])/a[0],(i[1]-i[0])/a[1],(l[1]-l[0])/a[2]]}get volumeType(){if(this.isValid){const o=this.dimensions[2].size>0,i=this.dimensions[3].size>0;if(!o&&i)return"xyt";if(o&&i)return"xyzt"}return"xyz"}get sizeInVoxels(){if(!this.isValid)return[0,0,0];const o=this.zDimension;return[this.dimensions[0].size,this.dimensions[1].size,this.dimensions[o].size]}computeVoxelSpaceLocation(o){var i,s;if(!this.isValid)return[0,0,0];if("xyt"===this.volumeType)return d.A.getLogger(this).error("computeVoxelSpacePosition cannot be used with XYT volumes."),[0,0,0];if(!(0,Xe.aI)(this.spatialReference,o.spatialReference))return d.A.getLogger(this).error("pos argument should have the same spatial reference as the VoxelLayer."),[0,0,0];const l=(0,F.fA)(o.x,o.y,null!==(i=o.z)&&void 0!==i?i:0);(0,q.f)(l,l,this.originInLayerSpace3D),(0,q.H)(l,l,this.voxelSizeInLayerSpaceSigned);const a=this.dimensions[this.zDimension];if(!a.isRegular&&Array.isArray(null===(s=a.irregularSpacing)||void 0===s?void 0:s.values)&&a.irregularSpacing.values.length>1){var u;const i=null!==(u=o.z)&&void 0!==u?u:0,s=a.irregularSpacing.values,c=a.isPositiveUp?1:-1,d=s.reduce(((o,s)=>Math.abs(c*s-i)<Math.abs(c*o-i)?s:o));for(let o=0;o<s.length;++o)if(s[o]===d){l[2]=o;break}}return[l[0],l[1],l[2]]}computeLayerSpaceLocation(o){var i;if(!this.isValid)return new We.A({x:0,y:0,spatialReference:this.spatialReference});const s=(0,F.ci)(o);if((0,q.B)(s,s,this.voxelSizeInLayerSpaceSigned),(0,q.g)(s,s,this.originInLayerSpace3D),"xyt"===this.volumeType)return new We.A({x:s[0],y:s[1],spatialReference:this.spatialReference});const l=this.dimensions[this.zDimension];return l.isRegular||Array.isArray(null===(i=l.irregularSpacing)||void 0===i?void 0:i.values)&&(o[2]<0?s[2]=l.irregularSpacing.values[0]:o[2]<l.irregularSpacing.values.length?s[2]=l.irregularSpacing.values[o[2]]:s[2]=l.irregularSpacing.values[l.irregularSpacing.values.length-1],l.isPositiveUp||(s[2]*=-1)),new We.A({x:s[0],y:s[1],z:s[2],spatialReference:this.spatialReference})}};(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],st.prototype,"id",void 0),(0,l._)([(0,f.MZ)({type:[nt],json:{write:{enabled:!0,isRequired:!0}}})],st.prototype,"dimensions",void 0),(0,l._)([(0,f.MZ)({type:Ke.A,json:{read:{enabled:!1}}})],st.prototype,"spatialReference",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{read:!1}})],st.prototype,"zDimension",null),(0,l._)([(0,f.MZ)({type:[Boolean],json:{read:!1}})],st.prototype,"isValid",null),(0,l._)([(0,f.MZ)({type:[Number],json:{read:!1}})],st.prototype,"originInLayerSpace3D",null),(0,l._)([(0,f.MZ)({type:[Number],json:{read:!1}})],st.prototype,"voxelSizeInLayerSpaceSigned",null),(0,l._)([(0,f.MZ)({type:["xyz","xyzt","xyt"],json:{read:{enabled:!1}}})],st.prototype,"volumeType",null),(0,l._)([(0,f.MZ)({type:[Number],json:{read:!1}})],st.prototype,"sizeInVoxels",null),st=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelVolume")],st);const lt=st;var at;let ut=at=class extends ie.oY{constructor(){super(...arguments),this.apronWidth=1,this.brickSize=[32,32,32],this.maxLodLevel=0,this.nodeSize=[4,4,4]}isValid(){const o=new at;return o.apronWidth===this.apronWidth&&o.maxLodLevel===this.maxLodLevel&&!!this.brickSize&&!!this.nodeSize&&!(!Array.isArray(this.brickSize)||!Array.isArray(this.nodeSize))&&3===this.brickSize.length&&3===this.nodeSize.length&&32===this.brickSize[0]&&32===this.brickSize[1]&&32===this.brickSize[2]&&4===this.nodeSize[0]&&4===this.nodeSize[1]&&4===this.nodeSize[2]}};(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],ut.prototype,"apronWidth",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],ut.prototype,"brickSize",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{write:{enabled:!0,isRequired:!0}}})],ut.prototype,"maxLodLevel",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:{enabled:!0,isRequired:!0}}})],ut.prototype,"nodeSize",void 0),ut=at=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelVolumeIndex")],ut);const pt=ut;let ct=class extends((0,te.O)(ie.oY)){constructor(o){super(o),this.enabled=!0,this.label="",this.normal=null,this.point=null}get orientation(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(o),0,!0)}set orientation(o){const i=g(o,this.tilt);this._set("normal",i),this._set("orientation",o)}get tilt(){if(!Array.isArray(this.normal)||3!==this.normal.length)return 0;const[o,i]=b(this.normal);return oe.ie.normalize((0,M.GB)(i),0,!0)}set tilt(o){const i=g(this.orientation,o);this._set("normal",i),this._set("tilt",o)}};(0,l._)([(0,f.MZ)({type:Boolean,json:{default:!0,write:!0}})],ct.prototype,"enabled",void 0),(0,l._)([(0,f.MZ)({type:String,json:{write:!0}})],ct.prototype,"label",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,ve.w)((o=>oe.ie.normalize((0,M.GB)(o),0,!0)))],ct.prototype,"orientation",null),(0,l._)([(0,f.MZ)({type:Number,json:{read:!1},clonable:!1,range:{min:0,max:360}}),(0,ve.w)((o=>oe.ie.normalize((0,M.GB)(o),0,!0)))],ct.prototype,"tilt",null),(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],ct.prototype,"normal",void 0),(0,l._)([(0,f.MZ)({type:[Number],json:{write:!0}})],ct.prototype,"point",void 0),ct=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelDynamicSection")],ct);const dt=ct;var yt;let ht=yt=class extends ie.oY{constructor(o){super(o),this.volumeId=0,this.verticalExaggeration=1,this.exaggerationMode="scale-height",this.verticalOffset=0,this.slices=new(u.A.ofType(ge)),this.dynamicSections=new(u.A.ofType(dt))}set slices(o){this._set("slices",(0,Re.V)(o,this._get("slices"),u.A.ofType(ge)))}set dynamicSections(o){this._set("dynamicSections",(0,Re.V)(o,this._get("dynamicSections"),u.A.ofType(dt)))}clone(){return new yt({volumeId:this.volumeId,verticalExaggeration:this.verticalExaggeration,exaggerationMode:this.exaggerationMode,verticalOffset:this.verticalOffset,slices:(0,Ae.o8)(this.slices),dynamicSections:(0,Ae.o8)(this.dynamicSections)})}};(0,l._)([(0,f.MZ)({type:M.jz,json:{write:{enabled:!0,isRequired:!0}}})],ht.prototype,"volumeId",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{default:1,write:!0}})],ht.prototype,"verticalExaggeration",void 0),(0,l._)([(0,f.MZ)({type:["scale-position","scale-height"],json:{default:"scale-height",write:!0}})],ht.prototype,"exaggerationMode",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{default:0,write:!0}})],ht.prototype,"verticalOffset",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(ge),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.slices&&this.slices.length>0}}}}})],ht.prototype,"slices",null),(0,l._)([(0,f.MZ)({type:u.A.ofType(dt),json:{write:{enabled:!0,overridePolicy(){return{enabled:!!this.dynamicSections&&this.dynamicSections.length>0}}}}})],ht.prototype,"dynamicSections",null),ht=yt=(0,l._)([(0,Z.$)("esri.layers.voxel.VoxelVolumeStyle")],ht);const vt=ht;var mt=s(7445);let gt=class extends((0,X.w6)((0,$.b)((0,J.q)((0,W.A)((0,K.j)((0,h.P)((0,G.d)((0,Y.p)(C.A))))))))){constructor(o){super(o),this.serviceRoot="",this.operationalLayerType="Voxel",this.legendEnabled=!0,this.title=null,this.sections=null,this.currentVariableId=0,this.volumeStyles=null,this.renderMode="volume",this.variableStyles=null,this.enableSlices=!0,this.enableSections=!0,this.enableDynamicSections=!0,this.enableIsosurfaces=!0,this.shading=new Me,this.opacity=1,this.variables=new u.A,this.volumes=new u.A,this.index=null,this.minScale=0,this.maxScale=0,this.type="voxel",this.version={major:Number.NaN,minor:Number.NaN,versionString:""},this.fullExtent=null,this.popupEnabled=!1,this.test=null,this.volumeStyles=new(u.A.ofType(vt)),this.variableStyles=new(u.A.ofType(Je)),this.sections=new(u.A.ofType(Se))}normalizeCtorArgs(o){return null!==o&&void 0!==o&&o.constantUpscaling&&(this.test={constantUpscaling:!0},delete o.constantUpscaling),o}set url(o){this._set("url",(0,H.Jf)(o,d.A.getLogger(this)))}load(o){const i=null!=o?o.signal:null,s=this.loadFromPortal({supportedTypes:["Scene Service"]},o).catch(m.QP).then((()=>this._fetchService(i))).then((()=>this.serviceRoot=this.url));return this.addResolvingPromise(s),Promise.resolve(this)}read(o,i){super.read(o,i);for(const s of this.volumes)s.spatialReference=this.spatialReference}readVersion(o,i){return super.parseVersionString(o)}validateLayer(o){if(o.layerType&&o.layerType!==this.operationalLayerType)throw new c.A("voxel-layer:layer-type-not-supported","VoxelLayer does not support this layer type",{layerType:o.layerType});if(isNaN(this.version.major)||isNaN(this.version.minor)||this.version.major<3)throw new c.A("layer:service-version-not-supported","Service version is not supported.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"});if(this.version.major>3)throw new c.A("layer:service-version-too-new","Service version is too new.",{serviceVersion:this.version.versionString,supportedVersions:"3.x"})}readFullExtent(o,i,s){if(null!=o&&"object"==typeof o){const l=B.A.fromJSON(o,s);if(0===l.zmin&&0===l.zmax&&Array.isArray(i.volumes)){const o=lt.fromJSON(i.volumes[0]);if(o.isValid&&"xyt"!==o.volumeType){const i=o.dimensions[2];if(i.isRegular){let o=i.regularSpacing.offset,s=i.regularSpacing.offset+i.regularSpacing.scale*(i.size-1);if(o>s){const i=o;o=s,s=i}l.zmin=o,l.zmax=s}}}return l}return null}get voxelFields(){const o=[new ee.A({name:"Voxel.ServiceValue",alias:"Value",domain:null,editable:!1,length:128,type:"string"}),new ee.A({name:"Voxel.ServiceVariableLabel",alias:"Variable",domain:null,editable:!1,length:128,type:"string"}),new ee.A({name:"Voxel.Position",alias:"Voxel Position",domain:null,editable:!1,length:128,type:"string"})],i=this.getVolume(null);if(null!=i){if("xyzt"===i.volumeType||"xyt"===i.volumeType){const i=new ee.A({name:"Voxel.ServiceLocalTime",alias:"Local Time",domain:null,editable:!1,length:128,type:"string"});o.push(i);const s=new ee.A({name:"Voxel.ServiceNativeTime",alias:"Native Time",domain:null,editable:!1,length:128,type:"string"});o.push(s)}if("xyt"!==i.volumeType){const i=new ee.A({name:"Voxel.ServiceDepth",alias:"Depth",domain:null,editable:!1,length:128,type:"string"});o.push(i)}}return o}get popupTemplate(){return this.loaded?this.createPopupTemplate():null}get defaultPopupTemplate(){return this.createPopupTemplate()}createPopupTemplate(o){const i=this.voxelFields,s=this.title;return(0,mt.tn)({fields:i,title:s},o)}getConfiguration(){var o,i;const s={layerType:this.operationalLayerType,version:this.version.versionString,name:this.title,spatialReference:this.spatialReference,fullExtent:this.fullExtent,volumes:this.volumes.toJSON(),variables:this.variables.toJSON(),index:null===(o=this.index)||void 0===o?void 0:o.toJSON(),sections:this.getSections(),style:{volumeStyles:this.getVolumeStyles(),currentVariableId:this.currentVariableId,renderMode:this.renderMode,variableStyles:this.getVariableStyles(),enableSections:this.enableSections,enableDynamicSections:this.enableDynamicSections,enableIsosurfaces:this.enableIsosurfaces,enableSlices:this.enableSlices,shading:this.shading}};return s.index&&null!==(i=this.index)&&void 0!==i&&i.isValid()?JSON.stringify(s):""}getVariableStyle(o){let i=-1;if(i=null!=o?o:this.currentVariableId,!this.variableStyles||-1===i)return null;const s=this.variableStyles.findIndex((o=>o.variableId===i));return s<0?null:this.variableStyles.at(s)}getVariable(o){let i=-1;if(i=null!=o?o:this.currentVariableId,!this.variables||-1===i)return null;const s=this.variables.findIndex((o=>o.id===i));return s<0?null:this.variables.at(s)}getVolume(o){const i=this.getVariable(o);return null!=i?this.volumes.find((o=>{let{id:s}=o;return s===i.volumeId})):null}getVolumeStyle(o){const i=this.getVariable(o);return null!=i?this.volumeStyles.find((o=>{let{volumeId:s}=o;return s===i.volumeId})):null}getColorForContinuousDataValue(o,i,s){var l;const a=this.getVariable(o);if(null==a||"continuous"!==(null===(l=a.renderingFormat)||void 0===l?void 0:l.continuity))return null;if(!this.variableStyles)return null;const u=this.variableStyles.findIndex((i=>i.variableId===o));if(u<0)return null;const c=this.variableStyles.at(u);return null!==c&&void 0!==c&&c.transferFunction?c.transferFunction.getColorForContinuousDataValue(i,s):null}getSections(){const o=[];for(const i of this.sections)o.push(new Se({enabled:i.enabled,href:i.href,id:i.id,label:i.label,normal:i.normal,point:i.point,sizeInPixel:i.sizeInPixel,slices:i.slices,timeId:i.timeId,variableId:i.variableId}));return o}getVariableStyles(){const o=[];for(const i of this.variableStyles){const s=this._getVariable(i);if(null!=s){const l=i.clone();l.isosurfaces.length>4&&(l.isosurfaces=l.isosurfaces.slice(0,3),d.A.getLogger(this).error("A maximum of 4 isosurfaces are supported for Voxel Layers."));for(const o of l.isosurfaces)if(!o.colorLocked){const i=this.getColorForContinuousDataValue(l.variableId,o.value,!1);null===i||i.equals(o.color)||(o.color=i)}if("continuous"===s.renderingFormat.continuity)(null===l.transferFunction||l.transferFunction.colorStops.length<2)&&d.A.getLogger(this).error("VoxelVariableStyle for variable ".concat(s.id," is invalid. At least 2 color stops are required in the transferFunction for continuous Voxel Layer variables.")),null!==l.transferFunction&&(Array.isArray(l.transferFunction.stretchRange)&&2===l.transferFunction.stretchRange.length||(d.A.getLogger(this).error("VoxelVariableStyle for variable ".concat(s.id," is invalid. The stretchRange of the transferFunction for continuous Voxel Layer variables must be of the form [minimumDataValue, maximumDataValue].")),l.transferFunction.stretchRange=[0,1],l.transferFunction.colorStops.removeAll()));else if("discrete"===s.renderingFormat.continuity)if(0===i.uniqueValues.length)d.A.getLogger(this).error("VoxelVariableStyle for variable ".concat(s.id," is invalid. Unique values are required for discrete Voxel Layer variables."));else for(const o of i.uniqueValues)null!==o.label&&void 0!==o.label||null===o.value||void 0===o.value||(o.label=o.value.toString());o.push(l)}else d.A.getLogger(this).error("VoxelVariable ID=".concat(i.variableId," doesn't exist, VoxelVariableStyle for this VoxelVariable will be ignored."))}return o}getVolumeStyles(){const o=[];for(const i of this.volumeStyles){const s=this._getVolumeFromVolumeId(i.volumeId);if(null!=s){const l=i.clone();for(const o of l.slices)this._isPlaneValid(o,[0,1,s.zDimension],s.dimensions)||(o.enabled=!1,o.label="invalid");for(const o of l.dynamicSections)this._isPlaneValid(o,[0,1,s.zDimension],s.dimensions)||(o.enabled=!1,o.label="invalid");o.push(l)}else d.A.getLogger(this).error("VoxelVolume ID=".concat(i.volumeId," doesn't exist, VoxelVolumeStyle for this VoxelVolume will be ignored."))}return o}_getVariable(o){const i=o.variableId;for(const s of this.variables)if(s.id===i)return s;return null}_getVolumeFromVolumeId(o){for(const i of this.volumes)if(i.id===o)return i;return null}_isPlaneValid(o,i,s){if(!o.point)return!1;if(!Array.isArray(o.point)||3!==o.point.length)return!1;if(!o.normal)return!1;if(!Array.isArray(o.normal)||3!==o.normal.length)return!1;const l=(0,F.fA)(o.normal[0],o.normal[1],o.normal[2]);(0,q.n)(l,l);return!(Math.abs(l[0])+Math.abs(l[1])+Math.abs(l[2])<1e-6)&&(o.normal[0]=l[0],o.normal[1]=l[1],o.normal[2]=l[2],!0)}};(0,l._)([(0,f.MZ)({type:["Voxel"]})],gt.prototype,"operationalLayerType",void 0),(0,l._)([(0,f.MZ)(Q.fV)],gt.prototype,"legendEnabled",void 0),(0,l._)([(0,f.MZ)({json:{write:!0}})],gt.prototype,"title",void 0),(0,l._)([(0,f.MZ)(Q.OZ)],gt.prototype,"url",null),(0,l._)([(0,f.MZ)({type:u.A.ofType(Se),json:{origins:{"web-scene":{name:"layerDefinition.sections",write:!0}}}})],gt.prototype,"sections",void 0),(0,l._)([(0,f.MZ)({type:M.jz,json:{origins:{"web-scene":{name:"layerDefinition.style.currentVariableId",write:{enabled:!0,isRequired:!0,ignoreOrigin:!0}},service:{name:"style.currentVariableId"}}}})],gt.prototype,"currentVariableId",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(vt),json:{origins:{"web-scene":{name:"layerDefinition.style.volumeStyles",write:!0},service:{name:"style.volumeStyles"}}}})],gt.prototype,"volumeStyles",void 0),(0,l._)([(0,f.MZ)({type:["volume","surfaces"],json:{origins:{"web-scene":{name:"layerDefinition.style.renderMode",write:!0},service:{name:"style.renderMode"}}}})],gt.prototype,"renderMode",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(Je),json:{origins:{"web-scene":{name:"layerDefinition.style.variableStyles",write:!0},service:{name:"style.variableStyles"}}}})],gt.prototype,"variableStyles",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSlices",write:!0},service:{name:"style.enableSlices"}}}})],gt.prototype,"enableSlices",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableSections",write:!0},service:{name:"style.enableSections"}}}})],gt.prototype,"enableSections",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableDynamicSections",write:!0},service:{name:"style.enableDynamicSections"}}}})],gt.prototype,"enableDynamicSections",void 0),(0,l._)([(0,f.MZ)({type:Boolean,json:{origins:{"web-scene":{name:"layerDefinition.style.enableIsosurfaces",write:!0},service:{name:"style.enableIsosurfaces"}}}})],gt.prototype,"enableIsosurfaces",void 0),(0,l._)([(0,f.MZ)({type:Me,json:{origins:{"web-scene":{name:"layerDefinition.style.shading",write:!0},service:{name:"style.shading"}}}})],gt.prototype,"shading",void 0),(0,l._)([(0,f.MZ)({type:["show","hide"]})],gt.prototype,"listMode",void 0),(0,l._)([(0,f.MZ)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{read:!1,write:!1,origins:{"web-scene":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],gt.prototype,"opacity",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(Ve)})],gt.prototype,"variables",void 0),(0,l._)([(0,f.MZ)({type:u.A.ofType(lt)})],gt.prototype,"volumes",void 0),(0,l._)([(0,f.MZ)({type:pt})],gt.prototype,"index",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.minScale",write:!0,origins:{service:{read:!1,write:!1}}}})],gt.prototype,"minScale",void 0),(0,l._)([(0,f.MZ)({type:Number,json:{name:"layerDefinition.maxScale",write:!0,origins:{service:{read:!1,write:!1}}}})],gt.prototype,"maxScale",void 0),(0,l._)([(0,f.MZ)({json:{read:!1},readOnly:!0})],gt.prototype,"type",void 0),(0,l._)([(0,f.MZ)({readOnly:!0,json:{name:"serviceVersion"}})],gt.prototype,"version",void 0),(0,l._)([(0,V.w)("service","version")],gt.prototype,"readVersion",null),(0,l._)([(0,f.MZ)({type:B.A})],gt.prototype,"fullExtent",void 0),(0,l._)([(0,V.w)("service","fullExtent",["fullExtent"])],gt.prototype,"readFullExtent",null),(0,l._)([(0,f.MZ)({readOnly:!0,clonable:!1,json:{read:!1}})],gt.prototype,"voxelFields",null),(0,l._)([(0,f.MZ)({type:Boolean,json:{name:"disablePopup",read:{reader:(o,i)=>!i.disablePopup},write:{enabled:!0,ignoreOrigin:!0,writer(o,i,s){i[s]=!o}},origins:{"portal-item":{default:!0},"web-scene":{default:!0}}}})],gt.prototype,"popupEnabled",void 0),(0,l._)([(0,f.MZ)({type:a.A,json:{read:!1}})],gt.prototype,"popupTemplate",null),(0,l._)([(0,f.MZ)({readOnly:!0})],gt.prototype,"defaultPopupTemplate",null),gt=(0,l._)([(0,Z.$)("esri.layers.VoxelLayer")],gt);const ft=gt},28330:(o,i,s)=>{s.d(i,{n:()=>p});var l=s(4270);function p(o){return a[function t(o){return"json"===o.type?"application/json":"blob"===o.type?o.blob.type:function n(o){const i=(0,l.Zo)(o);return d[i]||u}(o.url)}(o)]||c}const a={},u="text/plain",c=a[u],d={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const h in d)a[d[h]]=h}}]);
//# sourceMappingURL=439.5f3ed47b.chunk.js.map