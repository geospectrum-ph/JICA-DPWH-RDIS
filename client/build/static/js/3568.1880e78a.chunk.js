"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[3568],{16906:(r,n,l)=>{l.d(n,{X_:()=>i,i1:()=>o,zx:()=>d});var h=l(48237),c=l(49049);const u=96;function i(r,n){const l=n||r.extent,h=r.width,g=(0,c.GA)(null===l||void 0===l?void 0:l.spatialReference);return l&&h?l.width/h*g*c.dy*u:0}function o(r,n){return r/((0,c.GA)(n)*c.dy*u)}function d(r,n,l){return function a(r,n){return 0===n||(0,h.Sp)(r,n)||r<n}(r,n)&&function p(r,n){return 0===n||(0,h.Sp)(r,n)||r>n}(r,l)}},86083:(r,n,l)=>{l.d(n,{e:()=>m});var h,c=l(80671),u=l(39652),g=l(86479),y=l(4180),v=l(63390),f=l(57453),w=(l(50886),l(89412),l(76761),l(68682)),_=l(16906),b=l(5528),A=l(45104),S=l(6673);let R=h=class extends S.A{constructor(r){super(r),this.type="rect",this.left=null,this.right=null,this.top=null,this.bottom=null}clone(){return new h({left:this.left,right:this.right,top:this.top,bottom:this.bottom})}commitVersionProperties(){this.commitProperty("left"),this.commitProperty("right"),this.commitProperty("top"),this.commitProperty("bottom")}};(0,c._)([(0,f.MZ)({type:[Number,String],json:{write:!0}})],R.prototype,"left",void 0),(0,c._)([(0,f.MZ)({type:[Number,String],json:{write:!0}})],R.prototype,"right",void 0),(0,c._)([(0,f.MZ)({type:[Number,String],json:{write:!0}})],R.prototype,"top",void 0),(0,c._)([(0,f.MZ)({type:[Number,String],json:{write:!0}})],R.prototype,"bottom",void 0),R=h=(0,c._)([(0,w.$)("esri.views.layers.support.ClipRect")],R);const M=R;var V=l(90874);let C=class extends S.A{constructor(r){super(r),this.type="path",this.path=[]}commitVersionProperties(){this.commitProperty("path")}};(0,c._)([(0,f.MZ)({type:[[[Number]]],json:{write:!0}})],C.prototype,"path",void 0),C=(0,c._)([(0,w.$)("esri.views.layers.support.Path")],C);const H=C,Z=u.A.ofType({key:"type",base:null,typeMap:{rect:M,path:H,geometry:V.A}}),m=r=>{let n=class extends r{constructor(){super(...arguments),this.attached=!1,this.clips=new Z,this.lastUpdateId=-1,this.moving=!1,this.updateRequested=!1,this.visibleAtCurrentScale=!1,this.highlightOptions=null}initialize(){var r,n,l,h;const c=null===(r=null===(n=this.view)||void 0===n?void 0:n.spatialReferenceLocked)||void 0===r||r;(null===(l=this.view)||void 0===l?void 0:l.spatialReference)&&c&&!this.spatialReferenceSupported?this.addResolvingPromise(Promise.reject(new y.A("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",{layer:this.layer}))):(this.container||(this.container=new b.m),this.container.fadeTransitionEnabled=!0,this.container.visible=!1,this.container.endTransitions(),this.addHandles([(0,v.wB)((()=>this.suspended),(r=>{this.container&&(this.container.visible=!r)}),v.pc),(0,v.wB)((()=>this.updateSuspended),(r=>{this.view&&!r&&this.updateRequested&&this.view.requestUpdate()}),v.pc),(0,v.wB)((()=>{var r,n;return null!==(r=null===(n=this.layer)||void 0===n?void 0:n.opacity)&&void 0!==r?r:1}),(r=>{this.container&&(this.container.opacity=r)}),v.pc),(0,v.wB)((()=>this.layer&&"blendMode"in this.layer?this.layer.blendMode:"normal"),(r=>{this.container&&(this.container.blendMode=r)}),v.pc),(0,v.wB)((()=>this.layer&&"effect"in this.layer?this.layer.effect:null),(r=>{this.container&&(this.container.effect=r)}),v.pc),(0,v.wB)((()=>this.highlightOptions),(r=>this.container.highlightOptions=r),v.pc),(0,v.on)((()=>this.clips),"change",(()=>{this.container&&(this.container.clips=this.clips)}),v.pc),(0,v.wB)((()=>{var r;return{scale:null===(r=this.view)||void 0===r?void 0:r.scale,scaleRange:this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null}}),(r=>{let{scale:n}=r;const l=null!=n&&this.isVisibleAtScale(n);l!==this.visibleAtCurrentScale&&this._set("visibleAtCurrentScale",l)}),v.pc)],"constructor"),null!==(h=this.view)&&void 0!==h&&h.whenLayerView?this.view.whenLayerView(this.layer).then((r=>{r===this&&this.processAttach()}),(()=>{})):this.when().then((()=>{this.processAttach()}),(()=>{})))}destroy(){this.processDetach(),this.updateRequested=!1}get spatialReferenceSupported(){var r;const n=null===(r=this.view)||void 0===r?void 0:r.spatialReference;return null==n||this.supportsSpatialReference(n)}get updateSuspended(){return this.suspended}get updating(){var r;return this.spatialReferenceSupported&&(!this.attached||!this.suspended&&(this.updateRequested||this.isUpdating())||!(null===(r=this._updatingHandles)||void 0===r||!r.updating))}processAttach(){this.isResolved()&&!this.attached&&!this.destroyed&&this.spatialReferenceSupported&&(this.attach(),this.attached=!0,this.requestUpdate())}processDetach(){this.attached&&(this.attached=!1,this.removeHandles("attach"),this.detach(),this.updateRequested=!1)}isVisibleAtScale(r){const n=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;if(!n)return!0;const{minScale:l,maxScale:h}=n;return(0,_.zx)(r,l,h)}requestUpdate(){this.destroyed||this.updateRequested||(this.updateRequested=!0,this.updateSuspended||this.view.requestUpdate())}processUpdate(r){!this.isFulfilled()||this.isResolved()?(this._set("updateParameters",r),this.updateRequested&&!this.updateSuspended&&(this.updateRequested=!1,this.update(r))):this.updateRequested=!1}hitTest(r,n){return Promise.resolve(null)}supportsSpatialReference(r){return!0}canResume(){return!!this.spatialReferenceSupported&&!!super.canResume()&&this.visibleAtCurrentScale}getSuspendInfo(){const r=super.getSuspendInfo(),n=!this.spatialReferenceSupported,l=this.visibleAtCurrentScale;return n&&(r.spatialReferenceNotSupported=n),l&&(r.outsideScaleRange=l),r}addAttachHandles(r){this.addHandles(r,"attach")}};return(0,c._)([(0,f.MZ)()],n.prototype,"attached",void 0),(0,c._)([(0,f.MZ)({type:Z,set(r){const n=(0,g.V)(r,this._get("clips"),Z);this._set("clips",n)}})],n.prototype,"clips",void 0),(0,c._)([(0,f.MZ)()],n.prototype,"container",void 0),(0,c._)([(0,f.MZ)()],n.prototype,"moving",void 0),(0,c._)([(0,f.MZ)({readOnly:!0})],n.prototype,"spatialReferenceSupported",null),(0,c._)([(0,f.MZ)({readOnly:!0})],n.prototype,"updateParameters",void 0),(0,c._)([(0,f.MZ)()],n.prototype,"updateRequested",void 0),(0,c._)([(0,f.MZ)()],n.prototype,"updateSuspended",null),(0,c._)([(0,f.MZ)()],n.prototype,"updating",null),(0,c._)([(0,f.MZ)()],n.prototype,"view",void 0),(0,c._)([(0,f.MZ)({readOnly:!0})],n.prototype,"visibleAtCurrentScale",void 0),(0,c._)([(0,f.MZ)({type:A.A})],n.prototype,"highlightOptions",void 0),n=(0,c._)([(0,w.$)("esri.views.2d.layers.LayerView2D")],n),n}},53568:(r,n,l)=>{l.r(n),l.d(n,{default:()=>C});var h=l(80671),c=l(13812),u=l(16842),g=l(39652),y=l(58285),v=l(63390),f=(l(89412),l(50886),l(4180),l(68682)),w=l(80050),_=l(86083),b=l(44426),A=l(41096),S=l(27012);const R="sublayers",M="layerView";let V=class extends((0,_.e)(S.A)){constructor(){super(...arguments),this._highlightIds=new Map}*graphicsViews(){null==this._graphicsViewsFeatureCollectionMap?null==this._graphicsViews?yield*[]:yield*this._graphicsViews:yield*this._graphicsViewsFeatureCollectionMap.keys()}async hitTest(r,n){return Array.from(this.graphicsViews(),(n=>{const l=n.hitTest(r);if(null!=this._graphicsViewsFeatureCollectionMap){const r=this._graphicsViewsFeatureCollectionMap.get(n);for(const n of l)!n.popupTemplate&&r.popupTemplate&&(n.popupTemplate=r.popupTemplate),n.sourceLayer=n.layer=this.layer}return l})).flat().map((n=>({type:"graphic",graphic:n,layer:this.layer,mapPoint:r})))}highlight(r){var n;let l;"number"==typeof r?l=[r]:r instanceof c.A?l=[r.uid]:Array.isArray(r)&&r.length>0?l="number"==typeof r[0]?r:r.map((r=>r&&r.uid)):g.A.isCollection(r)&&(l=r.map((r=>r&&r.uid)).toArray());const h=null===(n=l)||void 0===n?void 0:n.filter(u.Ru);return null!==h&&void 0!==h&&h.length?(this._addHighlight(h),(0,y.hA)((()=>this._removeHighlight(h)))):(0,y.hA)()}update(r){for(const n of this.graphicsViews())n.processUpdate(r)}attach(){const r=this.view,e=()=>this.requestUpdate(),n=this.layer.featureCollections;if(null!=n&&n.length){this._graphicsViewsFeatureCollectionMap=new Map;for(const l of n){const n=new b.A(this.view.featuresTilingScheme),h=new A.A({view:r,graphics:l.source,renderer:l.renderer,requestUpdateCallback:e,container:n});this._graphicsViewsFeatureCollectionMap.set(h,l),this.container.addChild(h.container),this.addHandles([(0,v.wB)((()=>l.visible),(r=>h.container.visible=r),v.Vh),(0,v.wB)((()=>h.updating),(()=>this.notifyChange("updating")),v.Vh)],M)}this._updateHighlight()}else null!=this.layer.sublayers&&this.addHandles((0,v.on)((()=>this.layer.sublayers),"change",(()=>this._createGraphicsViews()),{onListenerAdd:()=>this._createGraphicsViews(),onListenerRemove:()=>this._destroyGraphicsViews()}),R)}detach(){this._destroyGraphicsViews(),this.removeHandles(R)}moveStart(){}moveEnd(){}viewChange(){for(const r of this.graphicsViews())r.viewChange()}isUpdating(){for(const r of this.graphicsViews())if(r.updating)return!0;return!1}_destroyGraphicsViews(){this.container.removeAllChildren(),this.removeHandles(M);for(const r of this.graphicsViews())r.destroy();this._graphicsViews=null,this._graphicsViewsFeatureCollectionMap=null}_createGraphicsViews(){if(this._destroyGraphicsViews(),null==this.layer.sublayers)return;const r=[],n=this.view,s=()=>this.requestUpdate();for(const l of this.layer.sublayers){const h=new b.A(this.view.featuresTilingScheme);h.fadeTransitionEnabled=!0;const c=new A.A({view:n,graphics:l.graphics,requestUpdateCallback:s,container:h});this.addHandles([l.on("graphic-update",c.graphicUpdateHandler),(0,v.wB)((()=>l.visible),(r=>c.container.visible=r),v.Vh),(0,v.wB)((()=>c.updating),(()=>this.notifyChange("updating")),v.Vh)],M),this.container.addChild(c.container),r.push(c)}this._graphicsViews=r,this._updateHighlight()}_addHighlight(r){for(const n of r)if(this._highlightIds.has(n)){const r=this._highlightIds.get(n);this._highlightIds.set(n,r+1)}else this._highlightIds.set(n,1);this._updateHighlight()}_removeHighlight(r){for(const n of r)if(this._highlightIds.has(n)){const r=this._highlightIds.get(n)-1;0===r?this._highlightIds.delete(n):this._highlightIds.set(n,r)}this._updateHighlight()}_updateHighlight(){const r=Array.from(this._highlightIds.keys()),n=(0,w.$r)("highlight");for(const l of this.graphicsViews())l.setHighlight(r.map((r=>({objectId:r,highlightFlags:n}))))}};V=(0,h._)([(0,f.$)("esri.views.2d.layers.MapNotesLayerView2D")],V);const C=V},44426:(r,n,l)=>{l.d(n,{A:()=>t});var h=l(21847),c=l(2689),u=l(23133);class t extends c.f{renderChildren(r){for(const n of this.children)n.setTransform(r.state);if(super.renderChildren(r),this.attributeView.update(),this.children.some((r=>r.hasData))){switch(r.drawPhase){case h.S5.MAP:this._renderChildren(r,h.RI.All);break;case h.S5.HIGHLIGHT:this.hasHighlight&&this._renderHighlight(r)}this._boundsRenderer&&this._boundsRenderer.doRender(r)}}_renderHighlight(r){(0,u.lB)(r,!1,(r=>{this._renderChildren(r,h.RI.Highlight)}))}}},27012:(r,n,l)=>{l.d(n,{A:()=>S});var h=l(80671),c=l(18763),u=l(73067),g=l(16904),y=l(89412),v=l(35598),f=l(5203),w=l(57453),_=(l(50886),l(76761),l(68682)),b=l(31059);let A=class extends((0,g.sA)((0,f.g)(u.A.EventedMixin(c.A)))){constructor(r){super(r),this._updatingHandles=new b.U,this.layer=null,this.parent=null}initialize(){this.when().catch((r=>{if("layerview:create-error"!==r.name){var n;const l=this.layer&&this.layer.id||"no id",h=(null===(n=this.layer)||void 0===n?void 0:n.title)||"no title";y.A.getLogger(this).error("#resolve()","Failed to resolve layer view (layer title: '".concat(h,"', id: '").concat(l,"')"),r)}}))}destroy(){this._updatingHandles=(0,v.pR)(this._updatingHandles)}get fullOpacity(){var r,n,l,h;return(null!==(r=null===(n=this.layer)||void 0===n?void 0:n.opacity)&&void 0!==r?r:1)*(null!==(l=null===(h=this.parent)||void 0===h?void 0:h.fullOpacity)&&void 0!==l?l:1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var r;return!this.suspended&&!0===(null===(r=this.layer)||void 0===r?void 0:r.legendEnabled)}get updating(){var r;return!((null===(r=this._updatingHandles)||void 0===r||!r.updating)&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var r;return!0===(null===(r=this.layer)||void 0===r?void 0:r.visible)}set visible(r){this._overrideIfSome("visible",r)}canResume(){var r,n,l;return this.visible&&(null===(r=this.layer)||void 0===r?void 0:r.loaded)&&!(null!==(n=this.parent)&&void 0!==n&&n.suspended)&&(null===(l=this.view)||void 0===l?void 0:l.ready)||!1}getSuspendInfo(){var r,n;const l=null!==(r=this.parent)&&void 0!==r&&r.suspended?this.parent.suspendInfo:{};return null!==(n=this.view)&&void 0!==n&&n.ready||(l.viewNotReady=!0),this.layer&&this.layer.loaded||(l.layerNotLoaded=!0),this.visible||(l.layerInvisible=!0),l}isUpdating(){return!1}};(0,h._)([(0,w.MZ)()],A.prototype,"fullOpacity",null),(0,h._)([(0,w.MZ)()],A.prototype,"layer",void 0),(0,h._)([(0,w.MZ)()],A.prototype,"parent",void 0),(0,h._)([(0,w.MZ)({readOnly:!0})],A.prototype,"suspended",null),(0,h._)([(0,w.MZ)({readOnly:!0})],A.prototype,"suspendInfo",null),(0,h._)([(0,w.MZ)({readOnly:!0})],A.prototype,"legendEnabled",null),(0,h._)([(0,w.MZ)({type:Boolean,readOnly:!0})],A.prototype,"updating",null),(0,h._)([(0,w.MZ)({readOnly:!0})],A.prototype,"updatingProgress",null),(0,h._)([(0,w.MZ)()],A.prototype,"visible",null),(0,h._)([(0,w.MZ)()],A.prototype,"view",void 0),A=(0,h._)([(0,_.$)("esri.views.layers.LayerView")],A);const S=A},6673:(r,n,l)=>{l.d(n,{A:()=>v});var h=l(80671),c=l(83375),u=l(57453),g=(l(50886),l(89412),l(76761),l(68682));let y=class extends c.oY{get version(){return this.commitVersionProperties(),(this._get("version")||0)+1}};(0,h._)([(0,u.MZ)({readOnly:!0})],y.prototype,"version",null),y=(0,h._)([(0,g.$)("esri.views.layers.support.ClipArea")],y);const v=y},90874:(r,n,l)=>{l.d(n,{A:()=>S});var h,c=l(80671),u=(l(30174),l(57453)),g=(l(50886),l(89412),l(76761),l(68682)),y=l(66445),v=l(31670),f=l(6673),w=l(84661),_=l(48343);const b={base:y.A,key:"type",typeMap:{extent:w.A,polygon:_.A}};let A=h=class extends f.A{constructor(r){super(r),this.type="geometry",this.geometry=null}clone(){var r,n;return new h({geometry:null!==(r=null===(n=this.geometry)||void 0===n?void 0:n.clone())&&void 0!==r?r:null})}commitVersionProperties(){this.commitProperty("geometry")}};(0,c._)([(0,u.MZ)({types:b,json:{read:v.rS,write:!0}})],A.prototype,"geometry",void 0),A=h=(0,c._)([(0,g.$)("esri.views.layers.support.Geometry")],A);const S=A}}]);
//# sourceMappingURL=3568.1880e78a.chunk.js.map