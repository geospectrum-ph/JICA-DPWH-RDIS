"use strict";(self.webpackChunkSEEDs_v2_0_Client=self.webpackChunkSEEDs_v2_0_Client||[]).push([[2662],{66912:(i,M,R)=>{function e(){return[1,0,0,0,1,0,0,0,1]}function t(i,M,R,A,S,L,Z,X,V){return[i,M,R,A,S,L,Z,X,V]}R.d(M,{fA:()=>t,vt:()=>e,zK:()=>A});const A=[1,0,0,0,1,0,0,0,1];Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:A,clone:function r(i){return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8]]},create:e,createView:function n(i,M){return new Float64Array(i,M,9)},fromValues:t},Symbol.toStringTag,{value:"Module"}))},30925:(i,M,R)=>{R.d(M,{w:()=>s});var A=R(16842),S=R(17244),L=R(60964);class s{constructor(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9,M=arguments.length>1?arguments[1]:void 0;this._compareMinX=o,this._compareMinY=l,this._toBBox=i=>i,this._maxEntries=Math.max(4,i||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),M&&("function"==typeof M?this._toBBox=M:this._initFormat(M)),this.clear()}destroy(){this.clear(),Z.prune(),X.prune(),V.prune(),W.prune()}all(i){this._all(this._data,i)}search(i,M){let R=this._data;const A=this._toBBox;if(x(i,R))for(Z.clear();R;){for(let S=0,L=R.children.length;S<L;S++){const L=R.children[S],X=R.leaf?A(L):L;x(i,X)&&(R.leaf?M(L):_(i,X)?this._all(L,M):Z.push(L))}R=Z.pop()}}collides(i){let M=this._data;const R=this._toBBox;if(!x(i,M))return!1;for(Z.clear();M;){for(let A=0,S=M.children.length;A<S;A++){const S=M.children[A],L=M.leaf?R(S):S;if(x(i,L)){if(M.leaf||_(i,L))return!0;Z.push(S)}}M=Z.pop()}return!1}load(i){if(!i.length)return this;if(i.length<this._minEntries){for(let M=0,R=i.length;M<R;M++)this.insert(i[M]);return this}let M=this._build(i.slice(0,i.length),0,i.length-1,0);if(this._data.children.length)if(this._data.height===M.height)this._splitRoot(this._data,M);else{if(this._data.height<M.height){const i=this._data;this._data=M,M=i}this._insert(M,this._data.height-M.height-1,!0)}else this._data=M;return this}insert(i){return i&&this._insert(i,this._data.height-1),this}clear(){return this._data=new w([]),this}remove(i){if(!i)return this;let M,R=this._data,S=null,L=0,Z=!1;const X=this._toBBox(i);for(V.clear(),W.clear();R||V.length>0;){var z;if(R||(R=V.pop(),S=V.data[V.length-1],L=null!==(z=W.pop())&&void 0!==z?z:0,Z=!0),R.leaf&&(M=(0,A.qh)(R.children,i,R.children.length,R.indexHint),-1!==M))return R.children.splice(M,1),V.push(R),this._condense(V),this;Z||R.leaf||!_(R,X)?S?(L++,R=S.children[L],Z=!1):R=null:(V.push(R),W.push(L),L=0,S=R,R=R.children[0])}return this}toJSON(){return this._data}fromJSON(i){return this._data=i,this}_all(i,M){let R=i;for(X.clear();R;){var A;if(!0===R.leaf)for(const i of R.children)M(i);else X.pushArray(R.children);R=null!==(A=X.pop())&&void 0!==A?A:null}}_build(i,M,R,A){const S=R-M+1;let L=this._maxEntries;if(S<=L){const A=new w(i.slice(M,R+1));return h(A,this._toBBox),A}A||(A=Math.ceil(Math.log(S)/Math.log(L)),L=Math.ceil(S/L**(A-1)));const Z=new b([]);Z.height=A;const X=Math.ceil(S/L),V=X*Math.ceil(Math.sqrt(L));f(i,M,R,V,this._compareMinX);for(let W=M;W<=R;W+=V){const M=Math.min(W+V-1,R);f(i,W,M,X,this._compareMinY);for(let R=W;R<=M;R+=X){const S=Math.min(R+X-1,M);Z.children.push(this._build(i,R,S,A-1))}}return h(Z,this._toBBox),Z}_chooseSubtree(i,M,R,A){for(;A.push(M),!0!==M.leaf&&A.length-1!==R;){let R,A=1/0,S=1/0;for(let L=0,Z=M.children.length;L<Z;L++){const Z=M.children[L],X=c(Z),V=d(i,Z)-X;V<S?(S=V,A=X<A?X:A,R=Z):V===S&&X<A&&(A=X,R=Z)}M=R||M.children[0]}return M}_insert(i,M,R){const A=this._toBBox,S=R?i:A(i);V.clear();const L=this._chooseSubtree(S,this._data,M,V);for(L.children.push(i),r(L,S);M>=0&&V.data[M].children.length>this._maxEntries;)this._split(V,M),M--;this._adjustParentBBoxes(S,V,M)}_split(i,M){const R=i.data[M],A=R.children.length,S=this._minEntries;this._chooseSplitAxis(R,S,A);const L=this._chooseSplitIndex(R,S,A);if(!L)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const Z=R.children.splice(L,R.children.length-L),X=R.leaf?new w(Z):new b(Z);X.height=R.height,h(R,this._toBBox),h(X,this._toBBox),M?i.data[M-1].children.push(X):this._splitRoot(R,X)}_splitRoot(i,M){this._data=new b([i,M]),this._data.height=i.height+1,h(this._data,this._toBBox)}_chooseSplitIndex(i,M,R){let A,S,L;A=S=1/0;for(let Z=M;Z<=R-M;Z++){const M=a(i,0,Z,this._toBBox),X=a(i,Z,R,this._toBBox),V=u(M,X),W=c(M)+c(X);V<A?(A=V,L=Z,S=W<S?W:S):V===A&&W<S&&(S=W,L=Z)}return L}_chooseSplitAxis(i,M,R){const A=i.leaf?this._compareMinX:o,S=i.leaf?this._compareMinY:l;this._allDistMargin(i,M,R,A)<this._allDistMargin(i,M,R,S)&&i.children.sort(A)}_allDistMargin(i,M,R,A){i.children.sort(A);const S=this._toBBox,L=a(i,0,M,S),Z=a(i,R-M,R,S);let X=m(L)+m(Z);for(let V=M;V<R-M;V++){const M=i.children[V];r(L,i.leaf?S(M):M),X+=m(L)}for(let V=R-M-1;V>=M;V--){const M=i.children[V];r(Z,i.leaf?S(M):M),X+=m(Z)}return X}_adjustParentBBoxes(i,M,R){for(let A=R;A>=0;A--)r(M.data[A],i)}_condense(i){for(let M=i.length-1;M>=0;M--){const R=i.data[M];if(0===R.children.length)if(M>0){const S=i.data[M-1],L=S.children;L.splice((0,A.qh)(L,R,L.length,S.indexHint),1)}else this.clear();else h(R,this._toBBox)}}_initFormat(i){const M=["return a"," - b",";"];this._compareMinX=new Function("a","b",M.join(i[0])),this._compareMinY=new Function("a","b",M.join(i[1])),this._toBBox=new Function("a","return {minX: a"+i[0]+", minY: a"+i[1]+", maxX: a"+i[2]+", maxY: a"+i[3]+"};")}}function h(i,M){a(i,0,i.children.length,M,i)}function a(i,M,R,A,S){S||(S=new w([])),S.minX=1/0,S.minY=1/0,S.maxX=-1/0,S.maxY=-1/0;for(let L,Z=M;Z<R;Z++)L=i.children[Z],r(S,i.leaf?A(L):L);return S}function r(i,M){i.minX=Math.min(i.minX,M.minX),i.minY=Math.min(i.minY,M.minY),i.maxX=Math.max(i.maxX,M.maxX),i.maxY=Math.max(i.maxY,M.maxY)}function o(i,M){return i.minX-M.minX}function l(i,M){return i.minY-M.minY}function c(i){return(i.maxX-i.minX)*(i.maxY-i.minY)}function m(i){return i.maxX-i.minX+(i.maxY-i.minY)}function d(i,M){return(Math.max(M.maxX,i.maxX)-Math.min(M.minX,i.minX))*(Math.max(M.maxY,i.maxY)-Math.min(M.minY,i.minY))}function u(i,M){const R=Math.max(i.minX,M.minX),A=Math.max(i.minY,M.minY),S=Math.min(i.maxX,M.maxX),L=Math.min(i.maxY,M.maxY);return Math.max(0,S-R)*Math.max(0,L-A)}function _(i,M){return i.minX<=M.minX&&i.minY<=M.minY&&M.maxX<=i.maxX&&M.maxY<=i.maxY}function x(i,M){return M.minX<=i.maxX&&M.minY<=i.maxY&&M.maxX>=i.minX&&M.maxY>=i.minY}function f(i,M,R,A,S){const Z=[M,R];for(;Z.length;){const M=Z.pop(),R=Z.pop();if(M-R<=A)continue;const X=R+Math.ceil((M-R)/A/2)*A;(0,L.q)(i,X,R,M,S),Z.push(R,X,X,M)}}const Z=new S.A,X=new S.A,V=new S.A,W=new S.A({deallocator:void 0});class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}class B extends Y{constructor(){super(...arguments),this.height=1,this.indexHint=new A.vW}}class w extends B{constructor(i){super(),this.children=i,this.leaf=!0}}class b extends B{constructor(i){super(),this.children=i,this.leaf=!1}}},74467:(i,M,R)=>{R.d(M,{O:()=>j,W:()=>p});var A=R(68052),S=R(66912),L=R(37131),Z=R(54880);const X=(0,R(83800).vt)(),V=(0,S.vt)(),W=(0,S.vt)(),z=(0,S.vt)();function p(i,M,R){return(0,Z.s)(X,M[0],M[1],1),(0,Z.t)(X,X,(0,A.mg)(V,R)),0===X[2]?(0,L.hZ)(i,X[0],X[1]):(0,L.hZ)(i,X[0]/X[2],X[1]/X[2])}function j(i,M,R){return x(W,M[0],M[1],M[2],M[3],M[4],M[5],M[6],M[7]),x(z,R[0],R[1],R[2],R[3],R[4],R[5],R[6],R[7]),(0,A.lw)(i,(0,A.KC)(W,W),z),0!==i[8]&&(i[0]/=i[8],i[1]/=i[8],i[2]/=i[8],i[3]/=i[8],i[4]/=i[8],i[5]/=i[8],i[6]/=i[8],i[7]/=i[8],i[8]/=i[8]),i}function x(i,M,R,S,L,W,z,N,$){(0,A.hZ)(i,M,S,W,R,L,z,1,1,1),(0,Z.s)(X,N,$,1),(0,A.KC)(V,i);const[G,U,K]=(0,Z.t)(X,X,(0,A.mg)(V,V));return(0,A.hZ)(V,G,0,0,0,U,0,0,0,K),(0,A.lw)(i,V,i)}},12198:(i,M,R)=>{R.d(M,{b3:()=>a,jZ:()=>p});var A=R(83375),S=R(88965),L=R(12439),Z=R(78966),X=R(31670),V=R(55476),W=R(78395);function p(i){return f(i,!0)}function a(i){return f(i,!1)}function f(i,M){if(null==i)return null;const R=i.spatialReference,S=(0,W.Vp)(R),Z=(0,A.Wj)(i)?i.toJSON():i;if(!S)return Z;const N=(0,W.K8)(R)?102100:4326,$=V.j7[N].maxX,G=V.j7[N].minX;if((0,X.fT)(Z))return y(Z,$,G);if((0,X.U9)(Z))return Z.points=Z.points.map((i=>y(i,$,G))),Z;if((0,X.ZC)(Z))return d(Z,S);if((0,X.Bi)(Z)||(0,X.Rg)(Z)){const i=(0,L.Rg)(z,Z),R={xmin:i[0],ymin:i[1],xmax:i[2],ymax:i[3]},A=(0,V.kd)(R.xmin,G)*(2*$),S=0===A?Z:(0,V.kS)(Z,A);return R.xmin+=A,R.xmax+=A,R.xmax>$?P(S,$,M):R.xmin<G?P(S,G,M):S}return Z}function d(i,M){if(!M)return i;const R=function I(i,M){const R=[],{ymin:A,ymax:S,xmin:L,xmax:Z}=i,X=i.xmax-i.xmin,[V,W]=M.valid,{x:z,frameId:N}=g(i.xmin,M),{x:$,frameId:G}=g(i.xmax,M),U=z===$&&X>0;if(X>2*W){const i={xmin:L<Z?z:$,ymin:A,xmax:W,ymax:S},M={xmin:V,ymin:A,xmax:L<Z?$:z,ymax:S},X={xmin:0,ymin:A,xmax:W,ymax:S},U={xmin:V,ymin:A,xmax:0,ymax:S},K=[],J=[];v(i,X)&&K.push(N),v(i,U)&&J.push(N),v(M,X)&&K.push(G),v(M,U)&&J.push(G);for(let R=N+1;R<G;R++)K.push(R),J.push(R);R.push(new C(i,[N]),new C(M,[G]),new C(X,K),new C(U,J))}else z>$||U?R.push(new C({xmin:z,ymin:A,xmax:W,ymax:S},[N]),new C({xmin:V,ymin:A,xmax:$,ymax:S},[G])):R.push(new C({xmin:z,ymin:A,xmax:$,ymax:S},[N]));return R}(i,M).map((i=>i.extent));return R.length<2?R[0]||i:R.length>2?(i.xmin=M.valid[0],i.xmax=M.valid[1],i):{rings:R.map((i=>[[i.xmin,i.ymin],[i.xmin,i.ymax],[i.xmax,i.ymax],[i.xmax,i.ymin],[i.xmin,i.ymin]]))}}function y(i,M,R){if(Array.isArray(i)){const A=i[0];if(A>M){const R=(0,V.kd)(A,M);i[0]=A+R*(-2*M)}else if(A<R){const M=(0,V.kd)(A,R);i[0]=A+M*(-2*R)}}else{const A=i.x;if(A>M){const R=(0,V.kd)(A,M);i.x+=R*(-2*M)}else if(A<R){const M=(0,V.kd)(A,R);i.x+=M*(-2*R)}}return i}function g(i,M){const[R,A]=M.valid,S=2*A;let L,Z=0;return i>A?(L=Math.ceil(Math.abs(i-A)/S),i-=L*S,Z=L):i<R&&(L=Math.ceil(Math.abs(i-R)/S),i+=L*S,Z=-L),{x:i,frameId:Z}}function v(i,M){const{xmin:R,ymin:A,xmax:S,ymax:L}=M;return O(i,R,A)&&O(i,R,L)&&O(i,S,L)&&O(i,S,A)}function O(i,M,R){return M>=i.xmin&&M<=i.xmax&&R>=i.ymin&&R<=i.ymax}function P(i,M){let R=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const A=!(0,X.Rg)(i);if(A&&(0,Z.m3)(i),R)return(new T).cut(i,M);const S=A?i.rings:i.paths,L=A?4:2,V=S.length,W=-2*M;for(let Z=0;Z<V;Z++){const i=S[Z];if(i&&i.length>=L){const M=[];for(const R of i)M.push([R[0]+W,R[1]]);S.push(M)}}return A?i.rings=S:i.paths=S,i}class C{constructor(i,M){this.extent=i,this.frameIds=M}}const z=(0,S.vt)();class T{constructor(){this._linesIn=[],this._linesOut=[]}cut(i,M){let R;if(this._xCut=M,i.rings)this._closed=!0,R=i.rings,this._minPts=4;else{if(!i.paths)return null;this._closed=!1,R=i.paths,this._minPts=2}for(const S of R){if(!S||S.length<this._minPts)continue;let i=!0;for(const M of S)i?(this.moveTo(M),i=!1):this.lineTo(M);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),R=[];for(const S of this._linesIn)S&&S.length>=this._minPts&&R.push(S);const A=-2*this._xCut;for(const S of this._linesOut)if(S&&S.length>=this._minPts){for(const i of S)i[0]+=A;R.push(S)}return this._closed?i.rings=R:i.paths=R,i}moveTo(i){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(i[0]),this._moveTo(i[0],i[1],this._prevSide),this._prevPt=i,this._firstPt=i}lineTo(i){const M=this._side(i[0]);if(M*this._prevSide==-1){const R=this._intersect(this._prevPt,i);this._lineTo(this._xCut,R,0),this._prevSide=0,this._lineTo(i[0],i[1],M)}else this._lineTo(i[0],i[1],M);this._prevSide=M,this._prevPt=i}close(){const i=this._firstPt,M=this._prevPt;i[0]===M[0]&&i[1]===M[1]||this.lineTo(i),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(i,M,R){this._closed?(this._lineIn.push([R<=0?i:this._xCut,M]),this._lineOut.push([R>=0?i:this._xCut,M])):(R<=0&&this._lineIn.push([i,M]),R>=0&&this._lineOut.push([i,M]))}_lineTo(i,M,R){this._closed?(this._addPolyVertex(this._lineIn,R<=0?i:this._xCut,M),this._addPolyVertex(this._lineOut,R>=0?i:this._xCut,M)):R<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([i,M])):R>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([i,M])):this._prevSide<0?(this._lineIn.push([i,M]),this._lineOut.push([i,M])):this._prevSide>0&&(this._lineOut.push([i,M]),this._lineIn.push([i,M]))}_addPolyVertex(i,M,R){const A=i.length;A>1&&i[A-1][0]===M&&i[A-2][0]===M?i[A-1][1]=R:i.push([M,R])}_checkClosingPt(i){const M=i.length;M>3&&i[0][0]===this._xCut&&i[M-2][0]===this._xCut&&i[1][0]===this._xCut&&(i[0][1]=i[M-2][1],i.pop())}_side(i){return i<this._xCut?-1:i>this._xCut?1:0}_intersect(i,M){const R=(this._xCut-i[0])/(M[0]-i[0]);return i[1]+R*(M[1]-i[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},22662:(i,M,R)=>{R.r(M),R.d(M,{default:()=>yt});var A=R(80671),S=R(39652),L=R(4180),Z=R(89412),X=R(13132),V=R(81618),W=R(57453),z=R(91779),N=(R(76761),R(50886),R(59299)),$=R(68682),G=R(51715),U=R(57532),K=R(78658),J=R(53200),Q=R(1921),ee=R(32465),te=R(38362),ne=R(53705),ie=R(49178),oe=R(4270),se=R(51523),re=R(16904),le=R(3616),ae=R(18763),he=R(83375),ce=R(74467),ue=R(62555),de=R(68052),pe=R(66912),me=R(37131),fe=R(52273),_e=R(57264),xe=R(48343),ye=R(54208),ge=R(98664),ve=R(88706);let we=class extends ve.P{projectOrWarn(i,M){if(null==i)return i;const{geometry:R,pending:A}=(0,ye.projectOrLoad)(i,M);return A?null:A||R?R:(Z.A.getLogger(this).warn("geometry could not be projected to the spatial reference",{georeference:this,geometry:i,sourceSpatialReference:i.spatialReference,targetSpatialReference:M}),null)}};we=(0,A._)([(0,$.$)("esri.layers.support.GeoreferenceBase")],we);const Me=we,Pe=(0,pe.vt)(),Ie=(0,fe.vt)();let Oe=class extends ae.A{constructor(){super(...arguments),this.sourcePoint=null,this.mapPoint=null}};(0,A._)([(0,W.MZ)()],Oe.prototype,"sourcePoint",void 0),(0,A._)([(0,W.MZ)({type:_e.A})],Oe.prototype,"mapPoint",void 0),Oe=(0,A._)([(0,$.$)("esri.layers.support.ControlPoint")],Oe);let be=class extends((0,he.Te)(Me)){constructor(i){super(i),this.controlPoints=null,this.height=0,this.type="control-points",this.width=0}readControlPoints(i,M){const R=ge.A.fromJSON(M.spatialReference),A=(0,pe.fA)(...M.coefficients,1);return i.map((i=>((0,me.hZ)(Ie,i.x,i.y),(0,ce.W)(Ie,Ie,A),{sourcePoint:i,mapPoint:new _e.A({x:Ie[0],y:Ie[1],spatialReference:R})})))}writeControlPoints(i,M,R,A){if(null!=this.transform)null!=i&&O(i[0])&&(M.controlPoints=i.map((i=>{const M=i.sourcePoint;return{x:M.x,y:M.y}})),M.spatialReference=i[0].mapPoint.spatialReference.toJSON(),M.coefficients=this.transform.slice(0,8));else{const i=new L.A("web-document-write:invalid-georeference","Invalid 'controlPoints', 'width', 'height' configuration.",{layer:null===A||void 0===A?void 0:A.layer,georeference:this});null!==A&&void 0!==A&&A.messages?A.messages.push(i):Z.A.getLogger(this).error(i.name,i.message)}}get coords(){if(null==this.controlPoints)return null;const i=this._updateTransform(Pe);if(null==i||!O(this.controlPoints[0]))return null;const M=this.controlPoints[0].mapPoint.spatialReference;return function H(i,M,R,A){const S=(0,fe.fA)(0,R),L=(0,fe.fA)(0,0),Z=(0,fe.fA)(M,0),X=(0,fe.fA)(M,R);return(0,ce.W)(S,S,i),(0,ce.W)(L,L,i),(0,ce.W)(Z,Z,i),(0,ce.W)(X,X,i),new xe.A({rings:[[S,L,Z,X,S]],spatialReference:A})}(i,this.width,this.height,M)}set coords(i){if(null==this.controlPoints||!O(this.controlPoints[0]))return;const M=this.controlPoints[0].mapPoint.spatialReference;if(null==(i=this.projectOrWarn(i,M)))return;const{width:R,height:A}=this,{rings:[[S,L,Z,X]]}=i,V={sourcePoint:(0,ue.tc)(0,A),mapPoint:new _e.A({x:S[0],y:S[1],spatialReference:M})},W={sourcePoint:(0,ue.tc)(0,0),mapPoint:new _e.A({x:L[0],y:L[1],spatialReference:M})},z={sourcePoint:(0,ue.tc)(R,0),mapPoint:new _e.A({x:Z[0],y:Z[1],spatialReference:M})},N={sourcePoint:(0,ue.tc)(R,A),mapPoint:new _e.A({x:X[0],y:X[1],spatialReference:M})};O(V)&&O(W)&&O(z)&&O(N)&&(E(Pe,V,W,z,N),this.controlPoints=this.controlPoints.map((i=>{let{sourcePoint:R}=i;return(0,me.hZ)(Ie,R.x,R.y),(0,ce.W)(Ie,Ie,Pe),{sourcePoint:R,mapPoint:new _e.A({x:Ie[0],y:Ie[1],spatialReference:M})}})))}get inverseTransform(){return null==this.transform?null:(0,de.B8)((0,pe.vt)(),this.transform)}get transform(){return this._updateTransform()}toMap(i){if(null==i||null==this.transform||null==this.controlPoints||!O(this.controlPoints[0]))return null;(0,me.hZ)(Ie,i.x,i.y);const M=this.controlPoints[0].mapPoint.spatialReference;return(0,ce.W)(Ie,Ie,this.transform),new _e.A({x:Ie[0],y:Ie[1],spatialReference:M})}toSource(i){if(null==i||null==this.inverseTransform||null==this.controlPoints||!O(this.controlPoints[0]))return null;const M=this.controlPoints[0].mapPoint.spatialReference;return i=i.normalize(),null==(i=(0,ye.projectOrLoad)(i,M).geometry)?null:((0,me.hZ)(Ie,i.x,i.y),(0,ce.W)(Ie,Ie,this.inverseTransform),(0,ue.tc)(Ie[0],Ie[1]))}toSourceNormalized(i){const M=this.toSource(i);return null!=M&&(M.x/=this.width,M.y/=this.height),M}_updateTransform(i){const{controlPoints:M,width:R,height:A}=this;if(!(null!=M&&R>0&&A>0))return null;const[S,L,Z,X]=M;if(!O(S))return null;const V=S.mapPoint.spatialReference,W=this._projectControlPoint(L,V),z=this._projectControlPoint(Z,V),N=this._projectControlPoint(X,V);if(!W.valid||!z.valid||!N.valid)return null;if(!O(W.controlPoint))return null;null==i&&(i=(0,pe.vt)());let $=null;return $=O(z.controlPoint)&&O(N.controlPoint)?E(i,S,W.controlPoint,z.controlPoint,N.controlPoint):O(z.controlPoint)?function B(i,M,R,A){return k(Re,Le,M),k(Ae,Ee,R),k(Be,Ze,A),(0,me.Cc)(Se,Re,Ae,.5),(0,me.e$)(Se,Be,Se,Math.PI),(0,me.Cc)(Te,Le,Ee,.5),(0,me.e$)(Te,Ze,Te,Math.PI),F(i,Re,Ae,Be,Se,Le,Ee,Ze,Te)}(i,S,W.controlPoint,z.controlPoint):function q(i,M,R){return k(Re,Le,M),k(Ae,Ee,R),(0,me.e$)(Be,Ae,Re,je),(0,me.e$)(Se,Re,Ae,je),(0,me.e$)(Ze,Ee,Le,-je),(0,me.e$)(Te,Le,Ee,-je),F(i,Re,Ae,Be,Se,Le,Ee,Ze,Te)}(i,S,W.controlPoint),$.every((i=>0===i))?null:$}_projectControlPoint(i,M){if(!O(i))return{valid:!0,controlPoint:i};const{sourcePoint:R,mapPoint:A}=i,{geometry:S,pending:L}=(0,ye.projectOrLoad)(A,M);return L?{valid:!1,controlPoint:null}:L||S?{valid:!0,controlPoint:{sourcePoint:R,mapPoint:S}}:(Z.A.getLogger(this).warn("map point could not be projected to the spatial reference",{georeference:this,controlPoint:i,sourceSpatialReference:A.spatialReference,targetSpatialReference:M}),{valid:!1,controlPoint:null})}};function O(i){return null!=(null===i||void 0===i?void 0:i.sourcePoint)&&null!=i.mapPoint}(0,A._)([(0,W.MZ)({type:[Oe],json:{write:{allowNull:!1,isRequired:!0}}})],be.prototype,"controlPoints",void 0),(0,A._)([(0,N.w)("controlPoints")],be.prototype,"readControlPoints",null),(0,A._)([(0,G.K)("controlPoints")],be.prototype,"writeControlPoints",null),(0,A._)([(0,W.MZ)()],be.prototype,"coords",null),(0,A._)([(0,W.MZ)({json:{write:!0}})],be.prototype,"height",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],be.prototype,"inverseTransform",null),(0,A._)([(0,W.MZ)({readOnly:!0})],be.prototype,"transform",null),(0,A._)([(0,W.MZ)({json:{write:!0}})],be.prototype,"width",void 0),be=(0,A._)([(0,$.$)("esri.layers.support.ControlPointsGeoreference")],be);const Re=(0,fe.vt)(),Ae=(0,fe.vt)(),Be=(0,fe.vt)(),Se=(0,fe.vt)(),Le=(0,fe.vt)(),Ee=(0,fe.vt)(),Ze=(0,fe.vt)(),Te=(0,fe.vt)(),je=Math.PI/2;function k(i,M,R){(0,me.hZ)(i,R.sourcePoint.x,R.sourcePoint.y),(0,me.hZ)(M,R.mapPoint.x,R.mapPoint.y)}function E(i,M,R,A,S){return k(Re,Le,M),k(Ae,Ee,R),k(Be,Ze,A),k(Se,Te,S),F(i,Re,Ae,Be,Se,Le,Ee,Ze,Te)}const Ce=new Array(8).fill(0),Xe=new Array(8).fill(0);function D(i,M,R,A,S){return i[0]=M[0],i[1]=M[1],i[2]=R[0],i[3]=R[1],i[4]=A[0],i[5]=A[1],i[6]=S[0],i[7]=S[1],i}function F(i,M,R,A,S,L,Z,X,V){return(0,ce.O)(i,D(Ce,M,R,A,S),D(Xe,L,Z,X,V))}const Ye=be,He=(0,fe.vt)();let Ve=class extends Me{constructor(i){super(i),this.bottomLeft=null,this.bottomRight=null,this.topLeft=null,this.topRight=null,this.type="corners"}get coords(){let{topLeft:i,topRight:M,bottomLeft:R,bottomRight:A}=this;if(null==i||null==M||null==R||null==A)return null;const S=i.spatialReference;return M=this.projectOrWarn(M,S),R=this.projectOrWarn(R,S),A=this.projectOrWarn(A,S),null==M||null==R||null==A?null:new xe.A({rings:[[[R.x,R.y],[i.x,i.y],[M.x,M.y],[A.x,A.y],[R.x,R.y]]],spatialReference:S})}set coords(i){const{topLeft:M}=this;if(null==M)return;const R=M.spatialReference;if(null==(i=this.projectOrWarn(i,R)))return;const{rings:[[A,S,L,Z]]}=i;this.bottomLeft=new _e.A({x:A[0],y:A[1],spatialReference:R}),this.topLeft=new _e.A({x:S[0],y:S[1],spatialReference:R}),this.topRight=new _e.A({x:L[0],y:L[1],spatialReference:R}),this.bottomRight=new _e.A({x:Z[0],y:Z[1],spatialReference:R})}toSourceNormalized(i){const{topLeft:M,topRight:R,bottomRight:A,bottomLeft:S}=this;if(null==i||null==M||null==R||null==A||null==S)return null;const L=M.spatialReference;i=i.normalize();const Z=(0,ye.projectOrLoad)(i,L).geometry;if(null==Z)return null;(0,me.hZ)(He,Z.x,Z.y);const X=(0,ce.O)((0,pe.vt)(),[M.x,M.y,S.x,S.y,R.x,R.y,A.x,A.y],[0,0,0,1,1,0,1,1]);return(0,ce.W)(He,He,X),(0,ue.tc)(He[0],He[1])}};(0,A._)([(0,W.MZ)()],Ve.prototype,"coords",null),(0,A._)([(0,W.MZ)({type:_e.A})],Ve.prototype,"bottomLeft",void 0),(0,A._)([(0,W.MZ)({type:_e.A})],Ve.prototype,"bottomRight",void 0),(0,A._)([(0,W.MZ)({type:_e.A})],Ve.prototype,"topLeft",void 0),(0,A._)([(0,W.MZ)({type:_e.A})],Ve.prototype,"topRight",void 0),Ve=(0,A._)([(0,$.$)("esri.layers.support.CornersGeoreference")],Ve);const We=Ve;var ke=R(48237),ze=R(43438),Ne=R(84661);let Fe=class extends Me{constructor(i){super(i),this.extent=null,this.rotation=0,this.type="extent-and-rotation"}get coords(){if(null==this.extent)return null;const{xmin:i,ymin:M,xmax:R,ymax:A,spatialReference:S}=this.extent;let L;if(this.rotation){const{x:S,y:Z}=this.extent.center,X=x(S,Z,this.rotation);L=[X(i,M),X(i,A),X(R,A),X(R,M)],L.push(L[0])}else L=[[i,M],[i,A],[R,A],[R,M],[i,M]];return new xe.A({rings:[L],spatialReference:S})}set coords(i){var M;if(null==i||null==this.extent)return;const R=this.extent.spatialReference;if(null==(null===(M=i=this.projectOrWarn(i,R))||void 0===M?void 0:M.extent))return;const{rings:[[A,S,L]],extent:{center:{x:Z,y:X}}}=i,V=(0,ke.KJ)(Math.PI/2-Math.atan2(S[1]-A[1],S[0]-A[0])),W=x(Z,X,-V),[z,N]=W(A[0],A[1]),[$,G]=W(L[0],L[1]);this.extent=new Ne.A({xmin:z,ymin:N,xmax:$,ymax:G,spatialReference:R}),this.rotation=V}toSourceNormalized(i){const{extent:M,rotation:R}=this;if(null==i||null==M)return null;const{xmin:A,ymin:S,xmax:L,ymax:Z,center:X,spatialReference:V}=M;i=i.normalize();const W=(0,ye.projectOrLoad)(i,V).geometry;if(null==W)return null;let z=W.x,N=W.y;return R&&([z,N]=x(X.x,X.y,-R)(z,N)),(0,ue.tc)((0,ke.hs)(z,A,L,0,1),(0,ke.hs)(N,Z,S,0,1))}};function x(i,M,R){const A=(0,ze.DF)(R),S=Math.cos(A),L=Math.sin(A);return(R,A)=>[S*(R-i)+L*(A-M)+i,S*(A-M)-L*(R-i)+M]}(0,A._)([(0,W.MZ)()],Fe.prototype,"coords",null),(0,A._)([(0,W.MZ)({type:Ne.A})],Fe.prototype,"extent",void 0),(0,A._)([(0,W.MZ)({type:Number})],Fe.prototype,"rotation",void 0),Fe=(0,A._)([(0,$.$)("esri.layers.support.ExtentAndRotationGeoreference")],Fe);const $e={key:"type",base:Me,typeMap:{"control-points":Ye,corners:We,"extent-and-rotation":Fe}},De={key:"type",base:Me,typeMap:{"control-points":Ye}};let Ge=class extends((0,re.PH)((0,X.P)(le.A))){constructor(i){super(i),this.georeference=null,this.opacity=1}readGeoreference(i){return Ye.fromJSON(i)}get contentWidth(){return 0}get contentHeight(){return 0}toSource(i){const{georeference:M,contentWidth:R,contentHeight:A}=this;if(null==i||null==M||0===R||0===A)return null;const S=M.toSourceNormalized(i);return null==S?null:(S.x*=R,S.y*=A,S)}};(0,A._)([(0,W.MZ)({types:$e,json:{write:!0,types:De}})],Ge.prototype,"georeference",void 0),(0,A._)([(0,N.w)("georeference")],Ge.prototype,"readGeoreference",null),(0,A._)([(0,W.MZ)({json:{read:!1,write:!1}})],Ge.prototype,"opacity",void 0),Ge=(0,A._)([(0,$.$)("esri.layers.support.MediaElementBase")],Ge);const Ue=Ge;R(30174);var Ke=R(78395);function mediaUtils_l(i,M){const R=(0,U.aB)(M);return function m(i){return"media"===(null===i||void 0===i?void 0:i.type)}(i)&&!!i.portalItem&&null!=R&&R>U.Gr.PORTAL_ITEM}var Je=R(28330),qe=R(85173);let Qe=class extends Ue{constructor(i){super(i),this.animationOptions=null,this.content=null,this.image=null,this.type="image",this.image=null}load(){const i=this.image;if("string"==typeof i){const M=(0,ie.M5)(i).then((i=>{this._set("content",i)}));this.addResolvingPromise(M)}else if(i instanceof HTMLImageElement){const M=i.decode().then((()=>{this._set("content",i)}));this.addResolvingPromise(M)}else i?this._set("content",i):this.addResolvingPromise(Promise.reject(new L.A("image-element:invalid-image-type","Invalid image type",{image:i})));return Promise.resolve(this)}get contentWidth(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalWidth:this.content.width}get contentHeight(){return null==this.content?0:this.content instanceof HTMLImageElement?this.content.naturalHeight:this.content.height}readImage(i,M,R){return(0,qe.f)(M.url,R)}writeImage(i,M,R,A){if(null==i)return;const S=null===A||void 0===A?void 0:A.portalItem,L=null===A||void 0===A?void 0:A.resources;if(!S||!L)return void("string"==typeof i&&(M[R]=(0,qe.t)(i,A)));const Z=function ImageElement_E(i){return"string"==typeof i&&!(0,oe.DB)(i)&&!(0,oe.w8)(i)}(i)?i:null;if(Z){if(null==(0,qe.i)(Z))return void(M[R]=Z);const i=(0,qe.t)(Z,{...A,verifyItemRelativeUrls:null!==A&&void 0!==A&&A.verifyItemRelativeUrls?{writtenUrls:A.verifyItemRelativeUrls.writtenUrls,rootPath:void 0}:void 0},qe.M.NO);if(S&&i&&!(0,oe.oP)(i))return L.toKeep.push({resource:S.resourceFromPath(i),compress:!1}),void(M[R]=i)}M[R]="<pending>",L.pendingOperations.push(async function ImageElement_H(i){if("string"==typeof i)return(0,oe.DB)(i)?(0,oe.N9)(i):(await(0,ne.A)(i,{responseType:"blob"})).data;return new Promise((M=>function ImageElement_T(i){if(i instanceof HTMLCanvasElement)return i;const M=i instanceof HTMLImageElement?i.naturalWidth:i.width,R=i instanceof HTMLImageElement?i.naturalHeight:i.height,A=document.createElement("canvas"),S=A.getContext("2d");return A.width=M,A.height=R,i instanceof HTMLImageElement?S.drawImage(i,0,0,i.width,i.height):i instanceof ImageData&&S.putImageData(i,0,0),A}(i).toBlob(M)))}(i).then((i=>{const A=function ImageElement_U(i,M){const R=(0,se.lk)(),A="".concat((0,oe.fj)("media",R),".").concat((0,Je.n)({type:"blob",blob:i}));return M.resourceFromPath(A)}(i,S);M[R]=A.itemRelativeUrl,L.toAdd.push({resource:A,content:{type:"blob",blob:i},compress:!1,finish:i=>{this.image=i.url}})})))}write(i,M){const R=super.write(i,M);return"mediaType"in R&&!R.url&&delete R.mediaType,R}};(0,A._)([(0,W.MZ)()],Qe.prototype,"animationOptions",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],Qe.prototype,"content",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],Qe.prototype,"contentWidth",null),(0,A._)([(0,W.MZ)({readOnly:!0})],Qe.prototype,"contentHeight",null),(0,A._)([(0,W.MZ)({json:{name:"url",type:String,write:{overridePolicy:(i,M,R)=>({enabled:!mediaUtils_l(null===R||void 0===R?void 0:R.layer,null===R||void 0===R?void 0:R.origin)})}}})],Qe.prototype,"image",void 0),(0,A._)([(0,N.w)("image",["url"])],Qe.prototype,"readImage",null),(0,A._)([(0,G.K)("image")],Qe.prototype,"writeImage",null),(0,A._)([(0,W.MZ)({readOnly:!0,json:{read:!1,write:{target:"mediaType",ignoreOrigin:!0}}})],Qe.prototype,"type",void 0),Qe=(0,A._)([(0,$.$)("esri.layers.support.ImageElement")],Qe);const et=Qe;var tt=R(86479),nt=R(73067),it=R(5203),ot=R(63390),st=R(88965),rt=R(5522),lt=R(61816),at=R(82466),ht=R(1045);let ct=class extends Ue{constructor(i){super(i),this.autoplay=!0,this.content=null,this.type="video"}load(){const i=this.video;if("string"==typeof i){const M=document.createElement("video");M.src=i,M.crossOrigin="anonymous",M.autoplay=!0,M.muted=!0,M.loop=!0,this.addResolvingPromise(this._loadVideo(M).then((()=>{this._set("content",M)})))}else i instanceof HTMLVideoElement?this.addResolvingPromise(this._loadVideo(i).then((()=>{this._set("content",i)}))):this.addResolvingPromise(Promise.reject(new L.A("video-element:invalid-video-type","Invalid video type",{video:i})));return Promise.resolve(this)}get contentWidth(){var i,M;return null!==(i=null===(M=this.content)||void 0===M?void 0:M.videoWidth)&&void 0!==i?i:0}get contentHeight(){var i,M;return null!==(i=null===(M=this.content)||void 0===M?void 0:M.videoHeight)&&void 0!==i?i:0}set video(i){"not-loaded"===this.loadStatus?this._set("video",i):Z.A.getLogger(this).error("#video","video cannot be changed after the element is loaded.")}_loadVideo(i){return new Promise(((M,R)=>{var A;const S=(0,ht.Oo)(i,"canplay",(()=>{this.removeHandles("canplay"),this.autoplay?i.play().then(M,R):M()}));this.addHandles(S,"canplay"),"anonymous"!==i.crossOrigin&&(i.crossOrigin="anonymous",(null===(A=i.src)||void 0===A?void 0:A.includes("blob:"))||(i.src=i.src))}))}};(0,A._)([(0,W.MZ)()],ct.prototype,"autoplay",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],ct.prototype,"content",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],ct.prototype,"contentWidth",null),(0,A._)([(0,W.MZ)({readOnly:!0})],ct.prototype,"contentHeight",null),(0,A._)([(0,W.MZ)()],ct.prototype,"video",null),ct=(0,A._)([(0,$.$)("esri.layers.support.VideoElement")],ct);const ut=ct,dt={key:"type",defaultKeyValue:"image",base:Ue,typeMap:{image:et,video:ut}},pt=S.A.ofType(dt);let mt=class extends(le.A.LoadableMixin((0,it.g)(nt.A.EventedAccessor))){constructor(i){super(i),this._index=new lt.F,this._elementViewsMap=new Map,this._elementsIndexes=new Map,this._elementsChangedHandler=i=>{for(const R of i.removed){const i=this._elementViewsMap.get(R);this._elementViewsMap.delete(R),this._index.delete(i),this.removeHandles(i),i.destroy(),this.notifyChange("fullExtent")}const{spatialReference:M}=this;for(const R of i.added){if(this._elementViewsMap.get(R))continue;const i=new at._({spatialReference:M,element:R});this._elementViewsMap.set(R,i);const A=(0,ot.wB)((()=>i.coords),(()=>this._updateIndexForElement(i,!1)));this._updateIndexForElement(i,!0),this.addHandles(A,i)}this._elementsIndexes.clear(),this.elements.forEach(((i,M)=>this._elementsIndexes.set(i,M))),this.emit("refresh")},this.elements=new pt}async load(i){if((0,V.Te)(i),!this.spatialReference){const i=this.elements.find((i=>{var M;return null!=(null===(M=i.georeference)||void 0===M?void 0:M.coords)}));this._set("spatialReference",i?i.georeference.coords.spatialReference:ge.A.WGS84)}return this._elementsChangedHandler({added:this.elements.items,removed:[]}),this.addHandles(this.elements.on("change",this._elementsChangedHandler)),this}destroy(){this._index.clear(),this._elementViewsMap.clear(),this._elementsIndexes.clear()}set elements(i){this._set("elements",(0,tt.V)(i,this._get("elements"),pt))}get fullExtent(){if("not-loaded"===this.loadStatus)return null;const i=this._index.fullBounds;return null==i?null:new Ne.A({xmin:i[0],ymin:i[1],xmax:i[2],ymax:i[3],spatialReference:this.spatialReference})}set spatialReference(i){"not-loaded"===this.loadStatus?this._set("spatialReference",i):Z.A.getLogger(this).error("#spatialReference","spatialReference cannot be changed after the source is loaded.")}async queryElements(i,M){await this.load(),await(0,ye.initializeProjection)(i.spatialReference,this.spatialReference,null,M);const R=(0,Ke.aI)(i.spatialReference,this.spatialReference)?i:(0,ye.project)(i,this.spatialReference);if(!R)return[];const A=R.normalize(),S=[];for(const L of A)this._index.forEachInBounds((0,st.VY)(L),(i=>{let{normalizedCoords:M,element:R}=i;null!=M&&(0,rt.fA)(L,M)&&S.push(R)}));return S.sort(((i,M)=>this._elementsIndexes.get(i)-this._elementsIndexes.get(M))),S}_updateIndexForElement(i,M){const R=i.normalizedBounds,A=this._index.has(i),S=null!=R;this._index.delete(i),S&&this._index.set(i,R),this.notifyChange("fullExtent"),M||(A!==S?this.emit("refresh"):this.emit("change",{element:i.element}))}};(0,A._)([(0,W.MZ)()],mt.prototype,"elements",null),(0,A._)([(0,W.MZ)({readOnly:!0})],mt.prototype,"fullExtent",null),(0,A._)([(0,W.MZ)()],mt.prototype,"spatialReference",null),mt=(0,A._)([(0,$.$)("esri.layers.support.LocalMediaElementSource")],mt);const ft=mt;var _t=R(96253);function MediaLayer_L(i){return"object"==typeof i&&null!=i&&"type"in i}function MediaLayer_O(i){return MediaLayer_L(i)&&"image"===i.type}let xt=class extends((0,J.d)((0,te.j)((0,Q.q)((0,ee.A)((0,X.P)(K.A)))))){constructor(i){super(i),this.effectiveSource=null,this.georeference=null,this.copyright=null,this.operationalLayerType="MediaLayer",this.spatialReference=null,this.type="media",this._debouncedSaveOperations=(0,V.sg)((async(i,M,A)=>{const{save:S,saveAs:L}=await R.e(4767).then(R.bind(R,24767));switch(i){case _t.X.SAVE:return S(this,M);case _t.X.SAVE_AS:return L(this,A,M)}})),this.source=new ft}load(i){return this.addResolvingPromise(this._doLoad(i)),Promise.resolve(this)}async _doLoad(i){await this.loadFromPortal({supportedTypes:["Media Layer"]},i);let M=this.source;if(!M)throw new L.A("media-layer:source-missing","Set 'MediaLayer.source' before loading the layer.");const R=this._getSourceOverride(M,this.georeference);R&&(this.setAtOrigin("source",R,"web-map"),M=R);const A=MediaLayer_L(M)?new ft({elements:new S.A([M])}):M;this._set("effectiveSource",A),this.spatialReference&&(A.spatialReference=this.spatialReference),await A.load(i),this.spatialReference=A.spatialReference}destroy(){var i,M;null!==(i=this.effectiveSource)&&void 0!==i&&i.destroy(),null===(M=this.source)||void 0===M||M.destroy()}readGeoreference(i,M){return i&&"itemId"in M&&M.itemId?i:void 0}get fullExtent(){return this.loaded?this.effectiveSource.fullExtent:null}set source(i){"loaded"!==this.loadStatus&&"failed"!==this.loadStatus?this._set("source",i):Z.A.getLogger(this).error("#source","source cannot be changed after the layer is loaded.")}castSource(i){return i?Array.isArray(i)?new ft({elements:new S.A(i)}):i instanceof S.A?new ft({elements:i}):i:null}readSource(i,M,R){if("itemId"in M&&M.itemId)return;const A=this._createSource(M);return null!==A&&void 0!==A&&A.read(M,R),A}writeSource(i,M,R,A){var S;MediaLayer_O(i)?i.write(M,A):(null===A||void 0===A?void 0:A.messages)&&(null===A||void 0===A||null===(S=A.messages)||void 0===S||S.push(new L.A("media-layer:unsupported-source","source must be an 'ImageElement'")))}async save(i){return this._debouncedSaveOperations(_t.X.SAVE,i)}async saveAs(i,M){return this._debouncedSaveOperations(_t.X.SAVE_AS,M,i)}_createSource(i){if("mediaType"in i)switch(i.mediaType){case"image":return new et;case"video":return new ut}return null}_getSourceOverride(i,M){if(MediaLayer_L(i)&&this.originIdOf("source")===U.Gr.PORTAL_ITEM&&M&&this.originIdOf("georeference")===U.Gr.WEB_MAP){const R=i.toJSON(),A=this._createSource(R);return A.read({...R},{origin:"portal-item"}),A.read({georeference:M},{origin:"web-map"}),A}return null}};(0,A._)([(0,W.MZ)({readOnly:!0})],xt.prototype,"effectiveSource",void 0),(0,A._)([(0,W.MZ)({readOnly:!0,json:{read:!1,write:!1,origins:{"web-map":{read:!0,write:!1}}}})],xt.prototype,"georeference",void 0),(0,A._)([(0,N.w)("web-map","georeference")],xt.prototype,"readGeoreference",null),(0,A._)([(0,W.MZ)({type:String})],xt.prototype,"copyright",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],xt.prototype,"fullExtent",null),(0,A._)([(0,W.MZ)({type:["MediaLayer"]})],xt.prototype,"operationalLayerType",void 0),(0,A._)([(0,W.MZ)({type:["show","hide"]})],xt.prototype,"listMode",void 0),(0,A._)([(0,W.MZ)({nonNullable:!0,json:{write:{enabled:!0,allowNull:!1,overridePolicy(i,M,R){return{enabled:!0,allowNull:!1,ignoreOrigin:mediaUtils_l(this,null===R||void 0===R?void 0:R.origin)&&MediaLayer_O(i)&&!!i.georeference&&i.originIdOf("georeference")>U.Gr.PORTAL_ITEM}}}}})],xt.prototype,"source",null),(0,A._)([(0,z.w)("source")],xt.prototype,"castSource",null),(0,A._)([(0,N.w)("source",["url"])],xt.prototype,"readSource",null),(0,A._)([(0,G.K)("source")],xt.prototype,"writeSource",null),(0,A._)([(0,W.MZ)()],xt.prototype,"spatialReference",void 0),(0,A._)([(0,W.MZ)({readOnly:!0})],xt.prototype,"type",void 0),xt=(0,A._)([(0,$.$)("esri.layers.MediaLayer")],xt);const yt=xt},61816:(i,M,R)=>{R.d(M,{F:()=>o});var A=R(50886),S=R(30925),L=R(88965);const Z={minX:0,minY:0,maxX:0,maxY:0};function e(i,M,R){(function t(i){Z.minX=i[0],Z.minY=i[1],Z.maxX=i[2],Z.maxY=i[3]})(M),i.search(Z,R)}class o{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new S.w(9,(0,A.A)("esri-csp-restrictions")?i=>({minX:i[0],minY:i[1],maxX:i[2],maxY:i[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const i=new Array(this._idByBounds.size);let M=0;this._idByBounds.forEach(((R,A)=>{i[M++]=A})),this._indexInvalid=!1,this._index.clear(),this._index.load(i)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter((i=>this._idByBounds.has(i)))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const i=(0,L.Ie)();for(const M of this._boundsById.values())M&&(i[0]=Math.min(M[0],i[0]),i[1]=Math.min(M[1],i[1]),i[2]=Math.max(M[2],i[2]),i[3]=Math.max(M[3],i[3]));return i}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(i){const M=this._boundsById.get(i);this._boundsById.delete(i),M&&(this._idByBounds.delete(M),this._indexInvalid||this._index.remove(M))}forEachInBounds(i,M){this._loadIndex(),e(this._index,i,(i=>M(this._idByBounds.get(i))))}get(i){return this._boundsById.get(i)}has(i){return this._boundsById.has(i)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(i,M){if(!this._indexInvalid){const M=this._boundsById.get(i);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(i,M),M&&(this._idByBounds.set(M,i),this._indexInvalid||(this._boundsToLoad.push(M),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},82466:(i,M,R)=>{R.d(M,{_:()=>N});var A=R(80671),S=R(18763),L=R(57453),Z=(R(50886),R(89412),R(76761),R(68682)),X=R(48343),V=R(54208),W=R(88965),z=R(12198);let N=class extends S.A{constructor(i){super(i)}get bounds(){const i=this.coords;return null==(null===i||void 0===i?void 0:i.extent)?null:(0,W.VY)(i.extent)}get coords(){var i;const M=null===(i=this.element.georeference)||void 0===i?void 0:i.coords;return(0,V.projectOrLoad)(M,this.spatialReference).geometry}get normalizedCoords(){return X.A.fromJSON((0,z.jZ)(this.coords))}get normalizedBounds(){const i=null!=this.normalizedCoords?this.normalizedCoords.extent:null;return null!=i?(0,W.VY)(i):null}};(0,A._)([(0,L.MZ)()],N.prototype,"spatialReference",void 0),(0,A._)([(0,L.MZ)()],N.prototype,"element",void 0),(0,A._)([(0,L.MZ)()],N.prototype,"bounds",null),(0,A._)([(0,L.MZ)()],N.prototype,"coords",null),(0,A._)([(0,L.MZ)()],N.prototype,"normalizedCoords",null),(0,A._)([(0,L.MZ)()],N.prototype,"normalizedBounds",null),N=(0,A._)([(0,Z.$)("esri.layers.support.MediaElementView")],N)},28330:(i,M,R)=>{R.d(M,{n:()=>p});var A=R(4270);function p(i){return S[function t(i){return"json"===i.type?"application/json":"blob"===i.type?i.blob.type:function n(i){const M=(0,A.Zo)(i);return X[M]||L}(i.url)}(i)]||Z}const S={},L="text/plain",Z=S[L],X={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip","bin.gz":"application/octet-stream"};for(const V in X)S[X[V]]=V},96253:(i,M,R)=>{var A;R.d(M,{X:()=>A}),function(i){i[i.SAVE=0]="SAVE",i[i.SAVE_AS=1]="SAVE_AS"}(A||(A={}))}}]);
//# sourceMappingURL=2662.b1f3b07b.chunk.js.map